ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"icmu.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SPI_RW,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	SPI_RW:
  25              	.LFB339:
  26              		.file 1 "Src/icmu.c"
   1:Src/icmu.c    **** #include "icmu.h"
   2:Src/icmu.c    **** 
   3:Src/icmu.c    **** s32 MUValue = 0;
   4:Src/icmu.c    **** s32 test_cnt = 0;
   5:Src/icmu.c    **** uint8_t buf[9] = {0, 0, 0};
   6:Src/icmu.c    **** u8 spi1_send[4] = {0xA6,0x00,0x00,0x00};
   7:Src/icmu.c    **** s16 Ang_reg[1024] = {0};
   8:Src/icmu.c    **** s16 Ang_reg_Index = 0;
   9:Src/icmu.c    **** s16 Ang_reg_Index_Last = 0;
  10:Src/icmu.c    **** s16 Ang_reg_Sum = 0;
  11:Src/icmu.c    **** s16 Ang_reg_Count = 0;
  12:Src/icmu.c    **** s16 MECode_offset_ICHaus = 0;
  13:Src/icmu.c    **** uint8_t spi1_reg_buf[4] = {0};
  14:Src/icmu.c    **** volatile uint8_t spi1_reg[4] = {0};
  15:Src/icmu.c    **** volatile s32 *p_MU_Value = (s32*)(&spi1_reg[0]);
  16:Src/icmu.c    **** volatile s32 MU_Value = 0,MU_Value_last = 0;
  17:Src/icmu.c    **** volatile s32 Speed_T = 0;
  18:Src/icmu.c    **** volatile s32 Speed_DltAng_pls = 0;
  19:Src/icmu.c    **** volatile s32 MU_Vlaue_last = 0;
  20:Src/icmu.c    **** volatile u8 Flag_MU_read = 0;
  21:Src/icmu.c    **** 
  22:Src/icmu.c    **** SPI_HandleTypeDef hspi1;
  23:Src/icmu.c    **** DMA_HandleTypeDef hdma_spi1_rx;
  24:Src/icmu.c    **** DMA_HandleTypeDef hdma_spi1_tx;
  25:Src/icmu.c    **** 
  26:Src/icmu.c    **** 
  27:Src/icmu.c    **** static int Flag_error_read_eeprom = 0;
  28:Src/icmu.c    **** 
  29:Src/icmu.c    **** 
  30:Src/icmu.c    **** 
  31:Src/icmu.c    **** static void delay_clk(void)
  32:Src/icmu.c    **** {
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 2


  33:Src/icmu.c    ****   uint16_t i = 1000;
  34:Src/icmu.c    ****   while(i--)
  35:Src/icmu.c    ****     __nop();
  36:Src/icmu.c    **** }
  37:Src/icmu.c    **** 
  38:Src/icmu.c    **** 
  39:Src/icmu.c    **** 
  40:Src/icmu.c    **** 
  41:Src/icmu.c    **** 
  42:Src/icmu.c    ****  void MX_SPI1_Init(void)
  43:Src/icmu.c    **** {
  44:Src/icmu.c    **** 
  45:Src/icmu.c    ****   /* USER CODE BEGIN SPI1_Init 0 */
  46:Src/icmu.c    **** 
  47:Src/icmu.c    ****   /* USER CODE END SPI1_Init 0 */
  48:Src/icmu.c    **** 
  49:Src/icmu.c    ****   /* USER CODE BEGIN SPI1_Init 1 */
  50:Src/icmu.c    **** 
  51:Src/icmu.c    ****   /* USER CODE END SPI1_Init 1 */
  52:Src/icmu.c    ****   /* SPI1 parameter configuration*/
  53:Src/icmu.c    ****   hspi1.Instance = SPI1;
  54:Src/icmu.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  55:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  56:Src/icmu.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  57:Src/icmu.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
  58:Src/icmu.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
  59:Src/icmu.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
  60:Src/icmu.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128;
  61:Src/icmu.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  62:Src/icmu.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
  63:Src/icmu.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  64:Src/icmu.c    ****   hspi1.Init.CRCPolynomial = 7;
  65:Src/icmu.c    ****   hspi1.Init.CRCLength = SPI_CRC_LENGTH_DATASIZE;
  66:Src/icmu.c    ****   hspi1.Init.NSSPMode = SPI_NSS_PULSE_DISABLE;
  67:Src/icmu.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
  68:Src/icmu.c    ****   {
  69:Src/icmu.c    ****     Error_Handler();
  70:Src/icmu.c    ****   }
  71:Src/icmu.c    ****   /* USER CODE BEGIN SPI1_Init 2 */
  72:Src/icmu.c    **** 
  73:Src/icmu.c    ****   /* USER CODE END SPI1_Init 2 */
  74:Src/icmu.c    **** 
  75:Src/icmu.c    **** 	HAL_SPI_TransmitReceive_DMA(&hspi1, &spi1_send[0], &spi1_reg_buf[0], 4);
  76:Src/icmu.c    **** }
  77:Src/icmu.c    **** 
  78:Src/icmu.c    **** 
  79:Src/icmu.c    **** 
  80:Src/icmu.c    **** 
  81:Src/icmu.c    **** #if 1
  82:Src/icmu.c    **** void SPI1_Init(void)
  83:Src/icmu.c    **** {
  84:Src/icmu.c    ****    /* USER CODE BEGIN SPI1_Init 0 */
  85:Src/icmu.c    **** 
  86:Src/icmu.c    ****   /* USER CODE END SPI1_Init 0 */
  87:Src/icmu.c    **** 
  88:Src/icmu.c    ****   /* USER CODE BEGIN SPI1_Init 1 */
  89:Src/icmu.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 3


  90:Src/icmu.c    ****   /* USER CODE END SPI1_Init 1 */
  91:Src/icmu.c    ****   /* SPI1 parameter configuration*/
  92:Src/icmu.c    ****   hspi1.Instance = SPI1;
  93:Src/icmu.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
  94:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  95:Src/icmu.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  96:Src/icmu.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
  97:Src/icmu.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
  98:Src/icmu.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
  99:Src/icmu.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128;
 100:Src/icmu.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 101:Src/icmu.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 102:Src/icmu.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 103:Src/icmu.c    ****   hspi1.Init.CRCPolynomial = 7;
 104:Src/icmu.c    ****   hspi1.Init.CRCLength = SPI_CRC_LENGTH_DATASIZE;
 105:Src/icmu.c    ****   hspi1.Init.NSSPMode = SPI_NSS_PULSE_DISABLE;
 106:Src/icmu.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 107:Src/icmu.c    ****   {
 108:Src/icmu.c    ****     Error_Handler();
 109:Src/icmu.c    ****   }
 110:Src/icmu.c    **** 	SPI1->DR;
 111:Src/icmu.c    ****   SET_BIT(SPI1->CR2, SPI_RXFIFO_THRESHOLD);
 112:Src/icmu.c    ****   __HAL_SPI_ENABLE(&hspi1);
 113:Src/icmu.c    **** }
 114:Src/icmu.c    **** 
 115:Src/icmu.c    **** 
 116:Src/icmu.c    **** 
 117:Src/icmu.c    **** 
 118:Src/icmu.c    **** 
 119:Src/icmu.c    **** 
 120:Src/icmu.c    **** void SPI_I2S_SendData8(SPI_TypeDef* SPIx, uint8_t Data)
 121:Src/icmu.c    **** {
 122:Src/icmu.c    ****   uint32_t spixbase = 0x00;
 123:Src/icmu.c    **** 
 124:Src/icmu.c    ****   /* Check the parameters */
 125:Src/icmu.c    ****   assert_param(IS_SPI_ALL_PERIPH(SPIx));
 126:Src/icmu.c    **** 
 127:Src/icmu.c    ****   spixbase = (uint32_t)SPIx; 
 128:Src/icmu.c    ****   spixbase += 0x0C;
 129:Src/icmu.c    ****   
 130:Src/icmu.c    ****   *(__IO uint8_t *) spixbase = Data;
 131:Src/icmu.c    **** }
 132:Src/icmu.c    **** 
 133:Src/icmu.c    **** 
 134:Src/icmu.c    **** uint8_t SPI_I2S_ReceiveData8(SPI_TypeDef* SPIx)
 135:Src/icmu.c    **** {
 136:Src/icmu.c    ****   uint32_t spixbase = 0x00;
 137:Src/icmu.c    ****   
 138:Src/icmu.c    ****   /* Check the parameters */
 139:Src/icmu.c    ****   assert_param(IS_SPI_ALL_PERIPH_EXT(SPIx));
 140:Src/icmu.c    ****   
 141:Src/icmu.c    ****   spixbase = (uint32_t)SPIx; 
 142:Src/icmu.c    ****   spixbase += 0x0C;
 143:Src/icmu.c    ****   
 144:Src/icmu.c    ****   return *(__IO uint8_t *) spixbase;
 145:Src/icmu.c    **** }
 146:Src/icmu.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 4


 147:Src/icmu.c    **** 
 148:Src/icmu.c    **** uint8_t icmu_spi_init(void)
 149:Src/icmu.c    **** {
 150:Src/icmu.c    ****   uint8_t icmu_reg = 0;  
 151:Src/icmu.c    ****   SPI1_Init();
 152:Src/icmu.c    **** 
 153:Src/icmu.c    **** 
 154:Src/icmu.c    ****   icmu_reg = icmu_read_reg(0x77);
 155:Src/icmu.c    **** 	
 156:Src/icmu.c    **** 	return (1); 
 157:Src/icmu.c    **** }
 158:Src/icmu.c    **** static uint16_t SPI_RW(uint16_t data)
 159:Src/icmu.c    **** {
  27              		.loc 1 159 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
 160:Src/icmu.c    ****   /* Loop while DR register in not emplty */
 161:Src/icmu.c    ****   while(__HAL_SPI_GET_FLAG(&hspi1, SPI_FLAG_TXE) == RESET);
  33              		.loc 1 161 0
  34 0000 064A     		ldr	r2, .L8
  35 0002 1168     		ldr	r1, [r2]
  36              	.L2:
  37              		.loc 1 161 0 is_stmt 0 discriminator 1
  38 0004 8B68     		ldr	r3, [r1, #8]
  39 0006 9B07     		lsls	r3, r3, #30
  40 0008 FCD5     		bpl	.L2
  41              	.LBB6:
  42              	.LBB7:
 130:Src/icmu.c    **** }
  43              		.loc 1 130 0 is_stmt 1
  44 000a 054B     		ldr	r3, .L8+4
  45              	.LBE7:
  46              	.LBE6:
 162:Src/icmu.c    ****   /* Send byte through the SPI1 peripheral */
 163:Src/icmu.c    ****   SPI_I2S_SendData8(SPI1, data);
  47              		.loc 1 163 0
  48 000c C0B2     		uxtb	r0, r0
  49              	.LVL1:
  50              	.LBB9:
  51              	.LBB8:
 130:Src/icmu.c    **** }
  52              		.loc 1 130 0
  53 000e 1870     		strb	r0, [r3]
  54              	.LBE8:
  55              	.LBE9:
 164:Src/icmu.c    ****   /* Wait to receive a byte */
 165:Src/icmu.c    ****   while((__HAL_SPI_GET_FLAG(&hspi1, SPI_FLAG_RXNE) == RESET));
  56              		.loc 1 165 0
  57 0010 1168     		ldr	r1, [r2]
  58              	.L3:
  59              		.loc 1 165 0 is_stmt 0 discriminator 1
  60 0012 8A68     		ldr	r2, [r1, #8]
  61 0014 D207     		lsls	r2, r2, #31
  62 0016 FCD5     		bpl	.L3
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 5


  63              	.LVL2:
  64              	.LBB10:
  65              	.LBB11:
 144:Src/icmu.c    **** }
  66              		.loc 1 144 0 is_stmt 1
  67 0018 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
  68              	.LVL3:
  69              	.LBE11:
  70              	.LBE10:
 166:Src/icmu.c    ****   /* Return the byte read from the SPI bus */
 167:Src/icmu.c    ****   return SPI_I2S_ReceiveData8(SPI1);  
 168:Src/icmu.c    **** }
  71              		.loc 1 168 0
  72 001a 7047     		bx	lr
  73              	.L9:
  74              		.align	2
  75              	.L8:
  76 001c 00000000 		.word	hspi1
  77 0020 0C300140 		.word	1073819660
  78              		.cfi_endproc
  79              	.LFE339:
  81              		.section	.text.delay__ms,"ax",%progbits
  82              		.align	1
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu fpv4-sp-d16
  88              	delay__ms:
  89              	.LFB344:
 169:Src/icmu.c    **** uint8_t icmu_activiate(uint8_t pactive, uint8_t ractive)
 170:Src/icmu.c    **** {
 171:Src/icmu.c    ****   SPI1_CS_EN;
 172:Src/icmu.c    ****   if (CMD_ACTIVATE == SPI_RW(CMD_ACTIVATE))
 173:Src/icmu.c    ****   {
 174:Src/icmu.c    ****     if (0x20 == SPI_RW(0x80+ pactive + (ractive<<1)))
 175:Src/icmu.c    ****     {
 176:Src/icmu.c    ****       SPI1_CS_DIS;
 177:Src/icmu.c    ****       return 1;
 178:Src/icmu.c    ****     }
 179:Src/icmu.c    ****   }
 180:Src/icmu.c    ****   SPI1_CS_DIS;
 181:Src/icmu.c    ****   return 0;
 182:Src/icmu.c    **** }
 183:Src/icmu.c    **** uint32_t icmu_sdtransmission(void)
 184:Src/icmu.c    **** {
 185:Src/icmu.c    ****   uint32_t temp = 0;			
 186:Src/icmu.c    ****   SPI1_CS_EN;
 187:Src/icmu.c    ****   if (CMD_SD_TRANS == SPI_RW(CMD_SD_TRANS))
 188:Src/icmu.c    ****   {
 189:Src/icmu.c    ****     buf[0] = SPI_RW(0);
 190:Src/icmu.c    ****     buf[1] = SPI_RW(0);
 191:Src/icmu.c    ****     buf[2] = SPI_RW(0);
 192:Src/icmu.c    ****   }
 193:Src/icmu.c    ****   temp = buf[0];
 194:Src/icmu.c    ****   temp = (temp<<8) | buf[1];
 195:Src/icmu.c    ****   temp = (temp<<8) | buf[2];
 196:Src/icmu.c    ****   temp = temp>>5;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 6


 197:Src/icmu.c    ****   SPI1_CS_DIS;
 198:Src/icmu.c    ****   return  temp;
 199:Src/icmu.c    **** }
 200:Src/icmu.c    **** 
 201:Src/icmu.c    **** //����ģʽ��ȡ MU��ֵ
 202:Src/icmu.c    **** int8_t get_MU_Value_block(void)
 203:Src/icmu.c    **** {
 204:Src/icmu.c    **** 		static s32 count_wait = 0;
 205:Src/icmu.c    **** 		Flag_MU_read = 0;	
 206:Src/icmu.c    **** 		icmu_sdtransmission_test();		
 207:Src/icmu.c    **** 		while(Flag_MU_read == 0)
 208:Src/icmu.c    **** 		{
 209:Src/icmu.c    **** 			if(count_wait>300)//�������ٺ��룬˵��MU��SPIͨѶʧ��
 210:Src/icmu.c    **** 			{
 211:Src/icmu.c    **** 				Flag_error_MU_SPI = 1;
 212:Src/icmu.c    **** 				return 0;
 213:Src/icmu.c    **** 			}
 214:Src/icmu.c    **** 			count_wait++;
 215:Src/icmu.c    **** 			delay_ms(1);			
 216:Src/icmu.c    **** 		}
 217:Src/icmu.c    **** 		return 1;
 218:Src/icmu.c    **** }
 219:Src/icmu.c    **** uint8_t icmu_sdstatus(void)
 220:Src/icmu.c    **** {
 221:Src/icmu.c    ****   SPI1_CS_EN;
 222:Src/icmu.c    ****   if (CMD_SD_STATUS == SPI_RW(CMD_SD_STATUS))
 223:Src/icmu.c    ****   {
 224:Src/icmu.c    ****     if (SPI_RW(0) == 0x80)
 225:Src/icmu.c    ****     {
 226:Src/icmu.c    ****       SPI1_CS_DIS;
 227:Src/icmu.c    ****       return 1;
 228:Src/icmu.c    ****     }
 229:Src/icmu.c    ****     else
 230:Src/icmu.c    ****     {
 231:Src/icmu.c    ****       SPI1_CS_DIS;
 232:Src/icmu.c    ****       return 0;
 233:Src/icmu.c    ****     }
 234:Src/icmu.c    ****   }
 235:Src/icmu.c    ****   return 0;
 236:Src/icmu.c    **** }
 237:Src/icmu.c    **** 
 238:Src/icmu.c    **** static void delay__ms(int cnt)
 239:Src/icmu.c    **** {
  90              		.loc 1 239 0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 8
  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94              		@ link register save eliminated.
  95              	.LVL4:
  96 0000 82B0     		sub	sp, sp, #8
  97              	.LCFI0:
  98              		.cfi_def_cfa_offset 8
 240:Src/icmu.c    **** 	volatile int i=0,j=0;
  99              		.loc 1 240 0
 100 0002 0023     		movs	r3, #0
 101 0004 0093     		str	r3, [sp]
 102 0006 0193     		str	r3, [sp, #4]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 7


 241:Src/icmu.c    **** 	
 242:Src/icmu.c    **** 	for(i =0 ;i<1000;i++)
 103              		.loc 1 242 0
 104 0008 0093     		str	r3, [sp]
 105              	.L11:
 106              		.loc 1 242 0 is_stmt 0 discriminator 1
 107 000a 009A     		ldr	r2, [sp]
 108 000c B2F57A7F 		cmp	r2, #1000
 109 0010 01DB     		blt	.L14
 243:Src/icmu.c    **** 		for(j=0;j<cnt;j++);
 244:Src/icmu.c    **** }
 110              		.loc 1 244 0 is_stmt 1
 111 0012 02B0     		add	sp, sp, #8
 112              	.LCFI1:
 113              		.cfi_remember_state
 114              		.cfi_def_cfa_offset 0
 115              		@ sp needed
 116 0014 7047     		bx	lr
 117              	.L14:
 118              	.LCFI2:
 119              		.cfi_restore_state
 243:Src/icmu.c    **** 		for(j=0;j<cnt;j++);
 120              		.loc 1 243 0
 121 0016 0193     		str	r3, [sp, #4]
 122              	.L12:
 243:Src/icmu.c    **** 		for(j=0;j<cnt;j++);
 123              		.loc 1 243 0 is_stmt 0 discriminator 1
 124 0018 019A     		ldr	r2, [sp, #4]
 125 001a 8242     		cmp	r2, r0
 126 001c 03DB     		blt	.L13
 242:Src/icmu.c    **** 		for(j=0;j<cnt;j++);
 127              		.loc 1 242 0 is_stmt 1 discriminator 2
 128 001e 009A     		ldr	r2, [sp]
 129 0020 0132     		adds	r2, r2, #1
 130 0022 0092     		str	r2, [sp]
 131 0024 F1E7     		b	.L11
 132              	.L13:
 243:Src/icmu.c    **** 		for(j=0;j<cnt;j++);
 133              		.loc 1 243 0 discriminator 3
 134 0026 019A     		ldr	r2, [sp, #4]
 135 0028 0132     		adds	r2, r2, #1
 136 002a 0192     		str	r2, [sp, #4]
 137 002c F4E7     		b	.L12
 138              		.cfi_endproc
 139              	.LFE344:
 141              		.section	.text.MX_SPI1_Init,"ax",%progbits
 142              		.align	1
 143              		.global	MX_SPI1_Init
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	MX_SPI1_Init:
 150              	.LFB334:
  43:Src/icmu.c    **** 
 151              		.loc 1 43 0
 152              		.cfi_startproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 8


 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
  53:Src/icmu.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 155              		.loc 1 53 0
 156 0000 1448     		ldr	r0, .L20
  54:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 157              		.loc 1 54 0
 158 0002 154A     		ldr	r2, .L20+4
 159 0004 4FF48273 		mov	r3, #260
  43:Src/icmu.c    **** 
 160              		.loc 1 43 0
 161 0008 10B5     		push	{r4, lr}
 162              	.LCFI3:
 163              		.cfi_def_cfa_offset 8
 164              		.cfi_offset 4, -8
 165              		.cfi_offset 14, -4
  54:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 166              		.loc 1 54 0
 167 000a C0E90023 		strd	r2, r3, [r0]
  56:Src/icmu.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 168              		.loc 1 56 0
 169 000e 0023     		movs	r3, #0
 170 0010 4FF4E062 		mov	r2, #1792
 171 0014 C0E90232 		strd	r3, r2, [r0, #8]
  58:Src/icmu.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 172              		.loc 1 58 0
 173 0018 0221     		movs	r1, #2
 174 001a 0122     		movs	r2, #1
 175 001c C0E90412 		strd	r1, r2, [r0, #16]
  60:Src/icmu.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 176              		.loc 1 60 0
 177 0020 4FF40074 		mov	r4, #512
 178 0024 3022     		movs	r2, #48
 179 0026 C0E90642 		strd	r4, r2, [r0, #24]
  64:Src/icmu.c    ****   hspi1.Init.CRCLength = SPI_CRC_LENGTH_DATASIZE;
 180              		.loc 1 64 0
 181 002a 0722     		movs	r2, #7
  62:Src/icmu.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 182              		.loc 1 62 0
 183 002c C0E90833 		strd	r3, r3, [r0, #32]
  63:Src/icmu.c    ****   hspi1.Init.CRCPolynomial = 7;
 184              		.loc 1 63 0
 185 0030 8362     		str	r3, [r0, #40]
  65:Src/icmu.c    ****   hspi1.Init.NSSPMode = SPI_NSS_PULSE_DISABLE;
 186              		.loc 1 65 0
 187 0032 C0E90B23 		strd	r2, r3, [r0, #44]
  66:Src/icmu.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 188              		.loc 1 66 0
 189 0036 4363     		str	r3, [r0, #52]
  67:Src/icmu.c    ****   {
 190              		.loc 1 67 0
 191 0038 FFF7FEFF 		bl	HAL_SPI_Init
 192              	.LVL5:
 193 003c 08B1     		cbz	r0, .L16
 194              	.LBB12:
  69:Src/icmu.c    ****   }
 195              		.loc 1 69 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 9


 196 003e FFF7FEFF 		bl	Error_Handler
 197              	.LVL6:
 198              	.L16:
 199              	.LBE12:
  75:Src/icmu.c    **** }
 200              		.loc 1 75 0
 201 0042 0423     		movs	r3, #4
 202 0044 054A     		ldr	r2, .L20+8
 203 0046 0649     		ldr	r1, .L20+12
 204 0048 0248     		ldr	r0, .L20
  76:Src/icmu.c    **** 
 205              		.loc 1 76 0
 206 004a BDE81040 		pop	{r4, lr}
 207              	.LCFI4:
 208              		.cfi_restore 14
 209              		.cfi_restore 4
 210              		.cfi_def_cfa_offset 0
  75:Src/icmu.c    **** }
 211              		.loc 1 75 0
 212 004e FFF7FEBF 		b	HAL_SPI_TransmitReceive_DMA
 213              	.LVL7:
 214              	.L21:
 215 0052 00BF     		.align	2
 216              	.L20:
 217 0054 00000000 		.word	hspi1
 218 0058 00300140 		.word	1073819648
 219 005c 00000000 		.word	.LANCHOR0
 220 0060 00000000 		.word	.LANCHOR1
 221              		.cfi_endproc
 222              	.LFE334:
 224              		.section	.text.SPI1_Init,"ax",%progbits
 225              		.align	1
 226              		.global	SPI1_Init
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 230              		.fpu fpv4-sp-d16
 232              	SPI1_Init:
 233              	.LFB335:
  83:Src/icmu.c    ****    /* USER CODE BEGIN SPI1_Init 0 */
 234              		.loc 1 83 0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238 0000 38B5     		push	{r3, r4, r5, lr}
 239              	.LCFI5:
 240              		.cfi_def_cfa_offset 16
 241              		.cfi_offset 3, -16
 242              		.cfi_offset 4, -12
 243              		.cfi_offset 5, -8
 244              		.cfi_offset 14, -4
  92:Src/icmu.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 245              		.loc 1 92 0
 246 0002 164C     		ldr	r4, .L27
  93:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 247              		.loc 1 93 0
 248 0004 164D     		ldr	r5, .L27+4
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 10


 249 0006 4FF48273 		mov	r3, #260
  95:Src/icmu.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 250              		.loc 1 95 0
 251 000a 4FF4E062 		mov	r2, #1792
  93:Src/icmu.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 252              		.loc 1 93 0
 253 000e C4E90053 		strd	r5, r3, [r4]
  95:Src/icmu.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 254              		.loc 1 95 0
 255 0012 0023     		movs	r3, #0
 256 0014 C4E90232 		strd	r3, r2, [r4, #8]
  97:Src/icmu.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 257              		.loc 1 97 0
 258 0018 0221     		movs	r1, #2
 259 001a 0122     		movs	r2, #1
  99:Src/icmu.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 260              		.loc 1 99 0
 261 001c 4FF40070 		mov	r0, #512
  97:Src/icmu.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 262              		.loc 1 97 0
 263 0020 C4E90412 		strd	r1, r2, [r4, #16]
  99:Src/icmu.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 264              		.loc 1 99 0
 265 0024 3022     		movs	r2, #48
 266 0026 C4E90602 		strd	r0, r2, [r4, #24]
 103:Src/icmu.c    ****   hspi1.Init.CRCLength = SPI_CRC_LENGTH_DATASIZE;
 267              		.loc 1 103 0
 268 002a 0722     		movs	r2, #7
 106:Src/icmu.c    ****   {
 269              		.loc 1 106 0
 270 002c 2046     		mov	r0, r4
 101:Src/icmu.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 271              		.loc 1 101 0
 272 002e C4E90833 		strd	r3, r3, [r4, #32]
 102:Src/icmu.c    ****   hspi1.Init.CRCPolynomial = 7;
 273              		.loc 1 102 0
 274 0032 A362     		str	r3, [r4, #40]
 104:Src/icmu.c    ****   hspi1.Init.NSSPMode = SPI_NSS_PULSE_DISABLE;
 275              		.loc 1 104 0
 276 0034 C4E90B23 		strd	r2, r3, [r4, #44]
 105:Src/icmu.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 277              		.loc 1 105 0
 278 0038 6363     		str	r3, [r4, #52]
 106:Src/icmu.c    ****   {
 279              		.loc 1 106 0
 280 003a FFF7FEFF 		bl	HAL_SPI_Init
 281              	.LVL8:
 282 003e 08B1     		cbz	r0, .L23
 283              	.LBB13:
 108:Src/icmu.c    ****   }
 284              		.loc 1 108 0
 285 0040 FFF7FEFF 		bl	Error_Handler
 286              	.LVL9:
 287              	.L23:
 288              	.LBE13:
 110:Src/icmu.c    ****   SET_BIT(SPI1->CR2, SPI_RXFIFO_THRESHOLD);
 289              		.loc 1 110 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 11


 290 0044 EB68     		ldr	r3, [r5, #12]
 111:Src/icmu.c    ****   __HAL_SPI_ENABLE(&hspi1);
 291              		.loc 1 111 0
 292 0046 6B68     		ldr	r3, [r5, #4]
 112:Src/icmu.c    **** }
 293              		.loc 1 112 0
 294 0048 2268     		ldr	r2, [r4]
 111:Src/icmu.c    ****   __HAL_SPI_ENABLE(&hspi1);
 295              		.loc 1 111 0
 296 004a 43F48053 		orr	r3, r3, #4096
 297 004e 6B60     		str	r3, [r5, #4]
 112:Src/icmu.c    **** }
 298              		.loc 1 112 0
 299 0050 1368     		ldr	r3, [r2]
 300 0052 43F04003 		orr	r3, r3, #64
 301 0056 1360     		str	r3, [r2]
 113:Src/icmu.c    **** 
 302              		.loc 1 113 0
 303 0058 38BD     		pop	{r3, r4, r5, pc}
 304              	.L28:
 305 005a 00BF     		.align	2
 306              	.L27:
 307 005c 00000000 		.word	hspi1
 308 0060 00300140 		.word	1073819648
 309              		.cfi_endproc
 310              	.LFE335:
 312              		.section	.text.SPI_I2S_SendData8,"ax",%progbits
 313              		.align	1
 314              		.global	SPI_I2S_SendData8
 315              		.syntax unified
 316              		.thumb
 317              		.thumb_func
 318              		.fpu fpv4-sp-d16
 320              	SPI_I2S_SendData8:
 321              	.LFB336:
 121:Src/icmu.c    ****   uint32_t spixbase = 0x00;
 322              		.loc 1 121 0
 323              		.cfi_startproc
 324              		@ args = 0, pretend = 0, frame = 0
 325              		@ frame_needed = 0, uses_anonymous_args = 0
 326              		@ link register save eliminated.
 327              	.LVL10:
 130:Src/icmu.c    **** }
 328              		.loc 1 130 0
 329 0000 0173     		strb	r1, [r0, #12]
 131:Src/icmu.c    **** 
 330              		.loc 1 131 0
 331 0002 7047     		bx	lr
 332              		.cfi_endproc
 333              	.LFE336:
 335              		.section	.text.SPI_I2S_ReceiveData8,"ax",%progbits
 336              		.align	1
 337              		.global	SPI_I2S_ReceiveData8
 338              		.syntax unified
 339              		.thumb
 340              		.thumb_func
 341              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 12


 343              	SPI_I2S_ReceiveData8:
 344              	.LFB337:
 135:Src/icmu.c    ****   uint32_t spixbase = 0x00;
 345              		.loc 1 135 0
 346              		.cfi_startproc
 347              		@ args = 0, pretend = 0, frame = 0
 348              		@ frame_needed = 0, uses_anonymous_args = 0
 349              		@ link register save eliminated.
 350              	.LVL11:
 144:Src/icmu.c    **** }
 351              		.loc 1 144 0
 352 0000 007B     		ldrb	r0, [r0, #12]	@ zero_extendqisi2
 353              	.LVL12:
 145:Src/icmu.c    **** 
 354              		.loc 1 145 0
 355 0002 7047     		bx	lr
 356              		.cfi_endproc
 357              	.LFE337:
 359              		.section	.text.icmu_activiate,"ax",%progbits
 360              		.align	1
 361              		.global	icmu_activiate
 362              		.syntax unified
 363              		.thumb
 364              		.thumb_func
 365              		.fpu fpv4-sp-d16
 367              	icmu_activiate:
 368              	.LFB340:
 170:Src/icmu.c    ****   SPI1_CS_EN;
 369              		.loc 1 170 0
 370              		.cfi_startproc
 371              		@ args = 0, pretend = 0, frame = 0
 372              		@ frame_needed = 0, uses_anonymous_args = 0
 373              	.LVL13:
 374 0000 70B5     		push	{r4, r5, r6, lr}
 375              	.LCFI6:
 376              		.cfi_def_cfa_offset 16
 377              		.cfi_offset 4, -16
 378              		.cfi_offset 5, -12
 379              		.cfi_offset 6, -8
 380              		.cfi_offset 14, -4
 171:Src/icmu.c    ****   if (CMD_ACTIVATE == SPI_RW(CMD_ACTIVATE))
 381              		.loc 1 171 0
 382 0002 4FF09044 		mov	r4, #1207959552
 170:Src/icmu.c    ****   SPI1_CS_EN;
 383              		.loc 1 170 0
 384 0006 0546     		mov	r5, r0
 171:Src/icmu.c    ****   if (CMD_ACTIVATE == SPI_RW(CMD_ACTIVATE))
 385              		.loc 1 171 0
 386 0008 6369     		ldr	r3, [r4, #20]
 387 000a 23F01003 		bic	r3, r3, #16
 388 000e 6361     		str	r3, [r4, #20]
 172:Src/icmu.c    ****   {
 389              		.loc 1 172 0
 390 0010 B020     		movs	r0, #176
 391              	.LVL14:
 170:Src/icmu.c    ****   SPI1_CS_EN;
 392              		.loc 1 170 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 13


 393 0012 0E46     		mov	r6, r1
 172:Src/icmu.c    ****   {
 394              		.loc 1 172 0
 395 0014 FFF7FEFF 		bl	SPI_RW
 396              	.LVL15:
 397 0018 B028     		cmp	r0, #176
 398 001a 0CD1     		bne	.L32
 174:Src/icmu.c    ****     {
 399              		.loc 1 174 0
 400 001c 05EB4600 		add	r0, r5, r6, lsl #1
 401 0020 8030     		adds	r0, r0, #128
 402 0022 FFF7FEFF 		bl	SPI_RW
 403              	.LVL16:
 404 0026 2028     		cmp	r0, #32
 405 0028 05D1     		bne	.L32
 176:Src/icmu.c    ****       return 1;
 406              		.loc 1 176 0
 407 002a 6369     		ldr	r3, [r4, #20]
 408 002c 43F01003 		orr	r3, r3, #16
 409 0030 6361     		str	r3, [r4, #20]
 177:Src/icmu.c    ****     }
 410              		.loc 1 177 0
 411 0032 0120     		movs	r0, #1
 412              	.L33:
 182:Src/icmu.c    **** uint32_t icmu_sdtransmission(void)
 413              		.loc 1 182 0
 414 0034 70BD     		pop	{r4, r5, r6, pc}
 415              	.L32:
 180:Src/icmu.c    ****   return 0;
 416              		.loc 1 180 0
 417 0036 4FF09042 		mov	r2, #1207959552
 181:Src/icmu.c    **** }
 418              		.loc 1 181 0
 419 003a 0020     		movs	r0, #0
 180:Src/icmu.c    ****   return 0;
 420              		.loc 1 180 0
 421 003c 5369     		ldr	r3, [r2, #20]
 422 003e 43F01003 		orr	r3, r3, #16
 423 0042 5361     		str	r3, [r2, #20]
 181:Src/icmu.c    **** }
 424              		.loc 1 181 0
 425 0044 F6E7     		b	.L33
 426              		.cfi_endproc
 427              	.LFE340:
 429              		.section	.text.icmu_sdtransmission,"ax",%progbits
 430              		.align	1
 431              		.global	icmu_sdtransmission
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 435              		.fpu fpv4-sp-d16
 437              	icmu_sdtransmission:
 438              	.LFB341:
 184:Src/icmu.c    ****   uint32_t temp = 0;			
 439              		.loc 1 184 0
 440              		.cfi_startproc
 441              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 14


 442              		@ frame_needed = 0, uses_anonymous_args = 0
 443              	.LVL17:
 186:Src/icmu.c    ****   if (CMD_SD_TRANS == SPI_RW(CMD_SD_TRANS))
 444              		.loc 1 186 0
 445 0000 4FF09042 		mov	r2, #1207959552
 184:Src/icmu.c    ****   uint32_t temp = 0;			
 446              		.loc 1 184 0
 447 0004 10B5     		push	{r4, lr}
 448              	.LCFI7:
 449              		.cfi_def_cfa_offset 8
 450              		.cfi_offset 4, -8
 451              		.cfi_offset 14, -4
 186:Src/icmu.c    ****   if (CMD_SD_TRANS == SPI_RW(CMD_SD_TRANS))
 452              		.loc 1 186 0
 453 0006 5369     		ldr	r3, [r2, #20]
 454 0008 114C     		ldr	r4, .L36
 455 000a 23F01003 		bic	r3, r3, #16
 456 000e 5361     		str	r3, [r2, #20]
 187:Src/icmu.c    ****   {
 457              		.loc 1 187 0
 458 0010 A620     		movs	r0, #166
 459 0012 FFF7FEFF 		bl	SPI_RW
 460              	.LVL18:
 461 0016 A628     		cmp	r0, #166
 462 0018 0BD1     		bne	.L35
 189:Src/icmu.c    ****     buf[1] = SPI_RW(0);
 463              		.loc 1 189 0
 464 001a 0020     		movs	r0, #0
 465 001c FFF7FEFF 		bl	SPI_RW
 466              	.LVL19:
 467 0020 2070     		strb	r0, [r4]
 190:Src/icmu.c    ****     buf[2] = SPI_RW(0);
 468              		.loc 1 190 0
 469 0022 0020     		movs	r0, #0
 470 0024 FFF7FEFF 		bl	SPI_RW
 471              	.LVL20:
 472 0028 6070     		strb	r0, [r4, #1]
 191:Src/icmu.c    ****   }
 473              		.loc 1 191 0
 474 002a 0020     		movs	r0, #0
 475 002c FFF7FEFF 		bl	SPI_RW
 476              	.LVL21:
 477 0030 A070     		strb	r0, [r4, #2]
 478              	.L35:
 479              	.LVL22:
 195:Src/icmu.c    ****   temp = temp>>5;
 480              		.loc 1 195 0
 481 0032 2088     		ldrh	r0, [r4]	@ unaligned
 482 0034 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 197:Src/icmu.c    ****   return  temp;
 483              		.loc 1 197 0
 484 0036 4FF09042 		mov	r2, #1207959552
 195:Src/icmu.c    ****   temp = temp>>5;
 485              		.loc 1 195 0
 486 003a 40BA     		rev16	r0, r0
 487 003c 80B2     		uxth	r0, r0
 488 003e 43EA0020 		orr	r0, r3, r0, lsl #8
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 15


 489              	.LVL23:
 197:Src/icmu.c    ****   return  temp;
 490              		.loc 1 197 0
 491 0042 5369     		ldr	r3, [r2, #20]
 492 0044 43F01003 		orr	r3, r3, #16
 493 0048 5361     		str	r3, [r2, #20]
 199:Src/icmu.c    **** 
 494              		.loc 1 199 0
 495 004a 4009     		lsrs	r0, r0, #5
 496              	.LVL24:
 497 004c 10BD     		pop	{r4, pc}
 498              	.L37:
 499 004e 00BF     		.align	2
 500              	.L36:
 501 0050 00000000 		.word	.LANCHOR2
 502              		.cfi_endproc
 503              	.LFE341:
 505              		.section	.text.icmu_sdstatus,"ax",%progbits
 506              		.align	1
 507              		.global	icmu_sdstatus
 508              		.syntax unified
 509              		.thumb
 510              		.thumb_func
 511              		.fpu fpv4-sp-d16
 513              	icmu_sdstatus:
 514              	.LFB343:
 220:Src/icmu.c    ****   SPI1_CS_EN;
 515              		.loc 1 220 0
 516              		.cfi_startproc
 517              		@ args = 0, pretend = 0, frame = 0
 518              		@ frame_needed = 0, uses_anonymous_args = 0
 519 0000 10B5     		push	{r4, lr}
 520              	.LCFI8:
 521              		.cfi_def_cfa_offset 8
 522              		.cfi_offset 4, -8
 523              		.cfi_offset 14, -4
 221:Src/icmu.c    ****   if (CMD_SD_STATUS == SPI_RW(CMD_SD_STATUS))
 524              		.loc 1 221 0
 525 0002 4FF09044 		mov	r4, #1207959552
 222:Src/icmu.c    ****   {
 526              		.loc 1 222 0
 527 0006 F520     		movs	r0, #245
 221:Src/icmu.c    ****   if (CMD_SD_STATUS == SPI_RW(CMD_SD_STATUS))
 528              		.loc 1 221 0
 529 0008 6369     		ldr	r3, [r4, #20]
 530 000a 23F01003 		bic	r3, r3, #16
 531 000e 6361     		str	r3, [r4, #20]
 222:Src/icmu.c    ****   {
 532              		.loc 1 222 0
 533 0010 FFF7FEFF 		bl	SPI_RW
 534              	.LVL25:
 535 0014 F528     		cmp	r0, #245
 224:Src/icmu.c    ****     {
 536              		.loc 1 224 0
 537 0016 4FF00000 		mov	r0, #0
 222:Src/icmu.c    ****   {
 538              		.loc 1 222 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 16


 539 001a 09D1     		bne	.L39
 224:Src/icmu.c    ****     {
 540              		.loc 1 224 0
 541 001c FFF7FEFF 		bl	SPI_RW
 542              	.LVL26:
 226:Src/icmu.c    ****       return 1;
 543              		.loc 1 226 0
 544 0020 6369     		ldr	r3, [r4, #20]
 224:Src/icmu.c    ****     {
 545              		.loc 1 224 0
 546 0022 8028     		cmp	r0, #128
 226:Src/icmu.c    ****       return 1;
 547              		.loc 1 226 0
 548 0024 43F01003 		orr	r3, r3, #16
 549 0028 6361     		str	r3, [r4, #20]
 227:Src/icmu.c    ****     }
 550              		.loc 1 227 0
 551 002a 0CBF     		ite	eq
 552 002c 0120     		moveq	r0, #1
 232:Src/icmu.c    ****     }
 553              		.loc 1 232 0
 554 002e 0020     		movne	r0, #0
 555              	.L39:
 236:Src/icmu.c    **** 
 556              		.loc 1 236 0
 557 0030 10BD     		pop	{r4, pc}
 558              		.cfi_endproc
 559              	.LFE343:
 561              		.section	.text.icmu_read_reg,"ax",%progbits
 562              		.align	1
 563              		.global	icmu_read_reg
 564              		.syntax unified
 565              		.thumb
 566              		.thumb_func
 567              		.fpu fpv4-sp-d16
 569              	icmu_read_reg:
 570              	.LFB345:
 245:Src/icmu.c    **** 	
 246:Src/icmu.c    **** 
 247:Src/icmu.c    **** 
 248:Src/icmu.c    **** uint8_t icmu_read_reg(uint8_t addr)
 249:Src/icmu.c    **** {
 571              		.loc 1 249 0
 572              		.cfi_startproc
 573              		@ args = 0, pretend = 0, frame = 0
 574              		@ frame_needed = 0, uses_anonymous_args = 0
 575              	.LVL27:
 576 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 577              	.LCFI9:
 578              		.cfi_def_cfa_offset 32
 579              		.cfi_offset 3, -32
 580              		.cfi_offset 4, -28
 581              		.cfi_offset 5, -24
 582              		.cfi_offset 6, -20
 583              		.cfi_offset 7, -16
 584              		.cfi_offset 8, -12
 585              		.cfi_offset 9, -8
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 17


 586              		.cfi_offset 14, -4
 250:Src/icmu.c    ****   uint8_t reg = 0;
 251:Src/icmu.c    ****   uint8_t sta = 0;
 252:Src/icmu.c    **** 	uint8_t i =0;
 253:Src/icmu.c    **** 	
 254:Src/icmu.c    **** 	Flag_error_read_eeprom = 1;
 255:Src/icmu.c    **** 	
 256:Src/icmu.c    **** 	 SPI1_CS_DIS;
 587              		.loc 1 256 0
 588 0004 4FF09044 		mov	r4, #1207959552
 254:Src/icmu.c    **** 	
 589              		.loc 1 254 0
 590 0008 2E4E     		ldr	r6, .L56
 591 000a 0123     		movs	r3, #1
 592 000c 3360     		str	r3, [r6]
 593              		.loc 1 256 0
 594 000e 6369     		ldr	r3, [r4, #20]
 595 0010 43F01003 		orr	r3, r3, #16
 596 0014 6361     		str	r3, [r4, #20]
 249:Src/icmu.c    ****   uint8_t reg = 0;
 597              		.loc 1 249 0
 598 0016 0546     		mov	r5, r0
 257:Src/icmu.c    **** 	delay__ms(100);
 599              		.loc 1 257 0
 600 0018 6420     		movs	r0, #100
 601              	.LVL28:
 602 001a FFF7FEFF 		bl	delay__ms
 603              	.LVL29:
 258:Src/icmu.c    ****   SPI1_CS_EN;
 604              		.loc 1 258 0
 605 001e 6369     		ldr	r3, [r4, #20]
 606 0020 23F01003 		bic	r3, r3, #16
 607 0024 6361     		str	r3, [r4, #20]
 259:Src/icmu.c    **** 	delay__ms(10);
 608              		.loc 1 259 0
 609 0026 0A20     		movs	r0, #10
 610 0028 FFF7FEFF 		bl	delay__ms
 611              	.LVL30:
 260:Src/icmu.c    **** 	
 261:Src/icmu.c    ****   if (CMD_REG_READ == SPI_RW(CMD_REG_READ))
 612              		.loc 1 261 0
 613 002c 9720     		movs	r0, #151
 614 002e FFF7FEFF 		bl	SPI_RW
 615              	.LVL31:
 616 0032 9728     		cmp	r0, #151
 617 0034 B046     		mov	r8, r6
 618 0036 42D1     		bne	.L43
 262:Src/icmu.c    ****   {
 263:Src/icmu.c    **** 
 264:Src/icmu.c    ****     if (addr == SPI_RW(addr))
 619              		.loc 1 264 0
 620 0038 ADB2     		uxth	r5, r5
 621 003a 2846     		mov	r0, r5
 622 003c FFF7FEFF 		bl	SPI_RW
 623              	.LVL32:
 624 0040 8542     		cmp	r5, r0
 625 0042 3CD1     		bne	.L43
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 18


 626 0044 0B27     		movs	r7, #11
 250:Src/icmu.c    ****   uint8_t sta = 0;
 627              		.loc 1 250 0
 628 0046 0026     		movs	r6, #0
 629              	.LVL33:
 630              	.L51:
 265:Src/icmu.c    ****     {
 266:Src/icmu.c    **** 			do
 267:Src/icmu.c    **** 			{
 268:Src/icmu.c    **** 				SPI1_CS_DIS;
 631              		.loc 1 268 0
 632 0048 6369     		ldr	r3, [r4, #20]
 633 004a 43F01003 		orr	r3, r3, #16
 634 004e 6361     		str	r3, [r4, #20]
 635              	.LVL34:
 636 0050 40F2E935 		movw	r5, #1001
 637              	.LVL35:
 638              	.L44:
 639 0054 013D     		subs	r5, r5, #1
 640              	.LVL36:
 641 0056 ADB2     		uxth	r5, r5
 642              	.LBB20:
 643              	.LBB21:
  34:Src/icmu.c    ****     __nop();
 644              		.loc 1 34 0
 645 0058 35BB     		cbnz	r5, .L45
 646              	.LBE21:
 647              	.LBE20:
 269:Src/icmu.c    **** 				delay_clk();
 270:Src/icmu.c    **** 				SPI1_CS_EN;
 648              		.loc 1 270 0
 649 005a 6369     		ldr	r3, [r4, #20]
 650 005c 23F01003 		bic	r3, r3, #16
 651 0060 6361     		str	r3, [r4, #20]
 652 0062 40F2E935 		movw	r5, #1001
 653              	.L46:
 654              	.LVL37:
 655 0066 013D     		subs	r5, r5, #1
 656              	.LVL38:
 657 0068 ADB2     		uxth	r5, r5
 658              	.LBB24:
 659              	.LBB25:
  34:Src/icmu.c    ****     __nop();
 660              		.loc 1 34 0
 661 006a 05BB     		cbnz	r5, .L47
 662              	.LBE25:
 663              	.LBE24:
 271:Src/icmu.c    **** 				delay_clk();
 272:Src/icmu.c    **** 				if (CMD_REG_STATUS == SPI_RW(CMD_REG_STATUS))  // if (CMD_REG_STATUS == SPI_RW(CMD_REG_STATUS))
 664              		.loc 1 272 0
 665 006c AD20     		movs	r0, #173
 666 006e FFF7FEFF 		bl	SPI_RW
 667              	.LVL39:
 668 0072 AD28     		cmp	r0, #173
 669 0074 1ED1     		bne	.L48
 273:Src/icmu.c    **** 				{
 274:Src/icmu.c    **** 					sta = SPI_RW(0);
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 19


 670              		.loc 1 274 0
 671 0076 2846     		mov	r0, r5
 672 0078 FFF7FEFF 		bl	SPI_RW
 673              	.LVL40:
 674 007c 8146     		mov	r9, r0
 675              	.LVL41:
 275:Src/icmu.c    **** 					reg = SPI_RW(0);
 676              		.loc 1 275 0
 677 007e 2846     		mov	r0, r5
 678 0080 FFF7FEFF 		bl	SPI_RW
 679              	.LVL42:
 276:Src/icmu.c    **** 					if( sta & 0x01)
 680              		.loc 1 276 0
 681 0084 19F0010F 		tst	r9, #1
 275:Src/icmu.c    **** 					reg = SPI_RW(0);
 682              		.loc 1 275 0
 683 0088 C6B2     		uxtb	r6, r0
 684              	.LVL43:
 685              		.loc 1 276 0
 686 008a 13D0     		beq	.L48
 277:Src/icmu.c    **** 					{
 278:Src/icmu.c    **** 						if(reg & 0x40)
 279:Src/icmu.c    **** 						{
 280:Src/icmu.c    **** 						}
 281:Src/icmu.c    **** 						else
 282:Src/icmu.c    **** 						{
 283:Src/icmu.c    **** 							Flag_error_read_eeprom =0;
 284:Src/icmu.c    **** 						}
 285:Src/icmu.c    **** 						g_CmdMap[0x12b] = reg;
 687              		.loc 1 285 0
 688 008c 0E4A     		ldr	r2, .L56+4
 278:Src/icmu.c    **** 						{
 689              		.loc 1 278 0
 690 008e 7306     		lsls	r3, r6, #25
 691              		.loc 1 285 0
 692 0090 33B2     		sxth	r3, r6
 283:Src/icmu.c    **** 						}
 693              		.loc 1 283 0
 694 0092 58BF     		it	pl
 695 0094 C8F80050 		strpl	r5, [r8]
 696              		.loc 1 285 0
 697 0098 A2F85632 		strh	r3, [r2, #598]	@ movhi
 698              	.LVL44:
 699              	.L50:
 286:Src/icmu.c    **** 						break;
 287:Src/icmu.c    **** 					}
 288:Src/icmu.c    **** 				}
 289:Src/icmu.c    **** 				
 290:Src/icmu.c    **** 			}while( i++ < 10);
 291:Src/icmu.c    **** 			
 292:Src/icmu.c    ****     }
 293:Src/icmu.c    ****   }
 294:Src/icmu.c    ****   sta = sta;
 295:Src/icmu.c    **** 	
 296:Src/icmu.c    **** 	delay__ms(100);
 700              		.loc 1 296 0
 701 009c 6420     		movs	r0, #100
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 20


 702 009e FFF7FEFF 		bl	delay__ms
 703              	.LVL45:
 297:Src/icmu.c    ****  
 298:Src/icmu.c    **** 
 299:Src/icmu.c    **** 	
 300:Src/icmu.c    **** 
 301:Src/icmu.c    **** 
 302:Src/icmu.c    ****   return reg;
 303:Src/icmu.c    **** }
 704              		.loc 1 303 0
 705 00a2 3046     		mov	r0, r6
 706 00a4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 707              	.LVL46:
 708              	.L45:
 709              	.LBB28:
 710              	.LBB23:
 711              	.LBB22:
  35:Src/icmu.c    **** }
 712              		.loc 1 35 0
 713 00a8 FFF7FEFF 		bl	__nop
 714              	.LVL47:
 715 00ac D2E7     		b	.L44
 716              	.LVL48:
 717              	.L47:
 718              	.LBE22:
 719              	.LBE23:
 720              	.LBE28:
 721              	.LBB29:
 722              	.LBB27:
 723              	.LBB26:
 724 00ae FFF7FEFF 		bl	__nop
 725              	.LVL49:
 726 00b2 D8E7     		b	.L46
 727              	.LVL50:
 728              	.L48:
 729 00b4 013F     		subs	r7, r7, #1
 730              	.LVL51:
 731              	.LBE26:
 732              	.LBE27:
 733              	.LBE29:
 290:Src/icmu.c    **** 			
 734              		.loc 1 290 0
 735 00b6 17F0FF07 		ands	r7, r7, #255
 736 00ba C5D1     		bne	.L51
 737 00bc EEE7     		b	.L50
 738              	.LVL52:
 739              	.L43:
 250:Src/icmu.c    ****   uint8_t sta = 0;
 740              		.loc 1 250 0
 741 00be 0026     		movs	r6, #0
 742 00c0 ECE7     		b	.L50
 743              	.L57:
 744 00c2 00BF     		.align	2
 745              	.L56:
 746 00c4 00000000 		.word	.LANCHOR3
 747 00c8 00000000 		.word	g_CmdMap
 748              		.cfi_endproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 21


 749              	.LFE345:
 751              		.section	.text.icmu_spi_init,"ax",%progbits
 752              		.align	1
 753              		.global	icmu_spi_init
 754              		.syntax unified
 755              		.thumb
 756              		.thumb_func
 757              		.fpu fpv4-sp-d16
 759              	icmu_spi_init:
 760              	.LFB338:
 149:Src/icmu.c    ****   uint8_t icmu_reg = 0;  
 761              		.loc 1 149 0
 762              		.cfi_startproc
 763              		@ args = 0, pretend = 0, frame = 0
 764              		@ frame_needed = 0, uses_anonymous_args = 0
 765              	.LVL53:
 766 0000 08B5     		push	{r3, lr}
 767              	.LCFI10:
 768              		.cfi_def_cfa_offset 8
 769              		.cfi_offset 3, -8
 770              		.cfi_offset 14, -4
 151:Src/icmu.c    **** 
 771              		.loc 1 151 0
 772 0002 FFF7FEFF 		bl	SPI1_Init
 773              	.LVL54:
 154:Src/icmu.c    **** 	
 774              		.loc 1 154 0
 775 0006 7720     		movs	r0, #119
 776 0008 FFF7FEFF 		bl	icmu_read_reg
 777              	.LVL55:
 157:Src/icmu.c    **** static uint16_t SPI_RW(uint16_t data)
 778              		.loc 1 157 0
 779 000c 0120     		movs	r0, #1
 780 000e 08BD     		pop	{r3, pc}
 781              		.cfi_endproc
 782              	.LFE338:
 784              		.section	.text.icmu_write_reg,"ax",%progbits
 785              		.align	1
 786              		.global	icmu_write_reg
 787              		.syntax unified
 788              		.thumb
 789              		.thumb_func
 790              		.fpu fpv4-sp-d16
 792              	icmu_write_reg:
 793              	.LFB346:
 304:Src/icmu.c    **** 
 305:Src/icmu.c    **** uint8_t icmu_write_reg(uint8_t addr, uint8_t data)
 306:Src/icmu.c    **** {
 794              		.loc 1 306 0
 795              		.cfi_startproc
 796              		@ args = 0, pretend = 0, frame = 0
 797              		@ frame_needed = 0, uses_anonymous_args = 0
 798              	.LVL56:
 799 0000 70B5     		push	{r4, r5, r6, lr}
 800              	.LCFI11:
 801              		.cfi_def_cfa_offset 16
 802              		.cfi_offset 4, -16
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 22


 803              		.cfi_offset 5, -12
 804              		.cfi_offset 6, -8
 805              		.cfi_offset 14, -4
 307:Src/icmu.c    ****   SPI1_CS_EN;
 806              		.loc 1 307 0
 807 0002 4FF09044 		mov	r4, #1207959552
 306:Src/icmu.c    ****   SPI1_CS_EN;
 808              		.loc 1 306 0
 809 0006 0646     		mov	r6, r0
 810              		.loc 1 307 0
 811 0008 6369     		ldr	r3, [r4, #20]
 812 000a 23F01003 		bic	r3, r3, #16
 813 000e 6361     		str	r3, [r4, #20]
 308:Src/icmu.c    ****   if (CMD_REG_WRITE == SPI_RW(CMD_REG_WRITE))
 814              		.loc 1 308 0
 815 0010 D220     		movs	r0, #210
 816              	.LVL57:
 306:Src/icmu.c    ****   SPI1_CS_EN;
 817              		.loc 1 306 0
 818 0012 0D46     		mov	r5, r1
 819              		.loc 1 308 0
 820 0014 FFF7FEFF 		bl	SPI_RW
 821              	.LVL58:
 822 0018 D228     		cmp	r0, #210
 823 001a 11D1     		bne	.L60
 309:Src/icmu.c    ****   {
 310:Src/icmu.c    ****     if (addr == SPI_RW(addr))
 824              		.loc 1 310 0
 825 001c B6B2     		uxth	r6, r6
 826 001e 3046     		mov	r0, r6
 827 0020 FFF7FEFF 		bl	SPI_RW
 828              	.LVL59:
 829 0024 8642     		cmp	r6, r0
 830 0026 0BD1     		bne	.L60
 311:Src/icmu.c    ****     {
 312:Src/icmu.c    ****       if (data == SPI_RW(data))
 831              		.loc 1 312 0
 832 0028 ADB2     		uxth	r5, r5
 833 002a 2846     		mov	r0, r5
 834 002c FFF7FEFF 		bl	SPI_RW
 835              	.LVL60:
 836 0030 8542     		cmp	r5, r0
 837 0032 05D1     		bne	.L60
 838              	.LVL61:
 839              	.LBB32:
 840              	.LBB33:
 313:Src/icmu.c    ****       {
 314:Src/icmu.c    ****         SPI1_CS_DIS;
 841              		.loc 1 314 0
 842 0034 6369     		ldr	r3, [r4, #20]
 843 0036 43F01003 		orr	r3, r3, #16
 844 003a 6361     		str	r3, [r4, #20]
 845 003c 0120     		movs	r0, #1
 846              	.L61:
 847              	.LBE33:
 848              	.LBE32:
 315:Src/icmu.c    ****         return 1;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 23


 316:Src/icmu.c    ****       }
 317:Src/icmu.c    ****     }
 318:Src/icmu.c    ****   }
 319:Src/icmu.c    ****   SPI1_CS_DIS;
 320:Src/icmu.c    ****   return 0;
 321:Src/icmu.c    **** }
 849              		.loc 1 321 0
 850 003e 70BD     		pop	{r4, r5, r6, pc}
 851              	.L60:
 319:Src/icmu.c    ****   return 0;
 852              		.loc 1 319 0
 853 0040 4FF09042 		mov	r2, #1207959552
 320:Src/icmu.c    **** }
 854              		.loc 1 320 0
 855 0044 0020     		movs	r0, #0
 319:Src/icmu.c    ****   return 0;
 856              		.loc 1 319 0
 857 0046 5369     		ldr	r3, [r2, #20]
 858 0048 43F01003 		orr	r3, r3, #16
 859 004c 5361     		str	r3, [r2, #20]
 320:Src/icmu.c    **** }
 860              		.loc 1 320 0
 861 004e F6E7     		b	.L61
 862              		.cfi_endproc
 863              	.LFE346:
 865              		.section	.text.icmu_reg_status,"ax",%progbits
 866              		.align	1
 867              		.global	icmu_reg_status
 868              		.syntax unified
 869              		.thumb
 870              		.thumb_func
 871              		.fpu fpv4-sp-d16
 873              	icmu_reg_status:
 874              	.LFB347:
 322:Src/icmu.c    **** 
 323:Src/icmu.c    **** uint8_t icmu_reg_status(void)
 324:Src/icmu.c    **** {
 875              		.loc 1 324 0
 876              		.cfi_startproc
 877              		@ args = 0, pretend = 0, frame = 0
 878              		@ frame_needed = 0, uses_anonymous_args = 0
 879 0000 10B5     		push	{r4, lr}
 880              	.LCFI12:
 881              		.cfi_def_cfa_offset 8
 882              		.cfi_offset 4, -8
 883              		.cfi_offset 14, -4
 325:Src/icmu.c    ****   SPI1_CS_EN;
 884              		.loc 1 325 0
 885 0002 4FF09044 		mov	r4, #1207959552
 326:Src/icmu.c    ****   if (CMD_SD_STATUS == SPI_RW(CMD_SD_STATUS))
 886              		.loc 1 326 0
 887 0006 F520     		movs	r0, #245
 325:Src/icmu.c    ****   SPI1_CS_EN;
 888              		.loc 1 325 0
 889 0008 6369     		ldr	r3, [r4, #20]
 890 000a 23F01003 		bic	r3, r3, #16
 891 000e 6361     		str	r3, [r4, #20]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 24


 892              		.loc 1 326 0
 893 0010 FFF7FEFF 		bl	SPI_RW
 894              	.LVL62:
 895 0014 F528     		cmp	r0, #245
 896 0016 0AD1     		bne	.L63
 327:Src/icmu.c    ****   {
 328:Src/icmu.c    ****     if (SPI_RW(0) == 0x80)
 897              		.loc 1 328 0
 898 0018 0020     		movs	r0, #0
 899 001a FFF7FEFF 		bl	SPI_RW
 900              	.LVL63:
 329:Src/icmu.c    ****     {
 330:Src/icmu.c    ****       SPI1_CS_DIS;
 901              		.loc 1 330 0
 902 001e 6369     		ldr	r3, [r4, #20]
 328:Src/icmu.c    ****     {
 903              		.loc 1 328 0
 904 0020 8028     		cmp	r0, #128
 905              		.loc 1 330 0
 906 0022 43F01003 		orr	r3, r3, #16
 907 0026 6361     		str	r3, [r4, #20]
 328:Src/icmu.c    ****     {
 908              		.loc 1 328 0
 909 0028 05D1     		bne	.L66
 331:Src/icmu.c    ****       return 1;
 910              		.loc 1 331 0
 911 002a 0120     		movs	r0, #1
 912              	.L65:
 332:Src/icmu.c    ****     }
 333:Src/icmu.c    ****     else
 334:Src/icmu.c    ****     {
 335:Src/icmu.c    ****       SPI1_CS_DIS;
 336:Src/icmu.c    ****       return 0;
 337:Src/icmu.c    ****     }
 338:Src/icmu.c    ****   }
 339:Src/icmu.c    ****   SPI1_CS_DIS;
 340:Src/icmu.c    ****   return 0;
 341:Src/icmu.c    **** }
 913              		.loc 1 341 0
 914 002c 10BD     		pop	{r4, pc}
 915              	.L63:
 339:Src/icmu.c    ****   return 0;
 916              		.loc 1 339 0
 917 002e 6369     		ldr	r3, [r4, #20]
 918 0030 43F01003 		orr	r3, r3, #16
 919 0034 6361     		str	r3, [r4, #20]
 920              	.L66:
 340:Src/icmu.c    **** }
 921              		.loc 1 340 0
 922 0036 0020     		movs	r0, #0
 923 0038 F8E7     		b	.L65
 924              		.cfi_endproc
 925              	.LFE347:
 927              		.section	.text.icmu_cmu_mu,"ax",%progbits
 928              		.align	1
 929              		.global	icmu_cmu_mu
 930              		.syntax unified
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 25


 931              		.thumb
 932              		.thumb_func
 933              		.fpu fpv4-sp-d16
 935              	icmu_cmu_mu:
 936              	.LFB348:
 342:Src/icmu.c    **** 
 343:Src/icmu.c    **** 
 344:Src/icmu.c    **** /*
 345:Src/icmu.c    **** 0x01 WRITE_ALL Write internal configuration and Offset values to EEPROM
 346:Src/icmu.c    **** 0x02 WRITE_OFF Write internal Offset values to EEPROM
 347:Src/icmu.c    **** 0x03 ABS_RESET Reset of Absolute value (including ABZ-part)
 348:Src/icmu.c    **** 0x04 NON_VER Verification of actual position by doing a nonius calculation
 349:Src/icmu.c    **** 0x05 MT_RESET New read in and synchronisation of multiturn value
 350:Src/icmu.c    **** 0x06 MT_VER Read in of multiturn and verification of counted multiturn value
 351:Src/icmu.c    **** 0x07 SOFT_RESET startup with read in of EEPROM
 352:Src/icmu.c    **** 0x08 SOFT_PRES Set output to preset
 353:Src/icmu.c    **** 0x09 SOFT_E2P_PRES Set output to preset and save offset values to EEPROM
 354:Src/icmu.c    **** 0x0A E2P_COM start EEPROM communication
 355:Src/icmu.c    **** 0x0B EVENT_COUNT increment event counter by 1
 356:Src/icmu.c    **** 0x0C SWITCH A variant of WRITE_ALL to write configurations of MODEA and RPL which inhibit register 
 357:Src/icmu.c    **** 0x0D CRC_VER Verification of CRC16 and CRC8
 358:Src/icmu.c    **** 0x0E CRC_CALC Recalculate internal CRC16 and CRC8 values
 359:Src/icmu.c    **** 0x0F SET_MTC Set MTC-Pin *)
 360:Src/icmu.c    **** 0x10 RES_MTC Reset MTC-Pin *)
 361:Src/icmu.c    **** 0xFF no function
 362:Src/icmu.c    **** Note: *) MODE_MT=0x00
 363:Src/icmu.c    **** */
 364:Src/icmu.c    **** void icmu_cmu_mu(uint8_t cmd)
 365:Src/icmu.c    **** {
 937              		.loc 1 365 0
 938              		.cfi_startproc
 939              		@ args = 0, pretend = 0, frame = 0
 940              		@ frame_needed = 0, uses_anonymous_args = 0
 941              		@ link register save eliminated.
 942              	.LVL64:
 366:Src/icmu.c    **** 	
 367:Src/icmu.c    **** 
 368:Src/icmu.c    ****   icmu_write_reg(0x75,cmd);
 943              		.loc 1 368 0
 944 0000 0146     		mov	r1, r0
 945 0002 7520     		movs	r0, #117
 946              	.LVL65:
 947 0004 FFF7FEBF 		b	icmu_write_reg
 948              	.LVL66:
 949              		.cfi_endproc
 950              	.LFE348:
 952              		.section	.text.DMA1_Channel3_IRQHandler,"ax",%progbits
 953              		.align	1
 954              		.global	DMA1_Channel3_IRQHandler
 955              		.syntax unified
 956              		.thumb
 957              		.thumb_func
 958              		.fpu fpv4-sp-d16
 960              	DMA1_Channel3_IRQHandler:
 961              	.LFB349:
 369:Src/icmu.c    **** }
 370:Src/icmu.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 26


 371:Src/icmu.c    **** #endif
 372:Src/icmu.c    **** 
 373:Src/icmu.c    **** 
 374:Src/icmu.c    **** 
 375:Src/icmu.c    **** 
 376:Src/icmu.c    **** 
 377:Src/icmu.c    **** 
 378:Src/icmu.c    **** 
 379:Src/icmu.c    **** 
 380:Src/icmu.c    **** 
 381:Src/icmu.c    **** 
 382:Src/icmu.c    **** 
 383:Src/icmu.c    **** 
 384:Src/icmu.c    **** 
 385:Src/icmu.c    **** 
 386:Src/icmu.c    **** 
 387:Src/icmu.c    **** void DMA1_Channel3_IRQHandler(void)// ��������ж�
 388:Src/icmu.c    **** {
 962              		.loc 1 388 0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966              		@ link register save eliminated.
 389:Src/icmu.c    **** 		if( ( hdma_spi1_tx.DmaBaseAddress->ISR & DMA_FLAG_TC3 ) )
 967              		.loc 1 389 0
 968 0000 0749     		ldr	r1, .L73
 969 0002 0B6C     		ldr	r3, [r1, #64]
 970 0004 1A68     		ldr	r2, [r3]
 971 0006 9205     		lsls	r2, r2, #22
 972 0008 08D5     		bpl	.L68
 390:Src/icmu.c    **** 		{
 391:Src/icmu.c    **** 			hdma_spi1_tx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC3;
 973              		.loc 1 391 0
 974 000a 5A68     		ldr	r2, [r3, #4]
 975 000c 42F40072 		orr	r2, r2, #512
 976 0010 5A60     		str	r2, [r3, #4]
 392:Src/icmu.c    **** 			__HAL_DMA_DISABLE(&hdma_spi1_tx);
 977              		.loc 1 392 0
 978 0012 0A68     		ldr	r2, [r1]
 979 0014 1368     		ldr	r3, [r2]
 980 0016 23F00103 		bic	r3, r3, #1
 981 001a 1360     		str	r3, [r2]
 982              	.L68:
 393:Src/icmu.c    **** //			SPI1_CS_DIS;
 394:Src/icmu.c    **** 		}
 395:Src/icmu.c    **** }
 983              		.loc 1 395 0
 984 001c 7047     		bx	lr
 985              	.L74:
 986 001e 00BF     		.align	2
 987              	.L73:
 988 0020 00000000 		.word	hdma_spi1_tx
 989              		.cfi_endproc
 990              	.LFE349:
 992              		.section	.text.DMA1_Channel4_IRQHandler,"ax",%progbits
 993              		.align	1
 994              		.global	DMA1_Channel4_IRQHandler
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 27


 995              		.syntax unified
 996              		.thumb
 997              		.thumb_func
 998              		.fpu fpv4-sp-d16
 1000              	DMA1_Channel4_IRQHandler:
 1001              	.LFB350:
 396:Src/icmu.c    **** s32 error_encoder = 0;
 397:Src/icmu.c    **** 
 398:Src/icmu.c    **** void DMA1_Channel4_IRQHandler(void)// �ɼ���һ�� MU��ֵ�ж�һ�Σ����
 399:Src/icmu.c    **** {
 1002              		.loc 1 399 0
 1003              		.cfi_startproc
 1004              		@ args = 0, pretend = 0, frame = 0
 1005              		@ frame_needed = 0, uses_anonymous_args = 0
 400:Src/icmu.c    ****     static int read_cnt = 0; // ÉÏµçÎª0
 401:Src/icmu.c    **** 		if( ( hdma_spi1_rx.DmaBaseAddress->ISR & DMA_FLAG_TC4 ))
 1006              		.loc 1 401 0
 1007 0000 1B4B     		ldr	r3, .L82
 1008 0002 1B6C     		ldr	r3, [r3, #64]
 1009 0004 1A68     		ldr	r2, [r3]
 1010 0006 9204     		lsls	r2, r2, #18
 399:Src/icmu.c    ****     static int read_cnt = 0; // ÉÏµçÎª0
 1011              		.loc 1 399 0
 1012 0008 10B5     		push	{r4, lr}
 1013              	.LCFI13:
 1014              		.cfi_def_cfa_offset 8
 1015              		.cfi_offset 4, -8
 1016              		.cfi_offset 14, -4
 1017              		.loc 1 401 0
 1018 000a 30D5     		bpl	.L75
 402:Src/icmu.c    **** 		{
 403:Src/icmu.c    **** 
 404:Src/icmu.c    ****       read_cnt++;
 405:Src/icmu.c    **** 			hdma_spi1_rx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC4;
 1019              		.loc 1 405 0
 1020 000c 5A68     		ldr	r2, [r3, #4]
 404:Src/icmu.c    **** 			hdma_spi1_rx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC4;
 1021              		.loc 1 404 0
 1022 000e 1948     		ldr	r0, .L82+4
 1023              		.loc 1 405 0
 1024 0010 42F40052 		orr	r2, r2, #8192
 1025 0014 5A60     		str	r2, [r3, #4]
 406:Src/icmu.c    **** 
 407:Src/icmu.c    **** 			#if defined(MU_VALUE_INCREASE_REACH)    //�Ƹ����MU��ֵ����
 408:Src/icmu.c    **** 				MU_Value =((((uint32_t)spi1_reg_buf[1])<<16)+(((uint32_t)spi1_reg_buf[2])<<8)+(((uint32_t)spi1_
 1026              		.loc 1 408 0
 1027 0016 184A     		ldr	r2, .L82+8
 404:Src/icmu.c    **** 			hdma_spi1_rx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC4;
 1028              		.loc 1 404 0
 1029 0018 0168     		ldr	r1, [r0]
 1030              		.loc 1 408 0
 1031 001a 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 1032 001c 5478     		ldrb	r4, [r2, #1]	@ zero_extendqisi2
 1033 001e 1B02     		lsls	r3, r3, #8
 1034 0020 03EB0443 		add	r3, r3, r4, lsl #16
 1035 0024 D478     		ldrb	r4, [r2, #3]	@ zero_extendqisi2
 1036 0026 2344     		add	r3, r3, r4
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 28


 1037 0028 144C     		ldr	r4, .L82+12
 1038 002a 2360     		str	r3, [r4]
 409:Src/icmu.c    **** 			#else																		//�Ƹ����MU��ֵ����
 410:Src/icmu.c    **** 				MU_Value =MAX_VALUE_ICMU - ((((uint32_t)spi1_reg_buf[1])<<16)+(((uint32_t)spi1_reg_buf[2])<<8)+
 411:Src/icmu.c    **** 			#endif
 412:Src/icmu.c    **** 			Flag_MU_read = 1;
 1039              		.loc 1 412 0
 1040 002c 144B     		ldr	r3, .L82+16
 1041 002e 0124     		movs	r4, #1
 1042 0030 1C70     		strb	r4, [r3]
 413:Src/icmu.c    **** 			SPI1_CS_DIS;
 1043              		.loc 1 413 0
 1044 0032 4FF09044 		mov	r4, #1207959552
 404:Src/icmu.c    **** 			hdma_spi1_rx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC4;
 1045              		.loc 1 404 0
 1046 0036 0131     		adds	r1, r1, #1
 1047              		.loc 1 413 0
 1048 0038 6369     		ldr	r3, [r4, #20]
 404:Src/icmu.c    **** 			hdma_spi1_rx.DmaBaseAddress->IFCR |=  DMA_FLAG_TC4;
 1049              		.loc 1 404 0
 1050 003a 0160     		str	r1, [r0]
 1051              		.loc 1 413 0
 1052 003c 43F01003 		orr	r3, r3, #16
 414:Src/icmu.c    **** 
 415:Src/icmu.c    **** 
 416:Src/icmu.c    **** 			if(read_cnt > 1000)
 1053              		.loc 1 416 0
 1054 0040 B1F57A7F 		cmp	r1, #1000
 413:Src/icmu.c    **** 
 1055              		.loc 1 413 0
 1056 0044 6361     		str	r3, [r4, #20]
 1057              		.loc 1 416 0
 1058 0046 12DD     		ble	.L75
 417:Src/icmu.c    **** 			{
 418:Src/icmu.c    **** 				read_cnt = 1001;
 1059              		.loc 1 418 0
 1060 0048 40F2E933 		movw	r3, #1001
 1061 004c 0360     		str	r3, [r0]
 419:Src/icmu.c    **** 				if( spi1_reg_buf[0] != 0xA6 )
 1062              		.loc 1 419 0
 1063 004e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1064 0050 A62B     		cmp	r3, #166
 1065 0052 0CD0     		beq	.L75
 420:Src/icmu.c    **** 				{
 421:Src/icmu.c    **** 					
 422:Src/icmu.c    **** 					if( g_CmdMap[TAG_WORK_MODE] == MODE_POSITION)
 1066              		.loc 1 422 0
 1067 0054 0B4A     		ldr	r2, .L82+20
 1068 0056 B2F80432 		ldrh	r3, [r2, #516]
 1069 005a 1BB2     		sxth	r3, r3
 1070 005c 032B     		cmp	r3, #3
 423:Src/icmu.c    **** 						g_CmdMap[CMD_ERROR] |= ERROR_MASK_LINEAR_MAGNETIC_SENSOR_FAULT;
 1071              		.loc 1 423 0
 1072 005e 01BF     		itttt	eq
 1073 0060 B2F85430 		ldrheq	r3, [r2, #84]
 1074 0064 1BB2     		sxtheq	r3, r3
 1075 0066 43F40063 		orreq	r3, r3, #2048
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 29


 1076 006a A2F85430 		strheq	r3, [r2, #84]	@ movhi
 1077              	.L75:
 424:Src/icmu.c    **** 				}
 425:Src/icmu.c    **** 			}
 426:Src/icmu.c    **** 			if(  spi1_reg_buf[0] == 0xA6 )
 427:Src/icmu.c    **** 			{
 428:Src/icmu.c    **** 			//	read_cnt = 0;
 429:Src/icmu.c    **** 			}
 430:Src/icmu.c    **** 
 431:Src/icmu.c    **** 		}
 432:Src/icmu.c    **** }
 1078              		.loc 1 432 0
 1079 006e 10BD     		pop	{r4, pc}
 1080              	.L83:
 1081              		.align	2
 1082              	.L82:
 1083 0070 00000000 		.word	hdma_spi1_rx
 1084 0074 00000000 		.word	.LANCHOR4
 1085 0078 00000000 		.word	.LANCHOR0
 1086 007c 00000000 		.word	.LANCHOR5
 1087 0080 00000000 		.word	.LANCHOR6
 1088 0084 00000000 		.word	g_CmdMap
 1089              		.cfi_endproc
 1090              	.LFE350:
 1092              		.section	.text.icmu_sdtransmission_test,"ax",%progbits
 1093              		.align	1
 1094              		.global	icmu_sdtransmission_test
 1095              		.syntax unified
 1096              		.thumb
 1097              		.thumb_func
 1098              		.fpu fpv4-sp-d16
 1100              	icmu_sdtransmission_test:
 1101              	.LFB351:
 433:Src/icmu.c    **** 
 434:Src/icmu.c    **** 
 435:Src/icmu.c    **** void icmu_sdtransmission_test(void)
 436:Src/icmu.c    **** {
 1102              		.loc 1 436 0
 1103              		.cfi_startproc
 1104              		@ args = 0, pretend = 0, frame = 0
 1105              		@ frame_needed = 0, uses_anonymous_args = 0
 1106              		@ link register save eliminated.
 437:Src/icmu.c    **** //	SPI1_CS_EN;
 438:Src/icmu.c    **** //	DMA_SetCurrDataCounter(DMA1_Channel3,4);//DMA2_Stream3->NDTR = 4;	
 439:Src/icmu.c    **** 	__HAL_DMA_DISABLE(&hdma_spi1_tx);
 1107              		.loc 1 439 0
 1108 0000 064B     		ldr	r3, .L85
 1109 0002 1B68     		ldr	r3, [r3]
 1110 0004 1A68     		ldr	r2, [r3]
 1111 0006 22F00102 		bic	r2, r2, #1
 1112 000a 1A60     		str	r2, [r3]
 440:Src/icmu.c    **** 	hdma_spi1_tx.Instance->CNDTR =4;
 1113              		.loc 1 440 0
 1114 000c 0422     		movs	r2, #4
 1115 000e 5A60     		str	r2, [r3, #4]
 441:Src/icmu.c    **** 	__HAL_DMA_ENABLE(&hdma_spi1_tx);
 1116              		.loc 1 441 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 30


 1117 0010 1A68     		ldr	r2, [r3]
 1118 0012 42F00102 		orr	r2, r2, #1
 1119 0016 1A60     		str	r2, [r3]
 442:Src/icmu.c    **** }
 1120              		.loc 1 442 0
 1121 0018 7047     		bx	lr
 1122              	.L86:
 1123 001a 00BF     		.align	2
 1124              	.L85:
 1125 001c 00000000 		.word	hdma_spi1_tx
 1126              		.cfi_endproc
 1127              	.LFE351:
 1129              		.section	.text.get_MU_Value_block,"ax",%progbits
 1130              		.align	1
 1131              		.global	get_MU_Value_block
 1132              		.syntax unified
 1133              		.thumb
 1134              		.thumb_func
 1135              		.fpu fpv4-sp-d16
 1137              	get_MU_Value_block:
 1138              	.LFB342:
 203:Src/icmu.c    **** 		static s32 count_wait = 0;
 1139              		.loc 1 203 0
 1140              		.cfi_startproc
 1141              		@ args = 0, pretend = 0, frame = 0
 1142              		@ frame_needed = 0, uses_anonymous_args = 0
 1143 0000 38B5     		push	{r3, r4, r5, lr}
 1144              	.LCFI14:
 1145              		.cfi_def_cfa_offset 16
 1146              		.cfi_offset 3, -16
 1147              		.cfi_offset 4, -12
 1148              		.cfi_offset 5, -8
 1149              		.cfi_offset 14, -4
 205:Src/icmu.c    **** 		icmu_sdtransmission_test();		
 1150              		.loc 1 205 0
 1151 0002 0D4C     		ldr	r4, .L92
 1152              	.LBB34:
 209:Src/icmu.c    **** 			{
 1153              		.loc 1 209 0
 1154 0004 0D4D     		ldr	r5, .L92+4
 1155              	.LBE34:
 205:Src/icmu.c    **** 		icmu_sdtransmission_test();		
 1156              		.loc 1 205 0
 1157 0006 0023     		movs	r3, #0
 1158 0008 2370     		strb	r3, [r4]
 206:Src/icmu.c    **** 		while(Flag_MU_read == 0)
 1159              		.loc 1 206 0
 1160 000a FFF7FEFF 		bl	icmu_sdtransmission_test
 1161              	.LVL67:
 1162              	.L88:
 207:Src/icmu.c    **** 		{
 1163              		.loc 1 207 0
 1164 000e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1165 0010 03F0FF00 		and	r0, r3, #255
 1166 0014 0BB1     		cbz	r3, .L91
 217:Src/icmu.c    **** }
 1167              		.loc 1 217 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 31


 1168 0016 0120     		movs	r0, #1
 1169 0018 06E0     		b	.L90
 1170              	.L91:
 1171              	.LBB35:
 209:Src/icmu.c    **** 			{
 1172              		.loc 1 209 0
 1173 001a 2B68     		ldr	r3, [r5]
 1174 001c B3F5967F 		cmp	r3, #300
 1175 0020 03DD     		ble	.L89
 211:Src/icmu.c    **** 				return 0;
 1176              		.loc 1 211 0
 1177 0022 074B     		ldr	r3, .L92+8
 1178 0024 0122     		movs	r2, #1
 1179 0026 1A70     		strb	r2, [r3]
 1180              	.L90:
 1181              	.LBE35:
 218:Src/icmu.c    **** uint8_t icmu_sdstatus(void)
 1182              		.loc 1 218 0
 1183 0028 38BD     		pop	{r3, r4, r5, pc}
 1184              	.L89:
 1185              	.LBB36:
 214:Src/icmu.c    **** 			delay_ms(1);			
 1186              		.loc 1 214 0
 1187 002a 0133     		adds	r3, r3, #1
 215:Src/icmu.c    **** 		}
 1188              		.loc 1 215 0
 1189 002c 0120     		movs	r0, #1
 214:Src/icmu.c    **** 			delay_ms(1);			
 1190              		.loc 1 214 0
 1191 002e 2B60     		str	r3, [r5]
 215:Src/icmu.c    **** 		}
 1192              		.loc 1 215 0
 1193 0030 FFF7FEFF 		bl	delay_ms
 1194              	.LVL68:
 1195 0034 EBE7     		b	.L88
 1196              	.L93:
 1197 0036 00BF     		.align	2
 1198              	.L92:
 1199 0038 00000000 		.word	.LANCHOR6
 1200 003c 00000000 		.word	.LANCHOR7
 1201 0040 00000000 		.word	Flag_error_MU_SPI
 1202              	.LBE36:
 1203              		.cfi_endproc
 1204              	.LFE342:
 1206              		.section	.text.clear_eeprom_erro,"ax",%progbits
 1207              		.align	1
 1208              		.global	clear_eeprom_erro
 1209              		.syntax unified
 1210              		.thumb
 1211              		.thumb_func
 1212              		.fpu fpv4-sp-d16
 1214              	clear_eeprom_erro:
 1215              	.LFB352:
 443:Src/icmu.c    **** 
 444:Src/icmu.c    **** void clear_eeprom_erro(void)
 445:Src/icmu.c    **** {
 1216              		.loc 1 445 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 32


 1217              		.cfi_startproc
 1218              		@ args = 0, pretend = 0, frame = 0
 1219              		@ frame_needed = 0, uses_anonymous_args = 0
 1220              		@ link register save eliminated.
 446:Src/icmu.c    ****   Flag_error_read_eeprom =0;
 1221              		.loc 1 446 0
 1222 0000 014B     		ldr	r3, .L95
 1223 0002 0022     		movs	r2, #0
 1224 0004 1A60     		str	r2, [r3]
 447:Src/icmu.c    **** 
 448:Src/icmu.c    **** }
 1225              		.loc 1 448 0
 1226 0006 7047     		bx	lr
 1227              	.L96:
 1228              		.align	2
 1229              	.L95:
 1230 0008 00000000 		.word	.LANCHOR3
 1231              		.cfi_endproc
 1232              	.LFE352:
 1234              		.section	.text.icmu_eerpom_erro_detect,"ax",%progbits
 1235              		.align	1
 1236              		.global	icmu_eerpom_erro_detect
 1237              		.syntax unified
 1238              		.thumb
 1239              		.thumb_func
 1240              		.fpu fpv4-sp-d16
 1242              	icmu_eerpom_erro_detect:
 1243              	.LFB353:
 449:Src/icmu.c    **** 
 450:Src/icmu.c    **** 
 451:Src/icmu.c    **** void icmu_eerpom_erro_detect(void)
 452:Src/icmu.c    **** {
 1244              		.loc 1 452 0
 1245              		.cfi_startproc
 1246              		@ args = 0, pretend = 0, frame = 0
 1247              		@ frame_needed = 0, uses_anonymous_args = 0
 1248              		@ link register save eliminated.
 453:Src/icmu.c    **** 	if(Flag_error_read_eeprom)
 1249              		.loc 1 453 0
 1250 0000 054B     		ldr	r3, .L102
 1251 0002 1B68     		ldr	r3, [r3]
 1252 0004 3BB1     		cbz	r3, .L97
 454:Src/icmu.c    **** 	{
 455:Src/icmu.c    **** 		g_CmdMap[CMD_ERROR] |= ERROR_MASK_LINEAR_MAGNETIC_SENSOR_FAULT;
 1253              		.loc 1 455 0
 1254 0006 054A     		ldr	r2, .L102+4
 1255 0008 B2F85430 		ldrh	r3, [r2, #84]
 1256 000c 1BB2     		sxth	r3, r3
 1257 000e 43F40063 		orr	r3, r3, #2048
 1258 0012 A2F85430 		strh	r3, [r2, #84]	@ movhi
 1259              	.L97:
 456:Src/icmu.c    **** 	}
 457:Src/icmu.c    **** }
 1260              		.loc 1 457 0
 1261 0016 7047     		bx	lr
 1262              	.L103:
 1263              		.align	2
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 33


 1264              	.L102:
 1265 0018 00000000 		.word	.LANCHOR3
 1266 001c 00000000 		.word	g_CmdMap
 1267              		.cfi_endproc
 1268              	.LFE353:
 1270              		.global	error_encoder
 1271              		.comm	hdma_spi1_tx,96,4
 1272              		.comm	hdma_spi1_rx,96,4
 1273              		.comm	hspi1,100,4
 1274              		.global	Flag_MU_read
 1275              		.global	MU_Vlaue_last
 1276              		.global	Speed_DltAng_pls
 1277              		.global	Speed_T
 1278              		.global	MU_Value_last
 1279              		.global	MU_Value
 1280              		.global	p_MU_Value
 1281              		.global	spi1_reg
 1282              		.global	spi1_reg_buf
 1283              		.global	MECode_offset_ICHaus
 1284              		.global	Ang_reg_Count
 1285              		.global	Ang_reg_Sum
 1286              		.global	Ang_reg_Index_Last
 1287              		.global	Ang_reg_Index
 1288              		.global	Ang_reg
 1289              		.global	spi1_send
 1290              		.global	buf
 1291              		.global	test_cnt
 1292              		.global	MUValue
 1293              		.section	.bss.Ang_reg,"aw",%nobits
 1294              		.align	1
 1297              	Ang_reg:
 1298 0000 00000000 		.space	2048
 1298      00000000 
 1298      00000000 
 1298      00000000 
 1298      00000000 
 1299              		.section	.bss.Ang_reg_Count,"aw",%nobits
 1300              		.align	1
 1303              	Ang_reg_Count:
 1304 0000 0000     		.space	2
 1305              		.section	.bss.Ang_reg_Index,"aw",%nobits
 1306              		.align	1
 1309              	Ang_reg_Index:
 1310 0000 0000     		.space	2
 1311              		.section	.bss.Ang_reg_Index_Last,"aw",%nobits
 1312              		.align	1
 1315              	Ang_reg_Index_Last:
 1316 0000 0000     		.space	2
 1317              		.section	.bss.Ang_reg_Sum,"aw",%nobits
 1318              		.align	1
 1321              	Ang_reg_Sum:
 1322 0000 0000     		.space	2
 1323              		.section	.bss.Flag_MU_read,"aw",%nobits
 1324              		.set	.LANCHOR6,. + 0
 1327              	Flag_MU_read:
 1328 0000 00       		.space	1
 1329              		.section	.bss.Flag_error_read_eeprom,"aw",%nobits
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 34


 1330              		.align	2
 1331              		.set	.LANCHOR3,. + 0
 1334              	Flag_error_read_eeprom:
 1335 0000 00000000 		.space	4
 1336              		.section	.bss.MECode_offset_ICHaus,"aw",%nobits
 1337              		.align	1
 1340              	MECode_offset_ICHaus:
 1341 0000 0000     		.space	2
 1342              		.section	.bss.MUValue,"aw",%nobits
 1343              		.align	2
 1346              	MUValue:
 1347 0000 00000000 		.space	4
 1348              		.section	.bss.MU_Value,"aw",%nobits
 1349              		.align	2
 1350              		.set	.LANCHOR5,. + 0
 1353              	MU_Value:
 1354 0000 00000000 		.space	4
 1355              		.section	.bss.MU_Value_last,"aw",%nobits
 1356              		.align	2
 1359              	MU_Value_last:
 1360 0000 00000000 		.space	4
 1361              		.section	.bss.MU_Vlaue_last,"aw",%nobits
 1362              		.align	2
 1365              	MU_Vlaue_last:
 1366 0000 00000000 		.space	4
 1367              		.section	.bss.Speed_DltAng_pls,"aw",%nobits
 1368              		.align	2
 1371              	Speed_DltAng_pls:
 1372 0000 00000000 		.space	4
 1373              		.section	.bss.Speed_T,"aw",%nobits
 1374              		.align	2
 1377              	Speed_T:
 1378 0000 00000000 		.space	4
 1379              		.section	.bss.buf,"aw",%nobits
 1380              		.set	.LANCHOR2,. + 0
 1383              	buf:
 1384 0000 00000000 		.space	9
 1384      00000000 
 1384      00
 1385              		.section	.bss.count_wait.11906,"aw",%nobits
 1386              		.align	2
 1387              		.set	.LANCHOR7,. + 0
 1390              	count_wait.11906:
 1391 0000 00000000 		.space	4
 1392              		.section	.bss.error_encoder,"aw",%nobits
 1393              		.align	2
 1396              	error_encoder:
 1397 0000 00000000 		.space	4
 1398              		.section	.bss.read_cnt.11951,"aw",%nobits
 1399              		.align	2
 1400              		.set	.LANCHOR4,. + 0
 1403              	read_cnt.11951:
 1404 0000 00000000 		.space	4
 1405              		.section	.bss.spi1_reg,"aw",%nobits
 1408              	spi1_reg:
 1409 0000 00000000 		.space	4
 1410              		.section	.bss.spi1_reg_buf,"aw",%nobits
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 35


 1411              		.set	.LANCHOR0,. + 0
 1414              	spi1_reg_buf:
 1415 0000 00000000 		.space	4
 1416              		.section	.bss.test_cnt,"aw",%nobits
 1417              		.align	2
 1420              	test_cnt:
 1421 0000 00000000 		.space	4
 1422              		.section	.data.p_MU_Value,"aw",%progbits
 1423              		.align	2
 1426              	p_MU_Value:
 1427 0000 00000000 		.word	spi1_reg
 1428              		.section	.data.spi1_send,"aw",%progbits
 1429              		.set	.LANCHOR1,. + 0
 1432              	spi1_send:
 1433 0000 A6       		.byte	-90
 1434 0001 00       		.byte	0
 1435 0002 00       		.byte	0
 1436 0003 00       		.byte	0
 1437              		.text
 1438              	.Letext0:
 1439              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 1440              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 1441              		.file 4 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 1442              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 1443              		.file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/system_stm32g4xx.h"
 1444              		.file 7 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 1445              		.file 8 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 1446              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1447              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 1448              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 1449              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_flash.h"
 1450              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 1451              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 1452              		.file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
 1453              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 1454              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 1455              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-ea
 1456              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 1457              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 1458              		.file 21 "Inc/uart.h"
 1459              		.file 22 "Inc/pwm.h"
 1460              		.file 23 "Inc/spi_MEncoder.h"
 1461              		.file 24 "Inc/adc.h"
 1462              		.file 25 "Inc/stm32_math_sin.h"
 1463              		.file 26 "Inc/pid.h"
 1464              		.file 27 "Inc/profile_joint.h"
 1465              		.file 28 "Inc/performance_test.h"
 1466              		.file 29 "Inc/global.h"
 1467              		.file 30 "Inc/icmu.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 36


DEFINED SYMBOLS
                            *ABS*:00000000 icmu.c
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:18     .text.SPI_RW:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:24     .text.SPI_RW:00000000 SPI_RW
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:76     .text.SPI_RW:0000001c $d
                            *COM*:00000064 hspi1
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:82     .text.delay__ms:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:88     .text.delay__ms:00000000 delay__ms
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:142    .text.MX_SPI1_Init:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:149    .text.MX_SPI1_Init:00000000 MX_SPI1_Init
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:217    .text.MX_SPI1_Init:00000054 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:225    .text.SPI1_Init:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:232    .text.SPI1_Init:00000000 SPI1_Init
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:307    .text.SPI1_Init:0000005c $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:313    .text.SPI_I2S_SendData8:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:320    .text.SPI_I2S_SendData8:00000000 SPI_I2S_SendData8
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:336    .text.SPI_I2S_ReceiveData8:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:343    .text.SPI_I2S_ReceiveData8:00000000 SPI_I2S_ReceiveData8
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:360    .text.icmu_activiate:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:367    .text.icmu_activiate:00000000 icmu_activiate
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:430    .text.icmu_sdtransmission:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:437    .text.icmu_sdtransmission:00000000 icmu_sdtransmission
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:501    .text.icmu_sdtransmission:00000050 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:506    .text.icmu_sdstatus:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:513    .text.icmu_sdstatus:00000000 icmu_sdstatus
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:562    .text.icmu_read_reg:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:569    .text.icmu_read_reg:00000000 icmu_read_reg
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:746    .text.icmu_read_reg:000000c4 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:752    .text.icmu_spi_init:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:759    .text.icmu_spi_init:00000000 icmu_spi_init
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:785    .text.icmu_write_reg:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:792    .text.icmu_write_reg:00000000 icmu_write_reg
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:866    .text.icmu_reg_status:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:873    .text.icmu_reg_status:00000000 icmu_reg_status
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:928    .text.icmu_cmu_mu:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:935    .text.icmu_cmu_mu:00000000 icmu_cmu_mu
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:953    .text.DMA1_Channel3_IRQHandler:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:960    .text.DMA1_Channel3_IRQHandler:00000000 DMA1_Channel3_IRQHandler
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:988    .text.DMA1_Channel3_IRQHandler:00000020 $d
                            *COM*:00000060 hdma_spi1_tx
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:993    .text.DMA1_Channel4_IRQHandler:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1000   .text.DMA1_Channel4_IRQHandler:00000000 DMA1_Channel4_IRQHandler
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1083   .text.DMA1_Channel4_IRQHandler:00000070 $d
                            *COM*:00000060 hdma_spi1_rx
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1093   .text.icmu_sdtransmission_test:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1100   .text.icmu_sdtransmission_test:00000000 icmu_sdtransmission_test
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1125   .text.icmu_sdtransmission_test:0000001c $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1130   .text.get_MU_Value_block:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1137   .text.get_MU_Value_block:00000000 get_MU_Value_block
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1199   .text.get_MU_Value_block:00000038 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1207   .text.clear_eeprom_erro:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1214   .text.clear_eeprom_erro:00000000 clear_eeprom_erro
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1230   .text.clear_eeprom_erro:00000008 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1235   .text.icmu_eerpom_erro_detect:00000000 $t
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1242   .text.icmu_eerpom_erro_detect:00000000 icmu_eerpom_erro_detect
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1265   .text.icmu_eerpom_erro_detect:00000018 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1396   .bss.error_encoder:00000000 error_encoder
ARM GAS  C:\Users\82057\AppData\Local\Temp\cco3XoH7.s 			page 37


C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1327   .bss.Flag_MU_read:00000000 Flag_MU_read
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1365   .bss.MU_Vlaue_last:00000000 MU_Vlaue_last
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1371   .bss.Speed_DltAng_pls:00000000 Speed_DltAng_pls
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1377   .bss.Speed_T:00000000 Speed_T
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1359   .bss.MU_Value_last:00000000 MU_Value_last
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1353   .bss.MU_Value:00000000 MU_Value
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1426   .data.p_MU_Value:00000000 p_MU_Value
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1408   .bss.spi1_reg:00000000 spi1_reg
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1414   .bss.spi1_reg_buf:00000000 spi1_reg_buf
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1340   .bss.MECode_offset_ICHaus:00000000 MECode_offset_ICHaus
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1303   .bss.Ang_reg_Count:00000000 Ang_reg_Count
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1321   .bss.Ang_reg_Sum:00000000 Ang_reg_Sum
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1315   .bss.Ang_reg_Index_Last:00000000 Ang_reg_Index_Last
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1309   .bss.Ang_reg_Index:00000000 Ang_reg_Index
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1297   .bss.Ang_reg:00000000 Ang_reg
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1432   .data.spi1_send:00000000 spi1_send
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1383   .bss.buf:00000000 buf
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1420   .bss.test_cnt:00000000 test_cnt
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1346   .bss.MUValue:00000000 MUValue
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1294   .bss.Ang_reg:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1300   .bss.Ang_reg_Count:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1306   .bss.Ang_reg_Index:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1312   .bss.Ang_reg_Index_Last:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1318   .bss.Ang_reg_Sum:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1328   .bss.Flag_MU_read:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1330   .bss.Flag_error_read_eeprom:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1334   .bss.Flag_error_read_eeprom:00000000 Flag_error_read_eeprom
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1337   .bss.MECode_offset_ICHaus:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1343   .bss.MUValue:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1349   .bss.MU_Value:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1356   .bss.MU_Value_last:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1362   .bss.MU_Vlaue_last:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1368   .bss.Speed_DltAng_pls:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1374   .bss.Speed_T:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1384   .bss.buf:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1386   .bss.count_wait.11906:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1390   .bss.count_wait.11906:00000000 count_wait.11906
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1393   .bss.error_encoder:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1399   .bss.read_cnt.11951:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1403   .bss.read_cnt.11951:00000000 read_cnt.11951
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1409   .bss.spi1_reg:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1415   .bss.spi1_reg_buf:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1417   .bss.test_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\cco3XoH7.s:1423   .data.p_MU_Value:00000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Init
Error_Handler
HAL_SPI_TransmitReceive_DMA
__nop
g_CmdMap
delay_ms
Flag_error_MU_SPI
