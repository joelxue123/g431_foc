ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"pid.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.OpenLoop,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	OpenLoop:
  25              	.LFB343:
  26              		.file 1 "Src/pid.c"
   1:Src/pid.c     **** #include "pid.h"
   2:Src/pid.c     **** #include "global.h"
   3:Src/pid.c     **** #include "icmu.h"
   4:Src/pid.c     **** #include "parameter_identification.h"
   5:Src/pid.c     **** #include "sensorless.h"
   6:Src/pid.c     **** //#include "ouj_cmd.h"
   7:Src/pid.c     **** //3ï¿½Õ»ï¿½ï¿½Å·ï¿½ï¿½ï¿½Ø²ï¿½ï¿½ï¿½
   8:Src/pid.c     **** s16 g_IA = 0,g_IA_Raw = 0;			        
   9:Src/pid.c     **** s16 g_IB = 0,g_IB_Raw = 0;			        
  10:Src/pid.c     **** s16 g_IC = 0,g_IC_Raw = 0;
  11:Src/pid.c     **** s16 g_Sum_ABC = 0;
  12:Src/pid.c     **** volatile s32  g_Iq = 0;			        // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  13:Src/pid.c     **** volatile s32  g_Id = 0;			        // Ö±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  14:Src/pid.c     **** volatile s32 g_Iq_filter;			// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  15:Src/pid.c     **** volatile s32 g_Id_filter;			// Ö±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  16:Src/pid.c     **** volatile s32  g_Iq_Array[CUR_ARRAY_NUM] = {0};			        // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  17:Src/pid.c     **** volatile s32  g_Id_Array[CUR_ARRAY_NUM] = {0};			        // Ö±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½mA
  18:Src/pid.c     **** volatile s32 g_I_Array_Index = 0;
  19:Src/pid.c     **** volatile s32 g_I_Array_Index_Invalid = 0;
  20:Src/pid.c     **** volatile s32 g_Iq_sum = 0;
  21:Src/pid.c     **** volatile s32 g_Id_sum = 0;
  22:Src/pid.c     **** s32 g_Vq = 0;			        // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹
  23:Src/pid.c     **** s32 g_Vd = 0;			        // Ö±ï¿½ï¿½ï¿½ï¿½Ñ¹
  24:Src/pid.c     **** s32 g_Vq_Pu = 0;			    // Ö±ï¿½ï¿½ï¿½ï¿½Ñ¹
  25:Src/pid.c     **** s32 g_Vd_Pu = 0;			    // Ö±ï¿½ï¿½ï¿½ï¿½Ñ¹
  26:Src/pid.c     **** s32 g_V_Alpha = 0;
  27:Src/pid.c     **** s32 g_V_Beta = 0;
  28:Src/pid.c     **** 
  29:Src/pid.c     **** s32 g_Sector = 0;		      // ï¿½ï¿½Ñ¹Ê¸ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  30:Src/pid.c     **** float g_Spd_Icnt = 0;		    // ï¿½Ù¶ï¿½Iï¿½Û»ï¿½Öµ
  31:Src/pid.c     **** int64_t g_Pos_Icnt = 0;       // Î»ï¿½Ã»ï¿½Iï¿½Û»ï¿½Öµ
  32:Src/pid.c     **** float Speed_P_out = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 2


  33:Src/pid.c     **** float Speed_I_out = 0;
  34:Src/pid.c     **** s32 g_Pos_PID_16BIT = 0;  // Î»ï¿½Ã»ï¿½PIï¿½ï¿½
  35:Src/pid.c     **** s32 g_Pos_Spd = 0;        // Î»ï¿½Ã»ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½Öµ
  36:Src/pid.c     **** volatile s32 V_AddReg = 0;     // Î»ï¿½Ã»ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½Öµ ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶Èµï¿½ï¿½ï¿½ï
  37:Src/pid.c     **** volatile s32 V_SetTotal = 0;     // Î»ï¿½Ã»ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½Öµ ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶Èµï¿½ï¿½ï¿
  38:Src/pid.c     **** 
  39:Src/pid.c     **** 
  40:Src/pid.c     **** s16 g_testAngle = 0;           //
  41:Src/pid.c     **** 
  42:Src/pid.c     **** 
  43:Src/pid.c     **** //u8 SpeedPID_Enable = 0;
  44:Src/pid.c     **** //u8 PostionPID_Enable = 0;
  45:Src/pid.c     **** s32 g_posPID_e = 0;
  46:Src/pid.c     **** u8 PosAtDead_Flag = 0;
  47:Src/pid.c     **** u8 PosAtDead_Flag_Last = 0;
  48:Src/pid.c     **** 
  49:Src/pid.c     **** volatile int time4_capture_ch1;
  50:Src/pid.c     **** extern int g_ElectricAngle_add ;
  51:Src/pid.c     **** extern float  pll_estimated_spd;
  52:Src/pid.c     **** extern float pll_estimated_phase ;
  53:Src/pid.c     **** 
  54:Src/pid.c     **** 
  55:Src/pid.c     **** s32 g_spd_error = 0;           //
  56:Src/pid.c     **** extern volatile int32_t SPI_X[9] ;
  57:Src/pid.c     **** extern volatile int32_t SPI_Y[9];
  58:Src/pid.c     **** extern volatile int16_t SPI_0_Array[250];
  59:Src/pid.c     **** s16 anlge_reg;
  60:Src/pid.c     **** s32 g_decLen = 0;
  61:Src/pid.c     **** s32 g_X, g_Y, g_Z;
  62:Src/pid.c     **** s16 Spd_RPM_CatchLimit = 0;//ï¿½Ð³ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½ï¿½
  63:Src/pid.c     **** //ï¿½ï¿½ï¿½ï¿½ï¿½Õ¢ï¿½ß¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø±ï¿½ï¿½ï¿½
  64:Src/pid.c     **** volatile u8 Grriper_Ready = 0;
  65:Src/pid.c     **** volatile u8 Grriper_Run = 0,Grriper_Run_last = 0;
  66:Src/pid.c     **** volatile s32 Grriper_Run_on_delay_cnt = 0,Grriper_Run_off_delay_cnt = 0;
  67:Src/pid.c     **** volatile u8  Brake_rellease_delay = 0;
  68:Src/pid.c     **** volatile s32 Brake_rellease_delay_cnt = 0;
  69:Src/pid.c     **** volatile u8  Flag_Set_OpenLen = 0;
  70:Src/pid.c     **** volatile u8 Test_perm = 0;
  71:Src/pid.c     **** volatile s32 Test_dirt = 1;
  72:Src/pid.c     **** volatile s32 Test_dirt_last = 1;
  73:Src/pid.c     **** volatile s32 sin_wave_t_us = 0;//ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½Ê± us
  74:Src/pid.c     **** volatile s32 motor_para_identification_count_Tms = 0;//ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½Ê±ms
  75:Src/pid.c     **** volatile s32 I_phase[3][100] = {0};//ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½Ê±ms
  76:Src/pid.c     **** volatile s32 index_I_phase = 0;//ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½Ê±ms
  77:Src/pid.c     **** volatile s32 Para_Identificaion = 0;
  78:Src/pid.c     **** double T_t = 0.0;
  79:Src/pid.c     **** double T_t_1 = 0.0;
  80:Src/pid.c     **** volatile s32 pos_error_to_target = 0;
  81:Src/pid.c     **** struct PID_TYPE pid_IQ,pid_ID,pid_force,pid_spd,pid_pos,pid_pll;
  82:Src/pid.c     **** 
  83:Src/pid.c     **** void hfi_update_angle(void);
  84:Src/pid.c     **** void PID_ini(struct PID_TYPE * p_pid,u32 freq)   //PID
  85:Src/pid.c     **** {
  86:Src/pid.c     **** 		p_pid->integral = 0;
  87:Src/pid.c     **** 		p_pid->error = 0;
  88:Src/pid.c     **** 		p_pid->error_last = 0;
  89:Src/pid.c     **** 		p_pid->out = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 3


  90:Src/pid.c     **** 		p_pid->frequency = freq;
  91:Src/pid.c     **** }
  92:Src/pid.c     **** void PID_control(s32 set,s32 act,struct PID_TYPE * p_pid)   //PID
  93:Src/pid.c     **** {
  94:Src/pid.c     **** 	s32 deriv=0;
  95:Src/pid.c     **** 	
  96:Src/pid.c     **** 	if(p_pid->enable == 0)
  97:Src/pid.c     **** 	{
  98:Src/pid.c     **** 		p_pid->integral = 0;
  99:Src/pid.c     **** 		p_pid->error = 0;
 100:Src/pid.c     **** 		p_pid->error_last = 0;
 101:Src/pid.c     **** 		p_pid->out = 0;
 102:Src/pid.c     **** 		p_pid->Part_P = 0;
 103:Src/pid.c     **** 		p_pid->Part_I = 0;
 104:Src/pid.c     **** 		p_pid->Part_D = 0;
 105:Src/pid.c     **** 		return;
 106:Src/pid.c     **** 	}
 107:Src/pid.c     **** 	p_pid->error = set - act; 
 108:Src/pid.c     **** 	if((p_pid->error<p_pid->dead_zone && p_pid->error>-1*p_pid->dead_zone))
 109:Src/pid.c     **** 	{
 110:Src/pid.c     **** 		p_pid->is_at_dead_zone = 1;
 111:Src/pid.c     **** 		p_pid->error = 0;
 112:Src/pid.c     **** 	}	
 113:Src/pid.c     **** 	if ((p_pid->out < p_pid->Up_limit && p_pid->out > p_pid->Low_limit) ||
 114:Src/pid.c     **** 			(p_pid->out >= p_pid->Up_limit && p_pid->error < 0) ||
 115:Src/pid.c     **** 			(p_pid->out <= p_pid->Low_limit && p_pid->error > 0))
 116:Src/pid.c     **** 	{
 117:Src/pid.c     **** //		if(p_pid->Ki>1000)
 118:Src/pid.c     **** //		{
 119:Src/pid.c     **** //			p_pid->integral += (float)(p_pid->error*(p_pid->Ki/100));
 120:Src/pid.c     **** //		}
 121:Src/pid.c     **** //		else
 122:Src/pid.c     **** //		{
 123:Src/pid.c     **** //			p_pid->integral += (float)(p_pid->error*p_pid->Ki);
 124:Src/pid.c     **** //		}
 125:Src/pid.c     **** 		if(p_pid->Ki>1000)
 126:Src/pid.c     **** 		{
 127:Src/pid.c     **** 			p_pid->integral += (p_pid->error*(p_pid->Ki/100));
 128:Src/pid.c     **** 		}
 129:Src/pid.c     **** 		else
 130:Src/pid.c     **** 		{
 131:Src/pid.c     **** 			p_pid->integral += (p_pid->error*p_pid->Ki);
 132:Src/pid.c     **** 		}
 133:Src/pid.c     **** 	}
 134:Src/pid.c     **** 	p_pid->Part_P = p_pid->error * p_pid->Kp/100;
 135:Src/pid.c     **** 	
 136:Src/pid.c     **** 	
 137:Src/pid.c     **** //	if(p_pid->Ki>1000)
 138:Src/pid.c     **** //	{
 139:Src/pid.c     **** //		p_pid->Part_I = (s32)(100.0f*p_pid->integral/(float)p_pid->frequency);
 140:Src/pid.c     **** //	}
 141:Src/pid.c     **** //	else
 142:Src/pid.c     **** //	{
 143:Src/pid.c     **** //		p_pid->Part_I = (s32)(p_pid->integral/(float)p_pid->frequency);
 144:Src/pid.c     **** //	}
 145:Src/pid.c     **** 	if(p_pid->Ki>1000)
 146:Src/pid.c     **** 	{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 4


 147:Src/pid.c     **** 		p_pid->Part_I = (s32)(100*p_pid->integral/p_pid->frequency);
 148:Src/pid.c     **** 	}
 149:Src/pid.c     **** 	else
 150:Src/pid.c     **** 	{
 151:Src/pid.c     **** 		p_pid->Part_I = (s32)(p_pid->integral/p_pid->frequency);
 152:Src/pid.c     **** 	}	
 153:Src/pid.c     **** 	if(p_pid->Part_I>0x7FFFFFFF)
 154:Src/pid.c     **** 	{
 155:Src/pid.c     **** 		p_pid->Part_I = 0x7FFFFFFF;
 156:Src/pid.c     **** 	}
 157:Src/pid.c     **** 	else if(p_pid->Part_I<(-1*0x7FFFFFFF))
 158:Src/pid.c     **** 	{
 159:Src/pid.c     **** 		p_pid->Part_I = -1*0x7FFFFFFF;
 160:Src/pid.c     **** 	}
 161:Src/pid.c     **** 	deriv = p_pid->Part_D;
 162:Src/pid.c     **** 	p_pid->Part_D = p_pid->Kd * ( 9*deriv + 1*(p_pid->error-p_pid->error_last) )   /1000 ;
 163:Src/pid.c     **** 	p_pid->out = p_pid->Part_P+p_pid->Part_I+p_pid->Part_D;
 164:Src/pid.c     **** 	if(p_pid->out >p_pid->Up_limit)
 165:Src/pid.c     **** 	{
 166:Src/pid.c     **** 		p_pid->out = p_pid->Up_limit;
 167:Src/pid.c     **** 		p_pid->integral = (p_pid->out)*p_pid->frequency;
 168:Src/pid.c     **** 	}
 169:Src/pid.c     **** 	if(p_pid->out <p_pid->Low_limit)
 170:Src/pid.c     **** 	{
 171:Src/pid.c     **** 		p_pid->out = p_pid->Low_limit;
 172:Src/pid.c     **** 		p_pid->integral = (p_pid->out)*p_pid->frequency;
 173:Src/pid.c     **** 	}	
 174:Src/pid.c     **** 	return;
 175:Src/pid.c     **** }
 176:Src/pid.c     **** //Force PID output
 177:Src/pid.c     **** void force_PID_out(s32 out,struct PID_TYPE * p_pid)   //PID
 178:Src/pid.c     **** {
 179:Src/pid.c     **** 	p_pid->out = out;
 180:Src/pid.c     **** 	if(p_pid->out >p_pid->Up_limit)
 181:Src/pid.c     **** 	{
 182:Src/pid.c     **** 		p_pid->out = p_pid->Up_limit;
 183:Src/pid.c     **** 		//p_pid->integral = (p_pid->out-p_pid->Part_P - p_pid->Part_D)*p_pid->frequency;
 184:Src/pid.c     **** 	}
 185:Src/pid.c     **** 	if(p_pid->out <p_pid->Low_limit)
 186:Src/pid.c     **** 	{
 187:Src/pid.c     **** 		p_pid->out = p_pid->Low_limit;
 188:Src/pid.c     **** 		//p_pid->integral = (p_pid->out-p_pid->Part_P - p_pid->Part_D)*p_pid->frequency;
 189:Src/pid.c     **** 	}	
 190:Src/pid.c     **** 	p_pid->error = 0;
 191:Src/pid.c     **** 	p_pid->error_last = 0;
 192:Src/pid.c     **** 	p_pid->Part_P = 0;
 193:Src/pid.c     **** 	p_pid->Part_I = out;
 194:Src/pid.c     **** 	p_pid->integral = p_pid->Part_I*p_pid->frequency;
 195:Src/pid.c     **** 	p_pid->Part_D = 0;
 196:Src/pid.c     **** }
 197:Src/pid.c     **** static void ForcePID(void)
 198:Src/pid.c     **** {
 199:Src/pid.c     **** 	s16 error_force = 0;
 200:Src/pid.c     **** 	s16 error_force_abs = 0;
 201:Src/pid.c     **** //	static u8 flag_in_dead = 0;
 202:Src/pid.c     **** //	static u16 delayCnt_in_dead = 0;
 203:Src/pid.c     **** 	if(g_CmdMap[CMD_FORCE_DIR] == 0)
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 5


 204:Src/pid.c     **** 	{
 205:Src/pid.c     **** 		force_set = g_CmdMap[CMD_FORCE_SET_PU];
 206:Src/pid.c     **** 		force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 207:Src/pid.c     **** 	}
 208:Src/pid.c     **** 	else
 209:Src/pid.c     **** 	{
 210:Src/pid.c     **** 		force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
 211:Src/pid.c     **** 		force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 212:Src/pid.c     **** 	}
 213:Src/pid.c     **** ////	if(g_CmdMap[CMD_POS_ACT_PU]<(g_CmdMap[SYS_POS_UPPER_LIMIT_PU]-819) && g_CmdMap[CMD_POS_ACT_PU]
 214:Src/pid.c     **** ////	{
 215:Src/pid.c     **** //				if(force_set>16)
 216:Src/pid.c     **** //				{
 217:Src/pid.c     **** //					pid_force.Up_limit = g_CmdMap[SYS_RESISTANCE_CURPU]+((force_set*g_CmdMap[SYS_K_PERCENT_FORCE
 218:Src/pid.c     **** //					pid_force.Low_limit = g_CmdMap[SYS_CUR_LOWER_LIMIT_PU];
 219:Src/pid.c     **** //				}
 220:Src/pid.c     **** //				else if(force_set<-16)
 221:Src/pid.c     **** //				{
 222:Src/pid.c     **** //					pid_force.Up_limit = g_CmdMap[SYS_CUR_UPPER_LIMIT_PU];
 223:Src/pid.c     **** //					pid_force.Low_limit = -g_CmdMap[SYS_RESISTANCE_CURPU]+((force_set*g_CmdMap[SYS_K_PERCENT_FOR
 224:Src/pid.c     **** //				}
 225:Src/pid.c     **** //				else
 226:Src/pid.c     **** //				{
 227:Src/pid.c     **** //					pid_force.Up_limit = g_CmdMap[SYS_RESISTANCE_CURPU]+(g_CmdMap[SYS_K_PERCENT_FORCE_CURPU]>>7)
 228:Src/pid.c     **** //					pid_force.Low_limit = -g_CmdMap[SYS_RESISTANCE_CURPU]-(g_CmdMap[SYS_K_PERCENT_FORCE_CURPU]>>
 229:Src/pid.c     **** //				}
 230:Src/pid.c     **** //////	}
 231:Src/pid.c     **** ////	if(pid_force.Up_limit<g_CmdMap[SYS_RESISTANCE_CURPU])
 232:Src/pid.c     **** ////	{
 233:Src/pid.c     **** ////		pid_force.Up_limit=g_CmdMap[SYS_RESISTANCE_CURPU];
 234:Src/pid.c     **** ////	}
 235:Src/pid.c     **** ////	if(pid_force.Low_limit>(-1*g_CmdMap[SYS_RESISTANCE_CURPU]))
 236:Src/pid.c     **** ////	{
 237:Src/pid.c     **** ////		pid_force.Low_limit=-1*g_CmdMap[SYS_RESISTANCE_CURPU];
 238:Src/pid.c     **** ////	}
 239:Src/pid.c     **** 	pid_force.Up_limit = ((g_CmdMap[SYS_SPD_UPPER_LIMIT_PU])>>0);
 240:Src/pid.c     **** 	pid_force.Low_limit = ((g_CmdMap[SYS_SPD_LOWER_LIMIT_PU]>>0));
 241:Src/pid.c     **** 	
 242:Src/pid.c     **** 	if(g_CmdMap[CMD_POS_ACT_PU]>g_CmdMap[SYS_POS_UPPER_LIMIT_PU])
 243:Src/pid.c     **** 	{
 244:Src/pid.c     **** 		pid_force.Up_limit = 0;
 245:Src/pid.c     **** 		
 246:Src/pid.c     **** 	}
 247:Src/pid.c     **** 	else if(g_CmdMap[CMD_POS_ACT_PU]>(g_CmdMap[SYS_POS_UPPER_LIMIT_PU]-409)&& g_CmdMap[CMD_CUR_SET_PU]
 248:Src/pid.c     **** 	{
 249:Src/pid.c     **** 		pid_force.Up_limit = 0;
 250:Src/pid.c     **** 		
 251:Src/pid.c     **** 	}
 252:Src/pid.c     **** 	if(g_CmdMap[CMD_POS_ACT_PU]<g_CmdMap[SYS_POS_LOWER_LIMIT_PU])
 253:Src/pid.c     **** 	{
 254:Src/pid.c     **** 		pid_force.Low_limit = 0;
 255:Src/pid.c     **** 		
 256:Src/pid.c     **** 	}	
 257:Src/pid.c     **** 	else if(g_CmdMap[CMD_POS_ACT_PU]<(g_CmdMap[SYS_POS_LOWER_LIMIT_PU]+409)  && g_CmdMap[CMD_CUR_SET_P
 258:Src/pid.c     **** 	{
 259:Src/pid.c     **** 		pid_force.Low_limit = 0;
 260:Src/pid.c     **** 		
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 6


 261:Src/pid.c     **** 	}
 262:Src/pid.c     **** 	
 263:Src/pid.c     **** 
 264:Src/pid.c     **** 	
 265:Src/pid.c     **** //	error_force = force_set - force_act;
 266:Src/pid.c     **** //	error_force_abs = ABS(error_force);
 267:Src/pid.c     **** //	if(error_force < (pid_force.dead_zone>>1))
 268:Src/pid.c     **** //	{
 269:Src/pid.c     **** //		if(delayCnt_in_dead<1000)
 270:Src/pid.c     **** //		{
 271:Src/pid.c     **** //			delayCnt_in_dead++;
 272:Src/pid.c     **** //		}
 273:Src/pid.c     **** //		else
 274:Src/pid.c     **** //		{
 275:Src/pid.c     **** //			flag_in_dead = 1;
 276:Src/pid.c     **** //		}
 277:Src/pid.c     **** //	}
 278:Src/pid.c     **** //	if(error_force_abs > pid_force.dead_zone)
 279:Src/pid.c     **** //	{
 280:Src/pid.c     **** //		delayCnt_in_dead = 0;
 281:Src/pid.c     **** //		flag_in_dead = 0;
 282:Src/pid.c     **** //	}
 283:Src/pid.c     **** //	if(flag_in_dead == 1)
 284:Src/pid.c     **** //	{
 285:Src/pid.c     **** //		force_PID_out(0,&pid_force);
 286:Src/pid.c     **** //	}
 287:Src/pid.c     **** //	else
 288:Src/pid.c     **** //	{
 289:Src/pid.c     **** 		PID_control(force_set,force_act,&pid_force);
 290:Src/pid.c     **** //	}
 291:Src/pid.c     **** 	//
 292:Src/pid.c     **** 	g_CmdMap[CMD_SPD_ADD_PU] = pid_force.out;
 293:Src/pid.c     **** 	
 294:Src/pid.c     **** 	if(g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_4_FORCE || (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MO
 295:Src/pid.c     **** 	{
 296:Src/pid.c     **** 		Flag_Profile_Enable = 0;
 297:Src/pid.c     **** 		g_CmdMap[CMD_PROFILE_POS_PU] = g_CmdMap[CMD_POS_ACT_PU];
 298:Src/pid.c     **** 		g_CmdMap[CMD_POS_SET_PU] = g_CmdMap[CMD_POS_ACT_PU];
 299:Src/pid.c     **** 	}
 300:Src/pid.c     **** }
 301:Src/pid.c     **** 
 302:Src/pid.c     **** // SVPWMï¿½ï¿½ï¿½ï¿½Õ¼ï¿½Õ±ï¿½
 303:Src/pid.c     **** static void Calculate_CCR_SVP(TIM_TypeDef* TIMx, int sector, int X, int Y, int Z)
 304:Src/pid.c     **** {
 305:Src/pid.c     ****   s32 t0, tk, tk_1;
 306:Src/pid.c     ****   s32 CCR1 = 0;
 307:Src/pid.c     ****   s32 CCR2 = 0;
 308:Src/pid.c     ****   s32 CCR3 = 0;
 309:Src/pid.c     ****   switch (sector)
 310:Src/pid.c     ****   {
 311:Src/pid.c     ****     case 1:
 312:Src/pid.c     **** 			tk_1 = Z;
 313:Src/pid.c     **** 			tk = Y;
 314:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 315:Src/pid.c     **** 			CCR3 = t0>>1;
 316:Src/pid.c     **** 			CCR1 = CCR3 + tk;
 317:Src/pid.c     **** 			CCR2 = CCR1 + tk_1;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 7


 318:Src/pid.c     **** 		break;		
 319:Src/pid.c     **** 		case 2:
 320:Src/pid.c     **** 			tk_1 = Y;
 321:Src/pid.c     **** 			tk = -X;
 322:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 323:Src/pid.c     **** 			CCR2 = t0>>1;
 324:Src/pid.c     **** 			CCR3 = CCR2 + tk;
 325:Src/pid.c     **** 			CCR1 = CCR3 + tk_1;
 326:Src/pid.c     **** 		break;		
 327:Src/pid.c     **** 		case 3:
 328:Src/pid.c     **** 			tk_1 = X;
 329:Src/pid.c     **** 			tk = -Z;
 330:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 331:Src/pid.c     **** 			CCR3 = t0>>1;
 332:Src/pid.c     **** 			CCR2 = CCR3 + tk_1;
 333:Src/pid.c     **** 			CCR1 = CCR2 + tk;
 334:Src/pid.c     **** 		break;		
 335:Src/pid.c     **** 		case 4:
 336:Src/pid.c     **** 			tk_1 = -X;
 337:Src/pid.c     **** 			tk = Z;
 338:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 339:Src/pid.c     **** 			CCR1 = t0>>1;
 340:Src/pid.c     **** 			CCR2 = CCR1 + tk;
 341:Src/pid.c     **** 			CCR3 = CCR2 + tk_1;
 342:Src/pid.c     **** 		break;
 343:Src/pid.c     **** 		case 5:
 344:Src/pid.c     **** 			tk_1 = -Y;
 345:Src/pid.c     **** 			tk = X;
 346:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 347:Src/pid.c     **** 			CCR1 = t0>>1;
 348:Src/pid.c     **** 			CCR3 = CCR1 + tk_1;
 349:Src/pid.c     **** 			CCR2 = CCR3 + tk;
 350:Src/pid.c     **** 		break;
 351:Src/pid.c     **** 		case 6:
 352:Src/pid.c     **** 			tk_1 = -Z;
 353:Src/pid.c     **** 			tk = -Y;
 354:Src/pid.c     **** 			t0 = REAL_CCR - tk - tk_1;
 355:Src/pid.c     **** 			CCR2 = t0>>1;
 356:Src/pid.c     **** 			CCR1 = CCR2 + tk_1;
 357:Src/pid.c     **** 			CCR3 = CCR1 + tk;
 358:Src/pid.c     **** 		break;
 359:Src/pid.c     **** 		default:
 360:Src/pid.c     **** 			CCR1 = REAL_CCR >> 1;
 361:Src/pid.c     **** 			CCR2 = REAL_CCR >> 1;
 362:Src/pid.c     **** 			CCR3 = REAL_CCR >> 1;
 363:Src/pid.c     **** 		break;
 364:Src/pid.c     ****   }
 365:Src/pid.c     **** 	CCR1 = CCR1>N97_CCR?N97_CCR:(CCR1<0?0:CCR1);
 366:Src/pid.c     ****   CCR2 = CCR2>N97_CCR?N97_CCR:(CCR2<0?0:CCR2);
 367:Src/pid.c     ****   CCR3 = CCR3>N97_CCR?N97_CCR:(CCR3<0?0:CCR3);
 368:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 0)
 369:Src/pid.c     **** 	{
 370:Src/pid.c     **** 			motor_para_identification_count_Tms = 0;
 371:Src/pid.c     **** 			sin_wave_t_us = 0;
 372:Src/pid.c     **** 	}
 373:Src/pid.c     ****    // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Õ¼ï¿½Õ±ï¿½97%
 374:Src/pid.c     **** 		//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¶ Step1:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Step2ï¿½ï¿½ï¿½ï¿½ï¿½Ð²ï¿½ï¿½ï
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 8


 375:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 4 || g_CmdMap[SYS_MOT_TEST] == 5)
 376:Src/pid.c     **** 	{
 377:Src/pid.c     **** 		sin_wave_t_us = sin_wave_t_us + 4;
 378:Src/pid.c     **** 		if(sin_wave_t_us > 1000)
 379:Src/pid.c     **** 		{
 380:Src/pid.c     **** 			sin_wave_t_us = 0;
 381:Src/pid.c     **** 			motor_para_identification_count_Tms++;
 382:Src/pid.c     **** 		}
 383:Src/pid.c     **** 	}
 384:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 4)
 385:Src/pid.c     **** 	{
 386:Src/pid.c     **** 		CCR1 = 1;
 387:Src/pid.c     **** 		CCR2 = REAL_CCR-1;
 388:Src/pid.c     **** 		CCR3 = REAL_CCR-1;
 389:Src/pid.c     **** 		Para_Identificaion++;
 390:Src/pid.c     **** 		if(Para_Identificaion>=0)
 391:Src/pid.c     **** 		{
 392:Src/pid.c     **** 			Para_Identificaion = 0;
 393:Src/pid.c     **** 			if(index_I_phase<100)
 394:Src/pid.c     **** 			{
 395:Src/pid.c     **** 				I_phase[0][index_I_phase] = -g_IA_Raw;
 396:Src/pid.c     **** 				I_phase[1][index_I_phase] = -g_IB_Raw;
 397:Src/pid.c     **** 				I_phase[2][index_I_phase] = -g_IC_Raw;		
 398:Src/pid.c     **** 			}
 399:Src/pid.c     **** 			index_I_phase++;
 400:Src/pid.c     **** 		}
 401:Src/pid.c     **** 		if(motor_para_identification_count_Tms > 200)//1sï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 402:Src/pid.c     **** 		{	
 403:Src/pid.c     **** 			T_t = 0.000040/(log(-1.0*(double)I_phase[0][99]/((double)(I_phase[0][2] - I_phase[0][99])))   );
 404:Src/pid.c     **** 			T_t_1 = -1.0/T_t;	
 405:Src/pid.c     **** 			g_CmdMap[SYS_MOT_TEST] = 0;
 406:Src/pid.c     **** 			g_CmdMap[MOT_RES] = 2*(12000*1000)/(3*I_phase[0][99]);// ï¿½ï¿½ï¿½ï¿½è£º0.5*(U_Dc*0.866*Duty/g_I
 407:Src/pid.c     **** 			g_CmdMap[MOT_INDUC] = (u16)(1000.0*T_t*(double)g_CmdMap[MOT_RES]);
 408:Src/pid.c     **** 		}
 409:Src/pid.c     **** 	}	 
 410:Src/pid.c     ****   TIMx->CCR3 = CCR3;
 411:Src/pid.c     ****   TIMx->CCR2 = CCR2;
 412:Src/pid.c     ****   TIMx->CCR1 = CCR1;
 413:Src/pid.c     **** 	//TIMx->CCER = (u16)0x5FFF;
 414:Src/pid.c     **** 	TIMx->CCER = (u16)PWM_OUTPUT_REG;
 415:Src/pid.c     **** }
 416:Src/pid.c     **** 
 417:Src/pid.c     **** extern volatile int g_high_fre_pulse;
 418:Src/pid.c     **** 
 419:Src/pid.c     **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½20KHz
 420:Src/pid.c     **** static void CurrentPID(void)
 421:Src/pid.c     **** {            
 422:Src/pid.c     ****   s32 temp32 = 0;       
 423:Src/pid.c     ****   s32 X, Y, Z;
 424:Src/pid.c     **** 	static u16 test = 0;
 425:Src/pid.c     **** 	s32 abs_g_Vq;
 426:Src/pid.c     **** 	s16 set_current = 0;
 427:Src/pid.c     **** 	static int inr_angle =0;
 428:Src/pid.c     **** 	
 429:Src/pid.c     **** 	if (g_CmdMap[TAG_WORK_MODE] != MODE_CURRENT)  // ï¿½ï¿½Ç°Ä£Ê½ï¿½ï¿½ï¿½Çµï¿½ï¿½ï¿½ï¿½ï¿½
 430:Src/pid.c     **** 	{
 431:Src/pid.c     **** 		if(g_CmdMap[TAG_WORK_MODE] == MODE_SPEED || g_CmdMap[TAG_WORK_MODE] == MODE_POSITION)
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 9


 432:Src/pid.c     **** 		{
 433:Src/pid.c     **** 		//	g_CmdMap[CMD_CUR_FWD_PU] = 1*((s32)g_CmdMap[CMD_ACC_PRE_PU]*5)>>4;
 434:Src/pid.c     **** 			g_CmdMap[CMD_CUR_FWD_PU] = 1*(s32)g_CmdMap[CMD_ACC_PRE_PU];
 435:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = (s32)pid_spd.out + (s32)g_CmdMap[CMD_CUR_FWD_PU];//Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï
 436:Src/pid.c     **** 		}
 437:Src/pid.c     **** 		else if(g_CmdMap[TAG_WORK_MODE] == MODE_FORCE)
 438:Src/pid.c     **** 		{
 439:Src/pid.c     **** //			g_CmdMap[CMD_CUR_SET_PU] = pid_force.out;
 440:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = (s32)pid_spd.out ;
 441:Src/pid.c     **** 		
 442:Src/pid.c     **** 		}
 443:Src/pid.c     **** 		else
 444:Src/pid.c     **** 		{
 445:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = 0;
 446:Src/pid.c     **** 		}	
 447:Src/pid.c     **** 	}
 448:Src/pid.c     **** 		//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô£ï¿½ï¿½Ü²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½Ö»ï¿½ï¿½ï¿½ï¿½1msÎªï
 449:Src/pid.c     **** 	if(g_CmdMap[SYS_SELF_TUNING] == 1)//
 450:Src/pid.c     **** 	{
 451:Src/pid.c     **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 452:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_CURRENT;
 453:Src/pid.c     **** 		if(test++ > (50))
 454:Src/pid.c     **** 		{
 455:Src/pid.c     **** 			test = 0;
 456:Src/pid.c     **** 		}
 457:Src/pid.c     **** 		if(test>(25))
 458:Src/pid.c     **** 		{
 459:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = 16*200;
 460:Src/pid.c     **** 		}
 461:Src/pid.c     **** 		else
 462:Src/pid.c     **** 		{
 463:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = -16*200;		
 464:Src/pid.c     **** 		}	
 465:Src/pid.c     **** 	}
 466:Src/pid.c     **** 	else if(g_CmdMap[SYS_SELF_TUNING] == 3)//ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 467:Src/pid.c     **** 	{
 468:Src/pid.c     **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 469:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_CURRENT;
 470:Src/pid.c     **** 		if(flag_processing_Jtest == 0)
 471:Src/pid.c     **** 		{
 472:Src/pid.c     **** 			state_Jtest = 0;
 473:Src/pid.c     **** 			g_CmdMap[CMD_JTEST_TIME1] = 0;
 474:Src/pid.c     **** 			g_CmdMap[CMD_JTEST_TIME2] = 0;
 475:Src/pid.c     **** 		}
 476:Src/pid.c     **** 		switch(state_Jtest)
 477:Src/pid.c     **** 		{
 478:Src/pid.c     **** 			case 0:
 479:Src/pid.c     **** 			{	
 480:Src/pid.c     **** 				flag_processing_Jtest = 1;
 481:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 8192;
 482:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]>819)
 483:Src/pid.c     **** 				{
 484:Src/pid.c     **** 					g_CmdMap[CMD_JTEST_TIME1] = g_CmdMap[CMD_JTEST_TIME1] + SVPWM_PERIOD_US;					
 485:Src/pid.c     **** 				}
 486:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]>(8192+819))
 487:Src/pid.c     **** 				{
 488:Src/pid.c     **** 					state_Jtest++;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 10


 489:Src/pid.c     **** 					g_CmdMap[CMD_JTEST_TIME2] = 0;
 490:Src/pid.c     **** 				}
 491:Src/pid.c     **** 				break;
 492:Src/pid.c     **** 			}
 493:Src/pid.c     **** 			case 1:
 494:Src/pid.c     **** 			{	
 495:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = -8192;
 496:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]<8192+819)
 497:Src/pid.c     **** 				{
 498:Src/pid.c     **** 					g_CmdMap[CMD_JTEST_TIME2] = g_CmdMap[CMD_JTEST_TIME2] + SVPWM_PERIOD_US;					
 499:Src/pid.c     **** 				}
 500:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]<819)
 501:Src/pid.c     **** 				{
 502:Src/pid.c     **** 					state_Jtest++;
 503:Src/pid.c     **** 				}
 504:Src/pid.c     **** 				break;
 505:Src/pid.c     **** 			}
 506:Src/pid.c     **** 			case 2:
 507:Src/pid.c     **** 			{	
 508:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]<819)
 509:Src/pid.c     **** 				{
 510:Src/pid.c     **** 					state_Jtest++;
 511:Src/pid.c     **** 				}				
 512:Src/pid.c     **** 				break;
 513:Src/pid.c     **** 			}
 514:Src/pid.c     **** 			default:
 515:Src/pid.c     **** 			{	
 516:Src/pid.c     **** 				g_CmdMap[SYS_SELF_TUNING] = 0;
 517:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 0;
 518:Src/pid.c     **** 				flag_processing_Jtest = 0;
 519:Src/pid.c     **** 				break;
 520:Src/pid.c     **** 			}
 521:Src/pid.c     **** 		}
 522:Src/pid.c     **** 	}
 523:Src/pid.c     **** 		else if(g_CmdMap[SYS_SELF_TUNING] == 4)//
 524:Src/pid.c     **** 	{
 525:Src/pid.c     **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 526:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;
 527:Src/pid.c     **** 
 528:Src/pid.c     **** 		
 529:Src/pid.c     **** 		test++;
 530:Src/pid.c     **** 		if(test < (10*10))
 531:Src/pid.c     **** 		{
 532:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
 533:Src/pid.c     **** 		}
 534:Src/pid.c     **** 		else if(test < (10*60))
 535:Src/pid.c     **** 		{
 536:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 4096;
 537:Src/pid.c     **** 		}
 538:Src/pid.c     **** 		else if(test < (10*110))
 539:Src/pid.c     **** 		{
 540:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
 541:Src/pid.c     **** 		}
 542:Src/pid.c     **** 		else if(test < (10*160))
 543:Src/pid.c     **** 		{
 544:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = -4096;
 545:Src/pid.c     **** 		}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 11


 546:Src/pid.c     **** 		else if(test < (10*170))
 547:Src/pid.c     **** 		{
 548:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
 549:Src/pid.c     **** 		}
 550:Src/pid.c     **** 		else
 551:Src/pid.c     **** 		{
 552:Src/pid.c     **** 			test = 0;
 553:Src/pid.c     **** 			g_CmdMap[SYS_SELF_TUNING] = 0;
 554:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
 555:Src/pid.c     **** 		}
 556:Src/pid.c     **** 	}
 557:Src/pid.c     **** 	else
 558:Src/pid.c     **** 	{
 559:Src/pid.c     **** 
 560:Src/pid.c     **** 		if(g_CmdMap[CMD_CUR_SET_PU]> g_CmdMap[SYS_CUR_UPPER_LIMIT_PU])
 561:Src/pid.c     **** 		{
 562:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = g_CmdMap[SYS_CUR_UPPER_LIMIT_PU];
 563:Src/pid.c     **** 		}
 564:Src/pid.c     **** 		if(g_CmdMap[CMD_CUR_SET_PU]< g_CmdMap[SYS_CUR_LOWER_LIMIT_PU])
 565:Src/pid.c     **** 		{
 566:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = g_CmdMap[SYS_CUR_LOWER_LIMIT_PU];
 567:Src/pid.c     **** 		}
 568:Src/pid.c     **** 	}
 569:Src/pid.c     **** 	
 570:Src/pid.c     **** 	pid_IQ.Up_limit = 16384;
 571:Src/pid.c     **** 	pid_IQ.Low_limit = -16384;
 572:Src/pid.c     **** 		
 573:Src/pid.c     **** 	pid_ID.Up_limit = 16384;
 574:Src/pid.c     **** 	pid_ID.Low_limit = -16384;	
 575:Src/pid.c     **** 	
 576:Src/pid.c     **** 	PID_control(g_CmdMap[CMD_CUR_SET_PU],g_CmdMap[CMD_CUR_ACT_PU],&pid_IQ);	
 577:Src/pid.c     **** 	PID_control(-0,g_CmdMap[CMD_CUR_D_ACT_PU],&pid_ID);	
 578:Src/pid.c     **** 	
 579:Src/pid.c     **** 	float mod_scalefactor =  16384.0f / sqrtf(pid_IQ.out * pid_IQ.out + pid_ID.out * pid_ID.out);
 580:Src/pid.c     **** 	if(mod_scalefactor < 1.0f)
 581:Src/pid.c     **** 	{
 582:Src/pid.c     ****         pid_IQ.out *= mod_scalefactor;
 583:Src/pid.c     ****         pid_ID.out *= mod_scalefactor;
 584:Src/pid.c     **** 	}
 585:Src/pid.c     **** 	else
 586:Src/pid.c     **** 	{
 587:Src/pid.c     **** 
 588:Src/pid.c     **** 	}
 589:Src/pid.c     **** 	
 590:Src/pid.c     **** 
 591:Src/pid.c     **** 	
 592:Src/pid.c     **** 	
 593:Src/pid.c     **** 	g_Vq = pid_IQ.out*N97_CCR/PU_REFERENCE;
 594:Src/pid.c     **** 	g_Vd = pid_ID.out*N97_CCR/PU_REFERENCE;	
 595:Src/pid.c     **** 	
 596:Src/pid.c     **** //	g_Vq = 100;//g_high_fre_pulse * 500;
 597:Src/pid.c     **** //	g_Vd = g_high_fre_pulse * 1000;
 598:Src/pid.c     **** 	
 599:Src/pid.c     **** 	g_high_fre_pulse = 0 - g_high_fre_pulse;
 600:Src/pid.c     **** 	
 601:Src/pid.c     **** //	inr_angle += 1;
 602:Src/pid.c     **** //	g_ElectricAngle = inr_angle;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 12


 603:Src/pid.c     **** 	
 604:Src/pid.c     ****   // Parkï¿½ï¿½ï¿½ä»»
 605:Src/pid.c     **** //	
 606:Src/pid.c     **** //		g_ElectricAngle_add = (int)pll_estimated_spd /100000;
 607:Src/pid.c     **** //		g_ElectricAngle = g_ElectricAngle + g_ElectricAngle_add;// * 0.000025;
 608:Src/pid.c     **** 	
 609:Src/pid.c     **** 	X = Math_Sin_EN360( g_ElectricAngle  );
 610:Src/pid.c     **** 	Y = Math_Cos_EN360( g_ElectricAngle );
 611:Src/pid.c     **** 	g_V_Alpha = Q15_MUL(g_Vd,X) + Q15_MUL(g_Vq,Y);  // ï¿½ï¿½Ç¶È¶ï¿½ï¿½ï¿½ÎªQï¿½ï¿½ï¿½ï¿½Alphaï¿½ï¿½Ä¼
 612:Src/pid.c     **** 	g_V_Beta = Q15_MUL(-g_Vd,Y) + Q15_MUL(g_Vq,X);
 613:Src/pid.c     **** 
 614:Src/pid.c     **** 	update_current_control(&motor_, (float)bus_voltage_*one_by_sqrt3*g_V_Alpha/REAL_CCR, (float)bus_vo
 615:Src/pid.c     **** 	// SVPWMÕ¼ï¿½Õ±È¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 616:Src/pid.c     **** 	X = g_V_Beta;
 617:Src/pid.c     **** 	temp32 = Q16_MUL(g_V_Alpha,113512);
 618:Src/pid.c     **** 	Y = (g_V_Beta + temp32) >> 1;
 619:Src/pid.c     **** 	Z = (g_V_Beta - temp32) >> 1;  
 620:Src/pid.c     ****   // ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹Ê¸ï¿½ï¿½ï¿½ï¿½ï¿½Úµï¿½ï¿½ï¿½ï¿½ï¿½
 621:Src/pid.c     ****   temp32 = 0;
 622:Src/pid.c     **** 	/** ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ª**/	
 623:Src/pid.c     **** 	if (X > 0) temp32 = 1;
 624:Src/pid.c     **** 	if (Z < 0) temp32 += 2;
 625:Src/pid.c     **** 	if (Y < 0) temp32 += 4;	
 626:Src/pid.c     **** 	g_Sector = temp32;
 627:Src/pid.c     **** 	g_Sector_test = g_Sector;
 628:Src/pid.c     **** 	g_X = X;
 629:Src/pid.c     **** 	g_Y = Y;
 630:Src/pid.c     **** 	g_Z = Z;
 631:Src/pid.c     ****   Calculate_CCR_SVP(TIM1, g_Sector, g_X, g_Y, g_Z);
 632:Src/pid.c     **** 
 633:Src/pid.c     **** }
 634:Src/pid.c     **** static void SpeedPID(void)
 635:Src/pid.c     **** { 
 636:Src/pid.c     **** 	static s32 s_test_speed_t_count = 0;
 637:Src/pid.c     **** 	s16 spd_test = 0;
 638:Src/pid.c     **** 	
 639:Src/pid.c     ****   if (g_CmdMap[TAG_WORK_MODE] == MODE_CURRENT ||g_CmdMap[TAG_WORK_MODE] == MODE_POSITION||g_CmdMap[
 640:Src/pid.c     ****   {
 641:Src/pid.c     **** 			g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[CMD_PROFILE_SPD_PU] + g_CmdMap[CMD_SPD_ADD_PU];
 642:Src/pid.c     ****   }
 643:Src/pid.c     **** 	else if( g_CmdMap[TAG_WORK_MODE] == MODE_FORCE )
 644:Src/pid.c     **** 	{
 645:Src/pid.c     **** 		g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[CMD_SPD_ADD_PU];
 646:Src/pid.c     **** 		
 647:Src/pid.c     **** 		pid_spd.enable =1;
 648:Src/pid.c     **** 	}
 649:Src/pid.c     ****   else if(g_CmdMap[TAG_WORK_MODE] == MODE_SPEED)
 650:Src/pid.c     ****   {
 651:Src/pid.c     **** 			if(status_Mode_POSITION_FORCE == 2) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ó´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÐµÄµï¿½ï¿½ï¿½ï¿½Ù
 652:Src/pid.c     **** 			{
 653:Src/pid.c     **** 				if(g_CmdMap[CMD_FORCE_DIR] == 0)
 654:Src/pid.c     **** 				{
 655:Src/pid.c     **** 					force_set = g_CmdMap[CMD_FORCE_SET_PU];
 656:Src/pid.c     **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 657:Src/pid.c     **** 				}
 658:Src/pid.c     **** 				else
 659:Src/pid.c     **** 				{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 13


 660:Src/pid.c     **** 					force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
 661:Src/pid.c     **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 662:Src/pid.c     **** 				}
 663:Src/pid.c     **** 				if(force_set >= 0 )
 664:Src/pid.c     **** 				{
 665:Src/pid.c     **** 					if(force_act>force_set || g_CmdMap[CMD_POS_ACT_PU] > g_CmdMap[SYS_POS_UPPER_LIMIT_PU])
 666:Src/pid.c     **** 					{
 667:Src/pid.c     **** 						status_Mode_POSITION_FORCE = 3;
 668:Src/pid.c     **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;	
 669:Src/pid.c     **** 						force_PID_out(g_CmdMap[CMD_CUR_SET_PU],&pid_force);
 670:Src/pid.c     **** 					
 671:Src/pid.c     **** 					}
 672:Src/pid.c     **** 					else
 673:Src/pid.c     **** 					{
 674:Src/pid.c     **** 						g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[CMD_SPD_SOFT_SET_PU];
 675:Src/pid.c     **** 					}
 676:Src/pid.c     **** 				}
 677:Src/pid.c     **** 				else
 678:Src/pid.c     **** 				{
 679:Src/pid.c     **** 					if(force_act<force_set || g_CmdMap[CMD_POS_ACT_PU] < g_CmdMap[SYS_POS_LOWER_LIMIT_PU])
 680:Src/pid.c     **** 					{
 681:Src/pid.c     **** 						status_Mode_POSITION_FORCE = 3;
 682:Src/pid.c     **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 683:Src/pid.c     **** 						force_PID_out(g_CmdMap[CMD_CUR_SET_PU],&pid_force); 
 684:Src/pid.c     ****  		
 685:Src/pid.c     **** 					}
 686:Src/pid.c     **** 					else
 687:Src/pid.c     **** 					{
 688:Src/pid.c     **** 						g_CmdMap[CMD_SPDREG_REF_PU] = -1*g_CmdMap[CMD_SPD_SOFT_SET_PU];
 689:Src/pid.c     **** 					}
 690:Src/pid.c     **** 				}
 691:Src/pid.c     **** 			}
 692:Src/pid.c     **** 			else
 693:Src/pid.c     **** 			{
 694:Src/pid.c     **** 							if(g_CmdMap[SYS_SPEED_TEST] == 0)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 695:Src/pid.c     **** 							{
 696:Src/pid.c     **** 								g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[CMD_SPD_SET_PU];
 697:Src/pid.c     **** 							}
 698:Src/pid.c     **** 							else if(g_CmdMap[SYS_SPEED_TEST] == 1)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½Ú·ï¿½Î§ï¿½ï¿½ï¿½ï¿½ï¿½ï
 699:Src/pid.c     **** 							{
 700:Src/pid.c     **** 								
 701:Src/pid.c     **** 								if(g_CmdMap[CMD_POS_ACT_PU] < 1638)
 702:Src/pid.c     **** 								{
 703:Src/pid.c     **** 									Test_dirt = 1;					
 704:Src/pid.c     **** 								}
 705:Src/pid.c     **** 								else if(g_CmdMap[CMD_POS_ACT_PU] > (16384-1638))
 706:Src/pid.c     **** 								{
 707:Src/pid.c     **** 									Test_dirt = -1;					
 708:Src/pid.c     **** 								}
 709:Src/pid.c     **** 								g_CmdMap[CMD_SPDREG_REF_PU] = Test_dirt*g_CmdMap[CMD_SPD_SET_PU];
 710:Src/pid.c     **** 
 711:Src/pid.c     **** 							}	
 712:Src/pid.c     **** 							else if(g_CmdMap[SYS_SPEED_TEST] == 11)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½Ú·ï¿½Î§ï¿½ï¿½ï¿½ï¿½ï¿½
 713:Src/pid.c     **** 							{
 714:Src/pid.c     **** 								if(g_CmdMap[CMD_POS_ADC_12BIT] < g_CmdMap[POS_LINEARITY_ADC(0)])
 715:Src/pid.c     **** 								{
 716:Src/pid.c     **** 									Test_dirt = 1;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 14


 717:Src/pid.c     **** 								}
 718:Src/pid.c     **** 								else if(g_CmdMap[CMD_POS_ADC_12BIT] > g_CmdMap[POS_LINEARITY_ADC(30)])
 719:Src/pid.c     **** 								{
 720:Src/pid.c     **** 									Test_dirt = -1;
 721:Src/pid.c     **** 								}
 722:Src/pid.c     **** 								spd_test = ABS(g_CmdMap[CMD_SPD_SET_PU]);
 723:Src/pid.c     **** 								if(s_test_speed_t_count++>4000)
 724:Src/pid.c     **** 								{
 725:Src/pid.c     **** 									s_test_speed_t_count = 0;
 726:Src/pid.c     **** 									if(g_flag_monitor_from_host == 0)
 727:Src/pid.c     **** 									{
 728:Src/pid.c     **** 										Test_perm = 0;   //4000ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½Í¨Ñ¶
 729:Src/pid.c     **** 									}
 730:Src/pid.c     **** 									else
 731:Src/pid.c     **** 									{
 732:Src/pid.c     **** 										Test_perm = 1;//4000ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½ï¿½Í¨Ñ¶
 733:Src/pid.c     **** 									}
 734:Src/pid.c     **** 									g_flag_monitor_from_host = 0;
 735:Src/pid.c     **** 								}
 736:Src/pid.c     **** 												if(Test_perm == 1)
 737:Src/pid.c     **** 								{
 738:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = Test_dirt*spd_test;
 739:Src/pid.c     **** 								}
 740:Src/pid.c     **** 								else
 741:Src/pid.c     **** 								{
 742:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = 0;
 743:Src/pid.c     **** 								}				
 744:Src/pid.c     **** 							}				
 745:Src/pid.c     **** 							else if(g_CmdMap[SYS_SPEED_TEST] == 12)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½Ðµï¿½ï¿½ï¿½Ð¡Î»ï
 746:Src/pid.c     **** 							{
 747:Src/pid.c     **** 								if(g_CmdMap[CMD_POS_ADC_12BIT] >g_CmdMap[POS_LINEARITY_ADC(0)])
 748:Src/pid.c     **** 								{
 749:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = -8192;
 750:Src/pid.c     **** 								}
 751:Src/pid.c     **** 								else
 752:Src/pid.c     **** 								{
 753:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = 0;
 754:Src/pid.c     **** 								}
 755:Src/pid.c     **** 							}
 756:Src/pid.c     **** 							else if(g_CmdMap[SYS_SPEED_TEST] == 13)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶ï¿½ï¿½ï¿½ï¿½Ðµï¿½ï¿½ï¿½ï¿½Î»
 757:Src/pid.c     **** 							{
 758:Src/pid.c     **** 								if(g_CmdMap[CMD_POS_ADC_12BIT] < g_CmdMap[POS_LINEARITY_ADC(30)])
 759:Src/pid.c     **** 								{
 760:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = 8192;
 761:Src/pid.c     **** 								}
 762:Src/pid.c     **** 								else
 763:Src/pid.c     **** 								{
 764:Src/pid.c     **** 									g_CmdMap[CMD_SPDREG_REF_PU] = 0;
 765:Src/pid.c     **** 								}
 766:Src/pid.c     **** 							}
 767:Src/pid.c     **** 							else
 768:Src/pid.c     **** 							{
 769:Src/pid.c     **** 								g_CmdMap[CMD_SPDREG_REF_PU] = 0;
 770:Src/pid.c     **** 							}				
 771:Src/pid.c     **** 			}
 772:Src/pid.c     **** 	}
 773:Src/pid.c     **** 	if(g_CmdMap[CMD_SPDREG_REF_PU]> g_CmdMap[SYS_SPD_UPPER_LIMIT_PU])
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 15


 774:Src/pid.c     **** 	{
 775:Src/pid.c     **** 		g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[SYS_SPD_UPPER_LIMIT_PU];
 776:Src/pid.c     **** 	}
 777:Src/pid.c     **** 	if(g_CmdMap[CMD_SPDREG_REF_PU]< g_CmdMap[SYS_SPD_LOWER_LIMIT_PU])
 778:Src/pid.c     **** 	{
 779:Src/pid.c     **** 		g_CmdMap[CMD_SPDREG_REF_PU] = g_CmdMap[SYS_SPD_LOWER_LIMIT_PU];
 780:Src/pid.c     **** 	}
 781:Src/pid.c     **** 
 782:Src/pid.c     **** 
 783:Src/pid.c     **** 	
 784:Src/pid.c     **** 	if(g_CmdMap[CMD_CUR_UPPER_LIMIT_PU] > g_CmdMap[SYS_CUR_UPPER_LIMIT_PU])
 785:Src/pid.c     **** 	{
 786:Src/pid.c     **** 		g_CmdMap[CMD_CUR_UPPER_LIMIT_PU] = g_CmdMap[SYS_CUR_UPPER_LIMIT_PU];
 787:Src/pid.c     **** 	}
 788:Src/pid.c     **** 	if(g_CmdMap[CMD_CUR_LOWER_LIMIT_PU] < g_CmdMap[SYS_CUR_LOWER_LIMIT_PU])
 789:Src/pid.c     **** 	{
 790:Src/pid.c     **** 		g_CmdMap[CMD_CUR_LOWER_LIMIT_PU] = g_CmdMap[SYS_CUR_LOWER_LIMIT_PU];
 791:Src/pid.c     **** 	}
 792:Src/pid.c     **** 	
 793:Src/pid.c     **** 	pid_spd.Up_limit = g_CmdMap[CMD_CUR_UPPER_LIMIT_PU];
 794:Src/pid.c     **** 	pid_spd.Low_limit = g_CmdMap[CMD_CUR_LOWER_LIMIT_PU];		
 795:Src/pid.c     **** 	
 796:Src/pid.c     **** 	
 797:Src/pid.c     **** 	
 798:Src/pid.c     **** 	
 799:Src/pid.c     **** 	
 800:Src/pid.c     **** //	
 801:Src/pid.c     **** //	pid_spd.Up_limit = 1000;
 802:Src/pid.c     **** //	pid_spd.Low_limit = -1000;		
 803:Src/pid.c     **** //	
 804:Src/pid.c     **** 	PID_control(g_CmdMap[CMD_SPDREG_REF_PU],g_CmdMap[CMD_SPD_ACT_PU],&pid_spd);	
 805:Src/pid.c     **** }
 806:Src/pid.c     **** void PositionPID(void)   //ï¿½Å½ï¿½ï¿½ï¿½ï¿½ï¿½ Î»ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½Ï²ï¿½ï¿½Î·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿
 807:Src/pid.c     **** {	
 808:Src/pid.c     **** 	static s16 delay_cnt = 0;
 809:Src/pid.c     **** 	pos_error_to_target = g_CmdMap[CMD_POS_SET_PU]-g_CmdMap[CMD_POS_ACT_PU];  // Æ«ï¿½ï¿½
 810:Src/pid.c     **** 	//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ð¶ï¿½
 811:Src/pid.c     **** 	if(ABS(pos_error_to_target)<gPos_ds && Profile_moving == 0)
 812:Src/pid.c     **** 	{
 813:Src/pid.c     **** 		if(delay_cnt <50)
 814:Src/pid.c     **** 		{
 815:Src/pid.c     **** 			delay_cnt++;
 816:Src/pid.c     **** 		}
 817:Src/pid.c     **** 		else
 818:Src/pid.c     **** 		{
 819:Src/pid.c     **** 			PosAtDead_Flag = 1;
 820:Src/pid.c     **** 		}
 821:Src/pid.c     **** 	}
 822:Src/pid.c     **** 	if(ABS(pos_error_to_target)>2*gPos_ds || Profile_moving == 1)
 823:Src/pid.c     **** 	{
 824:Src/pid.c     **** 		PosAtDead_Flag = 0;
 825:Src/pid.c     **** 		delay_cnt = 0;
 826:Src/pid.c     **** 	}	
 827:Src/pid.c     **** 	PosAtDead_Flag_Last = PosAtDead_Flag;
 828:Src/pid.c     ****   // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  
 829:Src/pid.c     **** 	// ï¿½ï¿½ï¿½Ö¼ï¿½ï¿½ï¿½	
 830:Src/pid.c     **** 	if(flag_posReg_strengthen == 1)
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 16


 831:Src/pid.c     **** 	{
 832:Src/pid.c     **** 		pid_pos.Up_limit = g_CmdMap[SYS_SPD_ADD_LIMIT_PU];
 833:Src/pid.c     **** 		pid_pos.Low_limit = -g_CmdMap[SYS_SPD_ADD_LIMIT_PU];	
 834:Src/pid.c     **** 	}
 835:Src/pid.c     **** 	else
 836:Src/pid.c     **** 	{
 837:Src/pid.c     **** 		pid_pos.Up_limit = g_CmdMap[SYS_SPD_ADD_LIMIT_PU]>>5;
 838:Src/pid.c     **** 		pid_pos.Low_limit = -(g_CmdMap[SYS_SPD_ADD_LIMIT_PU]>>5);	
 839:Src/pid.c     **** 	}		
 840:Src/pid.c     **** 	PID_control(g_CmdMap[CMD_PROFILE_POS_PU],g_CmdMap[CMD_POS_ACT_PU],&pid_pos);
 841:Src/pid.c     **** 	g_CmdMap[CMD_SPD_ADD_PU] = pid_pos.out;
 842:Src/pid.c     **** }
 843:Src/pid.c     **** //int16_t Force_set_drop_detection = 0;
 844:Src/pid.c     **** //Î»ï¿½Ã¿ï¿½ï¿½ï¿½
 845:Src/pid.c     **** void Gripper_control(void)
 846:Src/pid.c     **** {
 847:Src/pid.c     **** 	s32 error_Pos = g_CmdMap[CMD_POS_SET_PU] - g_CmdMap[CMD_POS_ACT_PU];
 848:Src/pid.c     **** 	if(	(g_CmdMap[TAG_WORK_MODE] != MODE_POSITION) || Motor_forbidden == 1)
 849:Src/pid.c     **** 	{
 850:Src/pid.c     **** 		Gripper_Move = 0x00;
 851:Src/pid.c     **** 		Grriper_Run = 0;
 852:Src/pid.c     **** 		Flag_contact = 0;
 853:Src/pid.c     **** 		Flag_grip_F_OK = 0;
 854:Src/pid.c     **** 		Flag_grip_P_OK = 0;
 855:Src/pid.c     **** 		Flag_rellease_P_OK = 0;
 856:Src/pid.c     **** 	}	
 857:Src/pid.c     **** 	else
 858:Src/pid.c     **** 	{
 859:Src/pid.c     **** 		
 860:Src/pid.c     **** //		if(g_CmdMap[CMD_POS_SET_PU]>g_CmdMap[CMD_POS_UPPER_LIMIT_PU])
 861:Src/pid.c     **** //		{
 862:Src/pid.c     **** //			g_CmdMap[CMD_POS_SET_PU] =g_CmdMap[CMD_POS_UPPER_LIMIT_PU];		
 863:Src/pid.c     **** //			if(g_CmdMap[CMD_POS_SET_PU] > 16384)
 864:Src/pid.c     **** //			{
 865:Src/pid.c     **** //				g_CmdMap[CMD_POS_SET_PU] = 16384;
 866:Src/pid.c     **** //			}
 867:Src/pid.c     **** //		}
 868:Src/pid.c     **** //		if(g_CmdMap[CMD_POS_SET_PU]<g_CmdMap[CMD_POS_LOWER_LIMIT_PU])
 869:Src/pid.c     **** //		{
 870:Src/pid.c     **** //			g_CmdMap[CMD_POS_SET_PU] = g_CmdMap[CMD_POS_LOWER_LIMIT_PU];
 871:Src/pid.c     **** //			if(g_CmdMap[CMD_POS_SET_PU] < 0)
 872:Src/pid.c     **** //			{
 873:Src/pid.c     **** //				g_CmdMap[CMD_POS_SET_PU] = 0;
 874:Src/pid.c     **** //			}
 875:Src/pid.c     **** //		}
 876:Src/pid.c     **** 		
 877:Src/pid.c     **** 		
 878:Src/pid.c     **** 		
 879:Src/pid.c     **** 		if(Flag_Set_OpenLen == 1  && (error_Pos>g_CmdMap[SEV_POSITION_DS]||error_Pos<-g_CmdMap[SEV_POSITI
 880:Src/pid.c     **** 		{
 881:Src/pid.c     **** 				Flag_Set_OpenLen = 0;
 882:Src/pid.c     **** 			
 883:Src/pid.c     **** 				if(g_CmdMap[CMD_E_STOP] == 0)
 884:Src/pid.c     **** 				{
 885:Src/pid.c     **** 				
 886:Src/pid.c     **** 				}
 887:Src/pid.c     **** 				
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 17


 888:Src/pid.c     **** 				g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;	
 889:Src/pid.c     **** 				Profile_ParaSet();
 890:Src/pid.c     **** 				if(g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_1_SERVO)
 891:Src/pid.c     **** 				{
 892:Src/pid.c     **** 					tCnt_f = 0.0;
 893:Src/pid.c     **** 				}
 894:Src/pid.c     **** 				
 895:Src/pid.c     **** 				Flag_contact = 0;
 896:Src/pid.c     **** 				Flag_grip_F_OK = 0;
 897:Src/pid.c     **** 				Flag_grip_P_OK = 0;
 898:Src/pid.c     **** 				Flag_rellease_P_OK = 0;
 899:Src/pid.c     **** 				if(g_CmdMap[CMD_POS_SET_PU] < g_CmdMap[CMD_POS_ACT_PU])
 900:Src/pid.c     **** 				{
 901:Src/pid.c     **** 					Gripper_Move = 0x01;//ï¿½ï¿½È¡
 902:Src/pid.c     **** 					Grriper_Run = 1;
 903:Src/pid.c     **** 					pid_spd.enable = 1;
 904:Src/pid.c     **** 					pid_pos.enable = 1;
 905:Src/pid.c     **** 					if(g_CmdMap[CMD_E_STOP] == 0 && (g_CmdMap[CMD_ERROR] & 0x0fff) == 0x0000)
 906:Src/pid.c     **** 					{
 907:Src/pid.c     **** 						g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 908:Src/pid.c     **** 					}
 909:Src/pid.c     **** 					//g_Flag_drop_detection = 1;   // 1-ï¿½ï¿½ï¿½Úµï¿½ï¿½ï¿½ï¿½ï¿½ 0-ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ø±ï¿½
 910:Src/pid.c     **** 					Grriper_Run_last = 0;
 911:Src/pid.c     **** 				}
 912:Src/pid.c     **** 				else if(g_CmdMap[CMD_POS_SET_PU] > g_CmdMap[CMD_POS_ACT_PU])
 913:Src/pid.c     **** 				{
 914:Src/pid.c     **** 					Gripper_Move = 0x02;//ï¿½É¿ï¿½
 915:Src/pid.c     **** 					Grriper_Run = 1;
 916:Src/pid.c     **** 					pid_spd.enable = 1;
 917:Src/pid.c     **** 					pid_pos.enable = 1;
 918:Src/pid.c     **** 					if(g_CmdMap[CMD_E_STOP] == 0 && (g_CmdMap[CMD_ERROR] & 0x0fff) == 0x0000)
 919:Src/pid.c     **** 					{
 920:Src/pid.c     **** 						g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 921:Src/pid.c     **** 					}
 922:Src/pid.c     **** 					Grriper_Run_last = 0;
 923:Src/pid.c     **** 				}
 924:Src/pid.c     **** 				else
 925:Src/pid.c     **** 				{
 926:Src/pid.c     **** 				}
 927:Src/pid.c     **** 		}
 928:Src/pid.c     **** 		g_pos_tag = g_CmdMap[CMD_POS_SET_PU];
 929:Src/pid.c     **** 
 930:Src/pid.c     **** 		if(Gripper_Move == 1)
 931:Src/pid.c     **** 		{
 932:Src/pid.c     **** 			Flag_grip_F_OK = 1;
 933:Src/pid.c     **** 		}
 934:Src/pid.c     **** 		if(Grriper_Run == 1 && g_CmdMap[TAG_MOTOR_ENABLE] == 1)
 935:Src/pid.c     **** 		{		
 936:Src/pid.c     **** 			Flag_Profile_Enable = 1;
 937:Src/pid.c     **** 		}
 938:Src/pid.c     **** 		else
 939:Src/pid.c     **** 		{
 940:Src/pid.c     **** 			Flag_Profile_Enable = 0;
 941:Src/pid.c     **** 		}
 942:Src/pid.c     **** 		//ï¿½ï¿½ï¿½Î·ï¿½ï¿½ï¿½
 943:Src/pid.c     **** 		Profile();
 944:Src/pid.c     **** 		//Î»ï¿½Ãµï¿½ï¿½ï¿½
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 18


 945:Src/pid.c     **** 		PositionPID();	
 946:Src/pid.c     **** 	}
 947:Src/pid.c     **** }
 948:Src/pid.c     **** 	float v = 11.84;
 949:Src/pid.c     **** 	float L,temp_L;
 950:Src/pid.c     **** 
 951:Src/pid.c     **** extern volatile  int delta_alpha;
 952:Src/pid.c     **** extern volatile  int delata_beta;
 953:Src/pid.c     **** 
 954:Src/pid.c     **** int observer_ElectricAngle;
 955:Src/pid.c     **** int observer_speed;
 956:Src/pid.c     **** int integre_observer_ElectricAngle;
 957:Src/pid.c     **** 
 958:Src/pid.c     **** void hfi_update_angle(void)
 959:Src/pid.c     **** {
 960:Src/pid.c     **** 	int X,Y;
 961:Src/pid.c     **** 	int temp_x;
 962:Src/pid.c     **** 	int temp_y;
 963:Src/pid.c     **** 	int pll_intput;
 964:Src/pid.c     **** 	int temp_q,temp_d;
 965:Src/pid.c     **** 	static float inr_angle = 0;
 966:Src/pid.c     **** 	int  observer_ElectricAngle1;
 967:Src/pid.c     **** 	
 968:Src/pid.c     **** 	pid_pll.dead_zone = 0;
 969:Src/pid.c     **** 	pid_pll.Kp = 1000;
 970:Src/pid.c     **** 	pid_pll.Ki = 10;
 971:Src/pid.c     **** 	pid_pll.Kd = 0;
 972:Src/pid.c     **** 	pid_pll.frequency = F_CUR_REGULATOR_HZ;
 973:Src/pid.c     **** 	pid_pll.enable =1;
 974:Src/pid.c     **** 	pid_pll.Up_limit = 0x7FFFFFFF;
 975:Src/pid.c     **** 	pid_pll.Low_limit = -0x7FFFFFFF;
 976:Src/pid.c     **** 	
 977:Src/pid.c     **** 	
 978:Src/pid.c     **** 	park_transform(delta_alpha, delata_beta, &temp_q, &temp_d,g_ElectricAngle);
 979:Src/pid.c     **** 	
 980:Src/pid.c     **** 	L = v *1.7321*500*1000 /(g_Iq * F_CUR_REGULATOR_HZ/1000 ) /3 /MAX_CCR*0.58*0.7; //0.7 Ïµï¿½ï¿½ï¿½ï
 981:Src/pid.c     **** 	temp_L = v *1.7321*500*1000 /(temp_d * F_CUR_REGULATOR_HZ/1000 ) /3/MAX_CCR*0.58*0.7;
 982:Src/pid.c     **** 	
 983:Src/pid.c     **** 	X = Math_Sin_EN360(observer_ElectricAngle);
 984:Src/pid.c     ****   Y = Math_Cos_EN360(observer_ElectricAngle);
 985:Src/pid.c     **** 	
 986:Src/pid.c     **** 	temp_x = Q15_MUL(delta_alpha,X);
 987:Src/pid.c     **** 	temp_y = Q15_MUL(delata_beta,Y);
 988:Src/pid.c     **** 	
 989:Src/pid.c     **** 	pll_intput = temp_x - temp_y;  //+ 90ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½ x -y ? ,y -x ï¿½ï¿½
 990:Src/pid.c     **** 	
 991:Src/pid.c     **** 	PID_control(0,pll_intput,&pid_pll);
 992:Src/pid.c     **** 	observer_speed = pid_pll.out;
 993:Src/pid.c     **** 	
 994:Src/pid.c     **** 	integre_observer_ElectricAngle +=observer_speed; //update angle
 995:Src/pid.c     **** 	
 996:Src/pid.c     **** 	observer_ElectricAngle = integre_observer_ElectricAngle /100;
 997:Src/pid.c     **** 	
 998:Src/pid.c     **** 	observer_ElectricAngle  &= 0x7fff; 
 999:Src/pid.c     **** 	
1000:Src/pid.c     **** 	observer_ElectricAngle1= observer_ElectricAngle  + EN_90;// EN_90;//EN_90; 
1001:Src/pid.c     **** 	observer_ElectricAngle1  &= 0x7fff; 
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 19


1002:Src/pid.c     **** 	
1003:Src/pid.c     **** 	g_ElectricAngle = observer_ElectricAngle1;
1004:Src/pid.c     **** 	
1005:Src/pid.c     **** #if 0 	 //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½Å³ï¿½
1006:Src/pid.c     **** 	inr_angle  += 0.1;
1007:Src/pid.c     **** 	if(inr_angle  > 32768 )
1008:Src/pid.c     **** 		inr_angle = 0;
1009:Src/pid.c     **** 	g_ElectricAngle = 0;
1010:Src/pid.c     **** #endif
1011:Src/pid.c     **** 	
1012:Src/pid.c     **** }
1013:Src/pid.c     **** 
1014:Src/pid.c     **** 
1015:Src/pid.c     **** static void OpenLoop(void)
1016:Src/pid.c     **** {
  27              		.loc 1 1016 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 32
  34              		.cfi_offset 3, -32
  35              		.cfi_offset 4, -28
  36              		.cfi_offset 5, -24
  37              		.cfi_offset 6, -20
  38              		.cfi_offset 7, -16
  39              		.cfi_offset 8, -12
  40              		.cfi_offset 9, -8
  41              		.cfi_offset 14, -4
1017:Src/pid.c     **** 	int X,Y;
1018:Src/pid.c     **** 	int temp_x;
1019:Src/pid.c     **** 	int temp_y;
1020:Src/pid.c     **** 	int pll_intput;
1021:Src/pid.c     **** 	
1022:Src/pid.c     ****   s16 temp32 = g_CmdMap[TAG_OPEN_PWM] * MAX_CCR / 100;  // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ªï¿½ï¿½ï¿½ï¿½ï¿
  42              		.loc 1 1022 0
  43 0004 454B     		ldr	r3, .L8
  44 0006 B3F86022 		ldrh	r2, [r3, #608]
  45 000a 13B2     		sxth	r3, r2
  46 000c 4FF43D62 		mov	r2, #3024
  47 0010 02FB03F2 		mul	r2, r2, r3
  48 0014 4249     		ldr	r1, .L8+4
  49 0016 81FB0231 		smull	r3, r1, r1, r2
  50 001a D317     		asrs	r3, r2, #31
  51 001c C3EB6113 		rsb	r3, r3, r1, asr #5
  52 0020 1AB2     		sxth	r2, r3
  53              	.LVL0:
1023:Src/pid.c     ****   g_Timer1CCR = (ABS(temp32) <= MAX_CCR) ? temp32 : g_Timer1CCR;  // ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½Õµï¿½ï¿
  54              		.loc 1 1023 0
  55 0022 03F53D63 		add	r3, r3, #3024
  56 0026 9BB2     		uxth	r3, r3
  57 0028 B3F5BD5F 		cmp	r3, #6048
  58 002c 64D8     		bhi	.L2
  59              		.loc 1 1023 0 is_stmt 0 discriminator 1
  60 002e 1346     		mov	r3, r2
  61              	.L3:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 20


  62              		.loc 1 1023 0 discriminator 4
  63 0030 3C4A     		ldr	r2, .L8+8
  64              	.LVL1:
  65 0032 1360     		str	r3, [r2]
1024:Src/pid.c     **** 	
1025:Src/pid.c     **** 	g_Vq =  g_CmdMap[TAG_OPEN_PWM] * 16384 / 100;  
  66              		.loc 1 1025 0 is_stmt 1 discriminator 4
  67 0034 394B     		ldr	r3, .L8
  68 0036 B3F86032 		ldrh	r3, [r3, #608]
  69 003a 1BB2     		sxth	r3, r3
  70 003c 9B03     		lsls	r3, r3, #14
  71 003e 384A     		ldr	r2, .L8+4
  72 0040 82FB0312 		smull	r1, r2, r2, r3
  73 0044 DB17     		asrs	r3, r3, #31
  74 0046 C3EB6213 		rsb	r3, r3, r2, asr #5
  75 004a 374E     		ldr	r6, .L8+12
  76 004c 3360     		str	r3, [r6]
1026:Src/pid.c     **** 	g_Vd = 0;
  77              		.loc 1 1026 0 discriminator 4
  78 004e 374C     		ldr	r4, .L8+16
  79 0050 0023     		movs	r3, #0
  80 0052 2360     		str	r3, [r4]
1027:Src/pid.c     **** 
1028:Src/pid.c     **** 	X = Math_Sin_EN360( g_ElectricAngle  );
  81              		.loc 1 1028 0 discriminator 4
  82 0054 364D     		ldr	r5, .L8+20
  83 0056 2868     		ldr	r0, [r5]
  84 0058 80B2     		uxth	r0, r0
  85 005a FFF7FEFF 		bl	Math_Sin_EN360
  86              	.LVL2:
  87 005e 8046     		mov	r8, r0
  88              	.LVL3:
1029:Src/pid.c     **** 	Y = Math_Cos_EN360( g_ElectricAngle );
  89              		.loc 1 1029 0 discriminator 4
  90 0060 2868     		ldr	r0, [r5]
  91              	.LVL4:
  92 0062 80B2     		uxth	r0, r0
  93 0064 FFF7FEFF 		bl	Math_Cos_EN360
  94              	.LVL5:
  95 0068 8146     		mov	r9, r0
  96              	.LVL6:
1030:Src/pid.c     **** 	g_V_Alpha = Q15_MUL(g_Vd,X) + Q15_MUL(g_Vq,Y);  // ï¿½ï¿½Ç¶È¶ï¿½ï¿½ï¿½ÎªQï¿½ï¿½ï¿½ï¿½Alphaï¿½ï¿½Ä¼
  97              		.loc 1 1030 0 discriminator 4
  98 006a 4146     		mov	r1, r8
  99 006c 2068     		ldr	r0, [r4]
 100              	.LVL7:
 101 006e FFF7FEFF 		bl	Q15_MUL
 102              	.LVL8:
 103 0072 0746     		mov	r7, r0
 104 0074 4946     		mov	r1, r9
 105 0076 3068     		ldr	r0, [r6]
 106 0078 FFF7FEFF 		bl	Q15_MUL
 107              	.LVL9:
 108 007c 3844     		add	r0, r0, r7
 109 007e 2D4F     		ldr	r7, .L8+24
 110 0080 3860     		str	r0, [r7]
1031:Src/pid.c     **** 	g_V_Beta = Q15_MUL(-g_Vd,Y) + Q15_MUL(g_Vq,X);
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 21


 111              		.loc 1 1031 0 discriminator 4
 112 0082 2068     		ldr	r0, [r4]
 113 0084 4946     		mov	r1, r9
 114 0086 4042     		negs	r0, r0
 115 0088 FFF7FEFF 		bl	Q15_MUL
 116              	.LVL10:
 117 008c 0446     		mov	r4, r0
 118 008e 4146     		mov	r1, r8
 119 0090 3068     		ldr	r0, [r6]
 120 0092 FFF7FEFF 		bl	Q15_MUL
 121              	.LVL11:
 122 0096 2044     		add	r0, r0, r4
 123 0098 274B     		ldr	r3, .L8+28
 124 009a 1860     		str	r0, [r3]
1032:Src/pid.c     **** 
1033:Src/pid.c     **** 	update_current_control(&motor_, (float)bus_voltage_*one_by_sqrt3*g_V_Alpha/REAL_CCR, (float)bus_vo
 125              		.loc 1 1033 0 discriminator 4
 126 009c 274B     		ldr	r3, .L8+32
 127 009e D3ED000A 		vldr.32	s1, [r3]
 128 00a2 9FED277A 		vldr.32	s14, .L8+36
 129 00a6 20EE877A 		vmul.f32	s14, s1, s14
 130 00aa D7ED007A 		vldr.32	s15, [r7]	@ int
 131 00ae F8EEE77A 		vcvt.f32.s32	s15, s15
 132 00b2 67EE877A 		vmul.f32	s15, s15, s14
 133 00b6 06EE900A 		vmov	s13, r0	@ int
 134 00ba F8EEE60A 		vcvt.f32.s32	s1, s13
 135 00be 60EE870A 		vmul.f32	s1, s1, s14
 136 00c2 9FED200A 		vldr.32	s0, .L8+40
 137 00c6 C0EE800A 		vdiv.f32	s1, s1, s0
 138 00ca 87EE800A 		vdiv.f32	s0, s15, s0
 139 00ce 1E48     		ldr	r0, .L8+44
 140 00d0 FFF7FEFF 		bl	update_current_control
 141              	.LVL12:
1034:Src/pid.c     **** 
1035:Src/pid.c     **** //	g_ElectricAngle &= 0x7fff;
1036:Src/pid.c     **** //	if(observer_speed < 0)
1037:Src/pid.c     **** //	{
1038:Src/pid.c     **** //		g_ElectricAngle = 0 - g_ElectricAngle;
1039:Src/pid.c     **** //	}
1040:Src/pid.c     **** //	g_ElectricAngle += 32768;
1041:Src/pid.c     **** //	g_ElectricAngle &= 0x7fff;
1042:Src/pid.c     **** 	anlge_reg = g_ElectricAngle;//observer_ElectricAngle;
 142              		.loc 1 1042 0 discriminator 4
 143 00d4 2B68     		ldr	r3, [r5]
 144 00d6 1BB2     		sxth	r3, r3
 145 00d8 1C4A     		ldr	r2, .L8+48
 146 00da 1380     		strh	r3, [r2]	@ movhi
1043:Src/pid.c     **** 	
1044:Src/pid.c     **** 	if(anlge_reg < EN_0)
 147              		.loc 1 1044 0 discriminator 4
 148 00dc 1C4A     		ldr	r2, .L8+52
 149 00de B2F90020 		ldrsh	r2, [r2]
 150 00e2 9342     		cmp	r3, r2
 151 00e4 0BDB     		blt	.L7
1045:Src/pid.c     **** 	{
1046:Src/pid.c     **** 		anlge_reg = anlge_reg+EN_360;
1047:Src/pid.c     **** 	}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 22


1048:Src/pid.c     **** 	else if(anlge_reg > EN_360)
 152              		.loc 1 1048 0
 153 00e6 1B4A     		ldr	r2, .L8+56
 154 00e8 B2F90020 		ldrsh	r2, [r2]
 155 00ec 9342     		cmp	r3, r2
 156 00ee 0BDD     		ble	.L5
1049:Src/pid.c     **** 	{
1050:Src/pid.c     **** 		anlge_reg = anlge_reg-EN_360;
 157              		.loc 1 1050 0
 158 00f0 9B1A     		subs	r3, r3, r2
 159 00f2 164A     		ldr	r2, .L8+48
 160 00f4 1380     		strh	r3, [r2]	@ movhi
 161 00f6 07E0     		b	.L5
 162              	.LVL13:
 163              	.L2:
1023:Src/pid.c     **** 	
 164              		.loc 1 1023 0 discriminator 2
 165 00f8 0A4B     		ldr	r3, .L8+8
 166 00fa 1B68     		ldr	r3, [r3]
 167 00fc 98E7     		b	.L3
 168              	.LVL14:
 169              	.L7:
1046:Src/pid.c     **** 	}
 170              		.loc 1 1046 0
 171 00fe 154A     		ldr	r2, .L8+56
 172 0100 1288     		ldrh	r2, [r2]
 173 0102 1344     		add	r3, r3, r2
 174 0104 114A     		ldr	r2, .L8+48
 175 0106 1380     		strh	r3, [r2]	@ movhi
 176              	.L5:
1051:Src/pid.c     **** 	}
1052:Src/pid.c     ****   PWM_OutPut_Open(TIM1, anlge_reg, g_Timer1CCR);
 177              		.loc 1 1052 0
 178 0108 064B     		ldr	r3, .L8+8
 179 010a 1A68     		ldr	r2, [r3]
 180 010c 0F4B     		ldr	r3, .L8+48
 181 010e B3F90010 		ldrsh	r1, [r3]
 182 0112 1148     		ldr	r0, .L8+60
 183 0114 FFF7FEFF 		bl	PWM_OutPut_Open
 184              	.LVL15:
1053:Src/pid.c     **** }
 185              		.loc 1 1053 0
 186 0118 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 187              	.LVL16:
 188              	.L9:
 189              		.align	2
 190              	.L8:
 191 011c 00000000 		.word	g_CmdMap
 192 0120 1F85EB51 		.word	1374389535
 193 0124 00000000 		.word	g_Timer1CCR
 194 0128 00000000 		.word	.LANCHOR0
 195 012c 00000000 		.word	.LANCHOR1
 196 0130 00000000 		.word	g_ElectricAngle
 197 0134 00000000 		.word	.LANCHOR2
 198 0138 00000000 		.word	.LANCHOR3
 199 013c 00000000 		.word	bus_voltage_
 200 0140 3ACD133F 		.word	1058262330
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 23


 201 0144 00005245 		.word	1163001856
 202 0148 00000000 		.word	motor_
 203 014c 00000000 		.word	anlge_reg
 204 0150 00000000 		.word	EN_0
 205 0154 00000000 		.word	EN_360
 206 0158 002C0140 		.word	1073818624
 207              		.cfi_endproc
 208              	.LFE343:
 210              		.global	__aeabi_i2d
 211              		.global	__aeabi_ddiv
 212              		.global	__aeabi_dmul
 213              		.global	__aeabi_d2uiz
 214              		.section	.text.Calculate_CCR_SVP,"ax",%progbits
 215              		.align	1
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 219              		.fpu fpv4-sp-d16
 221              	Calculate_CCR_SVP:
 222              	.LFB337:
 304:Src/pid.c     ****   s32 t0, tk, tk_1;
 223              		.loc 1 304 0
 224              		.cfi_startproc
 225              		@ args = 4, pretend = 0, frame = 0
 226              		@ frame_needed = 0, uses_anonymous_args = 0
 227              	.LVL17:
 228 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 229              	.LCFI1:
 230              		.cfi_def_cfa_offset 32
 231              		.cfi_offset 3, -32
 232              		.cfi_offset 4, -28
 233              		.cfi_offset 5, -24
 234              		.cfi_offset 6, -20
 235              		.cfi_offset 7, -16
 236              		.cfi_offset 8, -12
 237              		.cfi_offset 9, -8
 238              		.cfi_offset 14, -4
 239 0004 0446     		mov	r4, r0
 240 0006 0898     		ldr	r0, [sp, #32]
 241              	.LVL18:
 309:Src/pid.c     ****   {
 242              		.loc 1 309 0
 243 0008 0139     		subs	r1, r1, #1
 244              	.LVL19:
 245 000a 0529     		cmp	r1, #5
 246 000c 62D8     		bhi	.L28
 247 000e DFE801F0 		tbb	[pc, r1]
 248              	.L13:
 249 0012 03       		.byte	(.L12-.L13)/2
 250 0013 3E       		.byte	(.L14-.L13)/2
 251 0014 45       		.byte	(.L15-.L13)/2
 252 0015 4C       		.byte	(.L16-.L13)/2
 253 0016 53       		.byte	(.L17-.L13)/2
 254 0017 5A       		.byte	(.L18-.L13)/2
 255              		.p2align 1
 256              	.L12:
 257              	.LVL20:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 24


 314:Src/pid.c     **** 			CCR3 = t0>>1;
 258              		.loc 1 314 0
 259 0018 C3F55261 		rsb	r1, r3, #3360
 260              	.LVL21:
 261 001c 091A     		subs	r1, r1, r0
 262              	.LVL22:
 315:Src/pid.c     **** 			CCR1 = CCR3 + tk;
 263              		.loc 1 315 0
 264 001e 4910     		asrs	r1, r1, #1
 265              	.LVL23:
 316:Src/pid.c     **** 			CCR2 = CCR1 + tk_1;
 266              		.loc 1 316 0
 267 0020 5E18     		adds	r6, r3, r1
 268              	.LVL24:
 317:Src/pid.c     **** 		break;		
 269              		.loc 1 317 0
 270 0022 8519     		adds	r5, r0, r6
 271              	.LVL25:
 272              	.L11:
 365:Src/pid.c     ****   CCR2 = CCR2>N97_CCR?N97_CCR:(CCR2<0?0:CCR2);
 273              		.loc 1 365 0
 274 0024 40F67533 		movw	r3, #2933
 275              	.LVL26:
 276 0028 9E42     		cmp	r6, r3
 277 002a 58DC     		bgt	.L29
 365:Src/pid.c     ****   CCR2 = CCR2>N97_CCR?N97_CCR:(CCR2<0?0:CCR2);
 278              		.loc 1 365 0 is_stmt 0 discriminator 1
 279 002c 26EAE676 		bic	r6, r6, r6, asr #31
 280              	.LVL27:
 281              	.L19:
 366:Src/pid.c     ****   CCR3 = CCR3>N97_CCR?N97_CCR:(CCR3<0?0:CCR3);
 282              		.loc 1 366 0 is_stmt 1 discriminator 4
 283 0030 40F67533 		movw	r3, #2933
 284 0034 9D42     		cmp	r5, r3
 285 0036 55DC     		bgt	.L30
 366:Src/pid.c     ****   CCR3 = CCR3>N97_CCR?N97_CCR:(CCR3<0?0:CCR3);
 286              		.loc 1 366 0 is_stmt 0 discriminator 1
 287 0038 25EAE575 		bic	r5, r5, r5, asr #31
 288              	.LVL28:
 289              	.L20:
 367:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 0)
 290              		.loc 1 367 0 is_stmt 1 discriminator 4
 291 003c 40F67533 		movw	r3, #2933
 292 0040 9942     		cmp	r1, r3
 293 0042 52DC     		bgt	.L31
 367:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 0)
 294              		.loc 1 367 0 is_stmt 0 discriminator 1
 295 0044 21EAE171 		bic	r1, r1, r1, asr #31
 296              	.LVL29:
 297              	.L21:
 368:Src/pid.c     **** 	{
 298              		.loc 1 368 0 is_stmt 1 discriminator 4
 299 0048 794B     		ldr	r3, .L36+8
 300 004a B3F81A32 		ldrh	r3, [r3, #538]
 301 004e 1BB2     		sxth	r3, r3
 302 0050 1BB9     		cbnz	r3, .L22
 370:Src/pid.c     **** 			sin_wave_t_us = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 25


 303              		.loc 1 370 0
 304 0052 784A     		ldr	r2, .L36+12
 305              	.LVL30:
 306 0054 1360     		str	r3, [r2]
 371:Src/pid.c     **** 	}
 307              		.loc 1 371 0
 308 0056 784A     		ldr	r2, .L36+16
 309 0058 1360     		str	r3, [r2]
 310              	.L22:
 375:Src/pid.c     **** 	{
 311              		.loc 1 375 0
 312 005a 754B     		ldr	r3, .L36+8
 313 005c B3F81A32 		ldrh	r3, [r3, #538]
 314 0060 1BB2     		sxth	r3, r3
 315 0062 042B     		cmp	r3, #4
 316 0064 44D0     		beq	.L23
 375:Src/pid.c     **** 	{
 317              		.loc 1 375 0 is_stmt 0 discriminator 1
 318 0066 724B     		ldr	r3, .L36+8
 319 0068 B3F81A32 		ldrh	r3, [r3, #538]
 320 006c 1BB2     		sxth	r3, r3
 321 006e 052B     		cmp	r3, #5
 322 0070 3ED0     		beq	.L23
 323              	.L24:
 384:Src/pid.c     **** 	{
 324              		.loc 1 384 0 is_stmt 1
 325 0072 6F4B     		ldr	r3, .L36+8
 326 0074 B3F81A32 		ldrh	r3, [r3, #538]
 327 0078 1BB2     		sxth	r3, r3
 328 007a 042B     		cmp	r3, #4
 329 007c 48D0     		beq	.L34
 330              	.LVL31:
 331              	.L25:
 410:Src/pid.c     ****   TIMx->CCR2 = CCR2;
 332              		.loc 1 410 0
 333 007e E163     		str	r1, [r4, #60]
 411:Src/pid.c     ****   TIMx->CCR1 = CCR1;
 334              		.loc 1 411 0
 335 0080 A563     		str	r5, [r4, #56]
 412:Src/pid.c     **** 	//TIMx->CCER = (u16)0x5FFF;
 336              		.loc 1 412 0
 337 0082 6663     		str	r6, [r4, #52]
 414:Src/pid.c     **** }
 338              		.loc 1 414 0
 339 0084 45F25553 		movw	r3, #21845
 340 0088 2362     		str	r3, [r4, #32]
 415:Src/pid.c     **** 
 341              		.loc 1 415 0
 342 008a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 343              	.LVL32:
 344              	.L14:
 322:Src/pid.c     **** 			CCR2 = t0>>1;
 345              		.loc 1 322 0
 346 008e 02F55265 		add	r5, r2, #3360
 347 0092 ED1A     		subs	r5, r5, r3
 348              	.LVL33:
 323:Src/pid.c     **** 			CCR3 = CCR2 + tk;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 26


 349              		.loc 1 323 0
 350 0094 6D10     		asrs	r5, r5, #1
 351              	.LVL34:
 352 0096 A91A     		subs	r1, r5, r2
 353              	.LVL35:
 325:Src/pid.c     **** 		break;		
 354              		.loc 1 325 0
 355 0098 5E18     		adds	r6, r3, r1
 356              	.LVL36:
 326:Src/pid.c     **** 		case 3:
 357              		.loc 1 326 0
 358 009a C3E7     		b	.L11
 359              	.LVL37:
 360              	.L15:
 330:Src/pid.c     **** 			CCR3 = t0>>1;
 361              		.loc 1 330 0
 362 009c 00F55261 		add	r1, r0, #3360
 363 00a0 891A     		subs	r1, r1, r2
 364              	.LVL38:
 331:Src/pid.c     **** 			CCR2 = CCR3 + tk_1;
 365              		.loc 1 331 0
 366 00a2 4910     		asrs	r1, r1, #1
 367              	.LVL39:
 332:Src/pid.c     **** 			CCR1 = CCR2 + tk;
 368              		.loc 1 332 0
 369 00a4 5518     		adds	r5, r2, r1
 370              	.LVL40:
 371 00a6 2E1A     		subs	r6, r5, r0
 372              	.LVL41:
 334:Src/pid.c     **** 		case 4:
 373              		.loc 1 334 0
 374 00a8 BCE7     		b	.L11
 375              	.LVL42:
 376              	.L16:
 338:Src/pid.c     **** 			CCR1 = t0>>1;
 377              		.loc 1 338 0
 378 00aa C0F55266 		rsb	r6, r0, #3360
 379 00ae 1644     		add	r6, r6, r2
 380              	.LVL43:
 339:Src/pid.c     **** 			CCR2 = CCR1 + tk;
 381              		.loc 1 339 0
 382 00b0 7610     		asrs	r6, r6, #1
 383              	.LVL44:
 340:Src/pid.c     **** 			CCR3 = CCR2 + tk_1;
 384              		.loc 1 340 0
 385 00b2 8519     		adds	r5, r0, r6
 386              	.LVL45:
 387 00b4 A91A     		subs	r1, r5, r2
 388              	.LVL46:
 342:Src/pid.c     **** 		case 5:
 389              		.loc 1 342 0
 390 00b6 B5E7     		b	.L11
 391              	.LVL47:
 392              	.L17:
 346:Src/pid.c     **** 			CCR1 = t0>>1;
 393              		.loc 1 346 0
 394 00b8 C2F55266 		rsb	r6, r2, #3360
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 27


 395 00bc 1E44     		add	r6, r6, r3
 396              	.LVL48:
 347:Src/pid.c     **** 			CCR3 = CCR1 + tk_1;
 397              		.loc 1 347 0
 398 00be 7610     		asrs	r6, r6, #1
 399              	.LVL49:
 400 00c0 F11A     		subs	r1, r6, r3
 401              	.LVL50:
 349:Src/pid.c     **** 		break;
 402              		.loc 1 349 0
 403 00c2 8D18     		adds	r5, r1, r2
 404              	.LVL51:
 350:Src/pid.c     **** 		case 6:
 405              		.loc 1 350 0
 406 00c4 AEE7     		b	.L11
 407              	.LVL52:
 408              	.L18:
 354:Src/pid.c     **** 			CCR2 = t0>>1;
 409              		.loc 1 354 0
 410 00c6 03F55265 		add	r5, r3, #3360
 411 00ca 0544     		add	r5, r5, r0
 412              	.LVL53:
 355:Src/pid.c     **** 			CCR1 = CCR2 + tk_1;
 413              		.loc 1 355 0
 414 00cc 6D10     		asrs	r5, r5, #1
 415              	.LVL54:
 416 00ce 2E1A     		subs	r6, r5, r0
 417              	.LVL55:
 418 00d0 F11A     		subs	r1, r6, r3
 419              	.LVL56:
 358:Src/pid.c     **** 		default:
 420              		.loc 1 358 0
 421 00d2 A7E7     		b	.L11
 422              	.LVL57:
 423              	.L28:
 362:Src/pid.c     **** 		break;
 424              		.loc 1 362 0
 425 00d4 4FF4D261 		mov	r1, #1680
 361:Src/pid.c     **** 			CCR3 = REAL_CCR >> 1;
 426              		.loc 1 361 0
 427 00d8 0D46     		mov	r5, r1
 360:Src/pid.c     **** 			CCR2 = REAL_CCR >> 1;
 428              		.loc 1 360 0
 429 00da 0E46     		mov	r6, r1
 430 00dc A2E7     		b	.L11
 431              	.LVL58:
 432              	.L29:
 365:Src/pid.c     ****   CCR2 = CCR2>N97_CCR?N97_CCR:(CCR2<0?0:CCR2);
 433              		.loc 1 365 0
 434 00de 40F67536 		movw	r6, #2933
 435              	.LVL59:
 436 00e2 A5E7     		b	.L19
 437              	.LVL60:
 438              	.L30:
 366:Src/pid.c     ****   CCR3 = CCR3>N97_CCR?N97_CCR:(CCR3<0?0:CCR3);
 439              		.loc 1 366 0
 440 00e4 40F67535 		movw	r5, #2933
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 28


 441              	.LVL61:
 442 00e8 A8E7     		b	.L20
 443              	.LVL62:
 444              	.L31:
 367:Src/pid.c     **** 	if(g_CmdMap[SYS_MOT_TEST] == 0)
 445              		.loc 1 367 0
 446 00ea 40F67531 		movw	r1, #2933
 447              	.LVL63:
 448 00ee ABE7     		b	.L21
 449              	.LVL64:
 450              	.L23:
 377:Src/pid.c     **** 		if(sin_wave_t_us > 1000)
 451              		.loc 1 377 0
 452 00f0 514B     		ldr	r3, .L36+16
 453 00f2 1A68     		ldr	r2, [r3]
 454 00f4 0432     		adds	r2, r2, #4
 455 00f6 1A60     		str	r2, [r3]
 378:Src/pid.c     **** 		{
 456              		.loc 1 378 0
 457 00f8 1B68     		ldr	r3, [r3]
 458 00fa B3F57A7F 		cmp	r3, #1000
 459 00fe B8DD     		ble	.L24
 380:Src/pid.c     **** 			motor_para_identification_count_Tms++;
 460              		.loc 1 380 0
 461 0100 4D4B     		ldr	r3, .L36+16
 462 0102 0022     		movs	r2, #0
 463 0104 1A60     		str	r2, [r3]
 381:Src/pid.c     **** 		}
 464              		.loc 1 381 0
 465 0106 4B4A     		ldr	r2, .L36+12
 466 0108 1368     		ldr	r3, [r2]
 467 010a 0133     		adds	r3, r3, #1
 468 010c 1360     		str	r3, [r2]
 469 010e B0E7     		b	.L24
 470              	.L34:
 471              	.LVL65:
 389:Src/pid.c     **** 		if(Para_Identificaion>=0)
 472              		.loc 1 389 0
 473 0110 4A4B     		ldr	r3, .L36+20
 474 0112 1A68     		ldr	r2, [r3]
 475 0114 0132     		adds	r2, r2, #1
 476 0116 1A60     		str	r2, [r3]
 390:Src/pid.c     **** 		{
 477              		.loc 1 390 0
 478 0118 1B68     		ldr	r3, [r3]
 479 011a 002B     		cmp	r3, #0
 480 011c 23DB     		blt	.L26
 392:Src/pid.c     **** 			if(index_I_phase<100)
 481              		.loc 1 392 0
 482 011e 474B     		ldr	r3, .L36+20
 483 0120 0022     		movs	r2, #0
 484 0122 1A60     		str	r2, [r3]
 393:Src/pid.c     **** 			{
 485              		.loc 1 393 0
 486 0124 464B     		ldr	r3, .L36+24
 487 0126 1B68     		ldr	r3, [r3]
 488 0128 632B     		cmp	r3, #99
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 29


 489 012a 18DC     		bgt	.L27
 395:Src/pid.c     **** 				I_phase[1][index_I_phase] = -g_IB_Raw;
 490              		.loc 1 395 0
 491 012c 444A     		ldr	r2, .L36+24
 492 012e 1068     		ldr	r0, [r2]
 493 0130 444B     		ldr	r3, .L36+28
 494 0132 B3F90010 		ldrsh	r1, [r3]
 495 0136 4942     		negs	r1, r1
 496 0138 434B     		ldr	r3, .L36+32
 497 013a 43F82010 		str	r1, [r3, r0, lsl #2]
 396:Src/pid.c     **** 				I_phase[2][index_I_phase] = -g_IC_Raw;		
 498              		.loc 1 396 0
 499 013e 1168     		ldr	r1, [r2]
 500 0140 4248     		ldr	r0, .L36+36
 501 0142 B0F90000 		ldrsh	r0, [r0]
 502 0146 4042     		negs	r0, r0
 503 0148 6431     		adds	r1, r1, #100
 504 014a 43F82100 		str	r0, [r3, r1, lsl #2]
 397:Src/pid.c     **** 			}
 505              		.loc 1 397 0
 506 014e 1268     		ldr	r2, [r2]
 507 0150 3F49     		ldr	r1, .L36+40
 508 0152 B1F90010 		ldrsh	r1, [r1]
 509 0156 4942     		negs	r1, r1
 510 0158 C832     		adds	r2, r2, #200
 511 015a 43F82210 		str	r1, [r3, r2, lsl #2]
 512              	.L27:
 399:Src/pid.c     **** 		}
 513              		.loc 1 399 0
 514 015e 384A     		ldr	r2, .L36+24
 515 0160 1368     		ldr	r3, [r2]
 516 0162 0133     		adds	r3, r3, #1
 517 0164 1360     		str	r3, [r2]
 518              	.L26:
 401:Src/pid.c     **** 		{	
 519              		.loc 1 401 0
 520 0166 334B     		ldr	r3, .L36+12
 521 0168 1B68     		ldr	r3, [r3]
 522 016a C82B     		cmp	r3, #200
 523 016c 04DC     		bgt	.L35
 388:Src/pid.c     **** 		Para_Identificaion++;
 524              		.loc 1 388 0
 525 016e 40F61F51 		movw	r1, #3359
 387:Src/pid.c     **** 		CCR3 = REAL_CCR-1;
 526              		.loc 1 387 0
 527 0172 0D46     		mov	r5, r1
 386:Src/pid.c     **** 		CCR2 = REAL_CCR-1;
 528              		.loc 1 386 0
 529 0174 0126     		movs	r6, #1
 530 0176 82E7     		b	.L25
 531              	.L35:
 403:Src/pid.c     **** 			T_t_1 = -1.0/T_t;	
 532              		.loc 1 403 0
 533 0178 334E     		ldr	r6, .L36+32
 534 017a D6F88C01 		ldr	r0, [r6, #396]
 535 017e FFF7FEFF 		bl	__aeabi_i2d
 536              	.LVL66:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 30


 537 0182 8046     		mov	r8, r0
 538 0184 01F10049 		add	r9, r1, #-2147483648
 539 0188 B068     		ldr	r0, [r6, #8]
 540 018a D6F88C31 		ldr	r3, [r6, #396]
 541 018e C01A     		subs	r0, r0, r3
 542 0190 FFF7FEFF 		bl	__aeabi_i2d
 543              	.LVL67:
 544 0194 0246     		mov	r2, r0
 545 0196 0B46     		mov	r3, r1
 546 0198 4046     		mov	r0, r8
 547 019a 4946     		mov	r1, r9
 548 019c FFF7FEFF 		bl	__aeabi_ddiv
 549              	.LVL68:
 550 01a0 41EC100B 		vmov	d0, r0, r1
 551 01a4 FFF7FEFF 		bl	log
 552              	.LVL69:
 553 01a8 53EC102B 		vmov	r2, r3, d0
 554 01ac 1EA1     		adr	r1, .L36
 555 01ae D1E90001 		ldrd	r0, [r1]
 556 01b2 FFF7FEFF 		bl	__aeabi_ddiv
 557              	.LVL70:
 558 01b6 8046     		mov	r8, r0
 559 01b8 8946     		mov	r9, r1
 560 01ba 264B     		ldr	r3, .L36+44
 561 01bc C3E90089 		strd	r8, [r3]
 404:Src/pid.c     **** 			g_CmdMap[SYS_MOT_TEST] = 0;
 562              		.loc 1 404 0
 563 01c0 0246     		mov	r2, r0
 564 01c2 0B46     		mov	r3, r1
 565 01c4 0020     		movs	r0, #0
 566 01c6 2449     		ldr	r1, .L36+48
 567 01c8 FFF7FEFF 		bl	__aeabi_ddiv
 568              	.LVL71:
 569 01cc 234B     		ldr	r3, .L36+52
 570 01ce C3E90001 		strd	r0, [r3]
 405:Src/pid.c     **** 			g_CmdMap[MOT_RES] = 2*(12000*1000)/(3*I_phase[0][99]);// ï¿½ï¿½ï¿½ï¿½è£º0.5*(U_Dc*0.866*Duty/g_I
 571              		.loc 1 405 0
 572 01d2 174D     		ldr	r5, .L36+8
 573 01d4 0023     		movs	r3, #0
 574 01d6 A5F81A32 		strh	r3, [r5, #538]	@ movhi
 406:Src/pid.c     **** 			g_CmdMap[MOT_INDUC] = (u16)(1000.0*T_t*(double)g_CmdMap[MOT_RES]);
 575              		.loc 1 406 0
 576 01da D6F88C21 		ldr	r2, [r6, #396]
 577 01de 02EB4202 		add	r2, r2, r2, lsl #1
 578 01e2 1F4B     		ldr	r3, .L36+56
 579 01e4 93FBF2F3 		sdiv	r3, r3, r2
 580 01e8 1BB2     		sxth	r3, r3
 581 01ea A5F84032 		strh	r3, [r5, #576]	@ movhi
 407:Src/pid.c     **** 		}
 582              		.loc 1 407 0
 583 01ee 0022     		movs	r2, #0
 584 01f0 1C4B     		ldr	r3, .L36+60
 585 01f2 4046     		mov	r0, r8
 586 01f4 4946     		mov	r1, r9
 587 01f6 FFF7FEFF 		bl	__aeabi_dmul
 588              	.LVL72:
 589 01fa 0646     		mov	r6, r0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 31


 590 01fc 0F46     		mov	r7, r1
 591 01fe B5F84002 		ldrh	r0, [r5, #576]
 592 0202 00B2     		sxth	r0, r0
 593 0204 FFF7FEFF 		bl	__aeabi_i2d
 594              	.LVL73:
 595 0208 0246     		mov	r2, r0
 596 020a 0B46     		mov	r3, r1
 597 020c 3046     		mov	r0, r6
 598 020e 3946     		mov	r1, r7
 599 0210 FFF7FEFF 		bl	__aeabi_dmul
 600              	.LVL74:
 601 0214 FFF7FEFF 		bl	__aeabi_d2uiz
 602              	.LVL75:
 603 0218 00B2     		sxth	r0, r0
 604 021a A5F84202 		strh	r0, [r5, #578]	@ movhi
 388:Src/pid.c     **** 		Para_Identificaion++;
 605              		.loc 1 388 0
 606 021e 40F61F51 		movw	r1, #3359
 387:Src/pid.c     **** 		CCR3 = REAL_CCR-1;
 607              		.loc 1 387 0
 608 0222 0D46     		mov	r5, r1
 386:Src/pid.c     **** 		CCR2 = REAL_CCR-1;
 609              		.loc 1 386 0
 610 0224 0126     		movs	r6, #1
 611 0226 2AE7     		b	.L25
 612              	.L37:
 613              		.align	3
 614              	.L36:
 615 0228 F168E388 		.word	-1998362383
 616 022c B5F8043F 		.word	1057290421
 617 0230 00000000 		.word	g_CmdMap
 618 0234 00000000 		.word	.LANCHOR4
 619 0238 00000000 		.word	.LANCHOR5
 620 023c 00000000 		.word	.LANCHOR6
 621 0240 00000000 		.word	.LANCHOR7
 622 0244 00000000 		.word	.LANCHOR8
 623 0248 00000000 		.word	.LANCHOR9
 624 024c 00000000 		.word	.LANCHOR10
 625 0250 00000000 		.word	.LANCHOR11
 626 0254 00000000 		.word	.LANCHOR12
 627 0258 0000F0BF 		.word	-1074790400
 628 025c 00000000 		.word	.LANCHOR13
 629 0260 00366E01 		.word	24000000
 630 0264 00408F40 		.word	1083129856
 631              		.cfi_endproc
 632              	.LFE337:
 634              		.section	.text.PID_ini,"ax",%progbits
 635              		.align	1
 636              		.global	PID_ini
 637              		.syntax unified
 638              		.thumb
 639              		.thumb_func
 640              		.fpu fpv4-sp-d16
 642              	PID_ini:
 643              	.LFB333:
  85:Src/pid.c     **** 		p_pid->integral = 0;
 644              		.loc 1 85 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 32


 645              		.cfi_startproc
 646              		@ args = 0, pretend = 0, frame = 0
 647              		@ frame_needed = 0, uses_anonymous_args = 0
 648              		@ link register save eliminated.
 649              	.LVL76:
  86:Src/pid.c     **** 		p_pid->error = 0;
 650              		.loc 1 86 0
 651 0000 0023     		movs	r3, #0
 652 0002 4364     		str	r3, [r0, #68]
  87:Src/pid.c     **** 		p_pid->error_last = 0;
 653              		.loc 1 87 0
 654 0004 8361     		str	r3, [r0, #24]
  88:Src/pid.c     **** 		p_pid->out = 0;
 655              		.loc 1 88 0
 656 0006 C361     		str	r3, [r0, #28]
  89:Src/pid.c     **** 		p_pid->frequency = freq;
 657              		.loc 1 89 0
 658 0008 4363     		str	r3, [r0, #52]
  90:Src/pid.c     **** }
 659              		.loc 1 90 0
 660 000a 8163     		str	r1, [r0, #56]
  91:Src/pid.c     **** void PID_control(s32 set,s32 act,struct PID_TYPE * p_pid)   //PID
 661              		.loc 1 91 0
 662 000c 7047     		bx	lr
 663              		.cfi_endproc
 664              	.LFE333:
 666              		.section	.text.PID_control,"ax",%progbits
 667              		.align	1
 668              		.global	PID_control
 669              		.syntax unified
 670              		.thumb
 671              		.thumb_func
 672              		.fpu fpv4-sp-d16
 674              	PID_control:
 675              	.LFB334:
  93:Src/pid.c     **** 	s32 deriv=0;
 676              		.loc 1 93 0
 677              		.cfi_startproc
 678              		@ args = 0, pretend = 0, frame = 0
 679              		@ frame_needed = 0, uses_anonymous_args = 0
 680              		@ link register save eliminated.
 681              	.LVL77:
  96:Src/pid.c     **** 	{
 682              		.loc 1 96 0
 683 0000 1368     		ldr	r3, [r2]
 684 0002 002B     		cmp	r3, #0
 685 0004 7AD0     		beq	.L56
  93:Src/pid.c     **** 	s32 deriv=0;
 686              		.loc 1 93 0
 687 0006 2DE9F003 		push	{r4, r5, r6, r7, r8, r9}
 688              	.LCFI2:
 689              		.cfi_def_cfa_offset 24
 690              		.cfi_offset 4, -24
 691              		.cfi_offset 5, -20
 692              		.cfi_offset 6, -16
 693              		.cfi_offset 7, -12
 694              		.cfi_offset 8, -8
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 33


 695              		.cfi_offset 9, -4
 107:Src/pid.c     **** 	if((p_pid->error<p_pid->dead_zone && p_pid->error>-1*p_pid->dead_zone))
 696              		.loc 1 107 0
 697 000a 411A     		subs	r1, r0, r1
 698              	.LVL78:
 699 000c 9161     		str	r1, [r2, #24]
 108:Src/pid.c     **** 	{
 700              		.loc 1 108 0
 701 000e 5369     		ldr	r3, [r2, #20]
 702 0010 9942     		cmp	r1, r3
 703 0012 06DA     		bge	.L42
 108:Src/pid.c     **** 	{
 704              		.loc 1 108 0 is_stmt 0 discriminator 1
 705 0014 5B42     		negs	r3, r3
 706 0016 9942     		cmp	r1, r3
 707 0018 03DD     		ble	.L42
 110:Src/pid.c     **** 		p_pid->error = 0;
 708              		.loc 1 110 0 is_stmt 1
 709 001a 0123     		movs	r3, #1
 710 001c 5360     		str	r3, [r2, #4]
 111:Src/pid.c     **** 	}	
 711              		.loc 1 111 0
 712 001e 0023     		movs	r3, #0
 713 0020 9361     		str	r3, [r2, #24]
 714              	.L42:
 113:Src/pid.c     **** 			(p_pid->out >= p_pid->Up_limit && p_pid->error < 0) ||
 715              		.loc 1 113 0
 716 0022 536B     		ldr	r3, [r2, #52]
 717 0024 D66B     		ldr	r6, [r2, #60]
 718 0026 B342     		cmp	r3, r6
 719 0028 02DA     		bge	.L43
 113:Src/pid.c     **** 			(p_pid->out >= p_pid->Up_limit && p_pid->error < 0) ||
 720              		.loc 1 113 0 is_stmt 0 discriminator 1
 721 002a 116C     		ldr	r1, [r2, #64]
 722 002c 8B42     		cmp	r3, r1
 723 002e 0ADC     		bgt	.L44
 724              	.L43:
 113:Src/pid.c     **** 			(p_pid->out >= p_pid->Up_limit && p_pid->error < 0) ||
 725              		.loc 1 113 0 discriminator 3
 726 0030 B342     		cmp	r3, r6
 727 0032 02DB     		blt	.L45
 114:Src/pid.c     **** 			(p_pid->out <= p_pid->Low_limit && p_pid->error > 0))
 728              		.loc 1 114 0 is_stmt 1
 729 0034 9169     		ldr	r1, [r2, #24]
 730 0036 0029     		cmp	r1, #0
 731 0038 05DB     		blt	.L44
 732              	.L45:
 115:Src/pid.c     **** 	{
 733              		.loc 1 115 0 discriminator 1
 734 003a 116C     		ldr	r1, [r2, #64]
 114:Src/pid.c     **** 			(p_pid->out <= p_pid->Low_limit && p_pid->error > 0))
 735              		.loc 1 114 0 discriminator 1
 736 003c 8B42     		cmp	r3, r1
 737 003e 11DC     		bgt	.L46
 115:Src/pid.c     **** 	{
 738              		.loc 1 115 0
 739 0040 9369     		ldr	r3, [r2, #24]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 34


 740 0042 002B     		cmp	r3, #0
 741 0044 0EDD     		ble	.L46
 742              	.L44:
 125:Src/pid.c     **** 		{
 743              		.loc 1 125 0
 744 0046 D368     		ldr	r3, [r2, #12]
 745 0048 B3F57A7F 		cmp	r3, #1000
 746 004c 61DD     		ble	.L47
 127:Src/pid.c     **** 		}
 747              		.loc 1 127 0
 748 004e 9169     		ldr	r1, [r2, #24]
 749 0050 3D48     		ldr	r0, .L57
 750              	.LVL79:
 751 0052 80FB0340 		smull	r4, r0, r0, r3
 752 0056 DB17     		asrs	r3, r3, #31
 753 0058 C3EB6013 		rsb	r3, r3, r0, asr #5
 754 005c 506C     		ldr	r0, [r2, #68]
 755 005e 03FB0103 		mla	r3, r3, r1, r0
 756 0062 5364     		str	r3, [r2, #68]
 757              	.L46:
 134:Src/pid.c     **** 	
 758              		.loc 1 134 0
 759 0064 9769     		ldr	r7, [r2, #24]
 760 0066 9568     		ldr	r5, [r2, #8]
 761 0068 05FB07F5 		mul	r5, r5, r7
 762 006c 364B     		ldr	r3, .L57
 763 006e 83FB0513 		smull	r1, r3, r3, r5
 764 0072 EC17     		asrs	r4, r5, #31
 765 0074 C4EB6314 		rsb	r4, r4, r3, asr #5
 766 0078 1462     		str	r4, [r2, #32]
 145:Src/pid.c     **** 	{
 767              		.loc 1 145 0
 768 007a D368     		ldr	r3, [r2, #12]
 769 007c B3F57A7F 		cmp	r3, #1000
 770 0080 4DDD     		ble	.L48
 147:Src/pid.c     **** 	}
 771              		.loc 1 147 0
 772 0082 536C     		ldr	r3, [r2, #68]
 773 0084 6420     		movs	r0, #100
 774 0086 00FB03F0 		mul	r0, r0, r3
 775 008a 936B     		ldr	r3, [r2, #56]
 776 008c 90FBF3F0 		sdiv	r0, r0, r3
 777 0090 C117     		asrs	r1, r0, #31
 778 0092 C2E90A01 		strd	r0, [r2, #40]
 779              	.L49:
 153:Src/pid.c     **** 	{
 780              		.loc 1 153 0
 781 0096 D2E90A01 		ldrd	r0, [r2, #40]
 782 009a B0F1004F 		cmp	r0, #-2147483648
 783 009e 71F10003 		sbcs	r3, r1, #0
 784 00a2 44DB     		blt	.L50
 155:Src/pid.c     **** 	}
 785              		.loc 1 155 0
 786 00a4 6FF00040 		mvn	r0, #-2147483648
 787 00a8 0021     		movs	r1, #0
 788 00aa C2E90A01 		strd	r0, [r2, #40]
 789              	.L51:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 35


 161:Src/pid.c     **** 	p_pid->Part_D = p_pid->Kd * ( 9*deriv + 1*(p_pid->error-p_pid->error_last) )   /1000 ;
 790              		.loc 1 161 0
 791 00ae 106B     		ldr	r0, [r2, #48]
 792              	.LVL80:
 162:Src/pid.c     **** 	p_pid->out = p_pid->Part_P+p_pid->Part_I+p_pid->Part_D;
 793              		.loc 1 162 0
 794 00b0 1369     		ldr	r3, [r2, #16]
 795 00b2 00EBC000 		add	r0, r0, r0, lsl #3
 796              	.LVL81:
 797 00b6 D169     		ldr	r1, [r2, #28]
 798 00b8 791A     		subs	r1, r7, r1
 799 00ba 0144     		add	r1, r1, r0
 800 00bc 01FB03F1 		mul	r1, r1, r3
 801 00c0 224B     		ldr	r3, .L57+4
 802 00c2 83FB0103 		smull	r0, r3, r3, r1
 803 00c6 C917     		asrs	r1, r1, #31
 804 00c8 C1EBA313 		rsb	r3, r1, r3, asr #6
 805 00cc 1363     		str	r3, [r2, #48]
 806              	.LVL82:
 163:Src/pid.c     **** 	if(p_pid->out >p_pid->Up_limit)
 807              		.loc 1 163 0
 808 00ce 916A     		ldr	r1, [r2, #40]
 809 00d0 0C44     		add	r4, r4, r1
 810 00d2 2344     		add	r3, r3, r4
 811 00d4 5363     		str	r3, [r2, #52]
 164:Src/pid.c     **** 	{
 812              		.loc 1 164 0
 813 00d6 9E42     		cmp	r6, r3
 814 00d8 04DA     		bge	.L52
 166:Src/pid.c     **** 		p_pid->integral = (p_pid->out)*p_pid->frequency;
 815              		.loc 1 166 0
 816 00da 5663     		str	r6, [r2, #52]
 167:Src/pid.c     **** 	}
 817              		.loc 1 167 0
 818 00dc 936B     		ldr	r3, [r2, #56]
 819 00de 03FB06F6 		mul	r6, r3, r6
 820 00e2 5664     		str	r6, [r2, #68]
 821              	.L52:
 169:Src/pid.c     **** 	{
 822              		.loc 1 169 0
 823 00e4 516B     		ldr	r1, [r2, #52]
 824 00e6 136C     		ldr	r3, [r2, #64]
 825 00e8 9942     		cmp	r1, r3
 826 00ea 04DA     		bge	.L39
 171:Src/pid.c     **** 		p_pid->integral = (p_pid->out)*p_pid->frequency;
 827              		.loc 1 171 0
 828 00ec 5363     		str	r3, [r2, #52]
 172:Src/pid.c     **** 	}	
 829              		.loc 1 172 0
 830 00ee 916B     		ldr	r1, [r2, #56]
 831 00f0 01FB03F3 		mul	r3, r1, r3
 832 00f4 5364     		str	r3, [r2, #68]
 833              	.L39:
 175:Src/pid.c     **** //Force PID output
 834              		.loc 1 175 0
 835 00f6 BDE8F003 		pop	{r4, r5, r6, r7, r8, r9}
 836              	.LCFI3:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 36


 837              		.cfi_restore 9
 838              		.cfi_restore 8
 839              		.cfi_restore 7
 840              		.cfi_restore 6
 841              		.cfi_restore 5
 842              		.cfi_restore 4
 843              		.cfi_def_cfa_offset 0
 844 00fa 7047     		bx	lr
 845              	.LVL83:
 846              	.L56:
  98:Src/pid.c     **** 		p_pid->error = 0;
 847              		.loc 1 98 0
 848 00fc 5364     		str	r3, [r2, #68]
  99:Src/pid.c     **** 		p_pid->error_last = 0;
 849              		.loc 1 99 0
 850 00fe 9361     		str	r3, [r2, #24]
 100:Src/pid.c     **** 		p_pid->out = 0;
 851              		.loc 1 100 0
 852 0100 D361     		str	r3, [r2, #28]
 101:Src/pid.c     **** 		p_pid->Part_P = 0;
 853              		.loc 1 101 0
 854 0102 5363     		str	r3, [r2, #52]
 102:Src/pid.c     **** 		p_pid->Part_I = 0;
 855              		.loc 1 102 0
 856 0104 1362     		str	r3, [r2, #32]
 103:Src/pid.c     **** 		p_pid->Part_D = 0;
 857              		.loc 1 103 0
 858 0106 0020     		movs	r0, #0
 859              	.LVL84:
 860 0108 0021     		movs	r1, #0
 861              	.LVL85:
 862 010a C2E90A01 		strd	r0, [r2, #40]
 104:Src/pid.c     **** 		return;
 863              		.loc 1 104 0
 864 010e 1363     		str	r3, [r2, #48]
 865 0110 7047     		bx	lr
 866              	.LVL86:
 867              	.L47:
 868              	.LCFI4:
 869              		.cfi_def_cfa_offset 24
 870              		.cfi_offset 4, -24
 871              		.cfi_offset 5, -20
 872              		.cfi_offset 6, -16
 873              		.cfi_offset 7, -12
 874              		.cfi_offset 8, -8
 875              		.cfi_offset 9, -4
 131:Src/pid.c     **** 		}
 876              		.loc 1 131 0
 877 0112 9069     		ldr	r0, [r2, #24]
 878              	.LVL87:
 879 0114 516C     		ldr	r1, [r2, #68]
 880 0116 00FB0313 		mla	r3, r0, r3, r1
 881 011a 5364     		str	r3, [r2, #68]
 882 011c A2E7     		b	.L46
 883              	.L48:
 151:Src/pid.c     **** 	}	
 884              		.loc 1 151 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 37


 885 011e 506C     		ldr	r0, [r2, #68]
 886 0120 936B     		ldr	r3, [r2, #56]
 887 0122 90FBF3F0 		sdiv	r0, r0, r3
 888 0126 C117     		asrs	r1, r0, #31
 889 0128 C2E90A01 		strd	r0, [r2, #40]
 890 012c B3E7     		b	.L49
 891              	.L50:
 157:Src/pid.c     **** 	{
 892              		.loc 1 157 0
 893 012e DFF82080 		ldr	r8, .L57+8
 894 0132 4FF0FF39 		mov	r9, #-1
 895 0136 4045     		cmp	r0, r8
 896 0138 71EB0903 		sbcs	r3, r1, r9
 897 013c B7DA     		bge	.L51
 159:Src/pid.c     **** 	}
 898              		.loc 1 159 0
 899 013e 4046     		mov	r0, r8
 900 0140 4946     		mov	r1, r9
 901 0142 C2E90A01 		strd	r0, [r2, #40]
 902 0146 B2E7     		b	.L51
 903              	.L58:
 904              		.align	2
 905              	.L57:
 906 0148 1F85EB51 		.word	1374389535
 907 014c D34D6210 		.word	274877907
 908 0150 01000080 		.word	-2147483647
 909              		.cfi_endproc
 910              	.LFE334:
 912              		.section	.text.CurrentPID,"ax",%progbits
 913              		.align	1
 914              		.syntax unified
 915              		.thumb
 916              		.thumb_func
 917              		.fpu fpv4-sp-d16
 919              	CurrentPID:
 920              	.LFB338:
 421:Src/pid.c     ****   s32 temp32 = 0;       
 921              		.loc 1 421 0
 922              		.cfi_startproc
 923              		@ args = 0, pretend = 0, frame = 0
 924              		@ frame_needed = 0, uses_anonymous_args = 0
 925 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 926              	.LCFI5:
 927              		.cfi_def_cfa_offset 28
 928              		.cfi_offset 4, -28
 929              		.cfi_offset 5, -24
 930              		.cfi_offset 6, -20
 931              		.cfi_offset 7, -16
 932              		.cfi_offset 8, -12
 933              		.cfi_offset 9, -8
 934              		.cfi_offset 14, -4
 935 0004 83B0     		sub	sp, sp, #12
 936              	.LCFI6:
 937              		.cfi_def_cfa_offset 40
 938              	.LVL88:
 429:Src/pid.c     **** 	{
 939              		.loc 1 429 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 38


 940 0006 AC4B     		ldr	r3, .L105
 941 0008 B3F80432 		ldrh	r3, [r3, #516]
 942 000c 1BB2     		sxth	r3, r3
 943 000e 012B     		cmp	r3, #1
 944 0010 23D0     		beq	.L60
 431:Src/pid.c     **** 		{
 945              		.loc 1 431 0
 946 0012 A94B     		ldr	r3, .L105
 947 0014 B3F80432 		ldrh	r3, [r3, #516]
 948 0018 1BB2     		sxth	r3, r3
 949 001a 022B     		cmp	r3, #2
 950 001c 10D0     		beq	.L61
 431:Src/pid.c     **** 		{
 951              		.loc 1 431 0 is_stmt 0 discriminator 1
 952 001e A64B     		ldr	r3, .L105
 953 0020 B3F80432 		ldrh	r3, [r3, #516]
 954 0024 1BB2     		sxth	r3, r3
 955 0026 032B     		cmp	r3, #3
 956 0028 0AD0     		beq	.L61
 437:Src/pid.c     **** 		{
 957              		.loc 1 437 0 is_stmt 1
 958 002a A34B     		ldr	r3, .L105
 959 002c B3F80432 		ldrh	r3, [r3, #516]
 960 0030 1BB2     		sxth	r3, r3
 961 0032 042B     		cmp	r3, #4
 962 0034 42D0     		beq	.L94
 445:Src/pid.c     **** 		}	
 963              		.loc 1 445 0
 964 0036 A04B     		ldr	r3, .L105
 965 0038 0022     		movs	r2, #0
 966 003a A3F84220 		strh	r2, [r3, #66]	@ movhi
 967 003e 0CE0     		b	.L60
 968              	.L61:
 434:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = (s32)pid_spd.out + (s32)g_CmdMap[CMD_CUR_FWD_PU];//Ç°ï¿½ï¿½ï¿½ï¿½ï¿½ï
 969              		.loc 1 434 0
 970 0040 9D4A     		ldr	r2, .L105
 971 0042 B2F87032 		ldrh	r3, [r2, #624]
 972 0046 A2F86E32 		strh	r3, [r2, #622]	@ movhi
 435:Src/pid.c     **** 		}
 973              		.loc 1 435 0
 974 004a 9C4B     		ldr	r3, .L105+4
 975 004c 5B6B     		ldr	r3, [r3, #52]
 976 004e B2F86E12 		ldrh	r1, [r2, #622]
 977 0052 0B44     		add	r3, r3, r1
 978 0054 1BB2     		sxth	r3, r3
 979 0056 A2F84230 		strh	r3, [r2, #66]	@ movhi
 980              	.L60:
 449:Src/pid.c     **** 	{
 981              		.loc 1 449 0
 982 005a 974B     		ldr	r3, .L105
 983 005c B3F85432 		ldrh	r3, [r3, #596]
 984 0060 1BB2     		sxth	r3, r3
 985 0062 012B     		cmp	r3, #1
 986 0064 31D0     		beq	.L95
 466:Src/pid.c     **** 	{
 987              		.loc 1 466 0
 988 0066 944B     		ldr	r3, .L105
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 39


 989 0068 B3F85432 		ldrh	r3, [r3, #596]
 990 006c 1BB2     		sxth	r3, r3
 991 006e 032B     		cmp	r3, #3
 992 0070 00F0FF80 		beq	.L96
 523:Src/pid.c     **** 	{
 993              		.loc 1 523 0
 994 0074 904B     		ldr	r3, .L105
 995 0076 B3F85432 		ldrh	r3, [r3, #596]
 996 007a 1BB2     		sxth	r3, r3
 997 007c 042B     		cmp	r3, #4
 998 007e 00F0A881 		beq	.L97
 560:Src/pid.c     **** 		{
 999              		.loc 1 560 0
 1000 0082 8D4B     		ldr	r3, .L105
 1001 0084 B3F84220 		ldrh	r2, [r3, #66]
 1002 0088 12B2     		sxth	r2, r2
 1003 008a B3F88032 		ldrh	r3, [r3, #640]
 1004 008e 1BB2     		sxth	r3, r3
 1005 0090 9A42     		cmp	r2, r3
 1006 0092 04DD     		ble	.L82
 562:Src/pid.c     **** 		}
 1007              		.loc 1 562 0
 1008 0094 884B     		ldr	r3, .L105
 1009 0096 B3F88022 		ldrh	r2, [r3, #640]
 1010 009a A3F84220 		strh	r2, [r3, #66]	@ movhi
 1011              	.L82:
 564:Src/pid.c     **** 		{
 1012              		.loc 1 564 0
 1013 009e 864B     		ldr	r3, .L105
 1014 00a0 B3F84220 		ldrh	r2, [r3, #66]
 1015 00a4 12B2     		sxth	r2, r2
 1016 00a6 B3F88232 		ldrh	r3, [r3, #642]
 1017 00aa 1BB2     		sxth	r3, r3
 1018 00ac 9A42     		cmp	r2, r3
 1019 00ae 25DA     		bge	.L67
 566:Src/pid.c     **** 		}
 1020              		.loc 1 566 0
 1021 00b0 814B     		ldr	r3, .L105
 1022 00b2 B3F88222 		ldrh	r2, [r3, #642]
 1023 00b6 A3F84220 		strh	r2, [r3, #66]	@ movhi
 1024 00ba 1FE0     		b	.L67
 1025              	.L94:
 440:Src/pid.c     **** 		
 1026              		.loc 1 440 0
 1027 00bc 7F4B     		ldr	r3, .L105+4
 1028 00be B3F93420 		ldrsh	r2, [r3, #52]
 1029 00c2 7D4B     		ldr	r3, .L105
 1030 00c4 A3F84220 		strh	r2, [r3, #66]	@ movhi
 1031 00c8 C7E7     		b	.L60
 1032              	.L95:
 451:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_CURRENT;
 1033              		.loc 1 451 0
 1034 00ca 7B4B     		ldr	r3, .L105
 1035 00cc 0122     		movs	r2, #1
 1036 00ce A3F80222 		strh	r2, [r3, #514]	@ movhi
 452:Src/pid.c     **** 		if(test++ > (50))
 1037              		.loc 1 452 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 40


 1038 00d2 A3F80422 		strh	r2, [r3, #516]	@ movhi
 453:Src/pid.c     **** 		{
 1039              		.loc 1 453 0
 1040 00d6 7A4A     		ldr	r2, .L105+8
 1041 00d8 1388     		ldrh	r3, [r2]
 1042 00da 591C     		adds	r1, r3, #1
 1043 00dc 1180     		strh	r1, [r2]	@ movhi
 1044 00de 322B     		cmp	r3, #50
 1045 00e0 02D9     		bls	.L65
 455:Src/pid.c     **** 		}
 1046              		.loc 1 455 0
 1047 00e2 1346     		mov	r3, r2
 1048 00e4 0022     		movs	r2, #0
 1049 00e6 1A80     		strh	r2, [r3]	@ movhi
 1050              	.L65:
 457:Src/pid.c     **** 		{
 1051              		.loc 1 457 0
 1052 00e8 754B     		ldr	r3, .L105+8
 1053 00ea 1B88     		ldrh	r3, [r3]
 1054 00ec 192B     		cmp	r3, #25
 1055 00ee 40F2BA80 		bls	.L66
 459:Src/pid.c     **** 		}
 1056              		.loc 1 459 0
 1057 00f2 714B     		ldr	r3, .L105
 1058 00f4 4FF44862 		mov	r2, #3200
 1059 00f8 A3F84220 		strh	r2, [r3, #66]	@ movhi
 1060              	.L67:
 570:Src/pid.c     **** 	pid_IQ.Low_limit = -16384;
 1061              		.loc 1 570 0
 1062 00fc 714D     		ldr	r5, .L105+12
 1063 00fe 4FF48042 		mov	r2, #16384
 1064 0102 EA63     		str	r2, [r5, #60]
 571:Src/pid.c     **** 		
 1065              		.loc 1 571 0
 1066 0104 704B     		ldr	r3, .L105+16
 1067 0106 2B64     		str	r3, [r5, #64]
 573:Src/pid.c     **** 	pid_ID.Low_limit = -16384;	
 1068              		.loc 1 573 0
 1069 0108 704C     		ldr	r4, .L105+20
 1070 010a E263     		str	r2, [r4, #60]
 574:Src/pid.c     **** 	
 1071              		.loc 1 574 0
 1072 010c 2364     		str	r3, [r4, #64]
 576:Src/pid.c     **** 	PID_control(-0,g_CmdMap[CMD_CUR_D_ACT_PU],&pid_ID);	
 1073              		.loc 1 576 0
 1074 010e 6A4E     		ldr	r6, .L105
 1075 0110 B6F84200 		ldrh	r0, [r6, #66]
 1076 0114 B6F84E10 		ldrh	r1, [r6, #78]
 1077 0118 2A46     		mov	r2, r5
 1078 011a 09B2     		sxth	r1, r1
 1079 011c 00B2     		sxth	r0, r0
 1080 011e FFF7FEFF 		bl	PID_control
 1081              	.LVL89:
 577:Src/pid.c     **** 	
 1082              		.loc 1 577 0
 1083 0122 B6F89412 		ldrh	r1, [r6, #660]
 1084 0126 2246     		mov	r2, r4
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 41


 1085 0128 09B2     		sxth	r1, r1
 1086 012a 0020     		movs	r0, #0
 1087 012c FFF7FEFF 		bl	PID_control
 1088              	.LVL90:
 579:Src/pid.c     **** 	if(mod_scalefactor < 1.0f)
 1089              		.loc 1 579 0
 1090 0130 6B6B     		ldr	r3, [r5, #52]
 1091 0132 626B     		ldr	r2, [r4, #52]
 1092 0134 02FB02F2 		mul	r2, r2, r2
 1093 0138 03FB0323 		mla	r3, r3, r3, r2
 1094 013c 00EE103A 		vmov	s0, r3	@ int
 1095 0140 B8EEC00A 		vcvt.f32.s32	s0, s0
 1096 0144 FFF7FEFF 		bl	sqrtf
 1097              	.LVL91:
 1098 0148 DFED617A 		vldr.32	s15, .L105+24
 1099 014c 87EE800A 		vdiv.f32	s0, s15, s0
 1100              	.LVL92:
 580:Src/pid.c     **** 	{
 1101              		.loc 1 580 0
 1102 0150 F7EE007A 		vmov.f32	s15, #1.0e+0
 1103 0154 B4EEE70A 		vcmpe.f32	s0, s15
 1104 0158 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1105 015c 00F17981 		bmi	.L98
 1106              	.LVL93:
 1107              	.L83:
 593:Src/pid.c     **** 	g_Vd = pid_ID.out*N97_CCR/PU_REFERENCE;	
 1108              		.loc 1 593 0
 1109 0160 584B     		ldr	r3, .L105+12
 1110 0162 5A6B     		ldr	r2, [r3, #52]
 1111 0164 40F67533 		movw	r3, #2933
 1112 0168 03FB02F3 		mul	r3, r3, r2
 1113 016c 002B     		cmp	r3, #0
 1114 016e C0F28581 		blt	.L99
 1115              	.L85:
 1116 0172 9B13     		asrs	r3, r3, #14
 1117 0174 574A     		ldr	r2, .L105+28
 1118 0176 1360     		str	r3, [r2]
 594:Src/pid.c     **** 	
 1119              		.loc 1 594 0
 1120 0178 544B     		ldr	r3, .L105+20
 1121 017a 5A6B     		ldr	r2, [r3, #52]
 1122 017c 40F67533 		movw	r3, #2933
 1123 0180 03FB02F3 		mul	r3, r3, r2
 1124 0184 002B     		cmp	r3, #0
 1125 0186 C0F27D81 		blt	.L100
 1126              	.L86:
 1127 018a 9B13     		asrs	r3, r3, #14
 1128 018c 524C     		ldr	r4, .L105+32
 1129 018e 2360     		str	r3, [r4]
 599:Src/pid.c     **** 	
 1130              		.loc 1 599 0
 1131 0190 524A     		ldr	r2, .L105+36
 1132 0192 1368     		ldr	r3, [r2]
 1133 0194 5B42     		negs	r3, r3
 1134 0196 1360     		str	r3, [r2]
 609:Src/pid.c     **** 	Y = Math_Cos_EN360( g_ElectricAngle );
 1135              		.loc 1 609 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 42


 1136 0198 514D     		ldr	r5, .L105+40
 1137 019a 2868     		ldr	r0, [r5]
 1138 019c 80B2     		uxth	r0, r0
 1139 019e FFF7FEFF 		bl	Math_Sin_EN360
 1140              	.LVL94:
 1141 01a2 8046     		mov	r8, r0
 1142              	.LVL95:
 610:Src/pid.c     **** 	g_V_Alpha = Q15_MUL(g_Vd,X) + Q15_MUL(g_Vq,Y);  // ï¿½ï¿½Ç¶È¶ï¿½ï¿½ï¿½ÎªQï¿½ï¿½ï¿½ï¿½Alphaï¿½ï¿½Ä¼
 1143              		.loc 1 610 0
 1144 01a4 2868     		ldr	r0, [r5]
 1145              	.LVL96:
 1146 01a6 80B2     		uxth	r0, r0
 1147 01a8 FFF7FEFF 		bl	Math_Cos_EN360
 1148              	.LVL97:
 1149 01ac 8146     		mov	r9, r0
 1150              	.LVL98:
 611:Src/pid.c     **** 	g_V_Beta = Q15_MUL(-g_Vd,Y) + Q15_MUL(g_Vq,X);
 1151              		.loc 1 611 0
 1152 01ae 4146     		mov	r1, r8
 1153 01b0 2068     		ldr	r0, [r4]
 1154              	.LVL99:
 1155 01b2 FFF7FEFF 		bl	Q15_MUL
 1156              	.LVL100:
 1157 01b6 0546     		mov	r5, r0
 1158 01b8 464F     		ldr	r7, .L105+28
 1159 01ba 4946     		mov	r1, r9
 1160 01bc 3868     		ldr	r0, [r7]
 1161 01be FFF7FEFF 		bl	Q15_MUL
 1162              	.LVL101:
 1163 01c2 2844     		add	r0, r0, r5
 1164 01c4 474E     		ldr	r6, .L105+44
 1165 01c6 3060     		str	r0, [r6]
 612:Src/pid.c     **** 
 1166              		.loc 1 612 0
 1167 01c8 2068     		ldr	r0, [r4]
 1168 01ca 4946     		mov	r1, r9
 1169 01cc 4042     		negs	r0, r0
 1170 01ce FFF7FEFF 		bl	Q15_MUL
 1171              	.LVL102:
 1172 01d2 0446     		mov	r4, r0
 1173 01d4 4146     		mov	r1, r8
 1174 01d6 3868     		ldr	r0, [r7]
 1175 01d8 FFF7FEFF 		bl	Q15_MUL
 1176              	.LVL103:
 1177 01dc 2044     		add	r0, r0, r4
 1178 01de 424D     		ldr	r5, .L105+48
 1179 01e0 2860     		str	r0, [r5]
 614:Src/pid.c     **** 	// SVPWMÕ¼ï¿½Õ±È¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1180              		.loc 1 614 0
 1181 01e2 424B     		ldr	r3, .L105+52
 1182 01e4 D3ED000A 		vldr.32	s1, [r3]
 1183 01e8 9FED417A 		vldr.32	s14, .L105+56
 1184 01ec 20EE877A 		vmul.f32	s14, s1, s14
 1185 01f0 D6ED007A 		vldr.32	s15, [r6]	@ int
 1186 01f4 F8EEE77A 		vcvt.f32.s32	s15, s15
 1187 01f8 67EE877A 		vmul.f32	s15, s15, s14
 1188 01fc 06EE900A 		vmov	s13, r0	@ int
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 43


 1189 0200 F8EEE60A 		vcvt.f32.s32	s1, s13
 1190 0204 60EE870A 		vmul.f32	s1, s1, s14
 1191 0208 9FED3A0A 		vldr.32	s0, .L105+60
 1192 020c C0EE800A 		vdiv.f32	s1, s1, s0
 1193 0210 87EE800A 		vdiv.f32	s0, s15, s0
 1194 0214 3848     		ldr	r0, .L105+64
 1195 0216 FFF7FEFF 		bl	update_current_control
 1196              	.LVL104:
 616:Src/pid.c     **** 	temp32 = Q16_MUL(g_V_Alpha,113512);
 1197              		.loc 1 616 0
 1198 021a 2C68     		ldr	r4, [r5]
 1199              	.LVL105:
 617:Src/pid.c     **** 	Y = (g_V_Beta + temp32) >> 1;
 1200              		.loc 1 617 0
 1201 021c 3749     		ldr	r1, .L105+68
 1202 021e 3068     		ldr	r0, [r6]
 1203 0220 FFF7FEFF 		bl	Q16_MUL
 1204              	.LVL106:
 618:Src/pid.c     **** 	Z = (g_V_Beta - temp32) >> 1;  
 1205              		.loc 1 618 0
 1206 0224 2A68     		ldr	r2, [r5]
 1207 0226 1318     		adds	r3, r2, r0
 1208 0228 5B10     		asrs	r3, r3, #1
 1209              	.LVL107:
 619:Src/pid.c     ****   // ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¹Ê¸ï¿½ï¿½ï¿½ï¿½ï¿½Úµï¿½ï¿½ï¿½ï¿½ï¿½
 1210              		.loc 1 619 0
 1211 022a 101A     		subs	r0, r2, r0
 1212              	.LVL108:
 1213 022c 4010     		asrs	r0, r0, #1
 1214              	.LVL109:
 623:Src/pid.c     **** 	if (Z < 0) temp32 += 2;
 1215              		.loc 1 623 0
 1216 022e 002C     		cmp	r4, #0
 1217 0230 40F32C81 		ble	.L101
 1218 0234 0121     		movs	r1, #1
 1219              	.L87:
 1220              	.LVL110:
 624:Src/pid.c     **** 	if (Y < 0) temp32 += 4;	
 1221              		.loc 1 624 0
 1222 0236 0028     		cmp	r0, #0
 1223 0238 C0F22A81 		blt	.L102
 1224              	.L88:
 625:Src/pid.c     **** 	g_Sector = temp32;
 1225              		.loc 1 625 0
 1226 023c 002B     		cmp	r3, #0
 1227 023e C0F22981 		blt	.L103
 1228              	.L89:
 626:Src/pid.c     **** 	g_Sector_test = g_Sector;
 1229              		.loc 1 626 0
 1230 0242 2F4A     		ldr	r2, .L105+72
 1231 0244 1160     		str	r1, [r2]
 627:Src/pid.c     **** 	g_X = X;
 1232              		.loc 1 627 0
 1233 0246 2F4A     		ldr	r2, .L105+76
 1234 0248 1180     		strh	r1, [r2]	@ movhi
 628:Src/pid.c     **** 	g_Y = Y;
 1235              		.loc 1 628 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 44


 1236 024a 2F4A     		ldr	r2, .L105+80
 1237 024c 1460     		str	r4, [r2]
 629:Src/pid.c     **** 	g_Z = Z;
 1238              		.loc 1 629 0
 1239 024e 2F4A     		ldr	r2, .L105+84
 1240 0250 1360     		str	r3, [r2]
 630:Src/pid.c     ****   Calculate_CCR_SVP(TIM1, g_Sector, g_X, g_Y, g_Z);
 1241              		.loc 1 630 0
 1242 0252 2F4A     		ldr	r2, .L105+88
 1243 0254 1060     		str	r0, [r2]
 631:Src/pid.c     **** 
 1244              		.loc 1 631 0
 1245 0256 0090     		str	r0, [sp]
 1246 0258 2246     		mov	r2, r4
 1247 025a 2E48     		ldr	r0, .L105+92
 1248              	.LVL111:
 1249 025c FFF7FEFF 		bl	Calculate_CCR_SVP
 1250              	.LVL112:
 633:Src/pid.c     **** static void SpeedPID(void)
 1251              		.loc 1 633 0
 1252 0260 03B0     		add	sp, sp, #12
 1253              	.LCFI7:
 1254              		.cfi_remember_state
 1255              		.cfi_def_cfa_offset 28
 1256              		@ sp needed
 1257 0262 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1258              	.LVL113:
 1259              	.L66:
 1260              	.LCFI8:
 1261              		.cfi_restore_state
 463:Src/pid.c     **** 		}	
 1262              		.loc 1 463 0
 1263 0266 144B     		ldr	r3, .L105
 1264 0268 4FF28032 		movw	r2, #62336
 1265 026c A3F84220 		strh	r2, [r3, #66]	@ movhi
 1266 0270 44E7     		b	.L67
 1267              	.L96:
 468:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_CURRENT;
 1268              		.loc 1 468 0
 1269 0272 114B     		ldr	r3, .L105
 1270 0274 0122     		movs	r2, #1
 1271 0276 A3F80222 		strh	r2, [r3, #514]	@ movhi
 469:Src/pid.c     **** 		if(flag_processing_Jtest == 0)
 1272              		.loc 1 469 0
 1273 027a A3F80422 		strh	r2, [r3, #516]	@ movhi
 470:Src/pid.c     **** 		{
 1274              		.loc 1 470 0
 1275 027e 264B     		ldr	r3, .L105+96
 1276 0280 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1277 0282 33B9     		cbnz	r3, .L69
 472:Src/pid.c     **** 			g_CmdMap[CMD_JTEST_TIME1] = 0;
 1278              		.loc 1 472 0
 1279 0284 254A     		ldr	r2, .L105+100
 1280 0286 1380     		strh	r3, [r2]	@ movhi
 473:Src/pid.c     **** 			g_CmdMap[CMD_JTEST_TIME2] = 0;
 1281              		.loc 1 473 0
 1282 0288 0B4A     		ldr	r2, .L105
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 45


 1283 028a A2F8C030 		strh	r3, [r2, #192]	@ movhi
 474:Src/pid.c     **** 		}
 1284              		.loc 1 474 0
 1285 028e A2F8C230 		strh	r3, [r2, #194]	@ movhi
 1286              	.L69:
 476:Src/pid.c     **** 		{
 1287              		.loc 1 476 0
 1288 0292 224B     		ldr	r3, .L105+100
 1289 0294 1B88     		ldrh	r3, [r3]
 1290 0296 1BB2     		sxth	r3, r3
 1291 0298 012B     		cmp	r3, #1
 1292 029a 69D0     		beq	.L71
 1293 029c 022B     		cmp	r3, #2
 1294 029e 00F08980 		beq	.L72
 1295 02a2 002B     		cmp	r3, #0
 1296 02a4 3CD0     		beq	.L104
 516:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 0;
 1297              		.loc 1 516 0
 1298 02a6 044A     		ldr	r2, .L105
 1299 02a8 0023     		movs	r3, #0
 1300 02aa A2F85432 		strh	r3, [r2, #596]	@ movhi
 517:Src/pid.c     **** 				flag_processing_Jtest = 0;
 1301              		.loc 1 517 0
 1302 02ae A2F84230 		strh	r3, [r2, #66]	@ movhi
 518:Src/pid.c     **** 				break;
 1303              		.loc 1 518 0
 1304 02b2 194A     		ldr	r2, .L105+96
 1305 02b4 1370     		strb	r3, [r2]
 519:Src/pid.c     **** 			}
 1306              		.loc 1 519 0
 1307 02b6 21E7     		b	.L67
 1308              	.L106:
 1309              		.align	2
 1310              	.L105:
 1311 02b8 00000000 		.word	g_CmdMap
 1312 02bc 00000000 		.word	pid_spd
 1313 02c0 00000000 		.word	.LANCHOR14
 1314 02c4 00000000 		.word	pid_IQ
 1315 02c8 00C0FFFF 		.word	-16384
 1316 02cc 00000000 		.word	pid_ID
 1317 02d0 00008046 		.word	1182793728
 1318 02d4 00000000 		.word	.LANCHOR0
 1319 02d8 00000000 		.word	.LANCHOR1
 1320 02dc 00000000 		.word	g_high_fre_pulse
 1321 02e0 00000000 		.word	g_ElectricAngle
 1322 02e4 00000000 		.word	.LANCHOR2
 1323 02e8 00000000 		.word	.LANCHOR3
 1324 02ec 00000000 		.word	bus_voltage_
 1325 02f0 3ACD133F 		.word	1058262330
 1326 02f4 00005245 		.word	1163001856
 1327 02f8 00000000 		.word	motor_
 1328 02fc 68BB0100 		.word	113512
 1329 0300 00000000 		.word	.LANCHOR15
 1330 0304 00000000 		.word	g_Sector_test
 1331 0308 00000000 		.word	g_X
 1332 030c 00000000 		.word	g_Y
 1333 0310 00000000 		.word	g_Z
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 46


 1334 0314 002C0140 		.word	1073818624
 1335 0318 00000000 		.word	flag_processing_Jtest
 1336 031c 00000000 		.word	state_Jtest
 1337              	.L104:
 480:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 8192;
 1338              		.loc 1 480 0
 1339 0320 5D4B     		ldr	r3, .L107
 1340 0322 0122     		movs	r2, #1
 1341 0324 1A70     		strb	r2, [r3]
 481:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]>819)
 1342              		.loc 1 481 0
 1343 0326 5D4B     		ldr	r3, .L107+4
 1344 0328 4FF40052 		mov	r2, #8192
 1345 032c A3F84220 		strh	r2, [r3, #66]	@ movhi
 482:Src/pid.c     **** 				{
 1346              		.loc 1 482 0
 1347 0330 B3F85030 		ldrh	r3, [r3, #80]
 1348 0334 1BB2     		sxth	r3, r3
 1349 0336 B3F54D7F 		cmp	r3, #820
 1350 033a 06DB     		blt	.L74
 484:Src/pid.c     **** 				}
 1351              		.loc 1 484 0
 1352 033c 574A     		ldr	r2, .L107+4
 1353 033e B2F8C030 		ldrh	r3, [r2, #192]
 1354 0342 2833     		adds	r3, r3, #40
 1355 0344 1BB2     		sxth	r3, r3
 1356 0346 A2F8C030 		strh	r3, [r2, #192]	@ movhi
 1357              	.L74:
 486:Src/pid.c     **** 				{
 1358              		.loc 1 486 0
 1359 034a 544B     		ldr	r3, .L107+4
 1360 034c B3F85030 		ldrh	r3, [r3, #80]
 1361 0350 1BB2     		sxth	r3, r3
 1362 0352 42F23332 		movw	r2, #9011
 1363 0356 9342     		cmp	r3, r2
 1364 0358 7FF7D0AE 		ble	.L67
 488:Src/pid.c     **** 					g_CmdMap[CMD_JTEST_TIME2] = 0;
 1365              		.loc 1 488 0
 1366 035c 504A     		ldr	r2, .L107+8
 1367 035e 1388     		ldrh	r3, [r2]
 1368 0360 0133     		adds	r3, r3, #1
 1369 0362 1BB2     		sxth	r3, r3
 1370 0364 1380     		strh	r3, [r2]	@ movhi
 489:Src/pid.c     **** 				}
 1371              		.loc 1 489 0
 1372 0366 4D4B     		ldr	r3, .L107+4
 1373 0368 0022     		movs	r2, #0
 1374 036a A3F8C220 		strh	r2, [r3, #194]	@ movhi
 1375 036e C5E6     		b	.L67
 1376              	.L71:
 495:Src/pid.c     **** 				if(g_CmdMap[CMD_SPD_ACT_PU]<8192+819)
 1377              		.loc 1 495 0
 1378 0370 4A4B     		ldr	r3, .L107+4
 1379 0372 4FF46042 		mov	r2, #57344
 1380 0376 A3F84220 		strh	r2, [r3, #66]	@ movhi
 496:Src/pid.c     **** 				{
 1381              		.loc 1 496 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 47


 1382 037a B3F85030 		ldrh	r3, [r3, #80]
 1383 037e 1BB2     		sxth	r3, r3
 1384 0380 42F23232 		movw	r2, #9010
 1385 0384 9342     		cmp	r3, r2
 1386 0386 06DC     		bgt	.L75
 498:Src/pid.c     **** 				}
 1387              		.loc 1 498 0
 1388 0388 444A     		ldr	r2, .L107+4
 1389 038a B2F8C230 		ldrh	r3, [r2, #194]
 1390 038e 2833     		adds	r3, r3, #40
 1391 0390 1BB2     		sxth	r3, r3
 1392 0392 A2F8C230 		strh	r3, [r2, #194]	@ movhi
 1393              	.L75:
 500:Src/pid.c     **** 				{
 1394              		.loc 1 500 0
 1395 0396 414B     		ldr	r3, .L107+4
 1396 0398 B3F85030 		ldrh	r3, [r3, #80]
 1397 039c 1BB2     		sxth	r3, r3
 1398 039e 40F23232 		movw	r2, #818
 1399 03a2 9342     		cmp	r3, r2
 1400 03a4 3FF7AAAE 		bgt	.L67
 502:Src/pid.c     **** 				}
 1401              		.loc 1 502 0
 1402 03a8 3D4A     		ldr	r2, .L107+8
 1403 03aa 1388     		ldrh	r3, [r2]
 1404 03ac 0133     		adds	r3, r3, #1
 1405 03ae 1BB2     		sxth	r3, r3
 1406 03b0 1380     		strh	r3, [r2]	@ movhi
 1407 03b2 A3E6     		b	.L67
 1408              	.L72:
 508:Src/pid.c     **** 				{
 1409              		.loc 1 508 0
 1410 03b4 394B     		ldr	r3, .L107+4
 1411 03b6 B3F85030 		ldrh	r3, [r3, #80]
 1412 03ba 1BB2     		sxth	r3, r3
 1413 03bc 40F23232 		movw	r2, #818
 1414 03c0 9342     		cmp	r3, r2
 1415 03c2 3FF79BAE 		bgt	.L67
 510:Src/pid.c     **** 				}				
 1416              		.loc 1 510 0
 1417 03c6 364A     		ldr	r2, .L107+8
 1418 03c8 1388     		ldrh	r3, [r2]
 1419 03ca 0133     		adds	r3, r3, #1
 1420 03cc 1BB2     		sxth	r3, r3
 1421 03ce 1380     		strh	r3, [r2]	@ movhi
 1422 03d0 94E6     		b	.L67
 1423              	.L97:
 525:Src/pid.c     **** 		g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;
 1424              		.loc 1 525 0
 1425 03d2 324B     		ldr	r3, .L107+4
 1426 03d4 0122     		movs	r2, #1
 1427 03d6 A3F80222 		strh	r2, [r3, #514]	@ movhi
 526:Src/pid.c     **** 
 1428              		.loc 1 526 0
 1429 03da 0222     		movs	r2, #2
 1430 03dc A3F80422 		strh	r2, [r3, #516]	@ movhi
 529:Src/pid.c     **** 		if(test < (10*10))
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 48


 1431              		.loc 1 529 0
 1432 03e0 304A     		ldr	r2, .L107+12
 1433 03e2 1388     		ldrh	r3, [r2]
 1434 03e4 0133     		adds	r3, r3, #1
 1435 03e6 9BB2     		uxth	r3, r3
 1436 03e8 1380     		strh	r3, [r2]	@ movhi
 530:Src/pid.c     **** 		{
 1437              		.loc 1 530 0
 1438 03ea 632B     		cmp	r3, #99
 1439 03ec 04D8     		bhi	.L77
 532:Src/pid.c     **** 		}
 1440              		.loc 1 532 0
 1441 03ee 2B4B     		ldr	r3, .L107+4
 1442 03f0 0022     		movs	r2, #0
 1443 03f2 A3F84620 		strh	r2, [r3, #70]	@ movhi
 1444 03f6 81E6     		b	.L67
 1445              	.L77:
 534:Src/pid.c     **** 		{
 1446              		.loc 1 534 0
 1447 03f8 B3F5167F 		cmp	r3, #600
 1448 03fc 05D2     		bcs	.L78
 536:Src/pid.c     **** 		}
 1449              		.loc 1 536 0
 1450 03fe 274B     		ldr	r3, .L107+4
 1451 0400 4FF48052 		mov	r2, #4096
 1452 0404 A3F84620 		strh	r2, [r3, #70]	@ movhi
 1453 0408 78E6     		b	.L67
 1454              	.L78:
 538:Src/pid.c     **** 		{
 1455              		.loc 1 538 0
 1456 040a 40F24B42 		movw	r2, #1099
 1457 040e 9342     		cmp	r3, r2
 1458 0410 04D8     		bhi	.L79
 540:Src/pid.c     **** 		}
 1459              		.loc 1 540 0
 1460 0412 224B     		ldr	r3, .L107+4
 1461 0414 0022     		movs	r2, #0
 1462 0416 A3F84620 		strh	r2, [r3, #70]	@ movhi
 1463 041a 6FE6     		b	.L67
 1464              	.L79:
 542:Src/pid.c     **** 		{
 1465              		.loc 1 542 0
 1466 041c B3F5C86F 		cmp	r3, #1600
 1467 0420 05D2     		bcs	.L80
 544:Src/pid.c     **** 		}
 1468              		.loc 1 544 0
 1469 0422 1E4B     		ldr	r3, .L107+4
 1470 0424 4FF47042 		mov	r2, #61440
 1471 0428 A3F84620 		strh	r2, [r3, #70]	@ movhi
 1472 042c 66E6     		b	.L67
 1473              	.L80:
 546:Src/pid.c     **** 		{
 1474              		.loc 1 546 0
 1475 042e 40F2A362 		movw	r2, #1699
 1476 0432 9342     		cmp	r3, r2
 1477 0434 04D8     		bhi	.L81
 548:Src/pid.c     **** 		}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 49


 1478              		.loc 1 548 0
 1479 0436 194B     		ldr	r3, .L107+4
 1480 0438 0022     		movs	r2, #0
 1481 043a A3F84620 		strh	r2, [r3, #70]	@ movhi
 1482 043e 5DE6     		b	.L67
 1483              	.L81:
 552:Src/pid.c     **** 			g_CmdMap[SYS_SELF_TUNING] = 0;
 1484              		.loc 1 552 0
 1485 0440 0023     		movs	r3, #0
 1486 0442 184A     		ldr	r2, .L107+12
 1487 0444 1380     		strh	r3, [r2]	@ movhi
 553:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
 1488              		.loc 1 553 0
 1489 0446 154A     		ldr	r2, .L107+4
 1490 0448 A2F85432 		strh	r3, [r2, #596]	@ movhi
 554:Src/pid.c     **** 		}
 1491              		.loc 1 554 0
 1492 044c A2F84630 		strh	r3, [r2, #70]	@ movhi
 1493 0450 54E6     		b	.L67
 1494              	.LVL114:
 1495              	.L98:
 582:Src/pid.c     ****         pid_ID.out *= mod_scalefactor;
 1496              		.loc 1 582 0
 1497 0452 D5ED0D7A 		vldr.32	s15, [r5, #52]	@ int
 1498 0456 F8EEE77A 		vcvt.f32.s32	s15, s15
 1499 045a 67EE807A 		vmul.f32	s15, s15, s0
 1500 045e FDEEE77A 		vcvt.s32.f32	s15, s15
 1501 0462 C5ED0D7A 		vstr.32	s15, [r5, #52]	@ int
 583:Src/pid.c     **** 	}
 1502              		.loc 1 583 0
 1503 0466 D4ED0D7A 		vldr.32	s15, [r4, #52]	@ int
 1504 046a F8EEE77A 		vcvt.f32.s32	s15, s15
 1505 046e 27EE800A 		vmul.f32	s0, s15, s0
 1506              	.LVL115:
 1507 0472 BDEEC00A 		vcvt.s32.f32	s0, s0
 1508 0476 84ED0D0A 		vstr.32	s0, [r4, #52]	@ int
 1509 047a 71E6     		b	.L83
 1510              	.L99:
 593:Src/pid.c     **** 	g_Vd = pid_ID.out*N97_CCR/PU_REFERENCE;	
 1511              		.loc 1 593 0
 1512 047c 03F57F53 		add	r3, r3, #16320
 1513 0480 3F33     		adds	r3, r3, #63
 1514 0482 76E6     		b	.L85
 1515              	.L100:
 594:Src/pid.c     **** 	
 1516              		.loc 1 594 0
 1517 0484 03F57F53 		add	r3, r3, #16320
 1518 0488 3F33     		adds	r3, r3, #63
 1519 048a 7EE6     		b	.L86
 1520              	.LVL116:
 1521              	.L101:
 621:Src/pid.c     **** 	/** ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×ª**/	
 1522              		.loc 1 621 0
 1523 048c 0021     		movs	r1, #0
 1524 048e D2E6     		b	.L87
 1525              	.LVL117:
 1526              	.L102:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 50


 624:Src/pid.c     **** 	if (Y < 0) temp32 += 4;	
 1527              		.loc 1 624 0 discriminator 1
 1528 0490 0231     		adds	r1, r1, #2
 1529              	.LVL118:
 1530 0492 D3E6     		b	.L88
 1531              	.L103:
 625:Src/pid.c     **** 	g_Sector = temp32;
 1532              		.loc 1 625 0 discriminator 1
 1533 0494 0431     		adds	r1, r1, #4
 1534              	.LVL119:
 1535 0496 D4E6     		b	.L89
 1536              	.L108:
 1537              		.align	2
 1538              	.L107:
 1539 0498 00000000 		.word	flag_processing_Jtest
 1540 049c 00000000 		.word	g_CmdMap
 1541 04a0 00000000 		.word	state_Jtest
 1542 04a4 00000000 		.word	.LANCHOR14
 1543              		.cfi_endproc
 1544              	.LFE338:
 1546              		.section	.text.ForcePID,"ax",%progbits
 1547              		.align	1
 1548              		.syntax unified
 1549              		.thumb
 1550              		.thumb_func
 1551              		.fpu fpv4-sp-d16
 1553              	ForcePID:
 1554              	.LFB336:
 198:Src/pid.c     **** 	s16 error_force = 0;
 1555              		.loc 1 198 0
 1556              		.cfi_startproc
 1557              		@ args = 0, pretend = 0, frame = 0
 1558              		@ frame_needed = 0, uses_anonymous_args = 0
 1559 0000 10B5     		push	{r4, lr}
 1560              	.LCFI9:
 1561              		.cfi_def_cfa_offset 8
 1562              		.cfi_offset 4, -8
 1563              		.cfi_offset 14, -4
 1564              	.LVL120:
 203:Src/pid.c     **** 	{
 1565              		.loc 1 203 0
 1566 0002 484B     		ldr	r3, .L119
 1567 0004 5B8D     		ldrh	r3, [r3, #42]
 1568 0006 1BB2     		sxth	r3, r3
 1569 0008 002B     		cmp	r3, #0
 1570 000a 53D1     		bne	.L110
 205:Src/pid.c     **** 		force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 1571              		.loc 1 205 0
 1572 000c 454B     		ldr	r3, .L119
 1573 000e B3F84410 		ldrh	r1, [r3, #68]
 1574 0012 454A     		ldr	r2, .L119+4
 1575 0014 1180     		strh	r1, [r2]	@ movhi
 206:Src/pid.c     **** 	}
 1576              		.loc 1 206 0
 1577 0016 B3F85A20 		ldrh	r2, [r3, #90]
 1578 001a 444B     		ldr	r3, .L119+8
 1579 001c 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 51


 1580              	.L111:
 239:Src/pid.c     **** 	pid_force.Low_limit = ((g_CmdMap[SYS_SPD_LOWER_LIMIT_PU]>>0));
 1581              		.loc 1 239 0
 1582 001e 414B     		ldr	r3, .L119
 1583 0020 B3F88422 		ldrh	r2, [r3, #644]
 1584 0024 12B2     		sxth	r2, r2
 1585 0026 4249     		ldr	r1, .L119+12
 1586 0028 CA63     		str	r2, [r1, #60]
 240:Src/pid.c     **** 	
 1587              		.loc 1 240 0
 1588 002a B3F88622 		ldrh	r2, [r3, #646]
 1589 002e 12B2     		sxth	r2, r2
 1590 0030 0A64     		str	r2, [r1, #64]
 242:Src/pid.c     **** 	{
 1591              		.loc 1 242 0
 1592 0032 B3F84C20 		ldrh	r2, [r3, #76]
 1593 0036 12B2     		sxth	r2, r2
 1594 0038 B3F88C32 		ldrh	r3, [r3, #652]
 1595 003c 1BB2     		sxth	r3, r3
 1596 003e 9A42     		cmp	r2, r3
 1597 0040 46DD     		ble	.L112
 244:Src/pid.c     **** 		
 1598              		.loc 1 244 0
 1599 0042 0022     		movs	r2, #0
 1600 0044 CA63     		str	r2, [r1, #60]
 1601              	.L113:
 252:Src/pid.c     **** 	{
 1602              		.loc 1 252 0
 1603 0046 374B     		ldr	r3, .L119
 1604 0048 B3F84C20 		ldrh	r2, [r3, #76]
 1605 004c 12B2     		sxth	r2, r2
 1606 004e B3F88E32 		ldrh	r3, [r3, #654]
 1607 0052 1BB2     		sxth	r3, r3
 1608 0054 9A42     		cmp	r2, r3
 1609 0056 50DA     		bge	.L114
 254:Src/pid.c     **** 		
 1610              		.loc 1 254 0
 1611 0058 354B     		ldr	r3, .L119+12
 1612 005a 0022     		movs	r2, #0
 1613 005c 1A64     		str	r2, [r3, #64]
 1614              	.L115:
 289:Src/pid.c     **** //	}
 1615              		.loc 1 289 0
 1616 005e 324B     		ldr	r3, .L119+4
 1617 0060 1888     		ldrh	r0, [r3]
 1618 0062 324B     		ldr	r3, .L119+8
 1619 0064 1988     		ldrh	r1, [r3]
 1620 0066 324C     		ldr	r4, .L119+12
 1621 0068 2246     		mov	r2, r4
 1622 006a 09B2     		sxth	r1, r1
 1623 006c 00B2     		sxth	r0, r0
 1624 006e FFF7FEFF 		bl	PID_control
 1625              	.LVL121:
 292:Src/pid.c     **** 	
 1626              		.loc 1 292 0
 1627 0072 B4F93420 		ldrsh	r2, [r4, #52]
 1628 0076 2B4B     		ldr	r3, .L119
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 52


 1629 0078 A3F85E20 		strh	r2, [r3, #94]	@ movhi
 294:Src/pid.c     **** 	{
 1630              		.loc 1 294 0
 1631 007c B3F84030 		ldrh	r3, [r3, #64]
 1632 0080 1BB2     		sxth	r3, r3
 1633 0082 042B     		cmp	r3, #4
 1634 0084 09D0     		beq	.L116
 294:Src/pid.c     **** 	{
 1635              		.loc 1 294 0 is_stmt 0 discriminator 1
 1636 0086 274B     		ldr	r3, .L119
 1637 0088 B3F84030 		ldrh	r3, [r3, #64]
 1638 008c 1BB2     		sxth	r3, r3
 1639 008e 052B     		cmp	r3, #5
 1640 0090 0FD1     		bne	.L109
 294:Src/pid.c     **** 	{
 1641              		.loc 1 294 0 discriminator 2
 1642 0092 284B     		ldr	r3, .L119+16
 1643 0094 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1644 0096 032B     		cmp	r3, #3
 1645 0098 0BD1     		bne	.L109
 1646              	.L116:
 296:Src/pid.c     **** 		g_CmdMap[CMD_PROFILE_POS_PU] = g_CmdMap[CMD_POS_ACT_PU];
 1647              		.loc 1 296 0 is_stmt 1
 1648 009a 274B     		ldr	r3, .L119+20
 1649 009c 0022     		movs	r2, #0
 1650 009e 1A60     		str	r2, [r3]
 297:Src/pid.c     **** 		g_CmdMap[CMD_POS_SET_PU] = g_CmdMap[CMD_POS_ACT_PU];
 1651              		.loc 1 297 0
 1652 00a0 204B     		ldr	r3, .L119
 1653 00a2 B3F84C20 		ldrh	r2, [r3, #76]
 1654 00a6 A3F86020 		strh	r2, [r3, #96]	@ movhi
 298:Src/pid.c     **** 	}
 1655              		.loc 1 298 0
 1656 00aa B3F84C20 		ldrh	r2, [r3, #76]
 1657 00ae A3F84820 		strh	r2, [r3, #72]	@ movhi
 1658              	.L109:
 300:Src/pid.c     **** 
 1659              		.loc 1 300 0
 1660 00b2 10BD     		pop	{r4, pc}
 1661              	.L110:
 210:Src/pid.c     **** 		force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 1662              		.loc 1 210 0
 1663 00b4 1B4A     		ldr	r2, .L119
 1664 00b6 B2F84430 		ldrh	r3, [r2, #68]
 1665 00ba 5B42     		negs	r3, r3
 1666 00bc 1BB2     		sxth	r3, r3
 1667 00be 1A49     		ldr	r1, .L119+4
 1668 00c0 0B80     		strh	r3, [r1]	@ movhi
 211:Src/pid.c     **** 	}
 1669              		.loc 1 211 0
 1670 00c2 B2F85A30 		ldrh	r3, [r2, #90]
 1671 00c6 5B42     		negs	r3, r3
 1672 00c8 1BB2     		sxth	r3, r3
 1673 00ca 184A     		ldr	r2, .L119+8
 1674 00cc 1380     		strh	r3, [r2]	@ movhi
 1675 00ce A6E7     		b	.L111
 1676              	.L112:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 53


 247:Src/pid.c     **** 	{
 1677              		.loc 1 247 0
 1678 00d0 144B     		ldr	r3, .L119
 1679 00d2 B3F84C20 		ldrh	r2, [r3, #76]
 1680 00d6 12B2     		sxth	r2, r2
 1681 00d8 B3F88C32 		ldrh	r3, [r3, #652]
 1682 00dc 1BB2     		sxth	r3, r3
 1683 00de A3F29913 		subw	r3, r3, #409
 1684 00e2 9A42     		cmp	r2, r3
 1685 00e4 AFDD     		ble	.L113
 247:Src/pid.c     **** 	{
 1686              		.loc 1 247 0 is_stmt 0 discriminator 1
 1687 00e6 0F4B     		ldr	r3, .L119
 1688 00e8 B3F84230 		ldrh	r3, [r3, #66]
 1689 00ec 1BB2     		sxth	r3, r3
 1690 00ee 002B     		cmp	r3, #0
 1691 00f0 A9DD     		ble	.L113
 249:Src/pid.c     **** 		
 1692              		.loc 1 249 0 is_stmt 1
 1693 00f2 0F4B     		ldr	r3, .L119+12
 1694 00f4 0022     		movs	r2, #0
 1695 00f6 DA63     		str	r2, [r3, #60]
 1696 00f8 A5E7     		b	.L113
 1697              	.L114:
 257:Src/pid.c     **** 	{
 1698              		.loc 1 257 0
 1699 00fa 0A4B     		ldr	r3, .L119
 1700 00fc B3F84C20 		ldrh	r2, [r3, #76]
 1701 0100 12B2     		sxth	r2, r2
 1702 0102 B3F88E32 		ldrh	r3, [r3, #654]
 1703 0106 1BB2     		sxth	r3, r3
 1704 0108 03F29913 		addw	r3, r3, #409
 1705 010c 9A42     		cmp	r2, r3
 1706 010e A6DA     		bge	.L115
 257:Src/pid.c     **** 	{
 1707              		.loc 1 257 0 is_stmt 0 discriminator 1
 1708 0110 044B     		ldr	r3, .L119
 1709 0112 B3F84230 		ldrh	r3, [r3, #66]
 1710 0116 13F4004F 		tst	r3, #32768
 1711 011a A0D0     		beq	.L115
 259:Src/pid.c     **** 		
 1712              		.loc 1 259 0 is_stmt 1
 1713 011c 044B     		ldr	r3, .L119+12
 1714 011e 0022     		movs	r2, #0
 1715 0120 1A64     		str	r2, [r3, #64]
 1716 0122 9CE7     		b	.L115
 1717              	.L120:
 1718              		.align	2
 1719              	.L119:
 1720 0124 00000000 		.word	g_CmdMap
 1721 0128 00000000 		.word	force_set
 1722 012c 00000000 		.word	force_act
 1723 0130 00000000 		.word	pid_force
 1724 0134 00000000 		.word	status_Mode_POSITION_FORCE
 1725 0138 00000000 		.word	Flag_Profile_Enable
 1726              		.cfi_endproc
 1727              	.LFE336:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 54


 1729              		.section	.text.force_PID_out,"ax",%progbits
 1730              		.align	1
 1731              		.global	force_PID_out
 1732              		.syntax unified
 1733              		.thumb
 1734              		.thumb_func
 1735              		.fpu fpv4-sp-d16
 1737              	force_PID_out:
 1738              	.LFB335:
 178:Src/pid.c     **** 	p_pid->out = out;
 1739              		.loc 1 178 0
 1740              		.cfi_startproc
 1741              		@ args = 0, pretend = 0, frame = 0
 1742              		@ frame_needed = 0, uses_anonymous_args = 0
 1743              		@ link register save eliminated.
 1744              	.LVL122:
 1745 0000 30B4     		push	{r4, r5}
 1746              	.LCFI10:
 1747              		.cfi_def_cfa_offset 8
 1748              		.cfi_offset 4, -8
 1749              		.cfi_offset 5, -4
 179:Src/pid.c     **** 	if(p_pid->out >p_pid->Up_limit)
 1750              		.loc 1 179 0
 1751 0002 4863     		str	r0, [r1, #52]
 180:Src/pid.c     **** 	{
 1752              		.loc 1 180 0
 1753 0004 CB6B     		ldr	r3, [r1, #60]
 1754 0006 8342     		cmp	r3, r0
 1755 0008 00DA     		bge	.L122
 182:Src/pid.c     **** 		//p_pid->integral = (p_pid->out-p_pid->Part_P - p_pid->Part_D)*p_pid->frequency;
 1756              		.loc 1 182 0
 1757 000a 4B63     		str	r3, [r1, #52]
 1758              	.L122:
 185:Src/pid.c     **** 	{
 1759              		.loc 1 185 0
 1760 000c 4A6B     		ldr	r2, [r1, #52]
 1761 000e 0B6C     		ldr	r3, [r1, #64]
 1762 0010 9A42     		cmp	r2, r3
 1763 0012 00DA     		bge	.L123
 187:Src/pid.c     **** 		//p_pid->integral = (p_pid->out-p_pid->Part_P - p_pid->Part_D)*p_pid->frequency;
 1764              		.loc 1 187 0
 1765 0014 4B63     		str	r3, [r1, #52]
 1766              	.L123:
 190:Src/pid.c     **** 	p_pid->error_last = 0;
 1767              		.loc 1 190 0
 1768 0016 0023     		movs	r3, #0
 1769 0018 8B61     		str	r3, [r1, #24]
 191:Src/pid.c     **** 	p_pid->Part_P = 0;
 1770              		.loc 1 191 0
 1771 001a CB61     		str	r3, [r1, #28]
 192:Src/pid.c     **** 	p_pid->Part_I = out;
 1772              		.loc 1 192 0
 1773 001c 0B62     		str	r3, [r1, #32]
 193:Src/pid.c     **** 	p_pid->integral = p_pid->Part_I*p_pid->frequency;
 1774              		.loc 1 193 0
 1775 001e 0446     		mov	r4, r0
 1776 0020 C517     		asrs	r5, r0, #31
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 55


 1777 0022 C1E90A45 		strd	r4, [r1, #40]
 194:Src/pid.c     **** 	p_pid->Part_D = 0;
 1778              		.loc 1 194 0
 1779 0026 8A6B     		ldr	r2, [r1, #56]
 1780 0028 00FB02F0 		mul	r0, r0, r2
 1781              	.LVL123:
 1782 002c 4864     		str	r0, [r1, #68]
 195:Src/pid.c     **** }
 1783              		.loc 1 195 0
 1784 002e 0B63     		str	r3, [r1, #48]
 196:Src/pid.c     **** static void ForcePID(void)
 1785              		.loc 1 196 0
 1786 0030 30BC     		pop	{r4, r5}
 1787              	.LCFI11:
 1788              		.cfi_restore 5
 1789              		.cfi_restore 4
 1790              		.cfi_def_cfa_offset 0
 1791              	.LVL124:
 1792 0032 7047     		bx	lr
 1793              		.cfi_endproc
 1794              	.LFE335:
 1796              		.section	.text.SpeedPID,"ax",%progbits
 1797              		.align	1
 1798              		.syntax unified
 1799              		.thumb
 1800              		.thumb_func
 1801              		.fpu fpv4-sp-d16
 1803              	SpeedPID:
 1804              	.LFB339:
 635:Src/pid.c     **** 	static s32 s_test_speed_t_count = 0;
 1805              		.loc 1 635 0
 1806              		.cfi_startproc
 1807              		@ args = 0, pretend = 0, frame = 0
 1808              		@ frame_needed = 0, uses_anonymous_args = 0
 1809 0000 08B5     		push	{r3, lr}
 1810              	.LCFI12:
 1811              		.cfi_def_cfa_offset 8
 1812              		.cfi_offset 3, -8
 1813              		.cfi_offset 14, -4
 1814              	.LVL125:
 639:Src/pid.c     ****   {
 1815              		.loc 1 639 0
 1816 0002 9A4B     		ldr	r3, .L168
 1817 0004 B3F80432 		ldrh	r3, [r3, #516]
 1818 0008 1BB2     		sxth	r3, r3
 1819 000a 012B     		cmp	r3, #1
 1820 000c 28D0     		beq	.L126
 639:Src/pid.c     ****   {
 1821              		.loc 1 639 0 is_stmt 0 discriminator 1
 1822 000e 974B     		ldr	r3, .L168
 1823 0010 B3F80432 		ldrh	r3, [r3, #516]
 1824 0014 1BB2     		sxth	r3, r3
 1825 0016 032B     		cmp	r3, #3
 1826 0018 22D0     		beq	.L126
 639:Src/pid.c     ****   {
 1827              		.loc 1 639 0 discriminator 2
 1828 001a 944B     		ldr	r3, .L168
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 56


 1829 001c B3F80432 		ldrh	r3, [r3, #516]
 1830 0020 1BB2     		sxth	r3, r3
 1831 0022 062B     		cmp	r3, #6
 1832 0024 1CD0     		beq	.L126
 643:Src/pid.c     **** 	{
 1833              		.loc 1 643 0 is_stmt 1
 1834 0026 914B     		ldr	r3, .L168
 1835 0028 B3F80432 		ldrh	r3, [r3, #516]
 1836 002c 1BB2     		sxth	r3, r3
 1837 002e 042B     		cmp	r3, #4
 1838 0030 64D0     		beq	.L160
 649:Src/pid.c     ****   {
 1839              		.loc 1 649 0
 1840 0032 8E4B     		ldr	r3, .L168
 1841 0034 B3F80432 		ldrh	r3, [r3, #516]
 1842 0038 1BB2     		sxth	r3, r3
 1843 003a 022B     		cmp	r3, #2
 1844 003c 19D1     		bne	.L128
 651:Src/pid.c     **** 			{
 1845              		.loc 1 651 0
 1846 003e 8C4B     		ldr	r3, .L168+4
 1847 0040 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1848 0042 022B     		cmp	r3, #2
 1849 0044 63D0     		beq	.L161
 694:Src/pid.c     **** 							{
 1850              		.loc 1 694 0
 1851 0046 894B     		ldr	r3, .L168
 1852 0048 B3F81C32 		ldrh	r3, [r3, #540]
 1853 004c 1BB2     		sxth	r3, r3
 1854 004e 002B     		cmp	r3, #0
 1855 0050 40F0CA80 		bne	.L138
 696:Src/pid.c     **** 							}
 1856              		.loc 1 696 0
 1857 0054 854B     		ldr	r3, .L168
 1858 0056 B3F84620 		ldrh	r2, [r3, #70]
 1859 005a A3F85C20 		strh	r2, [r3, #92]	@ movhi
 1860 005e 08E0     		b	.L128
 1861              	.L126:
 641:Src/pid.c     ****   }
 1862              		.loc 1 641 0
 1863 0060 824A     		ldr	r2, .L168
 1864 0062 B2F86210 		ldrh	r1, [r2, #98]
 1865 0066 B2F85E30 		ldrh	r3, [r2, #94]
 1866 006a 0B44     		add	r3, r3, r1
 1867 006c 1BB2     		sxth	r3, r3
 1868 006e A2F85C30 		strh	r3, [r2, #92]	@ movhi
 1869              	.LVL126:
 1870              	.L128:
 773:Src/pid.c     **** 	{
 1871              		.loc 1 773 0
 1872 0072 7E4B     		ldr	r3, .L168
 1873 0074 B3F85C20 		ldrh	r2, [r3, #92]
 1874 0078 12B2     		sxth	r2, r2
 1875 007a B3F88432 		ldrh	r3, [r3, #644]
 1876 007e 1BB2     		sxth	r3, r3
 1877 0080 9A42     		cmp	r2, r3
 1878 0082 04DD     		ble	.L155
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 57


 775:Src/pid.c     **** 	}
 1879              		.loc 1 775 0
 1880 0084 794B     		ldr	r3, .L168
 1881 0086 B3F88422 		ldrh	r2, [r3, #644]
 1882 008a A3F85C20 		strh	r2, [r3, #92]	@ movhi
 1883              	.L155:
 777:Src/pid.c     **** 	{
 1884              		.loc 1 777 0
 1885 008e 774B     		ldr	r3, .L168
 1886 0090 B3F85C20 		ldrh	r2, [r3, #92]
 1887 0094 12B2     		sxth	r2, r2
 1888 0096 B3F88632 		ldrh	r3, [r3, #646]
 1889 009a 1BB2     		sxth	r3, r3
 1890 009c 9A42     		cmp	r2, r3
 1891 009e 04DA     		bge	.L156
 779:Src/pid.c     **** 	}
 1892              		.loc 1 779 0
 1893 00a0 724B     		ldr	r3, .L168
 1894 00a2 B3F88622 		ldrh	r2, [r3, #646]
 1895 00a6 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 1896              	.L156:
 784:Src/pid.c     **** 	{
 1897              		.loc 1 784 0
 1898 00aa 704B     		ldr	r3, .L168
 1899 00ac 5A8C     		ldrh	r2, [r3, #34]
 1900 00ae 12B2     		sxth	r2, r2
 1901 00b0 B3F88032 		ldrh	r3, [r3, #640]
 1902 00b4 1BB2     		sxth	r3, r3
 1903 00b6 9A42     		cmp	r2, r3
 1904 00b8 03DD     		ble	.L157
 786:Src/pid.c     **** 	}
 1905              		.loc 1 786 0
 1906 00ba 6C4B     		ldr	r3, .L168
 1907 00bc B3F88022 		ldrh	r2, [r3, #640]
 1908 00c0 5A84     		strh	r2, [r3, #34]	@ movhi
 1909              	.L157:
 788:Src/pid.c     **** 	{
 1910              		.loc 1 788 0
 1911 00c2 6A4B     		ldr	r3, .L168
 1912 00c4 9A8C     		ldrh	r2, [r3, #36]
 1913 00c6 12B2     		sxth	r2, r2
 1914 00c8 B3F88232 		ldrh	r3, [r3, #642]
 1915 00cc 1BB2     		sxth	r3, r3
 1916 00ce 9A42     		cmp	r2, r3
 1917 00d0 03DA     		bge	.L158
 790:Src/pid.c     **** 	}
 1918              		.loc 1 790 0
 1919 00d2 664B     		ldr	r3, .L168
 1920 00d4 B3F88222 		ldrh	r2, [r3, #642]
 1921 00d8 9A84     		strh	r2, [r3, #36]	@ movhi
 1922              	.L158:
 793:Src/pid.c     **** 	pid_spd.Low_limit = g_CmdMap[CMD_CUR_LOWER_LIMIT_PU];		
 1923              		.loc 1 793 0
 1924 00da 644B     		ldr	r3, .L168
 1925 00dc 598C     		ldrh	r1, [r3, #34]
 1926 00de 09B2     		sxth	r1, r1
 1927 00e0 644A     		ldr	r2, .L168+8
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 58


 1928 00e2 D163     		str	r1, [r2, #60]
 794:Src/pid.c     **** 	
 1929              		.loc 1 794 0
 1930 00e4 998C     		ldrh	r1, [r3, #36]
 1931 00e6 09B2     		sxth	r1, r1
 1932 00e8 1164     		str	r1, [r2, #64]
 804:Src/pid.c     **** }
 1933              		.loc 1 804 0
 1934 00ea B3F85C00 		ldrh	r0, [r3, #92]
 1935 00ee B3F85010 		ldrh	r1, [r3, #80]
 1936 00f2 09B2     		sxth	r1, r1
 1937 00f4 00B2     		sxth	r0, r0
 1938 00f6 FFF7FEFF 		bl	PID_control
 1939              	.LVL127:
 805:Src/pid.c     **** void PositionPID(void)   //ï¿½Å½ï¿½ï¿½ï¿½ï¿½ï¿½ Î»ï¿½Ãµï¿½ï¿½ï¿½ï¿½ï¿½Ï²ï¿½ï¿½Î·ï¿½ï¿½ï¿½ï¿½ï¿½Ê¹ï¿
 1940              		.loc 1 805 0
 1941 00fa 08BD     		pop	{r3, pc}
 1942              	.LVL128:
 1943              	.L160:
 645:Src/pid.c     **** 		
 1944              		.loc 1 645 0
 1945 00fc 5B4B     		ldr	r3, .L168
 1946 00fe B3F85E20 		ldrh	r2, [r3, #94]
 1947 0102 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 647:Src/pid.c     **** 	}
 1948              		.loc 1 647 0
 1949 0106 5B4B     		ldr	r3, .L168+8
 1950 0108 0122     		movs	r2, #1
 1951 010a 1A60     		str	r2, [r3]
 1952 010c B1E7     		b	.L128
 1953              	.L161:
 653:Src/pid.c     **** 				{
 1954              		.loc 1 653 0
 1955 010e 574B     		ldr	r3, .L168
 1956 0110 5B8D     		ldrh	r3, [r3, #42]
 1957 0112 1BB2     		sxth	r3, r3
 1958 0114 002B     		cmp	r3, #0
 1959 0116 2CD1     		bne	.L131
 655:Src/pid.c     **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 1960              		.loc 1 655 0
 1961 0118 544B     		ldr	r3, .L168
 1962 011a B3F84410 		ldrh	r1, [r3, #68]
 1963 011e 564A     		ldr	r2, .L168+12
 1964 0120 1180     		strh	r1, [r2]	@ movhi
 656:Src/pid.c     **** 				}
 1965              		.loc 1 656 0
 1966 0122 B3F85A20 		ldrh	r2, [r3, #90]
 1967 0126 554B     		ldr	r3, .L168+16
 1968 0128 1A80     		strh	r2, [r3]	@ movhi
 1969              	.L132:
 663:Src/pid.c     **** 				{
 1970              		.loc 1 663 0
 1971 012a 534B     		ldr	r3, .L168+12
 1972 012c 1B88     		ldrh	r3, [r3]
 1973 012e 13F4004F 		tst	r3, #32768
 1974 0132 32D1     		bne	.L133
 665:Src/pid.c     **** 					{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 59


 1975              		.loc 1 665 0
 1976 0134 514B     		ldr	r3, .L168+16
 1977 0136 1A88     		ldrh	r2, [r3]
 1978 0138 12B2     		sxth	r2, r2
 1979 013a 4F4B     		ldr	r3, .L168+12
 1980 013c 1B88     		ldrh	r3, [r3]
 1981 013e 1BB2     		sxth	r3, r3
 1982 0140 9A42     		cmp	r2, r3
 1983 0142 08DC     		bgt	.L134
 665:Src/pid.c     **** 					{
 1984              		.loc 1 665 0 is_stmt 0 discriminator 1
 1985 0144 494B     		ldr	r3, .L168
 1986 0146 B3F84C20 		ldrh	r2, [r3, #76]
 1987 014a 12B2     		sxth	r2, r2
 1988 014c B3F88C32 		ldrh	r3, [r3, #652]
 1989 0150 1BB2     		sxth	r3, r3
 1990 0152 9A42     		cmp	r2, r3
 1991 0154 1BDD     		ble	.L135
 1992              	.L134:
 667:Src/pid.c     **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;	
 1993              		.loc 1 667 0 is_stmt 1
 1994 0156 464B     		ldr	r3, .L168+4
 1995 0158 0322     		movs	r2, #3
 1996 015a 1A70     		strb	r2, [r3]
 668:Src/pid.c     **** 						force_PID_out(g_CmdMap[CMD_CUR_SET_PU],&pid_force);
 1997              		.loc 1 668 0
 1998 015c 434B     		ldr	r3, .L168
 1999 015e 0422     		movs	r2, #4
 2000 0160 A3F80422 		strh	r2, [r3, #516]	@ movhi
 669:Src/pid.c     **** 					
 2001              		.loc 1 669 0
 2002 0164 B3F84200 		ldrh	r0, [r3, #66]
 2003 0168 4549     		ldr	r1, .L168+20
 2004 016a 00B2     		sxth	r0, r0
 2005 016c FFF7FEFF 		bl	force_PID_out
 2006              	.LVL129:
 2007 0170 7FE7     		b	.L128
 2008              	.L131:
 660:Src/pid.c     **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 2009              		.loc 1 660 0
 2010 0172 3E4A     		ldr	r2, .L168
 2011 0174 B2F84430 		ldrh	r3, [r2, #68]
 2012 0178 5B42     		negs	r3, r3
 2013 017a 1BB2     		sxth	r3, r3
 2014 017c 3E49     		ldr	r1, .L168+12
 2015 017e 0B80     		strh	r3, [r1]	@ movhi
 661:Src/pid.c     **** 				}
 2016              		.loc 1 661 0
 2017 0180 B2F85A30 		ldrh	r3, [r2, #90]
 2018 0184 5B42     		negs	r3, r3
 2019 0186 1BB2     		sxth	r3, r3
 2020 0188 3C4A     		ldr	r2, .L168+16
 2021 018a 1380     		strh	r3, [r2]	@ movhi
 2022 018c CDE7     		b	.L132
 2023              	.L135:
 674:Src/pid.c     **** 					}
 2024              		.loc 1 674 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 60


 2025 018e 374B     		ldr	r3, .L168
 2026 0190 B3F84A20 		ldrh	r2, [r3, #74]
 2027 0194 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2028 0198 6BE7     		b	.L128
 2029              	.L133:
 679:Src/pid.c     **** 					{
 2030              		.loc 1 679 0
 2031 019a 384B     		ldr	r3, .L168+16
 2032 019c 1A88     		ldrh	r2, [r3]
 2033 019e 12B2     		sxth	r2, r2
 2034 01a0 354B     		ldr	r3, .L168+12
 2035 01a2 1B88     		ldrh	r3, [r3]
 2036 01a4 1BB2     		sxth	r3, r3
 2037 01a6 9A42     		cmp	r2, r3
 2038 01a8 08DB     		blt	.L136
 679:Src/pid.c     **** 					{
 2039              		.loc 1 679 0 is_stmt 0 discriminator 1
 2040 01aa 304B     		ldr	r3, .L168
 2041 01ac B3F84C20 		ldrh	r2, [r3, #76]
 2042 01b0 12B2     		sxth	r2, r2
 2043 01b2 B3F88E32 		ldrh	r3, [r3, #654]
 2044 01b6 1BB2     		sxth	r3, r3
 2045 01b8 9A42     		cmp	r2, r3
 2046 01ba 0DDA     		bge	.L137
 2047              	.L136:
 681:Src/pid.c     **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 2048              		.loc 1 681 0 is_stmt 1
 2049 01bc 2C4B     		ldr	r3, .L168+4
 2050 01be 0322     		movs	r2, #3
 2051 01c0 1A70     		strb	r2, [r3]
 682:Src/pid.c     **** 						force_PID_out(g_CmdMap[CMD_CUR_SET_PU],&pid_force); 
 2052              		.loc 1 682 0
 2053 01c2 2A4B     		ldr	r3, .L168
 2054 01c4 0422     		movs	r2, #4
 2055 01c6 A3F80422 		strh	r2, [r3, #516]	@ movhi
 683:Src/pid.c     ****  		
 2056              		.loc 1 683 0
 2057 01ca B3F84200 		ldrh	r0, [r3, #66]
 2058 01ce 2C49     		ldr	r1, .L168+20
 2059 01d0 00B2     		sxth	r0, r0
 2060 01d2 FFF7FEFF 		bl	force_PID_out
 2061              	.LVL130:
 2062 01d6 4CE7     		b	.L128
 2063              	.L137:
 688:Src/pid.c     **** 					}
 2064              		.loc 1 688 0
 2065 01d8 244A     		ldr	r2, .L168
 2066 01da B2F84A30 		ldrh	r3, [r2, #74]
 2067 01de 5B42     		negs	r3, r3
 2068 01e0 1BB2     		sxth	r3, r3
 2069 01e2 A2F85C30 		strh	r3, [r2, #92]	@ movhi
 2070 01e6 44E7     		b	.L128
 2071              	.L138:
 698:Src/pid.c     **** 							{
 2072              		.loc 1 698 0
 2073 01e8 204B     		ldr	r3, .L168
 2074 01ea B3F81C32 		ldrh	r3, [r3, #540]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 61


 2075 01ee 1BB2     		sxth	r3, r3
 2076 01f0 012B     		cmp	r3, #1
 2077 01f2 18D0     		beq	.L162
 712:Src/pid.c     **** 							{
 2078              		.loc 1 712 0
 2079 01f4 1D4B     		ldr	r3, .L168
 2080 01f6 B3F81C32 		ldrh	r3, [r3, #540]
 2081 01fa 1BB2     		sxth	r3, r3
 2082 01fc 0B2B     		cmp	r3, #11
 2083 01fe 43D0     		beq	.L163
 745:Src/pid.c     **** 							{
 2084              		.loc 1 745 0
 2085 0200 1A4B     		ldr	r3, .L168
 2086 0202 B3F81C32 		ldrh	r3, [r3, #540]
 2087 0206 1BB2     		sxth	r3, r3
 2088 0208 0C2B     		cmp	r3, #12
 2089 020a 00F09080 		beq	.L164
 756:Src/pid.c     **** 							{
 2090              		.loc 1 756 0
 2091 020e 174B     		ldr	r3, .L168
 2092 0210 B3F81C32 		ldrh	r3, [r3, #540]
 2093 0214 1BB2     		sxth	r3, r3
 2094 0216 0D2B     		cmp	r3, #13
 2095 0218 00F09D80 		beq	.L165
 769:Src/pid.c     **** 							}				
 2096              		.loc 1 769 0
 2097 021c 134B     		ldr	r3, .L168
 2098 021e 0022     		movs	r2, #0
 2099 0220 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2100 0224 25E7     		b	.L128
 2101              	.L162:
 701:Src/pid.c     **** 								{
 2102              		.loc 1 701 0
 2103 0226 114B     		ldr	r3, .L168
 2104 0228 B3F84C30 		ldrh	r3, [r3, #76]
 2105 022c 1BB2     		sxth	r3, r3
 2106 022e 40F26562 		movw	r2, #1637
 2107 0232 9342     		cmp	r3, r2
 2108 0234 0DDC     		bgt	.L140
 703:Src/pid.c     **** 								}
 2109              		.loc 1 703 0
 2110 0236 134B     		ldr	r3, .L168+24
 2111 0238 0122     		movs	r2, #1
 2112 023a 1A60     		str	r2, [r3]
 2113              	.L141:
 709:Src/pid.c     **** 
 2114              		.loc 1 709 0
 2115 023c 0B4A     		ldr	r2, .L168
 2116 023e B2F84630 		ldrh	r3, [r2, #70]
 2117 0242 1049     		ldr	r1, .L168+24
 2118 0244 0968     		ldr	r1, [r1]
 2119 0246 13FB01F3 		smulbb	r3, r3, r1
 2120 024a 1BB2     		sxth	r3, r3
 2121 024c A2F85C30 		strh	r3, [r2, #92]	@ movhi
 2122 0250 0FE7     		b	.L128
 2123              	.L140:
 705:Src/pid.c     **** 								{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 62


 2124              		.loc 1 705 0
 2125 0252 064B     		ldr	r3, .L168
 2126 0254 B3F84C30 		ldrh	r3, [r3, #76]
 2127 0258 1BB2     		sxth	r3, r3
 2128 025a 43F69A12 		movw	r2, #14746
 2129 025e 9342     		cmp	r3, r2
 2130 0260 ECDD     		ble	.L141
 707:Src/pid.c     **** 								}
 2131              		.loc 1 707 0
 2132 0262 084B     		ldr	r3, .L168+24
 2133 0264 4FF0FF32 		mov	r2, #-1
 2134 0268 1A60     		str	r2, [r3]
 2135 026a E7E7     		b	.L141
 2136              	.L169:
 2137              		.align	2
 2138              	.L168:
 2139 026c 00000000 		.word	g_CmdMap
 2140 0270 00000000 		.word	status_Mode_POSITION_FORCE
 2141 0274 00000000 		.word	pid_spd
 2142 0278 00000000 		.word	force_set
 2143 027c 00000000 		.word	force_act
 2144 0280 00000000 		.word	pid_force
 2145 0284 00000000 		.word	.LANCHOR16
 2146              	.L163:
 714:Src/pid.c     **** 								{
 2147              		.loc 1 714 0
 2148 0288 3D4B     		ldr	r3, .L170
 2149 028a B3F86420 		ldrh	r2, [r3, #100]
 2150 028e 12B2     		sxth	r2, r2
 2151 0290 B3F8E032 		ldrh	r3, [r3, #736]
 2152 0294 1BB2     		sxth	r3, r3
 2153 0296 9A42     		cmp	r2, r3
 2154 0298 28DA     		bge	.L143
 716:Src/pid.c     **** 								}
 2155              		.loc 1 716 0
 2156 029a 3A4B     		ldr	r3, .L170+4
 2157 029c 0122     		movs	r2, #1
 2158 029e 1A60     		str	r2, [r3]
 2159              	.L144:
 722:Src/pid.c     **** 								if(s_test_speed_t_count++>4000)
 2160              		.loc 1 722 0
 2161 02a0 374B     		ldr	r3, .L170
 2162 02a2 B3F84630 		ldrh	r3, [r3, #70]
 2163 02a6 13F4004F 		tst	r3, #32768
 2164 02aa 2DD1     		bne	.L166
 722:Src/pid.c     **** 								if(s_test_speed_t_count++>4000)
 2165              		.loc 1 722 0 is_stmt 0 discriminator 2
 2166 02ac 344B     		ldr	r3, .L170
 2167 02ae B3F84630 		ldrh	r3, [r3, #70]
 2168 02b2 18B2     		sxth	r0, r3
 2169              	.L146:
 2170              	.LVL131:
 723:Src/pid.c     **** 								{
 2171              		.loc 1 723 0 is_stmt 1 discriminator 4
 2172 02b4 344A     		ldr	r2, .L170+8
 2173 02b6 1368     		ldr	r3, [r2]
 2174 02b8 591C     		adds	r1, r3, #1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 63


 2175 02ba 1160     		str	r1, [r2]
 2176 02bc B3F57A6F 		cmp	r3, #4000
 2177 02c0 0ADD     		ble	.L147
 725:Src/pid.c     **** 									if(g_flag_monitor_from_host == 0)
 2178              		.loc 1 725 0
 2179 02c2 1346     		mov	r3, r2
 2180 02c4 0022     		movs	r2, #0
 2181 02c6 1A60     		str	r2, [r3]
 726:Src/pid.c     **** 									{
 2182              		.loc 1 726 0
 2183 02c8 304B     		ldr	r3, .L170+12
 2184 02ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2185 02cc 13BB     		cbnz	r3, .L148
 728:Src/pid.c     **** 									}
 2186              		.loc 1 728 0
 2187 02ce 304B     		ldr	r3, .L170+16
 2188 02d0 1A70     		strb	r2, [r3]
 2189              	.L149:
 734:Src/pid.c     **** 								}
 2190              		.loc 1 734 0
 2191 02d2 2E4B     		ldr	r3, .L170+12
 2192 02d4 0022     		movs	r2, #0
 2193 02d6 1A70     		strb	r2, [r3]
 2194              	.L147:
 736:Src/pid.c     **** 								{
 2195              		.loc 1 736 0
 2196 02d8 2D4B     		ldr	r3, .L170+16
 2197 02da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2198 02dc DBB2     		uxtb	r3, r3
 2199 02de 012B     		cmp	r3, #1
 2200 02e0 1CD0     		beq	.L167
 742:Src/pid.c     **** 								}				
 2201              		.loc 1 742 0
 2202 02e2 274B     		ldr	r3, .L170
 2203 02e4 0022     		movs	r2, #0
 2204 02e6 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2205 02ea C2E6     		b	.L128
 2206              	.LVL132:
 2207              	.L143:
 718:Src/pid.c     **** 								{
 2208              		.loc 1 718 0
 2209 02ec 244B     		ldr	r3, .L170
 2210 02ee B3F86420 		ldrh	r2, [r3, #100]
 2211 02f2 12B2     		sxth	r2, r2
 2212 02f4 B3F85833 		ldrh	r3, [r3, #856]
 2213 02f8 1BB2     		sxth	r3, r3
 2214 02fa 9A42     		cmp	r2, r3
 2215 02fc D0DD     		ble	.L144
 720:Src/pid.c     **** 								}
 2216              		.loc 1 720 0
 2217 02fe 214B     		ldr	r3, .L170+4
 2218 0300 4FF0FF32 		mov	r2, #-1
 2219 0304 1A60     		str	r2, [r3]
 2220 0306 CBE7     		b	.L144
 2221              	.L166:
 722:Src/pid.c     **** 								if(s_test_speed_t_count++>4000)
 2222              		.loc 1 722 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 64


 2223 0308 1D4B     		ldr	r3, .L170
 2224 030a B3F84630 		ldrh	r3, [r3, #70]
 2225 030e 5B42     		negs	r3, r3
 2226 0310 18B2     		sxth	r0, r3
 2227 0312 CFE7     		b	.L146
 2228              	.LVL133:
 2229              	.L148:
 732:Src/pid.c     **** 									}
 2230              		.loc 1 732 0
 2231 0314 1E4B     		ldr	r3, .L170+16
 2232 0316 0122     		movs	r2, #1
 2233 0318 1A70     		strb	r2, [r3]
 2234 031a DAE7     		b	.L149
 2235              	.L167:
 738:Src/pid.c     **** 								}
 2236              		.loc 1 738 0
 2237 031c 194B     		ldr	r3, .L170+4
 2238 031e 1B68     		ldr	r3, [r3]
 2239 0320 13FB00F3 		smulbb	r3, r3, r0
 2240 0324 1BB2     		sxth	r3, r3
 2241 0326 164A     		ldr	r2, .L170
 2242 0328 A2F85C30 		strh	r3, [r2, #92]	@ movhi
 2243 032c A1E6     		b	.L128
 2244              	.LVL134:
 2245              	.L164:
 747:Src/pid.c     **** 								{
 2246              		.loc 1 747 0
 2247 032e 144B     		ldr	r3, .L170
 2248 0330 B3F86420 		ldrh	r2, [r3, #100]
 2249 0334 12B2     		sxth	r2, r2
 2250 0336 B3F8E032 		ldrh	r3, [r3, #736]
 2251 033a 1BB2     		sxth	r3, r3
 2252 033c 9A42     		cmp	r2, r3
 2253 033e 05DD     		ble	.L152
 749:Src/pid.c     **** 								}
 2254              		.loc 1 749 0
 2255 0340 0F4B     		ldr	r3, .L170
 2256 0342 4FF46042 		mov	r2, #57344
 2257 0346 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2258 034a 92E6     		b	.L128
 2259              	.L152:
 753:Src/pid.c     **** 								}
 2260              		.loc 1 753 0
 2261 034c 0C4B     		ldr	r3, .L170
 2262 034e 0022     		movs	r2, #0
 2263 0350 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2264 0354 8DE6     		b	.L128
 2265              	.L165:
 758:Src/pid.c     **** 								{
 2266              		.loc 1 758 0
 2267 0356 0A4B     		ldr	r3, .L170
 2268 0358 B3F86420 		ldrh	r2, [r3, #100]
 2269 035c 12B2     		sxth	r2, r2
 2270 035e B3F85833 		ldrh	r3, [r3, #856]
 2271 0362 1BB2     		sxth	r3, r3
 2272 0364 9A42     		cmp	r2, r3
 2273 0366 05DA     		bge	.L154
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 65


 760:Src/pid.c     **** 								}
 2274              		.loc 1 760 0
 2275 0368 054B     		ldr	r3, .L170
 2276 036a 4FF40052 		mov	r2, #8192
 2277 036e A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2278 0372 7EE6     		b	.L128
 2279              	.L154:
 764:Src/pid.c     **** 								}
 2280              		.loc 1 764 0
 2281 0374 024B     		ldr	r3, .L170
 2282 0376 0022     		movs	r2, #0
 2283 0378 A3F85C20 		strh	r2, [r3, #92]	@ movhi
 2284 037c 79E6     		b	.L128
 2285              	.L171:
 2286 037e 00BF     		.align	2
 2287              	.L170:
 2288 0380 00000000 		.word	g_CmdMap
 2289 0384 00000000 		.word	.LANCHOR16
 2290 0388 00000000 		.word	.LANCHOR17
 2291 038c 00000000 		.word	g_flag_monitor_from_host
 2292 0390 00000000 		.word	.LANCHOR18
 2293              		.cfi_endproc
 2294              	.LFE339:
 2296              		.section	.text.PositionPID,"ax",%progbits
 2297              		.align	1
 2298              		.global	PositionPID
 2299              		.syntax unified
 2300              		.thumb
 2301              		.thumb_func
 2302              		.fpu fpv4-sp-d16
 2304              	PositionPID:
 2305              	.LFB340:
 807:Src/pid.c     **** 	static s16 delay_cnt = 0;
 2306              		.loc 1 807 0
 2307              		.cfi_startproc
 2308              		@ args = 0, pretend = 0, frame = 0
 2309              		@ frame_needed = 0, uses_anonymous_args = 0
 2310 0000 38B5     		push	{r3, r4, r5, lr}
 2311              	.LCFI13:
 2312              		.cfi_def_cfa_offset 16
 2313              		.cfi_offset 3, -16
 2314              		.cfi_offset 4, -12
 2315              		.cfi_offset 5, -8
 2316              		.cfi_offset 14, -4
 809:Src/pid.c     **** 	//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ð¶ï¿½
 2317              		.loc 1 809 0
 2318 0002 364A     		ldr	r2, .L187
 2319 0004 B2F84830 		ldrh	r3, [r2, #72]
 2320 0008 1BB2     		sxth	r3, r3
 2321 000a B2F84C20 		ldrh	r2, [r2, #76]
 2322 000e 12B2     		sxth	r2, r2
 2323 0010 9B1A     		subs	r3, r3, r2
 2324 0012 334A     		ldr	r2, .L187+4
 2325 0014 1360     		str	r3, [r2]
 811:Src/pid.c     **** 	{
 2326              		.loc 1 811 0
 2327 0016 1368     		ldr	r3, [r2]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 66


 2328 0018 002B     		cmp	r3, #0
 2329 001a 48DB     		blt	.L184
 811:Src/pid.c     **** 	{
 2330              		.loc 1 811 0 is_stmt 0 discriminator 2
 2331 001c 304B     		ldr	r3, .L187+4
 2332 001e 1A68     		ldr	r2, [r3]
 2333              	.L174:
 811:Src/pid.c     **** 	{
 2334              		.loc 1 811 0 discriminator 4
 2335 0020 304B     		ldr	r3, .L187+8
 2336 0022 1B68     		ldr	r3, [r3]
 2337 0024 9342     		cmp	r3, r2
 2338 0026 0ADD     		ble	.L175
 811:Src/pid.c     **** 	{
 2339              		.loc 1 811 0 discriminator 5
 2340 0028 2F4A     		ldr	r2, .L187+12
 2341 002a 1268     		ldr	r2, [r2]
 2342 002c 3AB9     		cbnz	r2, .L175
 813:Src/pid.c     **** 		{
 2343              		.loc 1 813 0 is_stmt 1
 2344 002e 2F4A     		ldr	r2, .L187+16
 2345 0030 B2F90020 		ldrsh	r2, [r2]
 2346 0034 312A     		cmp	r2, #49
 2347 0036 3DDC     		bgt	.L176
 815:Src/pid.c     **** 		}
 2348              		.loc 1 815 0
 2349 0038 0132     		adds	r2, r2, #1
 2350 003a 2C49     		ldr	r1, .L187+16
 2351 003c 0A80     		strh	r2, [r1]	@ movhi
 2352              	.L175:
 822:Src/pid.c     **** 	{
 2353              		.loc 1 822 0
 2354 003e 284A     		ldr	r2, .L187+4
 2355 0040 1268     		ldr	r2, [r2]
 2356 0042 002A     		cmp	r2, #0
 2357 0044 3ADB     		blt	.L185
 822:Src/pid.c     **** 	{
 2358              		.loc 1 822 0 is_stmt 0 discriminator 2
 2359 0046 264A     		ldr	r2, .L187+4
 2360 0048 1268     		ldr	r2, [r2]
 2361              	.L178:
 822:Src/pid.c     **** 	{
 2362              		.loc 1 822 0 discriminator 4
 2363 004a B2EB430F 		cmp	r2, r3, lsl #1
 2364 004e 03DC     		bgt	.L179
 822:Src/pid.c     **** 	{
 2365              		.loc 1 822 0 discriminator 5
 2366 0050 254B     		ldr	r3, .L187+12
 2367 0052 1B68     		ldr	r3, [r3]
 2368 0054 012B     		cmp	r3, #1
 2369 0056 04D1     		bne	.L180
 2370              	.L179:
 824:Src/pid.c     **** 		delay_cnt = 0;
 2371              		.loc 1 824 0 is_stmt 1
 2372 0058 0023     		movs	r3, #0
 2373 005a 254A     		ldr	r2, .L187+20
 2374 005c 1370     		strb	r3, [r2]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 67


 825:Src/pid.c     **** 	}	
 2375              		.loc 1 825 0
 2376 005e 234A     		ldr	r2, .L187+16
 2377 0060 1380     		strh	r3, [r2]	@ movhi
 2378              	.L180:
 827:Src/pid.c     ****   // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½  
 2379              		.loc 1 827 0
 2380 0062 234B     		ldr	r3, .L187+20
 2381 0064 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2382 0066 234B     		ldr	r3, .L187+24
 2383 0068 1A70     		strb	r2, [r3]
 830:Src/pid.c     **** 	{
 2384              		.loc 1 830 0
 2385 006a 234B     		ldr	r3, .L187+28
 2386 006c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2387 006e DBB2     		uxtb	r3, r3
 2388 0070 012B     		cmp	r3, #1
 2389 0072 27D0     		beq	.L186
 837:Src/pid.c     **** 		pid_pos.Low_limit = -(g_CmdMap[SYS_SPD_ADD_LIMIT_PU]>>5);	
 2390              		.loc 1 837 0
 2391 0074 1949     		ldr	r1, .L187
 2392 0076 B1F89232 		ldrh	r3, [r1, #658]
 2393 007a 43F34A13 		sbfx	r3, r3, #5, #11
 2394 007e 1F4A     		ldr	r2, .L187+32
 2395 0080 D363     		str	r3, [r2, #60]
 838:Src/pid.c     **** 	}		
 2396              		.loc 1 838 0
 2397 0082 B1F89232 		ldrh	r3, [r1, #658]
 2398 0086 43F34A13 		sbfx	r3, r3, #5, #11
 2399 008a 5B42     		negs	r3, r3
 2400 008c 1364     		str	r3, [r2, #64]
 2401              	.L182:
 840:Src/pid.c     **** 	g_CmdMap[CMD_SPD_ADD_PU] = pid_pos.out;
 2402              		.loc 1 840 0
 2403 008e 134C     		ldr	r4, .L187
 2404 0090 B4F86000 		ldrh	r0, [r4, #96]
 2405 0094 B4F84C10 		ldrh	r1, [r4, #76]
 2406 0098 184D     		ldr	r5, .L187+32
 2407 009a 2A46     		mov	r2, r5
 2408 009c 09B2     		sxth	r1, r1
 2409 009e 00B2     		sxth	r0, r0
 2410 00a0 FFF7FEFF 		bl	PID_control
 2411              	.LVL135:
 841:Src/pid.c     **** }
 2412              		.loc 1 841 0
 2413 00a4 B5F93430 		ldrsh	r3, [r5, #52]
 2414 00a8 A4F85E30 		strh	r3, [r4, #94]	@ movhi
 842:Src/pid.c     **** //int16_t Force_set_drop_detection = 0;
 2415              		.loc 1 842 0
 2416 00ac 38BD     		pop	{r3, r4, r5, pc}
 2417              	.L184:
 811:Src/pid.c     **** 	{
 2418              		.loc 1 811 0 discriminator 1
 2419 00ae 1268     		ldr	r2, [r2]
 2420 00b0 5242     		negs	r2, r2
 2421 00b2 B5E7     		b	.L174
 2422              	.L176:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 68


 819:Src/pid.c     **** 		}
 2423              		.loc 1 819 0
 2424 00b4 0E4A     		ldr	r2, .L187+20
 2425 00b6 0121     		movs	r1, #1
 2426 00b8 1170     		strb	r1, [r2]
 2427 00ba C0E7     		b	.L175
 2428              	.L185:
 822:Src/pid.c     **** 	{
 2429              		.loc 1 822 0 discriminator 1
 2430 00bc 084A     		ldr	r2, .L187+4
 2431 00be 1268     		ldr	r2, [r2]
 2432 00c0 5242     		negs	r2, r2
 2433 00c2 C2E7     		b	.L178
 2434              	.L186:
 832:Src/pid.c     **** 		pid_pos.Low_limit = -g_CmdMap[SYS_SPD_ADD_LIMIT_PU];	
 2435              		.loc 1 832 0
 2436 00c4 0549     		ldr	r1, .L187
 2437 00c6 B1F89232 		ldrh	r3, [r1, #658]
 2438 00ca 1BB2     		sxth	r3, r3
 2439 00cc 0B4A     		ldr	r2, .L187+32
 2440 00ce D363     		str	r3, [r2, #60]
 833:Src/pid.c     **** 	}
 2441              		.loc 1 833 0
 2442 00d0 B1F89232 		ldrh	r3, [r1, #658]
 2443 00d4 1BB2     		sxth	r3, r3
 2444 00d6 5B42     		negs	r3, r3
 2445 00d8 1364     		str	r3, [r2, #64]
 2446 00da D8E7     		b	.L182
 2447              	.L188:
 2448              		.align	2
 2449              	.L187:
 2450 00dc 00000000 		.word	g_CmdMap
 2451 00e0 00000000 		.word	.LANCHOR19
 2452 00e4 00000000 		.word	gPos_ds
 2453 00e8 00000000 		.word	Profile_moving
 2454 00ec 00000000 		.word	.LANCHOR20
 2455 00f0 00000000 		.word	.LANCHOR21
 2456 00f4 00000000 		.word	.LANCHOR22
 2457 00f8 00000000 		.word	flag_posReg_strengthen
 2458 00fc 00000000 		.word	pid_pos
 2459              		.cfi_endproc
 2460              	.LFE340:
 2462              		.section	.text.Gripper_control,"ax",%progbits
 2463              		.align	1
 2464              		.global	Gripper_control
 2465              		.syntax unified
 2466              		.thumb
 2467              		.thumb_func
 2468              		.fpu fpv4-sp-d16
 2470              	Gripper_control:
 2471              	.LFB341:
 846:Src/pid.c     **** 	s32 error_Pos = g_CmdMap[CMD_POS_SET_PU] - g_CmdMap[CMD_POS_ACT_PU];
 2472              		.loc 1 846 0
 2473              		.cfi_startproc
 2474              		@ args = 0, pretend = 0, frame = 0
 2475              		@ frame_needed = 0, uses_anonymous_args = 0
 847:Src/pid.c     **** 	if(	(g_CmdMap[TAG_WORK_MODE] != MODE_POSITION) || Motor_forbidden == 1)
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 69


 2476              		.loc 1 847 0
 2477 0000 5F4B     		ldr	r3, .L210
 2478 0002 B3F84810 		ldrh	r1, [r3, #72]
 2479 0006 09B2     		sxth	r1, r1
 2480 0008 B3F84C20 		ldrh	r2, [r3, #76]
 2481 000c 12B2     		sxth	r2, r2
 2482 000e 8A1A     		subs	r2, r1, r2
 2483              	.LVL136:
 848:Src/pid.c     **** 	{
 2484              		.loc 1 848 0
 2485 0010 B3F80432 		ldrh	r3, [r3, #516]
 2486 0014 1BB2     		sxth	r3, r3
 2487 0016 032B     		cmp	r3, #3
 2488 0018 0DD0     		beq	.L205
 2489              	.L190:
 850:Src/pid.c     **** 		Grriper_Run = 0;
 2490              		.loc 1 850 0
 2491 001a 0023     		movs	r3, #0
 2492 001c 594A     		ldr	r2, .L210+4
 2493              	.LVL137:
 2494 001e 1380     		strh	r3, [r2]	@ movhi
 851:Src/pid.c     **** 		Flag_contact = 0;
 2495              		.loc 1 851 0
 2496 0020 594A     		ldr	r2, .L210+8
 2497 0022 1370     		strb	r3, [r2]
 852:Src/pid.c     **** 		Flag_grip_F_OK = 0;
 2498              		.loc 1 852 0
 2499 0024 594A     		ldr	r2, .L210+12
 2500 0026 1370     		strb	r3, [r2]
 853:Src/pid.c     **** 		Flag_grip_P_OK = 0;
 2501              		.loc 1 853 0
 2502 0028 594A     		ldr	r2, .L210+16
 2503 002a 1370     		strb	r3, [r2]
 854:Src/pid.c     **** 		Flag_rellease_P_OK = 0;
 2504              		.loc 1 854 0
 2505 002c 594A     		ldr	r2, .L210+20
 2506 002e 1370     		strb	r3, [r2]
 855:Src/pid.c     **** 	}	
 2507              		.loc 1 855 0
 2508 0030 594A     		ldr	r2, .L210+24
 2509 0032 1370     		strb	r3, [r2]
 2510 0034 7047     		bx	lr
 2511              	.LVL138:
 2512              	.L205:
 848:Src/pid.c     **** 	{
 2513              		.loc 1 848 0 discriminator 1
 2514 0036 594B     		ldr	r3, .L210+28
 2515 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2516 003a DBB2     		uxtb	r3, r3
 2517 003c 012B     		cmp	r3, #1
 2518 003e ECD0     		beq	.L190
 846:Src/pid.c     **** 	s32 error_Pos = g_CmdMap[CMD_POS_SET_PU] - g_CmdMap[CMD_POS_ACT_PU];
 2519              		.loc 1 846 0
 2520 0040 10B5     		push	{r4, lr}
 2521              	.LCFI14:
 2522              		.cfi_def_cfa_offset 8
 2523              		.cfi_offset 4, -8
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 70


 2524              		.cfi_offset 14, -4
 879:Src/pid.c     **** 		{
 2525              		.loc 1 879 0
 2526 0042 574B     		ldr	r3, .L210+32
 2527 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2528 0046 DBB2     		uxtb	r3, r3
 2529 0048 012B     		cmp	r3, #1
 2530 004a 17D0     		beq	.L206
 2531              	.LVL139:
 2532              	.L193:
 928:Src/pid.c     **** 
 2533              		.loc 1 928 0
 2534 004c 4C4B     		ldr	r3, .L210
 2535 004e B3F84830 		ldrh	r3, [r3, #72]
 2536 0052 1BB2     		sxth	r3, r3
 2537 0054 534A     		ldr	r2, .L210+36
 2538 0056 1360     		str	r3, [r2]
 930:Src/pid.c     **** 		{
 2539              		.loc 1 930 0
 2540 0058 4A4B     		ldr	r3, .L210+4
 2541 005a B3F90030 		ldrsh	r3, [r3]
 2542 005e 012B     		cmp	r3, #1
 2543 0060 7ED0     		beq	.L207
 2544              	.L199:
 934:Src/pid.c     **** 		{		
 2545              		.loc 1 934 0
 2546 0062 494B     		ldr	r3, .L210+8
 2547 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2548 0066 DBB2     		uxtb	r3, r3
 2549 0068 012B     		cmp	r3, #1
 2550 006a 7DD0     		beq	.L208
 2551              	.L200:
 940:Src/pid.c     **** 		}
 2552              		.loc 1 940 0
 2553 006c 4E4B     		ldr	r3, .L210+40
 2554 006e 0022     		movs	r2, #0
 2555 0070 1A60     		str	r2, [r3]
 2556              	.L201:
 943:Src/pid.c     **** 		//Î»ï¿½Ãµï¿½ï¿½ï¿½
 2557              		.loc 1 943 0
 2558 0072 FFF7FEFF 		bl	Profile
 2559              	.LVL140:
 945:Src/pid.c     **** 	}
 2560              		.loc 1 945 0
 2561 0076 FFF7FEFF 		bl	PositionPID
 2562              	.LVL141:
 947:Src/pid.c     **** 	float v = 11.84;
 2563              		.loc 1 947 0
 2564 007a 10BD     		pop	{r4, pc}
 2565              	.LVL142:
 2566              	.L206:
 879:Src/pid.c     **** 		{
 2567              		.loc 1 879 0 discriminator 1
 2568 007c 404B     		ldr	r3, .L210
 2569 007e B3F8B632 		ldrh	r3, [r3, #694]
 2570 0082 1BB2     		sxth	r3, r3
 2571 0084 9342     		cmp	r3, r2
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 71


 2572 0086 06DB     		blt	.L194
 879:Src/pid.c     **** 		{
 2573              		.loc 1 879 0 is_stmt 0 discriminator 2
 2574 0088 3D4B     		ldr	r3, .L210
 2575 008a B3F8B632 		ldrh	r3, [r3, #694]
 2576 008e 1BB2     		sxth	r3, r3
 2577 0090 5B42     		negs	r3, r3
 2578 0092 9342     		cmp	r3, r2
 2579 0094 DADD     		ble	.L193
 2580              	.L194:
 881:Src/pid.c     **** 			
 2581              		.loc 1 881 0 is_stmt 1
 2582 0096 424B     		ldr	r3, .L210+32
 2583 0098 0022     		movs	r2, #0
 2584              	.LVL143:
 2585 009a 1A70     		strb	r2, [r3]
 883:Src/pid.c     **** 				{
 2586              		.loc 1 883 0
 2587 009c 384C     		ldr	r4, .L210
 2588 009e 638A     		ldrh	r3, [r4, #18]
 888:Src/pid.c     **** 				Profile_ParaSet();
 2589              		.loc 1 888 0
 2590 00a0 0323     		movs	r3, #3
 2591 00a2 A4F80432 		strh	r3, [r4, #516]	@ movhi
 889:Src/pid.c     **** 				if(g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_1_SERVO)
 2592              		.loc 1 889 0
 2593 00a6 FFF7FEFF 		bl	Profile_ParaSet
 2594              	.LVL144:
 890:Src/pid.c     **** 				{
 2595              		.loc 1 890 0
 2596 00aa B4F84030 		ldrh	r3, [r4, #64]
 2597 00ae 1BB2     		sxth	r3, r3
 2598 00b0 012B     		cmp	r3, #1
 2599 00b2 2CD0     		beq	.L209
 2600              	.L195:
 895:Src/pid.c     **** 				Flag_grip_F_OK = 0;
 2601              		.loc 1 895 0
 2602 00b4 0023     		movs	r3, #0
 2603 00b6 354A     		ldr	r2, .L210+12
 2604 00b8 1370     		strb	r3, [r2]
 896:Src/pid.c     **** 				Flag_grip_P_OK = 0;
 2605              		.loc 1 896 0
 2606 00ba 354A     		ldr	r2, .L210+16
 2607 00bc 1370     		strb	r3, [r2]
 897:Src/pid.c     **** 				Flag_rellease_P_OK = 0;
 2608              		.loc 1 897 0
 2609 00be 354A     		ldr	r2, .L210+20
 2610 00c0 1370     		strb	r3, [r2]
 898:Src/pid.c     **** 				if(g_CmdMap[CMD_POS_SET_PU] < g_CmdMap[CMD_POS_ACT_PU])
 2611              		.loc 1 898 0
 2612 00c2 354A     		ldr	r2, .L210+24
 2613 00c4 1370     		strb	r3, [r2]
 899:Src/pid.c     **** 				{
 2614              		.loc 1 899 0
 2615 00c6 2E4B     		ldr	r3, .L210
 2616 00c8 B3F84820 		ldrh	r2, [r3, #72]
 2617 00cc 12B2     		sxth	r2, r2
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 72


 2618 00ce B3F84C30 		ldrh	r3, [r3, #76]
 2619 00d2 1BB2     		sxth	r3, r3
 2620 00d4 9A42     		cmp	r2, r3
 2621 00d6 1EDA     		bge	.L196
 901:Src/pid.c     **** 					Grriper_Run = 1;
 2622              		.loc 1 901 0
 2623 00d8 0123     		movs	r3, #1
 2624 00da 2A4A     		ldr	r2, .L210+4
 2625 00dc 1380     		strh	r3, [r2]	@ movhi
 902:Src/pid.c     **** 					pid_spd.enable = 1;
 2626              		.loc 1 902 0
 2627 00de 2A4A     		ldr	r2, .L210+8
 2628 00e0 1370     		strb	r3, [r2]
 903:Src/pid.c     **** 					pid_pos.enable = 1;
 2629              		.loc 1 903 0
 2630 00e2 324A     		ldr	r2, .L210+44
 2631 00e4 1360     		str	r3, [r2]
 904:Src/pid.c     **** 					if(g_CmdMap[CMD_E_STOP] == 0 && (g_CmdMap[CMD_ERROR] & 0x0fff) == 0x0000)
 2632              		.loc 1 904 0
 2633 00e6 324A     		ldr	r2, .L210+48
 2634 00e8 1360     		str	r3, [r2]
 905:Src/pid.c     **** 					{
 2635              		.loc 1 905 0
 2636 00ea 254B     		ldr	r3, .L210
 2637 00ec 5B8A     		ldrh	r3, [r3, #18]
 2638 00ee 1BB2     		sxth	r3, r3
 2639 00f0 4BB9     		cbnz	r3, .L197
 905:Src/pid.c     **** 					{
 2640              		.loc 1 905 0 is_stmt 0 discriminator 1
 2641 00f2 234B     		ldr	r3, .L210
 2642 00f4 B3F85430 		ldrh	r3, [r3, #84]
 2643 00f8 C3F30B03 		ubfx	r3, r3, #0, #12
 2644 00fc 1BB9     		cbnz	r3, .L197
 907:Src/pid.c     **** 					}
 2645              		.loc 1 907 0 is_stmt 1
 2646 00fe 204B     		ldr	r3, .L210
 2647 0100 0122     		movs	r2, #1
 2648 0102 A3F80222 		strh	r2, [r3, #514]	@ movhi
 2649              	.L197:
 910:Src/pid.c     **** 				}
 2650              		.loc 1 910 0
 2651 0106 2B4B     		ldr	r3, .L210+52
 2652 0108 0022     		movs	r2, #0
 2653 010a 1A70     		strb	r2, [r3]
 2654 010c 9EE7     		b	.L193
 2655              	.L209:
 892:Src/pid.c     **** 				}
 2656              		.loc 1 892 0
 2657 010e 2A4B     		ldr	r3, .L210+56
 2658 0110 0022     		movs	r2, #0
 2659 0112 1A60     		str	r2, [r3]	@ float
 2660 0114 CEE7     		b	.L195
 2661              	.L196:
 912:Src/pid.c     **** 				{
 2662              		.loc 1 912 0
 2663 0116 1A4B     		ldr	r3, .L210
 2664 0118 B3F84820 		ldrh	r2, [r3, #72]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 73


 2665 011c 12B2     		sxth	r2, r2
 2666 011e B3F84C30 		ldrh	r3, [r3, #76]
 2667 0122 1BB2     		sxth	r3, r3
 2668 0124 9A42     		cmp	r2, r3
 2669 0126 91DD     		ble	.L193
 914:Src/pid.c     **** 					Grriper_Run = 1;
 2670              		.loc 1 914 0
 2671 0128 164B     		ldr	r3, .L210+4
 2672 012a 0222     		movs	r2, #2
 2673 012c 1A80     		strh	r2, [r3]	@ movhi
 915:Src/pid.c     **** 					pid_spd.enable = 1;
 2674              		.loc 1 915 0
 2675 012e 0123     		movs	r3, #1
 2676 0130 154A     		ldr	r2, .L210+8
 2677 0132 1370     		strb	r3, [r2]
 916:Src/pid.c     **** 					pid_pos.enable = 1;
 2678              		.loc 1 916 0
 2679 0134 1D4A     		ldr	r2, .L210+44
 2680 0136 1360     		str	r3, [r2]
 917:Src/pid.c     **** 					if(g_CmdMap[CMD_E_STOP] == 0 && (g_CmdMap[CMD_ERROR] & 0x0fff) == 0x0000)
 2681              		.loc 1 917 0
 2682 0138 1D4A     		ldr	r2, .L210+48
 2683 013a 1360     		str	r3, [r2]
 918:Src/pid.c     **** 					{
 2684              		.loc 1 918 0
 2685 013c 104B     		ldr	r3, .L210
 2686 013e 5B8A     		ldrh	r3, [r3, #18]
 2687 0140 1BB2     		sxth	r3, r3
 2688 0142 4BB9     		cbnz	r3, .L198
 918:Src/pid.c     **** 					{
 2689              		.loc 1 918 0 is_stmt 0 discriminator 1
 2690 0144 0E4B     		ldr	r3, .L210
 2691 0146 B3F85430 		ldrh	r3, [r3, #84]
 2692 014a C3F30B03 		ubfx	r3, r3, #0, #12
 2693 014e 1BB9     		cbnz	r3, .L198
 920:Src/pid.c     **** 					}
 2694              		.loc 1 920 0 is_stmt 1
 2695 0150 0B4B     		ldr	r3, .L210
 2696 0152 0122     		movs	r2, #1
 2697 0154 A3F80222 		strh	r2, [r3, #514]	@ movhi
 2698              	.L198:
 922:Src/pid.c     **** 				}
 2699              		.loc 1 922 0
 2700 0158 164B     		ldr	r3, .L210+52
 2701 015a 0022     		movs	r2, #0
 2702 015c 1A70     		strb	r2, [r3]
 2703 015e 75E7     		b	.L193
 2704              	.L207:
 932:Src/pid.c     **** 		}
 2705              		.loc 1 932 0
 2706 0160 0B4B     		ldr	r3, .L210+16
 2707 0162 0122     		movs	r2, #1
 2708 0164 1A70     		strb	r2, [r3]
 2709 0166 7CE7     		b	.L199
 2710              	.L208:
 934:Src/pid.c     **** 		{		
 2711              		.loc 1 934 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 74


 2712 0168 054B     		ldr	r3, .L210
 2713 016a B3F80232 		ldrh	r3, [r3, #514]
 2714 016e 1BB2     		sxth	r3, r3
 2715 0170 012B     		cmp	r3, #1
 2716 0172 7FF47BAF 		bne	.L200
 936:Src/pid.c     **** 		}
 2717              		.loc 1 936 0
 2718 0176 0C4B     		ldr	r3, .L210+40
 2719 0178 0122     		movs	r2, #1
 2720 017a 1A60     		str	r2, [r3]
 2721 017c 79E7     		b	.L201
 2722              	.L211:
 2723 017e 00BF     		.align	2
 2724              	.L210:
 2725 0180 00000000 		.word	g_CmdMap
 2726 0184 00000000 		.word	Gripper_Move
 2727 0188 00000000 		.word	.LANCHOR23
 2728 018c 00000000 		.word	Flag_contact
 2729 0190 00000000 		.word	Flag_grip_F_OK
 2730 0194 00000000 		.word	Flag_grip_P_OK
 2731 0198 00000000 		.word	Flag_rellease_P_OK
 2732 019c 00000000 		.word	Motor_forbidden
 2733 01a0 00000000 		.word	.LANCHOR24
 2734 01a4 00000000 		.word	g_pos_tag
 2735 01a8 00000000 		.word	Flag_Profile_Enable
 2736 01ac 00000000 		.word	pid_spd
 2737 01b0 00000000 		.word	pid_pos
 2738 01b4 00000000 		.word	.LANCHOR25
 2739 01b8 00000000 		.word	tCnt_f
 2740              		.cfi_endproc
 2741              	.LFE341:
 2743              		.section	.text.phase_current_from_adcval,"ax",%progbits
 2744              		.align	1
 2745              		.global	phase_current_from_adcval
 2746              		.syntax unified
 2747              		.thumb
 2748              		.thumb_func
 2749              		.fpu fpv4-sp-d16
 2751              	phase_current_from_adcval:
 2752              	.LFB345:
1054:Src/pid.c     **** // ï¿½Õ»ï¿½Ä£Ê½ï¿½ï¿½ï¿½
1055:Src/pid.c     **** //static void CheckModeChange(void)
1056:Src/pid.c     **** //{
1057:Src/pid.c     **** //  static s32 s_OldMode = 0;
1058:Src/pid.c     **** //  if (s_OldMode != g_CmdMap[TAG_WORK_MODE])
1059:Src/pid.c     **** //  {
1060:Src/pid.c     **** //    if(g_CmdMap[TAG_WORK_MODE] == MODE_POSITION)
1061:Src/pid.c     **** //		{
1062:Src/pid.c     **** //			g_CmdMap[CMD_SPD_SET_PU] = 16384;
1063:Src/pid.c     **** //		}
1064:Src/pid.c     **** //		else
1065:Src/pid.c     **** //		{
1066:Src/pid.c     **** //			g_CmdMap[CMD_SPD_SET_PU] = 0;
1067:Src/pid.c     **** //		}
1068:Src/pid.c     **** //    g_CmdMap[CMD_CUR_SET_PU] = 0;
1069:Src/pid.c     **** //  }
1070:Src/pid.c     **** //  s_OldMode = g_CmdMap[TAG_WORK_MODE];
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 75


1071:Src/pid.c     **** //}
1072:Src/pid.c     **** 
1073:Src/pid.c     ****  volatile s32 s_Disable_Delay = 0;
1074:Src/pid.c     **** 
1075:Src/pid.c     **** static void Pos_Spd_PID(void)
1076:Src/pid.c     **** {
1077:Src/pid.c     **** 	static s32 s_count = 0; 	// Ê¹ï¿½ï¿½Hï¿½Åºï¿½ï¿½ï¿½ï¿½Ê±Ê±ï¿½ï¿½
1078:Src/pid.c     ****   static s32 s_Enable_Delay = 0; 	// Ê¹ï¿½ï¿½Hï¿½Åºï¿½ï¿½ï¿½ï¿½Ê±Ê±ï¿½ï¿½
1079:Src/pid.c     ****  GPIOA->BRR  |= (uint32_t)GPIO_PIN_4;
1080:Src/pid.c     **** 	//CheckModeChange();
1081:Src/pid.c     **** 	MTPro();
1082:Src/pid.c     **** 	if(g_servo_cmd_period_cnt<2000)
1083:Src/pid.c     **** 	{
1084:Src/pid.c     **** 		g_servo_cmd_period_cnt++; //ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¼ï¿½Ê±
1085:Src/pid.c     **** 	}
1086:Src/pid.c     **** 	get_average_force_data();	
1087:Src/pid.c     **** 	
1088:Src/pid.c     **** 	if(g_CmdMap[TAG_WORK_MODE] == MODE_FORCE)
1089:Src/pid.c     **** 	{
1090:Src/pid.c     **** 		ForcePID();
1091:Src/pid.c     **** 	}
1092:Src/pid.c     **** 	
1093:Src/pid.c     **** 	
1094:Src/pid.c     **** 	Loop3_EnableManage();
1095:Src/pid.c     **** 	if(++s_count>=(F_SPD_REGULATOR_HZ/F_POS_REGULATOR_HZ))
1096:Src/pid.c     **** 	{
1097:Src/pid.c     **** 		s_count = 0;
1098:Src/pid.c     **** 		Flag_1ms = 1;
1099:Src/pid.c     **** 		if(++s_count_50ms>50)
1100:Src/pid.c     **** 		{
1101:Src/pid.c     **** 			s_count_50ms = 0;
1102:Src/pid.c     **** 			Flag_50ms = 1;
1103:Src/pid.c     **** 		}
1104:Src/pid.c     **** 		
1105:Src/pid.c     **** 		
1106:Src/pid.c     **** 		
1107:Src/pid.c     **** 		Get_Pos_Rod();
1108:Src/pid.c     **** 		Stroke_protection();
1109:Src/pid.c     **** 		
1110:Src/pid.c     **** //		if(g_CmdMap[TAG_WORK_MODE] == MODE_POSITION)
1111:Src/pid.c     **** 		{
1112:Src/pid.c     **** 			Gripper_control();	
1113:Src/pid.c     **** 		}
1114:Src/pid.c     **** 	}
1115:Src/pid.c     **** 	
1116:Src/pid.c     **** 	icmu_sdtransmission_test();
1117:Src/pid.c     **** 	
1118:Src/pid.c     **** 	
1119:Src/pid.c     **** 	if(g_CmdMap[TAG_WORK_MODE] == MODE_POSITION || g_CmdMap[TAG_WORK_MODE] == MODE_SPEED  ||  g_CmdMap
1120:Src/pid.c     **** 	{
1121:Src/pid.c     **** 		SpeedPID();
1122:Src/pid.c     **** 	}	
1123:Src/pid.c     ****   // Hï¿½Å´Ó½ï¿½ï¿½Üµï¿½Ê¹ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½È´ï¿½ï¿½Ìµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿
1124:Src/pid.c     ****   if(g_CmdMap[TAG_MOTOR_ENABLE] == 0 || Motor_forbidden == 1 || Motor_emergercy_stop == 1 || Motor_
1125:Src/pid.c     **** 	{
1126:Src/pid.c     **** 		s_Enable_Delay = 0;
1127:Src/pid.c     **** 		Motor_forbidden = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 76


1128:Src/pid.c     **** 		if(g_CmdMap[TAG_WORK_MODE] == MODE_SPEED ||g_CmdMap[TAG_WORK_MODE] == MODE_CURRENT )
1129:Src/pid.c     **** 		{
1130:Src/pid.c     **** 			g_CmdMap[CMD_SPD_SET_PU] = 0;
1131:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = 0;
1132:Src/pid.c     **** 		}
1133:Src/pid.c     **** 		if(g_CmdMap[CMD_ERROR] != 0)
1134:Src/pid.c     **** 		{	
1135:Src/pid.c     **** 			g_CmdMap[CMD_POS_SET_PU] = g_CmdMap[CMD_POS_ACT_PU];
1136:Src/pid.c     **** 		}			
1137:Src/pid.c     **** //		if(s_Disable_Delay <= 1) s_Disable_Delay ++;
1138:Src/pid.c     **** //		if (s_Disable_Delay == 1) // ï¿½ï¿½Ê¹ï¿½Ü±ï¿½Îªï¿½ï¿½ï¿½ï¿½ 50ms
1139:Src/pid.c     **** 		{
1140:Src/pid.c     **** //			s_Disable_Delay = 0;
1141:Src/pid.c     **** 			g_Timer1CCR = 0;
1142:Src/pid.c     ****       Motor_emergercy_stop =0;
1143:Src/pid.c     **** 			Motor_pause_flag = 0;
1144:Src/pid.c     **** 			PWM_Disable();
1145:Src/pid.c     **** 		}
1146:Src/pid.c     **** //		if (s_Disable_Delay > 1)
1147:Src/pid.c     **** //		{
1148:Src/pid.c     **** //			s_Disable_Delay =2;
1149:Src/pid.c     **** //		}
1150:Src/pid.c     **** 		g_Vq = 0;
1151:Src/pid.c     **** 		return;
1152:Src/pid.c     **** 	}
1153:Src/pid.c     **** 	if(g_CmdMap[TAG_MOTOR_ENABLE] == 1 && Motor_forbidden == 0)
1154:Src/pid.c     **** 	{
1155:Src/pid.c     **** 		if(s_Enable_Delay <= 2) s_Enable_Delay ++;
1156:Src/pid.c     **** 		s_Disable_Delay = 0;
1157:Src/pid.c     **** 		if (s_Enable_Delay == 1)  // ï¿½Ó½ï¿½ï¿½Ü±ï¿½ÎªÊ¹ï¿½ï¿½ 50ms
1158:Src/pid.c     **** 		{
1159:Src/pid.c     **** 			if(g_CmdMap[TAG_WORK_MODE] == MODE_SPEED ||g_CmdMap[TAG_WORK_MODE] == MODE_CURRENT )
1160:Src/pid.c     **** 			{
1161:Src/pid.c     **** 				g_CmdMap[CMD_SPD_SET_PU] = 0;
1162:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 0;
1163:Src/pid.c     **** 			}
1164:Src/pid.c     **** 			g_Timer1CCR = 0;		
1165:Src/pid.c     **** 			PWM_Enable();			
1166:Src/pid.c     **** 		}
1167:Src/pid.c     **** 		return;
1168:Src/pid.c     **** 	}  
1169:Src/pid.c     **** }
1170:Src/pid.c     **** s32 I_Alpha, I_Beta; 
1171:Src/pid.c     **** extern 	volatile  int hall_ture_value;
1172:Src/pid.c     **** extern 	volatile  int last_hall_ture_value;
1173:Src/pid.c     **** extern volatile  s32 sample_invered;
1174:Src/pid.c     **** 
1175:Src/pid.c     **** volatile  int delta_alpha;
1176:Src/pid.c     **** volatile  int delata_beta;
1177:Src/pid.c     **** int last_alpha = 0;
1178:Src/pid.c     **** int last_beta = 0;
1179:Src/pid.c     **** 
1180:Src/pid.c     **** float phase_current_rev_gain_ = 1.0f/16.5f;
1181:Src/pid.c     **** float shunt_conductance = 1.0f/0.01f;
1182:Src/pid.c     **** float phase_current_from_adcval(s32 adcval_bal)
1183:Src/pid.c     **** {
 2753              		.loc 1 1183 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 77


 2754              		.cfi_startproc
 2755              		@ args = 0, pretend = 0, frame = 0
 2756              		@ frame_needed = 0, uses_anonymous_args = 0
 2757              		@ link register save eliminated.
 2758              	.LVL145:
1184:Src/pid.c     ****   float amp_out_volt = (3.3f / (float)(1 << 12)) * (float)adcval_bal;
 2759              		.loc 1 1184 0
 2760 0000 07EE900A 		vmov	s15, r0	@ int
 2761 0004 B8EEE70A 		vcvt.f32.s32	s0, s15
 2762 0008 DFED077A 		vldr.32	s15, .L213
 2763 000c 20EE270A 		vmul.f32	s0, s0, s15
 2764              	.LVL146:
1185:Src/pid.c     ****   float shunt_volt = amp_out_volt * phase_current_rev_gain_;
 2765              		.loc 1 1185 0
 2766 0010 064B     		ldr	r3, .L213+4
 2767 0012 D3ED007A 		vldr.32	s15, [r3]
 2768 0016 67EE807A 		vmul.f32	s15, s15, s0
 2769              	.LVL147:
1186:Src/pid.c     ****   float current = shunt_volt * shunt_conductance;
 2770              		.loc 1 1186 0
 2771 001a 054B     		ldr	r3, .L213+8
 2772 001c 93ED000A 		vldr.32	s0, [r3]
 2773              	.LVL148:
1187:Src/pid.c     ****   return current ;
1188:Src/pid.c     **** }
 2774              		.loc 1 1188 0
 2775 0020 20EE270A 		vmul.f32	s0, s0, s15
 2776              	.LVL149:
 2777 0024 7047     		bx	lr
 2778              	.L214:
 2779 0026 00BF     		.align	2
 2780              	.L213:
 2781 0028 3333533A 		.word	978531123
 2782 002c 00000000 		.word	.LANCHOR26
 2783 0030 00000000 		.word	.LANCHOR27
 2784              		.cfi_endproc
 2785              	.LFE345:
 2787              		.section	.text.GetCurrent,"ax",%progbits
 2788              		.align	1
 2789              		.global	GetCurrent
 2790              		.syntax unified
 2791              		.thumb
 2792              		.thumb_func
 2793              		.fpu fpv4-sp-d16
 2795              	GetCurrent:
 2796              	.LFB346:
1189:Src/pid.c     **** void GetCurrent(void)
1190:Src/pid.c     **** {
 2797              		.loc 1 1190 0
 2798              		.cfi_startproc
 2799              		@ args = 0, pretend = 0, frame = 0
 2800              		@ frame_needed = 0, uses_anonymous_args = 0
 2801 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2802              	.LCFI15:
 2803              		.cfi_def_cfa_offset 24
 2804              		.cfi_offset 4, -24
 2805              		.cfi_offset 5, -20
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 78


 2806              		.cfi_offset 6, -16
 2807              		.cfi_offset 7, -12
 2808              		.cfi_offset 8, -8
 2809              		.cfi_offset 14, -4
 2810 0004 2DED028B 		vpush.64	{d8}
 2811              	.LCFI16:
 2812              		.cfi_def_cfa_offset 32
 2813              		.cfi_offset 80, -32
 2814              		.cfi_offset 81, -28
 2815              	.LVL150:
1191:Src/pid.c     ****   s32 i=0, j=0,I_B1 = 0,I_C1 = 0;
1192:Src/pid.c     **** 
1193:Src/pid.c     **** 
1194:Src/pid.c     **** 	
1195:Src/pid.c     **** 	g_IC_Raw = (s16)(-phase_current_from_adcval(ADC1->JDR1-g_ZeroCur_MotorC)*1000.0f); // mA	
 2816              		.loc 1 1195 0
 2817 0008 4FF0A045 		mov	r5, #1342177280
 2818 000c D5F88000 		ldr	r0, [r5, #128]
 2819 0010 644B     		ldr	r3, .L220
 2820 0012 1B68     		ldr	r3, [r3]
 2821 0014 C01A     		subs	r0, r0, r3
 2822 0016 FFF7FEFF 		bl	phase_current_from_adcval
 2823              	.LVL151:
 2824 001a 9FED638A 		vldr.32	s16, .L220+4
 2825 001e 20EE480A 		vnmul.f32	s0, s0, s16
 2826 0022 BDEEC00A 		vcvt.s32.f32	s0, s0
 2827 0026 614B     		ldr	r3, .L220+8
 2828 0028 10EE102A 		vmov	r2, s0	@ int
 2829 002c 1A80     		strh	r2, [r3]	@ movhi
1196:Src/pid.c     **** 	g_IB_Raw = (s16)(-phase_current_from_adcval(ADC2->JDR1-g_ZeroCur_MotorB)*1000.0f); // mA
 2830              		.loc 1 1196 0
 2831 002e 604B     		ldr	r3, .L220+12
 2832 0030 D3F88000 		ldr	r0, [r3, #128]
 2833 0034 5F4B     		ldr	r3, .L220+16
 2834 0036 1B68     		ldr	r3, [r3]
 2835 0038 C01A     		subs	r0, r0, r3
 2836 003a FFF7FEFF 		bl	phase_current_from_adcval
 2837              	.LVL152:
 2838 003e 20EE480A 		vnmul.f32	s0, s0, s16
 2839 0042 BDEEC00A 		vcvt.s32.f32	s0, s0
 2840 0046 10EE103A 		vmov	r3, s0	@ int
 2841 004a 1CB2     		sxth	r4, r3
 2842 004c 5A4B     		ldr	r3, .L220+20
 2843 004e 1C80     		strh	r4, [r3]	@ movhi
1197:Src/pid.c     **** 	g_IA_Raw = (s16)(-phase_current_from_adcval(ADC1->JDR1-g_ZeroCur_MotorA)*1000.0f); // mA
 2844              		.loc 1 1197 0
 2845 0050 D5F88000 		ldr	r0, [r5, #128]
 2846 0054 594B     		ldr	r3, .L220+24
 2847 0056 1B68     		ldr	r3, [r3]
 2848 0058 C01A     		subs	r0, r0, r3
 2849 005a FFF7FEFF 		bl	phase_current_from_adcval
 2850              	.LVL153:
 2851 005e 20EE480A 		vnmul.f32	s0, s0, s16
 2852 0062 BDEEC00A 		vcvt.s32.f32	s0, s0
 2853 0066 10EE103A 		vmov	r3, s0	@ int
 2854 006a 1BB2     		sxth	r3, r3
 2855 006c 544A     		ldr	r2, .L220+28
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 79


 2856 006e 1380     		strh	r3, [r2]	@ movhi
1198:Src/pid.c     **** 	
1199:Src/pid.c     **** 	g_IA = g_IA_Raw;
 2857              		.loc 1 1199 0
 2858 0070 544A     		ldr	r2, .L220+32
 2859 0072 1380     		strh	r3, [r2]	@ movhi
1200:Src/pid.c     **** 	g_IB = g_IB_Raw;
 2860              		.loc 1 1200 0
 2861 0074 544E     		ldr	r6, .L220+36
 2862 0076 3480     		strh	r4, [r6]	@ movhi
1201:Src/pid.c     **** 	g_IC = 0 - g_IA_Raw -g_IB_Raw;
 2863              		.loc 1 1201 0
 2864 0078 5A42     		negs	r2, r3
 2865 007a 121B     		subs	r2, r2, r4
 2866 007c 12B2     		sxth	r2, r2
 2867 007e 534D     		ldr	r5, .L220+40
 2868 0080 2A80     		strh	r2, [r5]	@ movhi
1202:Src/pid.c     **** 	
1203:Src/pid.c     **** 	update_current_meas(&motor_, g_IA/1000.0f, g_IB/1000.0f, g_IC/1000.0f);
 2869              		.loc 1 1203 0
 2870 0082 07EE902A 		vmov	s15, r2	@ int
 2871 0086 B8EEE71A 		vcvt.f32.s32	s2, s15
 2872 008a 07EE904A 		vmov	s15, r4	@ int
 2873 008e F8EEE70A 		vcvt.f32.s32	s1, s15
 2874 0092 07EE903A 		vmov	s15, r3	@ int
 2875 0096 B8EEE70A 		vcvt.f32.s32	s0, s15
 2876 009a 81EE081A 		vdiv.f32	s2, s2, s16
 2877 009e C0EE880A 		vdiv.f32	s1, s1, s16
 2878 00a2 80EE080A 		vdiv.f32	s0, s0, s16
 2879 00a6 4A48     		ldr	r0, .L220+44
 2880 00a8 FFF7FEFF 		bl	update_current_meas
 2881              	.LVL154:
1204:Src/pid.c     **** 
1205:Src/pid.c     **** 	I_Alpha = -(g_IB + g_IC);             // ï¿½È·ï¿½Clark:I_Alpha = (2/3)*(I_a - 0.5*I_b - 0.5*I_c)= 
 2882              		.loc 1 1205 0
 2883 00ac B6F90000 		ldrsh	r0, [r6]
 2884 00b0 B5F90020 		ldrsh	r2, [r5]
 2885 00b4 8318     		adds	r3, r0, r2
 2886 00b6 5B42     		negs	r3, r3
 2887 00b8 464C     		ldr	r4, .L220+48
 2888 00ba 2360     		str	r3, [r4]
1206:Src/pid.c     **** 	I_Beta = Q15_MUL(g_IB - g_IC,18919);  // ï¿½È·ï¿½Clark:I_Beta =  (2/3)*(ib-ic)*0.5*squr(3) = (ib-i
 2889              		.loc 1 1206 0
 2890 00bc 44F6E711 		movw	r1, #18919
 2891 00c0 801A     		subs	r0, r0, r2
 2892 00c2 FFF7FEFF 		bl	Q15_MUL
 2893              	.LVL155:
 2894 00c6 444D     		ldr	r5, .L220+52
 2895 00c8 2860     		str	r0, [r5]
1207:Src/pid.c     **** 	
1208:Src/pid.c     **** 	delta_alpha = I_Alpha - last_alpha;
 2896              		.loc 1 1208 0
 2897 00ca 2668     		ldr	r6, [r4]
 2898 00cc 4349     		ldr	r1, .L220+56
 2899 00ce 0B68     		ldr	r3, [r1]
 2900 00d0 F31A     		subs	r3, r6, r3
 2901 00d2 434F     		ldr	r7, .L220+60
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 80


 2902 00d4 3B60     		str	r3, [r7]
1209:Src/pid.c     **** 	delata_beta = I_Beta - last_beta;
 2903              		.loc 1 1209 0
 2904 00d6 DFF82CC1 		ldr	ip, .L220+96
 2905 00da DCF80030 		ldr	r3, [ip]
 2906 00de C31A     		subs	r3, r0, r3
 2907 00e0 404A     		ldr	r2, .L220+64
 2908 00e2 1360     		str	r3, [r2]
1210:Src/pid.c     **** 	
1211:Src/pid.c     **** 	delta_alpha *= g_high_fre_pulse;
 2909              		.loc 1 1211 0
 2910 00e4 DFF820E1 		ldr	lr, .L220+100
 2911 00e8 DEF80030 		ldr	r3, [lr]
 2912 00ec D7F80080 		ldr	r8, [r7]
 2913 00f0 03FB08F3 		mul	r3, r3, r8
 2914 00f4 3B60     		str	r3, [r7]
1212:Src/pid.c     **** 	delata_beta *= g_high_fre_pulse;
 2915              		.loc 1 1212 0
 2916 00f6 DEF80030 		ldr	r3, [lr]
 2917 00fa 1768     		ldr	r7, [r2]
 2918 00fc 03FB07F3 		mul	r3, r3, r7
 2919 0100 1360     		str	r3, [r2]
1213:Src/pid.c     **** 	
1214:Src/pid.c     **** 	last_alpha = I_Alpha;
 2920              		.loc 1 1214 0
 2921 0102 0E60     		str	r6, [r1]
1215:Src/pid.c     **** 	last_beta = I_Beta;
 2922              		.loc 1 1215 0
 2923 0104 CCF80000 		str	r0, [ip]
1216:Src/pid.c     **** 	
1217:Src/pid.c     **** 	i = Math_Sin_EN360(g_ElectricAngle );
 2924              		.loc 1 1217 0
 2925 0108 374E     		ldr	r6, .L220+68
 2926 010a 3068     		ldr	r0, [r6]
 2927 010c 80B2     		uxth	r0, r0
 2928 010e FFF7FEFF 		bl	Math_Sin_EN360
 2929              	.LVL156:
 2930 0112 0746     		mov	r7, r0
 2931              	.LVL157:
1218:Src/pid.c     **** 	j = Math_Cos_EN360(g_ElectricAngle );
 2932              		.loc 1 1218 0
 2933 0114 3068     		ldr	r0, [r6]
 2934              	.LVL158:
 2935 0116 80B2     		uxth	r0, r0
 2936 0118 FFF7FEFF 		bl	Math_Cos_EN360
 2937              	.LVL159:
 2938 011c 8046     		mov	r8, r0
 2939              	.LVL160:
1219:Src/pid.c     **** 	I_B1 = Q15_MUL(j, I_Alpha) + Q15_MUL(i, I_Beta);//Parkï¿½ä»»:Iq = i_Alpha*cos - i_Beta*sin
 2940              		.loc 1 1219 0
 2941 011e 2168     		ldr	r1, [r4]
 2942 0120 FFF7FEFF 		bl	Q15_MUL
 2943              	.LVL161:
 2944 0124 0646     		mov	r6, r0
 2945 0126 2968     		ldr	r1, [r5]
 2946 0128 3846     		mov	r0, r7
 2947 012a FFF7FEFF 		bl	Q15_MUL
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 81


 2948              	.LVL162:
 2949 012e 0644     		add	r6, r6, r0
 2950              	.LVL163:
1220:Src/pid.c     **** 	I_C1 = Q15_MUL(i, I_Alpha) - Q15_MUL(j, I_Beta);//Parkï¿½ä»»:Id = i_Alpha*sin + i_Beta*cos
 2951              		.loc 1 1220 0
 2952 0130 2168     		ldr	r1, [r4]
 2953 0132 3846     		mov	r0, r7
 2954 0134 FFF7FEFF 		bl	Q15_MUL
 2955              	.LVL164:
 2956 0138 0446     		mov	r4, r0
 2957 013a 2968     		ldr	r1, [r5]
 2958 013c 4046     		mov	r0, r8
 2959 013e FFF7FEFF 		bl	Q15_MUL
 2960              	.LVL165:
 2961 0142 201A     		subs	r0, r4, r0
 2962              	.LVL166:
1221:Src/pid.c     **** //		I_B1 = (I_B1>>3)<<3;
1222:Src/pid.c     **** //		I_C1 = (I_C1>>3)<<3;
1223:Src/pid.c     **** 
1224:Src/pid.c     ****   if (g_bEnableHB != 0 && (pid_IQ.enable == 1||g_CmdMap[TAG_WORK_MODE] == MODE_OPEN))
 2963              		.loc 1 1224 0
 2964 0144 294B     		ldr	r3, .L220+72
 2965 0146 1B88     		ldrh	r3, [r3]
 2966 0148 1BB2     		sxth	r3, r3
 2967 014a 43B1     		cbz	r3, .L216
 2968              		.loc 1 1224 0 is_stmt 0 discriminator 1
 2969 014c 284B     		ldr	r3, .L220+76
 2970 014e 1B68     		ldr	r3, [r3]
 2971 0150 012B     		cmp	r3, #1
 2972 0152 21D0     		beq	.L217
 2973              		.loc 1 1224 0 discriminator 2
 2974 0154 274B     		ldr	r3, .L220+80
 2975 0156 B3F80432 		ldrh	r3, [r3, #516]
 2976 015a 1BB2     		sxth	r3, r3
 2977 015c E3B1     		cbz	r3, .L217
 2978              	.L216:
1225:Src/pid.c     ****   {
1226:Src/pid.c     **** 		g_Iq = I_B1;
1227:Src/pid.c     **** 		g_Id = I_C1;	
1228:Src/pid.c     **** 	}
1229:Src/pid.c     **** 	else
1230:Src/pid.c     **** 	{
1231:Src/pid.c     **** 		g_Iq = I_B1;
 2979              		.loc 1 1231 0 is_stmt 1
 2980 015e 264B     		ldr	r3, .L220+84
 2981 0160 1E60     		str	r6, [r3]
1232:Src/pid.c     **** 		g_Id = I_C1;	
 2982              		.loc 1 1232 0
 2983 0162 264B     		ldr	r3, .L220+88
 2984 0164 1860     		str	r0, [r3]
 2985              	.L218:
1233:Src/pid.c     **** 	}
1234:Src/pid.c     **** 	g_CmdMap[CMD_CUR_D_ACT_PU] = g_Id*PU_REFERENCE/(*g_pCur_ref_base_mA);
 2986              		.loc 1 1234 0
 2987 0166 254B     		ldr	r3, .L220+88
 2988 0168 1B68     		ldr	r3, [r3]
 2989 016a 9B03     		lsls	r3, r3, #14
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 82


 2990 016c 244A     		ldr	r2, .L220+92
 2991 016e 1168     		ldr	r1, [r2]
 2992 0170 0A68     		ldr	r2, [r1]
 2993 0172 93FBF2F3 		sdiv	r3, r3, r2
 2994 0176 1BB2     		sxth	r3, r3
 2995 0178 1E4A     		ldr	r2, .L220+80
 2996 017a A2F89432 		strh	r3, [r2, #660]	@ movhi
1235:Src/pid.c     **** 	g_CmdMap[CMD_CUR_ACT_PU] = g_Iq*PU_REFERENCE/(*g_pCur_ref_base_mA);
 2997              		.loc 1 1235 0
 2998 017e 1E4B     		ldr	r3, .L220+84
 2999 0180 1B68     		ldr	r3, [r3]
 3000 0182 9B03     		lsls	r3, r3, #14
 3001 0184 0968     		ldr	r1, [r1]
 3002 0186 93FBF1F3 		sdiv	r3, r3, r1
 3003 018a 1BB2     		sxth	r3, r3
 3004 018c A2F84E30 		strh	r3, [r2, #78]	@ movhi
1236:Src/pid.c     **** 	
1237:Src/pid.c     **** 	
1238:Src/pid.c     **** }
 3005              		.loc 1 1238 0
 3006 0190 BDEC028B 		vldm	sp!, {d8}
 3007              	.LCFI17:
 3008              		.cfi_remember_state
 3009              		.cfi_restore 80
 3010              		.cfi_restore 81
 3011              		.cfi_def_cfa_offset 24
 3012 0194 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3013              	.LVL167:
 3014              	.L217:
 3015              	.LCFI18:
 3016              		.cfi_restore_state
1226:Src/pid.c     **** 		g_Id = I_C1;	
 3017              		.loc 1 1226 0
 3018 0198 174B     		ldr	r3, .L220+84
 3019 019a 1E60     		str	r6, [r3]
1227:Src/pid.c     **** 	}
 3020              		.loc 1 1227 0
 3021 019c 174B     		ldr	r3, .L220+88
 3022 019e 1860     		str	r0, [r3]
 3023 01a0 E1E7     		b	.L218
 3024              	.L221:
 3025 01a2 00BF     		.align	2
 3026              	.L220:
 3027 01a4 00000000 		.word	g_ZeroCur_MotorC
 3028 01a8 00007A44 		.word	1148846080
 3029 01ac 00000000 		.word	.LANCHOR11
 3030 01b0 00010050 		.word	1342177536
 3031 01b4 00000000 		.word	g_ZeroCur_MotorB
 3032 01b8 00000000 		.word	.LANCHOR10
 3033 01bc 00000000 		.word	g_ZeroCur_MotorA
 3034 01c0 00000000 		.word	.LANCHOR8
 3035 01c4 00000000 		.word	.LANCHOR28
 3036 01c8 00000000 		.word	.LANCHOR29
 3037 01cc 00000000 		.word	.LANCHOR30
 3038 01d0 00000000 		.word	motor_
 3039 01d4 00000000 		.word	I_Alpha
 3040 01d8 00000000 		.word	I_Beta
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 83


 3041 01dc 00000000 		.word	.LANCHOR31
 3042 01e0 00000000 		.word	delta_alpha
 3043 01e4 00000000 		.word	delata_beta
 3044 01e8 00000000 		.word	g_ElectricAngle
 3045 01ec 00000000 		.word	g_bEnableHB
 3046 01f0 00000000 		.word	pid_IQ
 3047 01f4 00000000 		.word	g_CmdMap
 3048 01f8 00000000 		.word	.LANCHOR33
 3049 01fc 00000000 		.word	.LANCHOR34
 3050 0200 00000000 		.word	g_pCur_ref_base_mA
 3051 0204 00000000 		.word	.LANCHOR32
 3052 0208 00000000 		.word	g_high_fre_pulse
 3053              		.cfi_endproc
 3054              	.LFE346:
 3056              		.section	.text.park_transform,"ax",%progbits
 3057              		.align	1
 3058              		.global	park_transform
 3059              		.syntax unified
 3060              		.thumb
 3061              		.thumb_func
 3062              		.fpu fpv4-sp-d16
 3064              	park_transform:
 3065              	.LFB347:
1239:Src/pid.c     **** 
1240:Src/pid.c     **** 
1241:Src/pid.c     **** void park_transform(int alpha, int beta, int*q, int*d,int ElectricAngle )
1242:Src/pid.c     **** {
 3066              		.loc 1 1242 0
 3067              		.cfi_startproc
 3068              		@ args = 4, pretend = 0, frame = 0
 3069              		@ frame_needed = 0, uses_anonymous_args = 0
 3070              	.LVL168:
 3071 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3072              	.LCFI19:
 3073              		.cfi_def_cfa_offset 32
 3074              		.cfi_offset 4, -32
 3075              		.cfi_offset 5, -28
 3076              		.cfi_offset 6, -24
 3077              		.cfi_offset 7, -20
 3078              		.cfi_offset 8, -16
 3079              		.cfi_offset 9, -12
 3080              		.cfi_offset 10, -8
 3081              		.cfi_offset 14, -4
 3082 0004 9246     		mov	r10, r2
 3083 0006 9846     		mov	r8, r3
1243:Src/pid.c     **** 	int i,j;
1244:Src/pid.c     **** 	
1245:Src/pid.c     **** 	i = Math_Sin_EN360(ElectricAngle);
 3084              		.loc 1 1245 0
 3085 0008 BDF82040 		ldrh	r4, [sp, #32]
 3086 000c 2046     		mov	r0, r4
 3087              	.LVL169:
 3088 000e FFF7FEFF 		bl	Math_Sin_EN360
 3089              	.LVL170:
 3090 0012 0646     		mov	r6, r0
 3091              	.LVL171:
1246:Src/pid.c     **** 	j = Math_Cos_EN360(ElectricAngle);
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 84


 3092              		.loc 1 1246 0
 3093 0014 2046     		mov	r0, r4
 3094              	.LVL172:
 3095 0016 FFF7FEFF 		bl	Math_Cos_EN360
 3096              	.LVL173:
 3097 001a 8146     		mov	r9, r0
 3098              	.LVL174:
1247:Src/pid.c     **** 	*q = Q15_MUL(j, I_Alpha) + Q15_MUL(i, I_Beta);//Parkï¿½ä»»:Iq = i_Alpha*cos - i_Beta*sin
 3099              		.loc 1 1247 0
 3100 001c 0D4F     		ldr	r7, .L224
 3101 001e 3968     		ldr	r1, [r7]
 3102 0020 FFF7FEFF 		bl	Q15_MUL
 3103              	.LVL175:
 3104 0024 0446     		mov	r4, r0
 3105 0026 0C4D     		ldr	r5, .L224+4
 3106 0028 2968     		ldr	r1, [r5]
 3107 002a 3046     		mov	r0, r6
 3108 002c FFF7FEFF 		bl	Q15_MUL
 3109              	.LVL176:
 3110 0030 2044     		add	r0, r0, r4
 3111 0032 CAF80000 		str	r0, [r10]
1248:Src/pid.c     **** 	*d = Q15_MUL(i, I_Alpha) - Q15_MUL(j, I_Beta);//Parkï¿½ä»»:Id = i_Alpha*sin + i_Beta*cos
 3112              		.loc 1 1248 0
 3113 0036 3968     		ldr	r1, [r7]
 3114 0038 3046     		mov	r0, r6
 3115 003a FFF7FEFF 		bl	Q15_MUL
 3116              	.LVL177:
 3117 003e 0446     		mov	r4, r0
 3118 0040 2968     		ldr	r1, [r5]
 3119 0042 4846     		mov	r0, r9
 3120 0044 FFF7FEFF 		bl	Q15_MUL
 3121              	.LVL178:
 3122 0048 201A     		subs	r0, r4, r0
 3123 004a C8F80000 		str	r0, [r8]
1249:Src/pid.c     **** }
 3124              		.loc 1 1249 0
 3125 004e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3126              	.LVL179:
 3127              	.L225:
 3128 0052 00BF     		.align	2
 3129              	.L224:
 3130 0054 00000000 		.word	I_Alpha
 3131 0058 00000000 		.word	I_Beta
 3132              		.cfi_endproc
 3133              	.LFE347:
 3135              		.global	__aeabi_f2d
 3136              		.global	__aeabi_d2f
 3137              		.section	.text.hfi_update_angle,"ax",%progbits
 3138              		.align	1
 3139              		.global	hfi_update_angle
 3140              		.syntax unified
 3141              		.thumb
 3142              		.thumb_func
 3143              		.fpu fpv4-sp-d16
 3145              	hfi_update_angle:
 3146              	.LFB342:
 959:Src/pid.c     **** 	int X,Y;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 85


 3147              		.loc 1 959 0
 3148              		.cfi_startproc
 3149              		@ args = 0, pretend = 0, frame = 16
 3150              		@ frame_needed = 0, uses_anonymous_args = 0
 3151 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3152              	.LCFI20:
 3153              		.cfi_def_cfa_offset 36
 3154              		.cfi_offset 4, -36
 3155              		.cfi_offset 5, -32
 3156              		.cfi_offset 6, -28
 3157              		.cfi_offset 7, -24
 3158              		.cfi_offset 8, -20
 3159              		.cfi_offset 9, -16
 3160              		.cfi_offset 10, -12
 3161              		.cfi_offset 11, -8
 3162              		.cfi_offset 14, -4
 3163 0004 87B0     		sub	sp, sp, #28
 3164              	.LCFI21:
 3165              		.cfi_def_cfa_offset 64
 968:Src/pid.c     **** 	pid_pll.Kp = 1000;
 3166              		.loc 1 968 0
 3167 0006 664C     		ldr	r4, .L228+32
 3168 0008 0027     		movs	r7, #0
 3169 000a 6761     		str	r7, [r4, #20]
 969:Src/pid.c     **** 	pid_pll.Ki = 10;
 3170              		.loc 1 969 0
 3171 000c 4FF47A73 		mov	r3, #1000
 3172 0010 A360     		str	r3, [r4, #8]
 970:Src/pid.c     **** 	pid_pll.Kd = 0;
 3173              		.loc 1 970 0
 3174 0012 0A23     		movs	r3, #10
 3175 0014 E360     		str	r3, [r4, #12]
 971:Src/pid.c     **** 	pid_pll.frequency = F_CUR_REGULATOR_HZ;
 3176              		.loc 1 971 0
 3177 0016 2761     		str	r7, [r4, #16]
 972:Src/pid.c     **** 	pid_pll.enable =1;
 3178              		.loc 1 972 0
 3179 0018 46F2A815 		movw	r5, #25000
 3180 001c A563     		str	r5, [r4, #56]
 973:Src/pid.c     **** 	pid_pll.Up_limit = 0x7FFFFFFF;
 3181              		.loc 1 973 0
 3182 001e 0123     		movs	r3, #1
 3183 0020 2360     		str	r3, [r4]
 974:Src/pid.c     **** 	pid_pll.Low_limit = -0x7FFFFFFF;
 3184              		.loc 1 974 0
 3185 0022 6FF00043 		mvn	r3, #-2147483648
 3186 0026 E363     		str	r3, [r4, #60]
 975:Src/pid.c     **** 	
 3187              		.loc 1 975 0
 3188 0028 0233     		adds	r3, r3, #2
 3189 002a 2364     		str	r3, [r4, #64]
 978:Src/pid.c     **** 	
 3190              		.loc 1 978 0
 3191 002c DFF8A8A1 		ldr	r10, .L228+88
 3192 0030 DAF80000 		ldr	r0, [r10]
 3193 0034 DFF8A491 		ldr	r9, .L228+92
 3194 0038 D9F80010 		ldr	r1, [r9]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 86


 3195 003c DFF8A081 		ldr	r8, .L228+96
 3196 0040 D8F80030 		ldr	r3, [r8]
 3197 0044 0093     		str	r3, [sp]
 3198 0046 04AB     		add	r3, sp, #16
 3199 0048 05AA     		add	r2, sp, #20
 3200 004a FFF7FEFF 		bl	park_transform
 3201              	.LVL180:
 980:Src/pid.c     **** 	temp_L = v *1.7321*500*1000 /(temp_d * F_CUR_REGULATOR_HZ/1000 ) /3/MAX_CCR*0.58*0.7;
 3202              		.loc 1 980 0
 3203 004e 554B     		ldr	r3, .L228+36
 3204 0050 1868     		ldr	r0, [r3]	@ float
 3205 0052 FFF7FEFF 		bl	__aeabi_f2d
 3206              	.LVL181:
 3207 0056 4AA3     		adr	r3, .L228
 3208 0058 D3E90023 		ldrd	r2, [r3]
 3209 005c FFF7FEFF 		bl	__aeabi_dmul
 3210              	.LVL182:
 3211 0060 0022     		movs	r2, #0
 3212 0062 514B     		ldr	r3, .L228+40
 3213 0064 FFF7FEFF 		bl	__aeabi_dmul
 3214              	.LVL183:
 3215 0068 0022     		movs	r2, #0
 3216 006a 504B     		ldr	r3, .L228+44
 3217 006c FFF7FEFF 		bl	__aeabi_dmul
 3218              	.LVL184:
 3219 0070 CDE90201 		strd	r0, [sp, #8]
 3220 0074 4E4B     		ldr	r3, .L228+48
 3221 0076 1B68     		ldr	r3, [r3]
 3222 0078 05FB03F3 		mul	r3, r5, r3
 3223 007c 4D4E     		ldr	r6, .L228+52
 3224 007e 86FB0320 		smull	r2, r0, r6, r3
 3225 0082 DB17     		asrs	r3, r3, #31
 3226 0084 C3EBA010 		rsb	r0, r3, r0, asr #6
 3227 0088 FFF7FEFF 		bl	__aeabi_i2d
 3228              	.LVL185:
 3229 008c 0246     		mov	r2, r0
 3230 008e 0B46     		mov	r3, r1
 3231 0090 DDE90201 		ldrd	r0, [sp, #8]
 3232 0094 FFF7FEFF 		bl	__aeabi_ddiv
 3233              	.LVL186:
 3234 0098 0022     		movs	r2, #0
 3235 009a 474B     		ldr	r3, .L228+56
 3236 009c FFF7FEFF 		bl	__aeabi_ddiv
 3237              	.LVL187:
 3238 00a0 39A3     		adr	r3, .L228+8
 3239 00a2 D3E90023 		ldrd	r2, [r3]
 3240 00a6 FFF7FEFF 		bl	__aeabi_ddiv
 3241              	.LVL188:
 3242 00aa 39A3     		adr	r3, .L228+16
 3243 00ac D3E90023 		ldrd	r2, [r3]
 3244 00b0 FFF7FEFF 		bl	__aeabi_dmul
 3245              	.LVL189:
 3246 00b4 38A3     		adr	r3, .L228+24
 3247 00b6 D3E90023 		ldrd	r2, [r3]
 3248 00ba FFF7FEFF 		bl	__aeabi_dmul
 3249              	.LVL190:
 3250 00be FFF7FEFF 		bl	__aeabi_d2f
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 87


 3251              	.LVL191:
 3252 00c2 3E4B     		ldr	r3, .L228+60
 3253 00c4 1860     		str	r0, [r3]	@ float
 981:Src/pid.c     **** 	
 3254              		.loc 1 981 0
 3255 00c6 0498     		ldr	r0, [sp, #16]
 3256 00c8 05FB00F5 		mul	r5, r5, r0
 3257 00cc 86FB0530 		smull	r3, r0, r6, r5
 3258 00d0 ED17     		asrs	r5, r5, #31
 3259 00d2 C5EBA010 		rsb	r0, r5, r0, asr #6
 3260 00d6 FFF7FEFF 		bl	__aeabi_i2d
 3261              	.LVL192:
 3262 00da 0246     		mov	r2, r0
 3263 00dc 0B46     		mov	r3, r1
 3264 00de DDE90201 		ldrd	r0, [sp, #8]
 3265 00e2 FFF7FEFF 		bl	__aeabi_ddiv
 3266              	.LVL193:
 3267 00e6 0022     		movs	r2, #0
 3268 00e8 334B     		ldr	r3, .L228+56
 3269 00ea FFF7FEFF 		bl	__aeabi_ddiv
 3270              	.LVL194:
 3271 00ee 26A3     		adr	r3, .L228+8
 3272 00f0 D3E90023 		ldrd	r2, [r3]
 3273 00f4 FFF7FEFF 		bl	__aeabi_ddiv
 3274              	.LVL195:
 3275 00f8 25A3     		adr	r3, .L228+16
 3276 00fa D3E90023 		ldrd	r2, [r3]
 3277 00fe FFF7FEFF 		bl	__aeabi_dmul
 3278              	.LVL196:
 3279 0102 25A3     		adr	r3, .L228+24
 3280 0104 D3E90023 		ldrd	r2, [r3]
 3281 0108 FFF7FEFF 		bl	__aeabi_dmul
 3282              	.LVL197:
 3283 010c FFF7FEFF 		bl	__aeabi_d2f
 3284              	.LVL198:
 3285 0110 2B4B     		ldr	r3, .L228+64
 3286 0112 1860     		str	r0, [r3]	@ float
 983:Src/pid.c     ****   Y = Math_Cos_EN360(observer_ElectricAngle);
 3287              		.loc 1 983 0
 3288 0114 2B4D     		ldr	r5, .L228+68
 3289 0116 2888     		ldrh	r0, [r5]
 3290 0118 FFF7FEFF 		bl	Math_Sin_EN360
 3291              	.LVL199:
 3292 011c 0646     		mov	r6, r0
 3293              	.LVL200:
 984:Src/pid.c     **** 	
 3294              		.loc 1 984 0
 3295 011e 2888     		ldrh	r0, [r5]
 3296              	.LVL201:
 3297 0120 FFF7FEFF 		bl	Math_Cos_EN360
 3298              	.LVL202:
 3299 0124 8346     		mov	fp, r0
 3300              	.LVL203:
 986:Src/pid.c     **** 	temp_y = Q15_MUL(delata_beta,Y);
 3301              		.loc 1 986 0
 3302 0126 DAF80000 		ldr	r0, [r10]
 3303              	.LVL204:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 88


 3304 012a 3146     		mov	r1, r6
 3305 012c FFF7FEFF 		bl	Q15_MUL
 3306              	.LVL205:
 3307 0130 0646     		mov	r6, r0
 3308              	.LVL206:
 987:Src/pid.c     **** 	
 3309              		.loc 1 987 0
 3310 0132 D9F80000 		ldr	r0, [r9]
 3311              	.LVL207:
 3312 0136 5946     		mov	r1, fp
 3313 0138 FFF7FEFF 		bl	Q15_MUL
 3314              	.LVL208:
 991:Src/pid.c     **** 	observer_speed = pid_pll.out;
 3315              		.loc 1 991 0
 3316 013c 2246     		mov	r2, r4
 3317 013e 311A     		subs	r1, r6, r0
 3318              	.LVL209:
 3319 0140 3846     		mov	r0, r7
 3320              	.LVL210:
 3321 0142 FFF7FEFF 		bl	PID_control
 3322              	.LVL211:
 992:Src/pid.c     **** 	
 3323              		.loc 1 992 0
 3324 0146 636B     		ldr	r3, [r4, #52]
 3325 0148 1F4A     		ldr	r2, .L228+72
 3326 014a 1360     		str	r3, [r2]
 994:Src/pid.c     **** 	
 3327              		.loc 1 994 0
 3328 014c 1F4A     		ldr	r2, .L228+76
 3329 014e 1168     		ldr	r1, [r2]
 3330 0150 0B44     		add	r3, r3, r1
 3331 0152 1360     		str	r3, [r2]
 996:Src/pid.c     **** 	
 3332              		.loc 1 996 0
 3333 0154 1E4A     		ldr	r2, .L228+80
 3334 0156 82FB0312 		smull	r1, r2, r2, r3
 3335 015a DB17     		asrs	r3, r3, #31
 3336 015c C3EB6213 		rsb	r3, r3, r2, asr #5
 998:Src/pid.c     **** 	
 3337              		.loc 1 998 0
 3338 0160 C3F30E03 		ubfx	r3, r3, #0, #15
 3339 0164 2B60     		str	r3, [r5]
1000:Src/pid.c     **** 	observer_ElectricAngle1  &= 0x7fff; 
 3340              		.loc 1 1000 0
 3341 0166 1B4A     		ldr	r2, .L228+84
 3342 0168 B2F90020 		ldrsh	r2, [r2]
 3343 016c 1344     		add	r3, r3, r2
 3344              	.LVL212:
1001:Src/pid.c     **** 	
 3345              		.loc 1 1001 0
 3346 016e C3F30E03 		ubfx	r3, r3, #0, #15
 3347              	.LVL213:
1003:Src/pid.c     **** 	
 3348              		.loc 1 1003 0
 3349 0172 C8F80030 		str	r3, [r8]
1012:Src/pid.c     **** 
 3350              		.loc 1 1012 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 89


 3351 0176 07B0     		add	sp, sp, #28
 3352              	.LCFI22:
 3353              		.cfi_def_cfa_offset 36
 3354              		@ sp needed
 3355 0178 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3356              	.LVL214:
 3357              	.L229:
 3358 017c AFF30080 		.align	3
 3359              	.L228:
 3360 0180 F46C567D 		.word	2102815988
 3361 0184 AEB6FB3F 		.word	1073460910
 3362 0188 00000000 		.word	0
 3363 018c 00A0A740 		.word	1084727296
 3364 0190 8FC2F528 		.word	687194767
 3365 0194 5C8FE23F 		.word	1071812444
 3366 0198 66666666 		.word	1717986918
 3367 019c 6666E63F 		.word	1072064102
 3368 01a0 00000000 		.word	pid_pll
 3369 01a4 00000000 		.word	.LANCHOR35
 3370 01a8 00407F40 		.word	1082081280
 3371 01ac 00408F40 		.word	1083129856
 3372 01b0 00000000 		.word	.LANCHOR33
 3373 01b4 D34D6210 		.word	274877907
 3374 01b8 00000840 		.word	1074266112
 3375 01bc 00000000 		.word	L
 3376 01c0 00000000 		.word	temp_L
 3377 01c4 00000000 		.word	observer_ElectricAngle
 3378 01c8 00000000 		.word	observer_speed
 3379 01cc 00000000 		.word	integre_observer_ElectricAngle
 3380 01d0 1F85EB51 		.word	1374389535
 3381 01d4 00000000 		.word	EN_90
 3382 01d8 00000000 		.word	delta_alpha
 3383 01dc 00000000 		.word	delata_beta
 3384 01e0 00000000 		.word	g_ElectricAngle
 3385              		.cfi_endproc
 3386              	.LFE342:
 3388              		.section	.text.ServoPro_Fast,"ax",%progbits
 3389              		.align	1
 3390              		.global	ServoPro_Fast
 3391              		.syntax unified
 3392              		.thumb
 3393              		.thumb_func
 3394              		.fpu fpv4-sp-d16
 3396              	ServoPro_Fast:
 3397              	.LFB348:
1250:Src/pid.c     **** 
1251:Src/pid.c     **** s32 ServoPro_En_count = 0;
1252:Src/pid.c     **** extern volatile s32 Encoder_Inc;   							// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ä»¯ï¿½ï¿½
1253:Src/pid.c     **** extern volatile s32 s_SpeedTimeAdd1;   					// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ä»¯ï¿½ï¿½
1254:Src/pid.c     **** extern volatile s32 start_speed_sample;
1255:Src/pid.c     ****  volatile  int pid_hall_ture_value1;
1256:Src/pid.c     ****   volatile  int pid_last_hall_ture_value1;
1257:Src/pid.c     ****  volatile int last_hall_sample_time = 0;
1258:Src/pid.c     ****  volatile int speed1,speed2,speed3;
1259:Src/pid.c     **** 
1260:Src/pid.c     **** extern volatile int time4_capture_ch1;
1261:Src/pid.c     **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 90


1262:Src/pid.c     **** int pid_hall_sample_time_point[10];
1263:Src/pid.c     **** int pid_hall_sample_time_index = 0;
1264:Src/pid.c     **** volatile int last_time4_capture_ch1 = 0;
1265:Src/pid.c     **** 
1266:Src/pid.c     **** volatile int hall_speed_sample_timeout_cnt=0; //ï¿½ï¿½ï¿½ãµ½30ms
1267:Src/pid.c     **** volatile int  hall_speed_sample_cnt = 0;
1268:Src/pid.c     **** volatile int hall_speed_sample_timeout =0;
1269:Src/pid.c     **** volatile int hall_cnt = 0;
1270:Src/pid.c     **** 
1271:Src/pid.c     **** volatile int hall_now_time = 0;
1272:Src/pid.c     **** volatile int hall_previous_1_time = 0;
1273:Src/pid.c     **** volatile int hall_previous_2_time = 0;
1274:Src/pid.c     **** volatile int hall_previous_3_time = 0;
1275:Src/pid.c     **** int64_t hall_total_time;
1276:Src/pid.c     **** 
1277:Src/pid.c     **** volatile int64_t Vel_PPS_raw1 =0;
1278:Src/pid.c     **** 
1279:Src/pid.c     **** void ServoPro_Fast(void)
1280:Src/pid.c     **** {
 3398              		.loc 1 1280 0
 3399              		.cfi_startproc
 3400              		@ args = 0, pretend = 0, frame = 8
 3401              		@ frame_needed = 0, uses_anonymous_args = 0
 3402 0000 00B5     		push	{lr}
 3403              	.LCFI23:
 3404              		.cfi_def_cfa_offset 4
 3405              		.cfi_offset 14, -4
 3406 0002 83B0     		sub	sp, sp, #12
 3407              	.LCFI24:
 3408              		.cfi_def_cfa_offset 16
 3409              	.LVL215:
1281:Src/pid.c     **** 	int64_t s_SpeedTimeAdd11=0;
1282:Src/pid.c     **** 
1283:Src/pid.c     **** 	
1284:Src/pid.c     **** 	int64_t speed;
1285:Src/pid.c     **** 
1286:Src/pid.c     **** 	
1287:Src/pid.c     **** 	static u8 PlusPosition_flag = 0;
1288:Src/pid.c     ****   static s32 s_count = 0;
1289:Src/pid.c     ****   static int s_hal_cnt=0;
1290:Src/pid.c     **** 	EXTI_HandleTypeDef EXTI_Handle;
1291:Src/pid.c     **** 	
1292:Src/pid.c     **** GPIOA->BSRR  |= (uint32_t)GPIO_PIN_15;
 3410              		.loc 1 1292 0
 3411 0004 4FF09042 		mov	r2, #1207959552
 3412 0008 9369     		ldr	r3, [r2, #24]
 3413 000a 43F40043 		orr	r3, r3, #32768
 3414 000e 9361     		str	r3, [r2, #24]
1293:Src/pid.c     **** 	
1294:Src/pid.c     **** //	GPIO_WriteBit(GPIOA,GPIO_Pin_15,0X01);
1295:Src/pid.c     **** 	//---------------------------------ï¿½ï¿½ï¿½Â´ï¿½ï¿½ï¿½20KHz(50us)Ö´ï¿½ï¿½-----------------
1296:Src/pid.c     **** //	if(g_BeginPIDFlag == 1)
1297:Src/pid.c     **** 	{
1298:Src/pid.c     **** 		GetElectricAngle();//ï¿½ï¿½È¡ï¿½ï¿½Ç¶ï¿½
 3415              		.loc 1 1298 0
 3416 0010 FFF7FEFF 		bl	GetElectricAngle
 3417              	.LVL216:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 91


1299:Src/pid.c     **** 		GetCurrent();   // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 	
 3418              		.loc 1 1299 0
 3419 0014 FFF7FEFF 		bl	GetCurrent
 3420              	.LVL217:
1300:Src/pid.c     **** 		
1301:Src/pid.c     **** //		hfi_update_angle();
1302:Src/pid.c     **** 		
1303:Src/pid.c     **** 	}
1304:Src/pid.c     **** 	
1305:Src/pid.c     **** 
1306:Src/pid.c     **** 	measure_R();
 3421              		.loc 1 1306 0
 3422 0018 FFF7FEFF 		bl	measure_R
 3423              	.LVL218:
1307:Src/pid.c     **** 	if(g_bEnableHB) 																											// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ or ï¿½ï¿½ï¿½ï¿½
 3424              		.loc 1 1307 0
 3425 001c 204B     		ldr	r3, .L237
 3426 001e 1B88     		ldrh	r3, [r3]
 3427 0020 1BB2     		sxth	r3, r3
 3428 0022 43B1     		cbz	r3, .L231
 3429              	.LBB2:
1308:Src/pid.c     **** 	{
1309:Src/pid.c     **** 		if(g_CmdMap[TAG_WORK_MODE] == MODE_OPEN)
 3430              		.loc 1 1309 0
 3431 0024 1F4B     		ldr	r3, .L237+4
 3432 0026 B3F80432 		ldrh	r3, [r3, #516]
 3433 002a 1BB2     		sxth	r3, r3
 3434 002c 1BBB     		cbnz	r3, .L232
1310:Src/pid.c     **** 		{
1311:Src/pid.c     **** 			OpenLoop();
 3435              		.loc 1 1311 0
 3436 002e FFF7FEFF 		bl	OpenLoop
 3437              	.LVL219:
 3438              	.L233:
1312:Src/pid.c     **** 		}
1313:Src/pid.c     **** 		else
1314:Src/pid.c     **** 		{
1315:Src/pid.c     **** 			CurrentPID();
1316:Src/pid.c     **** 		}
1317:Src/pid.c     **** 		motor_fault_check(); //Â¼Ã¬Â²Ã©ÂµÃ§Â»ÃºÃÃÂ·Ã±ÃÃÃÃ½Â³Â£Â¹Â¤ÃÃ·
 3439              		.loc 1 1317 0
 3440 0032 FFF7FEFF 		bl	motor_fault_check
 3441              	.LVL220:
 3442              	.L231:
 3443              	.LBE2:
1318:Src/pid.c     **** 	}
1319:Src/pid.c     **** 	
1320:Src/pid.c     **** 	GPIOA->BRR |= (uint32_t)GPIO_PIN_15;
 3444              		.loc 1 1320 0
 3445 0036 4FF09042 		mov	r2, #1207959552
 3446 003a 936A     		ldr	r3, [r2, #40]
 3447 003c 43F40043 		orr	r3, r3, #32768
 3448 0040 9362     		str	r3, [r2, #40]
1321:Src/pid.c     **** 	Pll_phase(  ( (s16)g_ElectricAngle_15bit  ), &pll_estimated_phase,    &pll_estimated_spd  );
 3449              		.loc 1 1321 0
 3450 0042 194B     		ldr	r3, .L237+8
 3451 0044 1868     		ldr	r0, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 92


 3452 0046 194A     		ldr	r2, .L237+12
 3453 0048 1949     		ldr	r1, .L237+16
 3454 004a 00B2     		sxth	r0, r0
 3455 004c FFF7FEFF 		bl	Pll_phase
 3456              	.LVL221:
1322:Src/pid.c     **** 
1323:Src/pid.c     **** 
1324:Src/pid.c     **** 	PlusPosition_flag ^= 0x1;
 3457              		.loc 1 1324 0
 3458 0050 184A     		ldr	r2, .L237+20
 3459 0052 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3460 0054 83F00103 		eor	r3, r3, #1
 3461 0058 1370     		strb	r3, [r2]
1325:Src/pid.c     **** 
1326:Src/pid.c     **** 	non_linear_flux_observer();
 3462              		.loc 1 1326 0
 3463 005a FFF7FEFF 		bl	non_linear_flux_observer
 3464              	.LVL222:
1327:Src/pid.c     **** 	s_count ++;
 3465              		.loc 1 1327 0
 3466 005e 164A     		ldr	r2, .L237+24
 3467 0060 1368     		ldr	r3, [r2]
 3468 0062 0133     		adds	r3, r3, #1
 3469 0064 1360     		str	r3, [r2]
1328:Src/pid.c     **** 	if(s_count >= (F_CUR_REGULATOR_HZ/F_SPD_REGULATOR_HZ))
 3470              		.loc 1 1328 0
 3471 0066 052B     		cmp	r3, #5
 3472 0068 08DC     		bgt	.L236
 3473              	.L234:
1329:Src/pid.c     **** 	{	
1330:Src/pid.c     **** 		s_count = 0;    		
1331:Src/pid.c     **** 		EXTI->SWIER1 |= 0x08;
1332:Src/pid.c     **** 		EXTI_Handle.Line = 3;
1333:Src/pid.c     **** 		HAL_EXTI_GenerateSWI(&EXTI_Handle);
1334:Src/pid.c     **** 	} 
1335:Src/pid.c     **** 
1336:Src/pid.c     **** //	GPIO_WriteBit(GPIOA,GPIO_Pin_15,0X00);
1337:Src/pid.c     **** //	GPIO_WriteBit(GPIOA,GPIO_Pin_15,0X00);
1338:Src/pid.c     **** 	
1339:Src/pid.c     **** 	SPI3->DR =0X0000;
 3474              		.loc 1 1339 0
 3475 006a 144B     		ldr	r3, .L237+28
 3476 006c 0022     		movs	r2, #0
 3477 006e DA60     		str	r2, [r3, #12]
1340:Src/pid.c     **** 	
1341:Src/pid.c     **** }
 3478              		.loc 1 1341 0
 3479 0070 03B0     		add	sp, sp, #12
 3480              	.LCFI25:
 3481              		.cfi_remember_state
 3482              		.cfi_def_cfa_offset 4
 3483              		@ sp needed
 3484 0072 5DF804FB 		ldr	pc, [sp], #4
 3485              	.L232:
 3486              	.LCFI26:
 3487              		.cfi_restore_state
 3488              	.LBB3:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 93


1315:Src/pid.c     **** 		}
 3489              		.loc 1 1315 0
 3490 0076 FFF7FEFF 		bl	CurrentPID
 3491              	.LVL223:
 3492 007a DAE7     		b	.L233
 3493              	.L236:
 3494              	.LBE3:
1330:Src/pid.c     **** 		EXTI->SWIER1 |= 0x08;
 3495              		.loc 1 1330 0
 3496 007c 1346     		mov	r3, r2
 3497 007e 0022     		movs	r2, #0
 3498 0080 1A60     		str	r2, [r3]
1331:Src/pid.c     **** 		EXTI_Handle.Line = 3;
 3499              		.loc 1 1331 0
 3500 0082 02F18042 		add	r2, r2, #1073741824
 3501 0086 02F58232 		add	r2, r2, #66560
 3502 008a 1369     		ldr	r3, [r2, #16]
 3503 008c 43F00803 		orr	r3, r3, #8
 3504 0090 1361     		str	r3, [r2, #16]
1332:Src/pid.c     **** 		HAL_EXTI_GenerateSWI(&EXTI_Handle);
 3505              		.loc 1 1332 0
 3506 0092 02A8     		add	r0, sp, #8
 3507 0094 0323     		movs	r3, #3
 3508 0096 40F8083D 		str	r3, [r0, #-8]!
1333:Src/pid.c     **** 	} 
 3509              		.loc 1 1333 0
 3510 009a FFF7FEFF 		bl	HAL_EXTI_GenerateSWI
 3511              	.LVL224:
 3512 009e E4E7     		b	.L234
 3513              	.L238:
 3514              		.align	2
 3515              	.L237:
 3516 00a0 00000000 		.word	g_bEnableHB
 3517 00a4 00000000 		.word	g_CmdMap
 3518 00a8 00000000 		.word	g_ElectricAngle_15bit
 3519 00ac 00000000 		.word	pll_estimated_spd
 3520 00b0 00000000 		.word	pll_estimated_phase
 3521 00b4 00000000 		.word	.LANCHOR36
 3522 00b8 00000000 		.word	.LANCHOR37
 3523 00bc 003C0040 		.word	1073757184
 3524              		.cfi_endproc
 3525              	.LFE348:
 3527              		.section	.text.Loop3_EnableManage,"ax",%progbits
 3528              		.align	1
 3529              		.global	Loop3_EnableManage
 3530              		.syntax unified
 3531              		.thumb
 3532              		.thumb_func
 3533              		.fpu fpv4-sp-d16
 3535              	Loop3_EnableManage:
 3536              	.LFB349:
1342:Src/pid.c     **** void Loop3_EnableManage(void)   //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æµï¿½Ê¹ï¿½Ü¹ï¿½ï¿½ï¿½
1343:Src/pid.c     **** {
 3537              		.loc 1 1343 0
 3538              		.cfi_startproc
 3539              		@ args = 0, pretend = 0, frame = 0
 3540              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 94


 3541              		@ link register save eliminated.
1344:Src/pid.c     **** 	//Ç¿ï¿½Ã¹Ø±ï¿½ï¿½Ù¶ï¿½
1345:Src/pid.c     **** 	if(g_CmdMap[TAG_MOTOR_ENABLE] == 1 
 3542              		.loc 1 1345 0
 3543 0000 3A4B     		ldr	r3, .L254
 3544 0002 B3F80232 		ldrh	r3, [r3, #514]
 3545 0006 1BB2     		sxth	r3, r3
 3546 0008 012B     		cmp	r3, #1
 3547 000a 20D0     		beq	.L250
 3548              	.L240:
1346:Src/pid.c     **** 			&& 	(	g_CmdMap[TAG_WORK_MODE] == MODE_CURRENT	  //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1347:Src/pid.c     **** 						|| g_CmdMap[TAG_WORK_MODE] == MODE_FORCE 	//ï¿½ï¿½ï¿½Ø»ï¿½				
1348:Src/pid.c     **** 						|| g_CmdMap[TAG_WORK_MODE] == MODE_SPEED	//ï¿½Ù¶È»ï¿½
1349:Src/pid.c     **** 						|| (g_CmdMap[TAG_WORK_MODE] == MODE_POSITION && PosAtDead_Flag == 0)  //Î»ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿
1350:Src/pid.c     **** 					)
1351:Src/pid.c     **** 		)
1352:Src/pid.c     **** 	{	
1353:Src/pid.c     **** 		pid_IQ.enable = 1;
1354:Src/pid.c     **** 		pid_ID.enable = 1;
1355:Src/pid.c     **** 	}
1356:Src/pid.c     **** 	else
1357:Src/pid.c     **** 	{
1358:Src/pid.c     **** 		pid_IQ.enable = 0;
 3549              		.loc 1 1358 0
 3550 000c 0023     		movs	r3, #0
 3551 000e 384A     		ldr	r2, .L254+4
 3552 0010 1360     		str	r3, [r2]
1359:Src/pid.c     **** 		pid_ID.enable = 0;
 3553              		.loc 1 1359 0
 3554 0012 384A     		ldr	r2, .L254+8
 3555 0014 1360     		str	r3, [r2]
 3556              	.L242:
1360:Src/pid.c     **** 	}
1361:Src/pid.c     **** 	if(g_CmdMap[TAG_MOTOR_ENABLE] == 1 && g_CmdMap[TAG_WORK_MODE] == MODE_FORCE )
 3557              		.loc 1 1361 0
 3558 0016 354B     		ldr	r3, .L254
 3559 0018 B3F80232 		ldrh	r3, [r3, #514]
 3560 001c 1BB2     		sxth	r3, r3
 3561 001e 012B     		cmp	r3, #1
 3562 0020 37D0     		beq	.L251
 3563              	.L243:
1362:Src/pid.c     **** 	{	
1363:Src/pid.c     **** 		pid_force.enable = 1;
1364:Src/pid.c     **** 	}
1365:Src/pid.c     **** 	else
1366:Src/pid.c     **** 	{
1367:Src/pid.c     **** 		pid_force.enable = 0;
 3564              		.loc 1 1367 0
 3565 0022 354B     		ldr	r3, .L254+12
 3566 0024 0022     		movs	r2, #0
 3567 0026 1A60     		str	r2, [r3]
 3568              	.L244:
1368:Src/pid.c     **** 	}	
1369:Src/pid.c     **** 	if(g_CmdMap[TAG_MOTOR_ENABLE] == 1 
 3569              		.loc 1 1369 0
 3570 0028 304B     		ldr	r3, .L254
 3571 002a B3F80232 		ldrh	r3, [r3, #514]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 95


 3572 002e 1BB2     		sxth	r3, r3
 3573 0030 012B     		cmp	r3, #1
 3574 0032 38D0     		beq	.L252
 3575              	.L245:
1370:Src/pid.c     **** 			&& ( g_CmdMap[TAG_WORK_MODE] == MODE_SPEED	//ï¿½Ù¶È»ï¿½
1371:Src/pid.c     **** 					|| (g_CmdMap[TAG_WORK_MODE] == MODE_POSITION && PosAtDead_Flag == 0)  //Î»ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½
1372:Src/pid.c     **** 					)
1373:Src/pid.c     **** 		)
1374:Src/pid.c     **** 	{	
1375:Src/pid.c     **** 		pid_spd.enable = 1;
1376:Src/pid.c     **** 	}
1377:Src/pid.c     **** 	else
1378:Src/pid.c     **** 	{
1379:Src/pid.c     **** 		pid_spd.enable = 0;
 3576              		.loc 1 1379 0
 3577 0034 314B     		ldr	r3, .L254+16
 3578 0036 0022     		movs	r2, #0
 3579 0038 1A60     		str	r2, [r3]
 3580              	.L247:
1380:Src/pid.c     **** 	}
1381:Src/pid.c     **** 	if(	g_CmdMap[TAG_MOTOR_ENABLE] == 1 
 3581              		.loc 1 1381 0
 3582 003a 2C4B     		ldr	r3, .L254
 3583 003c B3F80232 		ldrh	r3, [r3, #514]
 3584 0040 1BB2     		sxth	r3, r3
 3585 0042 012B     		cmp	r3, #1
 3586 0044 43D0     		beq	.L253
 3587              	.L248:
1382:Src/pid.c     **** 			&& (g_CmdMap[TAG_WORK_MODE] == MODE_POSITION && PosAtDead_Flag == 0) //Î»ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½ï¿½
1383:Src/pid.c     **** 		)
1384:Src/pid.c     **** 	{	
1385:Src/pid.c     **** 		pid_pos.enable = 1;
1386:Src/pid.c     **** 	}
1387:Src/pid.c     **** 	else
1388:Src/pid.c     **** 	{
1389:Src/pid.c     **** 		pid_pos.enable = 0;
 3588              		.loc 1 1389 0
 3589 0046 2E4B     		ldr	r3, .L254+20
 3590 0048 0022     		movs	r2, #0
 3591 004a 1A60     		str	r2, [r3]
1390:Src/pid.c     **** 	}
1391:Src/pid.c     **** }
 3592              		.loc 1 1391 0
 3593 004c 7047     		bx	lr
 3594              	.L250:
1346:Src/pid.c     **** 						|| g_CmdMap[TAG_WORK_MODE] == MODE_FORCE 	//ï¿½ï¿½ï¿½Ø»ï¿½				
 3595              		.loc 1 1346 0
 3596 004e 274B     		ldr	r3, .L254
 3597 0050 B3F80432 		ldrh	r3, [r3, #516]
 3598 0054 1BB2     		sxth	r3, r3
 3599 0056 012B     		cmp	r3, #1
 3600 0058 15D0     		beq	.L241
1347:Src/pid.c     **** 						|| g_CmdMap[TAG_WORK_MODE] == MODE_SPEED	//ï¿½Ù¶È»ï¿½
 3601              		.loc 1 1347 0
 3602 005a 244B     		ldr	r3, .L254
 3603 005c B3F80432 		ldrh	r3, [r3, #516]
 3604 0060 1BB2     		sxth	r3, r3
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 96


 3605 0062 042B     		cmp	r3, #4
 3606 0064 0FD0     		beq	.L241
1348:Src/pid.c     **** 						|| (g_CmdMap[TAG_WORK_MODE] == MODE_POSITION && PosAtDead_Flag == 0)  //Î»ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿
 3607              		.loc 1 1348 0
 3608 0066 214B     		ldr	r3, .L254
 3609 0068 B3F80432 		ldrh	r3, [r3, #516]
 3610 006c 1BB2     		sxth	r3, r3
 3611 006e 022B     		cmp	r3, #2
 3612 0070 09D0     		beq	.L241
1349:Src/pid.c     **** 					)
 3613              		.loc 1 1349 0
 3614 0072 1E4B     		ldr	r3, .L254
 3615 0074 B3F80432 		ldrh	r3, [r3, #516]
 3616 0078 1BB2     		sxth	r3, r3
 3617 007a 032B     		cmp	r3, #3
 3618 007c C6D1     		bne	.L240
1349:Src/pid.c     **** 					)
 3619              		.loc 1 1349 0 is_stmt 0 discriminator 1
 3620 007e 214B     		ldr	r3, .L254+24
 3621 0080 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3622 0082 002B     		cmp	r3, #0
 3623 0084 C2D1     		bne	.L240
 3624              	.L241:
1353:Src/pid.c     **** 		pid_ID.enable = 1;
 3625              		.loc 1 1353 0 is_stmt 1
 3626 0086 0123     		movs	r3, #1
 3627 0088 194A     		ldr	r2, .L254+4
 3628 008a 1360     		str	r3, [r2]
1354:Src/pid.c     **** 	}
 3629              		.loc 1 1354 0
 3630 008c 194A     		ldr	r2, .L254+8
 3631 008e 1360     		str	r3, [r2]
 3632 0090 C1E7     		b	.L242
 3633              	.L251:
1361:Src/pid.c     **** 	{	
 3634              		.loc 1 1361 0 discriminator 1
 3635 0092 164B     		ldr	r3, .L254
 3636 0094 B3F80432 		ldrh	r3, [r3, #516]
 3637 0098 1BB2     		sxth	r3, r3
 3638 009a 042B     		cmp	r3, #4
 3639 009c C1D1     		bne	.L243
1363:Src/pid.c     **** 	}
 3640              		.loc 1 1363 0
 3641 009e 164B     		ldr	r3, .L254+12
 3642 00a0 0122     		movs	r2, #1
 3643 00a2 1A60     		str	r2, [r3]
 3644 00a4 C0E7     		b	.L244
 3645              	.L252:
1370:Src/pid.c     **** 					|| (g_CmdMap[TAG_WORK_MODE] == MODE_POSITION && PosAtDead_Flag == 0)  //Î»ï¿½ï¿½ï¿½Ò²ï¿½ï¿½ï¿½
 3646              		.loc 1 1370 0
 3647 00a6 114B     		ldr	r3, .L254
 3648 00a8 B3F80432 		ldrh	r3, [r3, #516]
 3649 00ac 1BB2     		sxth	r3, r3
 3650 00ae 022B     		cmp	r3, #2
 3651 00b0 09D0     		beq	.L246
1371:Src/pid.c     **** 					)
 3652              		.loc 1 1371 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 97


 3653 00b2 0E4B     		ldr	r3, .L254
 3654 00b4 B3F80432 		ldrh	r3, [r3, #516]
 3655 00b8 1BB2     		sxth	r3, r3
 3656 00ba 032B     		cmp	r3, #3
 3657 00bc BAD1     		bne	.L245
1371:Src/pid.c     **** 					)
 3658              		.loc 1 1371 0 is_stmt 0 discriminator 1
 3659 00be 114B     		ldr	r3, .L254+24
 3660 00c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3661 00c2 002B     		cmp	r3, #0
 3662 00c4 B6D1     		bne	.L245
 3663              	.L246:
1375:Src/pid.c     **** 	}
 3664              		.loc 1 1375 0 is_stmt 1
 3665 00c6 0D4B     		ldr	r3, .L254+16
 3666 00c8 0122     		movs	r2, #1
 3667 00ca 1A60     		str	r2, [r3]
 3668 00cc B5E7     		b	.L247
 3669              	.L253:
1382:Src/pid.c     **** 		)
 3670              		.loc 1 1382 0
 3671 00ce 074B     		ldr	r3, .L254
 3672 00d0 B3F80432 		ldrh	r3, [r3, #516]
 3673 00d4 1BB2     		sxth	r3, r3
 3674 00d6 032B     		cmp	r3, #3
 3675 00d8 B5D1     		bne	.L248
1382:Src/pid.c     **** 		)
 3676              		.loc 1 1382 0 is_stmt 0 discriminator 1
 3677 00da 0A4B     		ldr	r3, .L254+24
 3678 00dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3679 00de 002B     		cmp	r3, #0
 3680 00e0 B1D1     		bne	.L248
1385:Src/pid.c     **** 	}
 3681              		.loc 1 1385 0 is_stmt 1
 3682 00e2 074B     		ldr	r3, .L254+20
 3683 00e4 0122     		movs	r2, #1
 3684 00e6 1A60     		str	r2, [r3]
 3685 00e8 7047     		bx	lr
 3686              	.L255:
 3687 00ea 00BF     		.align	2
 3688              	.L254:
 3689 00ec 00000000 		.word	g_CmdMap
 3690 00f0 00000000 		.word	pid_IQ
 3691 00f4 00000000 		.word	pid_ID
 3692 00f8 00000000 		.word	pid_force
 3693 00fc 00000000 		.word	pid_spd
 3694 0100 00000000 		.word	pid_pos
 3695 0104 00000000 		.word	.LANCHOR21
 3696              		.cfi_endproc
 3697              	.LFE349:
 3699              		.section	.text.Pos_Spd_PID,"ax",%progbits
 3700              		.align	1
 3701              		.syntax unified
 3702              		.thumb
 3703              		.thumb_func
 3704              		.fpu fpv4-sp-d16
 3706              	Pos_Spd_PID:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 98


 3707              	.LFB344:
1076:Src/pid.c     **** 	static s32 s_count = 0; 	// Ê¹ï¿½ï¿½Hï¿½Åºï¿½ï¿½ï¿½ï¿½Ê±Ê±ï¿½ï¿½
 3708              		.loc 1 1076 0
 3709              		.cfi_startproc
 3710              		@ args = 0, pretend = 0, frame = 0
 3711              		@ frame_needed = 0, uses_anonymous_args = 0
 3712 0000 10B5     		push	{r4, lr}
 3713              	.LCFI27:
 3714              		.cfi_def_cfa_offset 8
 3715              		.cfi_offset 4, -8
 3716              		.cfi_offset 14, -4
1079:Src/pid.c     **** 	//CheckModeChange();
 3717              		.loc 1 1079 0
 3718 0002 4FF09042 		mov	r2, #1207959552
 3719 0006 936A     		ldr	r3, [r2, #40]
 3720 0008 43F01003 		orr	r3, r3, #16
 3721 000c 9362     		str	r3, [r2, #40]
1081:Src/pid.c     **** 	if(g_servo_cmd_period_cnt<2000)
 3722              		.loc 1 1081 0
 3723 000e FFF7FEFF 		bl	MTPro
 3724              	.LVL225:
1082:Src/pid.c     **** 	{
 3725              		.loc 1 1082 0
 3726 0012 5E4B     		ldr	r3, .L274
 3727 0014 1B68     		ldr	r3, [r3]
 3728 0016 B3F5FA6F 		cmp	r3, #2000
 3729 001a 02DA     		bge	.L257
1084:Src/pid.c     **** 	}
 3730              		.loc 1 1084 0
 3731 001c 0133     		adds	r3, r3, #1
 3732 001e 5B4A     		ldr	r2, .L274
 3733 0020 1360     		str	r3, [r2]
 3734              	.L257:
1086:Src/pid.c     **** 	
 3735              		.loc 1 1086 0
 3736 0022 FFF7FEFF 		bl	get_average_force_data
 3737              	.LVL226:
1088:Src/pid.c     **** 	{
 3738              		.loc 1 1088 0
 3739 0026 5A4B     		ldr	r3, .L274+4
 3740 0028 B3F80432 		ldrh	r3, [r3, #516]
 3741 002c 1BB2     		sxth	r3, r3
 3742 002e 042B     		cmp	r3, #4
 3743 0030 7BD0     		beq	.L273
 3744              	.L258:
1094:Src/pid.c     **** 	if(++s_count>=(F_SPD_REGULATOR_HZ/F_POS_REGULATOR_HZ))
 3745              		.loc 1 1094 0
 3746 0032 FFF7FEFF 		bl	Loop3_EnableManage
 3747              	.LVL227:
1095:Src/pid.c     **** 	{
 3748              		.loc 1 1095 0
 3749 0036 574A     		ldr	r2, .L274+8
 3750 0038 1368     		ldr	r3, [r2]
 3751 003a 0133     		adds	r3, r3, #1
 3752 003c 1360     		str	r3, [r2]
 3753 003e 002B     		cmp	r3, #0
 3754 0040 18DD     		ble	.L259
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 99


1097:Src/pid.c     **** 		Flag_1ms = 1;
 3755              		.loc 1 1097 0
 3756 0042 1346     		mov	r3, r2
 3757 0044 0022     		movs	r2, #0
 3758 0046 1A60     		str	r2, [r3]
1098:Src/pid.c     **** 		if(++s_count_50ms>50)
 3759              		.loc 1 1098 0
 3760 0048 534B     		ldr	r3, .L274+12
 3761 004a 0122     		movs	r2, #1
 3762 004c 1A70     		strb	r2, [r3]
1099:Src/pid.c     **** 		{
 3763              		.loc 1 1099 0
 3764 004e 534A     		ldr	r2, .L274+16
 3765 0050 1388     		ldrh	r3, [r2]
 3766 0052 0133     		adds	r3, r3, #1
 3767 0054 1BB2     		sxth	r3, r3
 3768 0056 1380     		strh	r3, [r2]	@ movhi
 3769 0058 322B     		cmp	r3, #50
 3770 005a 05DD     		ble	.L260
1101:Src/pid.c     **** 			Flag_50ms = 1;
 3771              		.loc 1 1101 0
 3772 005c 1346     		mov	r3, r2
 3773 005e 0022     		movs	r2, #0
 3774 0060 1A80     		strh	r2, [r3]	@ movhi
1102:Src/pid.c     **** 		}
 3775              		.loc 1 1102 0
 3776 0062 4F4B     		ldr	r3, .L274+20
 3777 0064 0122     		movs	r2, #1
 3778 0066 1A70     		strb	r2, [r3]
 3779              	.L260:
1107:Src/pid.c     **** 		Stroke_protection();
 3780              		.loc 1 1107 0
 3781 0068 FFF7FEFF 		bl	Get_Pos_Rod
 3782              	.LVL228:
1108:Src/pid.c     **** 		
 3783              		.loc 1 1108 0
 3784 006c FFF7FEFF 		bl	Stroke_protection
 3785              	.LVL229:
1112:Src/pid.c     **** 		}
 3786              		.loc 1 1112 0
 3787 0070 FFF7FEFF 		bl	Gripper_control
 3788              	.LVL230:
 3789              	.L259:
1116:Src/pid.c     **** 	
 3790              		.loc 1 1116 0
 3791 0074 FFF7FEFF 		bl	icmu_sdtransmission_test
 3792              	.LVL231:
1119:Src/pid.c     **** 	{
 3793              		.loc 1 1119 0
 3794 0078 454B     		ldr	r3, .L274+4
 3795 007a B3F80432 		ldrh	r3, [r3, #516]
 3796 007e 1BB2     		sxth	r3, r3
 3797 0080 032B     		cmp	r3, #3
 3798 0082 0BD0     		beq	.L261
1119:Src/pid.c     **** 	{
 3799              		.loc 1 1119 0 is_stmt 0 discriminator 1
 3800 0084 424B     		ldr	r3, .L274+4
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 100


 3801 0086 B3F80432 		ldrh	r3, [r3, #516]
 3802 008a 1BB2     		sxth	r3, r3
 3803 008c 022B     		cmp	r3, #2
 3804 008e 05D0     		beq	.L261
1119:Src/pid.c     **** 	{
 3805              		.loc 1 1119 0 discriminator 2
 3806 0090 3F4B     		ldr	r3, .L274+4
 3807 0092 B3F80432 		ldrh	r3, [r3, #516]
 3808 0096 1BB2     		sxth	r3, r3
 3809 0098 042B     		cmp	r3, #4
 3810 009a 01D1     		bne	.L262
 3811              	.L261:
1121:Src/pid.c     **** 	}	
 3812              		.loc 1 1121 0 is_stmt 1
 3813 009c FFF7FEFF 		bl	SpeedPID
 3814              	.LVL232:
 3815              	.L262:
1124:Src/pid.c     **** 	{
 3816              		.loc 1 1124 0
 3817 00a0 3B4B     		ldr	r3, .L274+4
 3818 00a2 B3F80232 		ldrh	r3, [r3, #514]
 3819 00a6 1BB2     		sxth	r3, r3
 3820 00a8 002B     		cmp	r3, #0
 3821 00aa 41D0     		beq	.L263
1124:Src/pid.c     **** 	{
 3822              		.loc 1 1124 0 is_stmt 0 discriminator 1
 3823 00ac 3D4B     		ldr	r3, .L274+24
 3824 00ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3825 00b0 DBB2     		uxtb	r3, r3
 3826 00b2 012B     		cmp	r3, #1
 3827 00b4 3CD0     		beq	.L263
1124:Src/pid.c     **** 	{
 3828              		.loc 1 1124 0 discriminator 2
 3829 00b6 3C4B     		ldr	r3, .L274+28
 3830 00b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3831 00ba DBB2     		uxtb	r3, r3
 3832 00bc 012B     		cmp	r3, #1
 3833 00be 37D0     		beq	.L263
1124:Src/pid.c     **** 	{
 3834              		.loc 1 1124 0 discriminator 3
 3835 00c0 3A4B     		ldr	r3, .L274+32
 3836 00c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3837 00c4 DBB2     		uxtb	r3, r3
 3838 00c6 012B     		cmp	r3, #1
 3839 00c8 32D0     		beq	.L263
1153:Src/pid.c     **** 	{
 3840              		.loc 1 1153 0 is_stmt 1
 3841 00ca 314B     		ldr	r3, .L274+4
 3842 00cc B3F80232 		ldrh	r3, [r3, #514]
 3843 00d0 1BB2     		sxth	r3, r3
 3844 00d2 012B     		cmp	r3, #1
 3845 00d4 58D1     		bne	.L256
1153:Src/pid.c     **** 	{
 3846              		.loc 1 1153 0 is_stmt 0 discriminator 1
 3847 00d6 334B     		ldr	r3, .L274+24
 3848 00d8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3849 00da 002B     		cmp	r3, #0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 101


 3850 00dc 54D1     		bne	.L256
1155:Src/pid.c     **** 		s_Disable_Delay = 0;
 3851              		.loc 1 1155 0 is_stmt 1
 3852 00de 344B     		ldr	r3, .L274+36
 3853 00e0 1B68     		ldr	r3, [r3]
 3854 00e2 022B     		cmp	r3, #2
 3855 00e4 02DC     		bgt	.L269
1155:Src/pid.c     **** 		s_Disable_Delay = 0;
 3856              		.loc 1 1155 0 is_stmt 0 discriminator 1
 3857 00e6 0133     		adds	r3, r3, #1
 3858 00e8 314A     		ldr	r2, .L274+36
 3859 00ea 1360     		str	r3, [r2]
 3860              	.L269:
1156:Src/pid.c     **** 		if (s_Enable_Delay == 1)  // ï¿½Ó½ï¿½ï¿½Ü±ï¿½ÎªÊ¹ï¿½ï¿½ 50ms
 3861              		.loc 1 1156 0 is_stmt 1
 3862 00ec 314B     		ldr	r3, .L274+40
 3863 00ee 0022     		movs	r2, #0
 3864 00f0 1A60     		str	r2, [r3]
1157:Src/pid.c     **** 		{
 3865              		.loc 1 1157 0
 3866 00f2 2F4B     		ldr	r3, .L274+36
 3867 00f4 1B68     		ldr	r3, [r3]
 3868 00f6 012B     		cmp	r3, #1
 3869 00f8 46D1     		bne	.L256
1159:Src/pid.c     **** 			{
 3870              		.loc 1 1159 0
 3871 00fa 254B     		ldr	r3, .L274+4
 3872 00fc B3F80432 		ldrh	r3, [r3, #516]
 3873 0100 1BB2     		sxth	r3, r3
 3874 0102 022B     		cmp	r3, #2
 3875 0104 05D0     		beq	.L270
1159:Src/pid.c     **** 			{
 3876              		.loc 1 1159 0 is_stmt 0 discriminator 1
 3877 0106 224B     		ldr	r3, .L274+4
 3878 0108 B3F80432 		ldrh	r3, [r3, #516]
 3879 010c 1BB2     		sxth	r3, r3
 3880 010e 012B     		cmp	r3, #1
 3881 0110 05D1     		bne	.L271
 3882              	.L270:
1161:Src/pid.c     **** 				g_CmdMap[CMD_CUR_SET_PU] = 0;
 3883              		.loc 1 1161 0 is_stmt 1
 3884 0112 1F4B     		ldr	r3, .L274+4
 3885 0114 0022     		movs	r2, #0
 3886 0116 A3F84620 		strh	r2, [r3, #70]	@ movhi
1162:Src/pid.c     **** 			}
 3887              		.loc 1 1162 0
 3888 011a A3F84220 		strh	r2, [r3, #66]	@ movhi
 3889              	.L271:
1164:Src/pid.c     **** 			PWM_Enable();			
 3890              		.loc 1 1164 0
 3891 011e 264B     		ldr	r3, .L274+44
 3892 0120 0022     		movs	r2, #0
 3893 0122 1A60     		str	r2, [r3]
1165:Src/pid.c     **** 		}
 3894              		.loc 1 1165 0
 3895 0124 FFF7FEFF 		bl	PWM_Enable
 3896              	.LVL233:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 102


 3897 0128 2EE0     		b	.L256
 3898              	.L273:
1090:Src/pid.c     **** 	}
 3899              		.loc 1 1090 0
 3900 012a FFF7FEFF 		bl	ForcePID
 3901              	.LVL234:
 3902 012e 80E7     		b	.L258
 3903              	.L263:
1126:Src/pid.c     **** 		Motor_forbidden = 0;
 3904              		.loc 1 1126 0
 3905 0130 0023     		movs	r3, #0
 3906 0132 1F4A     		ldr	r2, .L274+36
 3907 0134 1360     		str	r3, [r2]
1127:Src/pid.c     **** 		if(g_CmdMap[TAG_WORK_MODE] == MODE_SPEED ||g_CmdMap[TAG_WORK_MODE] == MODE_CURRENT )
 3908              		.loc 1 1127 0
 3909 0136 1B4A     		ldr	r2, .L274+24
 3910 0138 1370     		strb	r3, [r2]
1128:Src/pid.c     **** 		{
 3911              		.loc 1 1128 0
 3912 013a 154B     		ldr	r3, .L274+4
 3913 013c B3F80432 		ldrh	r3, [r3, #516]
 3914 0140 1BB2     		sxth	r3, r3
 3915 0142 022B     		cmp	r3, #2
 3916 0144 05D0     		beq	.L265
1128:Src/pid.c     **** 		{
 3917              		.loc 1 1128 0 is_stmt 0 discriminator 1
 3918 0146 124B     		ldr	r3, .L274+4
 3919 0148 B3F80432 		ldrh	r3, [r3, #516]
 3920 014c 1BB2     		sxth	r3, r3
 3921 014e 012B     		cmp	r3, #1
 3922 0150 05D1     		bne	.L266
 3923              	.L265:
1130:Src/pid.c     **** 			g_CmdMap[CMD_CUR_SET_PU] = 0;
 3924              		.loc 1 1130 0 is_stmt 1
 3925 0152 0F4B     		ldr	r3, .L274+4
 3926 0154 0022     		movs	r2, #0
 3927 0156 A3F84620 		strh	r2, [r3, #70]	@ movhi
1131:Src/pid.c     **** 		}
 3928              		.loc 1 1131 0
 3929 015a A3F84220 		strh	r2, [r3, #66]	@ movhi
 3930              	.L266:
1133:Src/pid.c     **** 		{	
 3931              		.loc 1 1133 0
 3932 015e 0C4B     		ldr	r3, .L274+4
 3933 0160 B3F85430 		ldrh	r3, [r3, #84]
 3934 0164 1BB2     		sxth	r3, r3
 3935 0166 23B1     		cbz	r3, .L267
1135:Src/pid.c     **** 		}			
 3936              		.loc 1 1135 0
 3937 0168 094B     		ldr	r3, .L274+4
 3938 016a B3F84C20 		ldrh	r2, [r3, #76]
 3939 016e A3F84820 		strh	r2, [r3, #72]	@ movhi
 3940              	.L267:
1141:Src/pid.c     ****       Motor_emergercy_stop =0;
 3941              		.loc 1 1141 0
 3942 0172 0024     		movs	r4, #0
 3943 0174 104B     		ldr	r3, .L274+44
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 103


 3944 0176 1C60     		str	r4, [r3]
1142:Src/pid.c     **** 			Motor_pause_flag = 0;
 3945              		.loc 1 1142 0
 3946 0178 0B4B     		ldr	r3, .L274+28
 3947 017a 1C70     		strb	r4, [r3]
1143:Src/pid.c     **** 			PWM_Disable();
 3948              		.loc 1 1143 0
 3949 017c 0B4B     		ldr	r3, .L274+32
 3950 017e 1C70     		strb	r4, [r3]
1144:Src/pid.c     **** 		}
 3951              		.loc 1 1144 0
 3952 0180 FFF7FEFF 		bl	PWM_Disable
 3953              	.LVL235:
1150:Src/pid.c     **** 		return;
 3954              		.loc 1 1150 0
 3955 0184 0D4B     		ldr	r3, .L274+48
 3956 0186 1C60     		str	r4, [r3]
 3957              	.L256:
1169:Src/pid.c     **** s32 I_Alpha, I_Beta; 
 3958              		.loc 1 1169 0
 3959 0188 10BD     		pop	{r4, pc}
 3960              	.L275:
 3961 018a 00BF     		.align	2
 3962              	.L274:
 3963 018c 00000000 		.word	g_servo_cmd_period_cnt
 3964 0190 00000000 		.word	g_CmdMap
 3965 0194 00000000 		.word	.LANCHOR38
 3966 0198 00000000 		.word	Flag_1ms
 3967 019c 00000000 		.word	s_count_50ms
 3968 01a0 00000000 		.word	Flag_50ms
 3969 01a4 00000000 		.word	Motor_forbidden
 3970 01a8 00000000 		.word	Motor_emergercy_stop
 3971 01ac 00000000 		.word	Motor_pause_flag
 3972 01b0 00000000 		.word	.LANCHOR39
 3973 01b4 00000000 		.word	.LANCHOR40
 3974 01b8 00000000 		.word	g_Timer1CCR
 3975 01bc 00000000 		.word	.LANCHOR0
 3976              		.cfi_endproc
 3977              	.LFE344:
 3979              		.section	.text.work_var_updata,"ax",%progbits
 3980              		.align	1
 3981              		.global	work_var_updata
 3982              		.syntax unified
 3983              		.thumb
 3984              		.thumb_func
 3985              		.fpu fpv4-sp-d16
 3987              	work_var_updata:
 3988              	.LFB350:
1392:Src/pid.c     **** // ï¿½ï¿½ï¿½Â¿ï¿½ï¿½Æ²ï¿½ï¿½ï¿½
1393:Src/pid.c     **** void work_var_updata(void)
1394:Src/pid.c     **** {
 3989              		.loc 1 1394 0
 3990              		.cfi_startproc
 3991              		@ args = 0, pretend = 0, frame = 0
 3992              		@ frame_needed = 0, uses_anonymous_args = 0
 3993              		@ link register save eliminated.
 3994 0000 70B4     		push	{r4, r5, r6}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 104


 3995              	.LCFI28:
 3996              		.cfi_def_cfa_offset 12
 3997              		.cfi_offset 4, -12
 3998              		.cfi_offset 5, -8
 3999              		.cfi_offset 6, -4
1395:Src/pid.c     ****   /************************************************************************************************
1396:Src/pid.c     **** 	g_Encode_offset = (int)g_CmdMap[MOT_EANGLE_OFFSET];
 4000              		.loc 1 1396 0
 4001 0002 474A     		ldr	r2, .L281
 4002 0004 B2F84C32 		ldrh	r3, [r2, #588]
 4003 0008 1BB2     		sxth	r3, r3
 4004 000a 4649     		ldr	r1, .L281+4
 4005 000c 0B60     		str	r3, [r1]
1397:Src/pid.c     **** 	if (g_CmdMap[SEV_PARAME_LOCKED] != 0)	 	// ï¿½Ç·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 4006              		.loc 1 1397 0
 4007 000e B2F8A032 		ldrh	r3, [r2, #672]
 4008 0012 1BB2     		sxth	r3, r3
 4009 0014 002B     		cmp	r3, #0
 4010 0016 4CD1     		bne	.L280
1398:Src/pid.c     **** 	{
1399:Src/pid.c     **** 		pid_pos.Kp = g_ThreeLoopParaBefLock[(SEV_POSITION_P)&0x0F];
1400:Src/pid.c     **** 		pid_pos.Ki = g_ThreeLoopParaBefLock[(SEV_POSITION_I)&0x0F];
1401:Src/pid.c     **** 		pid_pos.Kd = 0;
1402:Src/pid.c     **** 		pid_pos.dead_zone = g_ThreeLoopParaBefLock[(SEV_POSITION_DS)&0x0F];
1403:Src/pid.c     **** 		
1404:Src/pid.c     **** 		pid_spd.Kp = g_ThreeLoopParaBefLock[(SEV_SPEED_P)&0x0F];
1405:Src/pid.c     **** 		pid_spd.Ki = g_ThreeLoopParaBefLock[(SEV_SPEED_I)&0x0F];
1406:Src/pid.c     **** 		pid_spd.Kd = 0;
1407:Src/pid.c     **** 		pid_spd.dead_zone = g_ThreeLoopParaBefLock[(SEV_SPEED_DS)&0x0F];
1408:Src/pid.c     **** 
1409:Src/pid.c     **** 		pid_IQ.Kp = g_ThreeLoopParaBefLock[(SEV_CURRENT_P)&0x0F];
1410:Src/pid.c     **** 		pid_IQ.Ki = g_ThreeLoopParaBefLock[(SEV_CURRENT_I)&0x0F];
1411:Src/pid.c     **** 		pid_IQ.Kd = 0;
1412:Src/pid.c     **** 		pid_IQ.dead_zone = 4;	
1413:Src/pid.c     **** 
1414:Src/pid.c     **** 		pid_ID.Kp = g_ThreeLoopParaBefLock[(SEV_CURRENT_P)&0x0F];
1415:Src/pid.c     **** 		pid_ID.Ki = g_ThreeLoopParaBefLock[(SEV_CURRENT_I)&0x0F];
1416:Src/pid.c     **** 		pid_ID.Kd = 0;
1417:Src/pid.c     **** 		pid_ID.dead_zone = 4;	
1418:Src/pid.c     **** 
1419:Src/pid.c     **** 		pid_force.Kp = g_ThreeLoopParaBefLock[(SEV_FORCE_P)&0x0F];
1420:Src/pid.c     **** 		pid_force.Ki = g_ThreeLoopParaBefLock[(SEV_FORCE_I)&0x0F];
1421:Src/pid.c     **** 		pid_force.Kd = g_ThreeLoopParaBefLock[(SEV_FORCE_D)&0x0F];
1422:Src/pid.c     **** 		pid_force.dead_zone = g_ThreeLoopParaBefLock[(SEV_FORCE_DS)&0x0F];
1423:Src/pid.c     **** 		gPos_ds = g_ThreeLoopParaBefLock[(SEV_POSITION_DS)&0x0F];
1424:Src/pid.c     **** 	}
1425:Src/pid.c     **** 	else
1426:Src/pid.c     **** 	{
1427:Src/pid.c     **** 		pid_pos.Kp = g_CmdMap[SEV_POSITION_P];
 4011              		.loc 1 1427 0
 4012 0018 414B     		ldr	r3, .L281
 4013 001a B3F8B012 		ldrh	r1, [r3, #688]
 4014 001e 09B2     		sxth	r1, r1
 4015 0020 414A     		ldr	r2, .L281+8
 4016 0022 9160     		str	r1, [r2, #8]
1428:Src/pid.c     **** 		pid_pos.Ki = g_CmdMap[SEV_POSITION_I];
 4017              		.loc 1 1428 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 105


 4018 0024 B3F8B212 		ldrh	r1, [r3, #690]
 4019 0028 09B2     		sxth	r1, r1
 4020 002a D160     		str	r1, [r2, #12]
1429:Src/pid.c     **** 		pid_pos.Kd = 0;
 4021              		.loc 1 1429 0
 4022 002c 0021     		movs	r1, #0
 4023 002e 1161     		str	r1, [r2, #16]
1430:Src/pid.c     **** 		pid_pos.dead_zone = g_CmdMap[SEV_POSITION_DS];
 4024              		.loc 1 1430 0
 4025 0030 B3F8B602 		ldrh	r0, [r3, #694]
 4026 0034 00B2     		sxth	r0, r0
 4027 0036 5061     		str	r0, [r2, #20]
1431:Src/pid.c     **** 		
1432:Src/pid.c     **** 		pid_spd.Kp = g_CmdMap[SEV_SPEED_P];
 4028              		.loc 1 1432 0
 4029 0038 B3F8A802 		ldrh	r0, [r3, #680]
 4030 003c 00B2     		sxth	r0, r0
 4031 003e 3B4A     		ldr	r2, .L281+12
 4032 0040 9060     		str	r0, [r2, #8]
1433:Src/pid.c     **** 		pid_spd.Ki = g_CmdMap[SEV_SPEED_I];
 4033              		.loc 1 1433 0
 4034 0042 B3F8AA02 		ldrh	r0, [r3, #682]
 4035 0046 00B2     		sxth	r0, r0
 4036 0048 D060     		str	r0, [r2, #12]
1434:Src/pid.c     **** 		pid_spd.Kd = 0;
 4037              		.loc 1 1434 0
 4038 004a 1161     		str	r1, [r2, #16]
1435:Src/pid.c     **** 		pid_spd.dead_zone = g_CmdMap[SEV_SPEED_DS];
 4039              		.loc 1 1435 0
 4040 004c B3F8AE02 		ldrh	r0, [r3, #686]
 4041 0050 00B2     		sxth	r0, r0
 4042 0052 5061     		str	r0, [r2, #20]
1436:Src/pid.c     **** 
1437:Src/pid.c     **** 		pid_IQ.Kp = g_CmdMap[SEV_CURRENT_P];
 4043              		.loc 1 1437 0
 4044 0054 B3F8A202 		ldrh	r0, [r3, #674]
 4045 0058 00B2     		sxth	r0, r0
 4046 005a 354A     		ldr	r2, .L281+16
 4047 005c 9060     		str	r0, [r2, #8]
1438:Src/pid.c     **** 		pid_IQ.Ki = g_CmdMap[SEV_CURRENT_I];
 4048              		.loc 1 1438 0
 4049 005e B3F8A402 		ldrh	r0, [r3, #676]
 4050 0062 00B2     		sxth	r0, r0
 4051 0064 D060     		str	r0, [r2, #12]
1439:Src/pid.c     **** 		pid_IQ.Kd = 0;
 4052              		.loc 1 1439 0
 4053 0066 1161     		str	r1, [r2, #16]
1440:Src/pid.c     **** 		pid_IQ.dead_zone = 4;	
 4054              		.loc 1 1440 0
 4055 0068 0424     		movs	r4, #4
 4056 006a 5461     		str	r4, [r2, #20]
1441:Src/pid.c     **** 
1442:Src/pid.c     **** 		pid_ID.Kp = g_CmdMap[SEV_CURRENT_P];
 4057              		.loc 1 1442 0
 4058 006c B3F8A202 		ldrh	r0, [r3, #674]
 4059 0070 00B2     		sxth	r0, r0
 4060 0072 304A     		ldr	r2, .L281+20
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 106


 4061 0074 9060     		str	r0, [r2, #8]
1443:Src/pid.c     **** 		pid_ID.Ki = g_CmdMap[SEV_CURRENT_I];
 4062              		.loc 1 1443 0
 4063 0076 B3F8A402 		ldrh	r0, [r3, #676]
 4064 007a 00B2     		sxth	r0, r0
 4065 007c D060     		str	r0, [r2, #12]
1444:Src/pid.c     **** 		pid_ID.Kd = 0;
 4066              		.loc 1 1444 0
 4067 007e 1161     		str	r1, [r2, #16]
1445:Src/pid.c     **** 		pid_ID.dead_zone = 4;
 4068              		.loc 1 1445 0
 4069 0080 5461     		str	r4, [r2, #20]
1446:Src/pid.c     **** 		
1447:Src/pid.c     **** 		pid_force.Kp = g_CmdMap[SEV_FORCE_P];
 4070              		.loc 1 1447 0
 4071 0082 B3F8B812 		ldrh	r1, [r3, #696]
 4072 0086 09B2     		sxth	r1, r1
 4073 0088 2B4A     		ldr	r2, .L281+24
 4074 008a 9160     		str	r1, [r2, #8]
1448:Src/pid.c     **** 		pid_force.Ki = g_CmdMap[SEV_FORCE_I];
 4075              		.loc 1 1448 0
 4076 008c B3F8BA12 		ldrh	r1, [r3, #698]
 4077 0090 09B2     		sxth	r1, r1
 4078 0092 D160     		str	r1, [r2, #12]
1449:Src/pid.c     **** 		pid_force.Kd = g_CmdMap[SEV_FORCE_D];
 4079              		.loc 1 1449 0
 4080 0094 B3F8BC12 		ldrh	r1, [r3, #700]
 4081 0098 09B2     		sxth	r1, r1
 4082 009a 1161     		str	r1, [r2, #16]
1450:Src/pid.c     **** 		pid_force.dead_zone = g_CmdMap[SEV_FORCE_DS];
 4083              		.loc 1 1450 0
 4084 009c B3F8BE12 		ldrh	r1, [r3, #702]
 4085 00a0 09B2     		sxth	r1, r1
 4086 00a2 5161     		str	r1, [r2, #20]
1451:Src/pid.c     **** 		gPos_ds = g_CmdMap[SEV_POSITION_DS];
 4087              		.loc 1 1451 0
 4088 00a4 B3F8B632 		ldrh	r3, [r3, #694]
 4089 00a8 1BB2     		sxth	r3, r3
 4090 00aa 244A     		ldr	r2, .L281+28
 4091 00ac 1360     		str	r3, [r2]
 4092              	.L276:
1452:Src/pid.c     **** 	}
1453:Src/pid.c     ****   /**************************************************************************/	
1454:Src/pid.c     **** }
 4093              		.loc 1 1454 0
 4094 00ae 70BC     		pop	{r4, r5, r6}
 4095              	.LCFI29:
 4096              		.cfi_remember_state
 4097              		.cfi_restore 6
 4098              		.cfi_restore 5
 4099              		.cfi_restore 4
 4100              		.cfi_def_cfa_offset 0
 4101 00b0 7047     		bx	lr
 4102              	.L280:
 4103              	.LCFI30:
 4104              		.cfi_restore_state
1399:Src/pid.c     **** 		pid_pos.Ki = g_ThreeLoopParaBefLock[(SEV_POSITION_I)&0x0F];
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 107


 4105              		.loc 1 1399 0
 4106 00b2 234B     		ldr	r3, .L281+32
 4107 00b4 B3F91010 		ldrsh	r1, [r3, #16]
 4108 00b8 1B4A     		ldr	r2, .L281+8
 4109 00ba 9160     		str	r1, [r2, #8]
1400:Src/pid.c     **** 		pid_pos.Kd = 0;
 4110              		.loc 1 1400 0
 4111 00bc B3F91210 		ldrsh	r1, [r3, #18]
 4112 00c0 D160     		str	r1, [r2, #12]
1401:Src/pid.c     **** 		pid_pos.dead_zone = g_ThreeLoopParaBefLock[(SEV_POSITION_DS)&0x0F];
 4113              		.loc 1 1401 0
 4114 00c2 0021     		movs	r1, #0
 4115 00c4 1161     		str	r1, [r2, #16]
1402:Src/pid.c     **** 		
 4116              		.loc 1 1402 0
 4117 00c6 B3F91600 		ldrsh	r0, [r3, #22]
 4118 00ca 5061     		str	r0, [r2, #20]
1404:Src/pid.c     **** 		pid_spd.Ki = g_ThreeLoopParaBefLock[(SEV_SPEED_I)&0x0F];
 4119              		.loc 1 1404 0
 4120 00cc B3F90840 		ldrsh	r4, [r3, #8]
 4121 00d0 164A     		ldr	r2, .L281+12
 4122 00d2 9460     		str	r4, [r2, #8]
1405:Src/pid.c     **** 		pid_spd.Kd = 0;
 4123              		.loc 1 1405 0
 4124 00d4 B3F90A40 		ldrsh	r4, [r3, #10]
 4125 00d8 D460     		str	r4, [r2, #12]
1406:Src/pid.c     **** 		pid_spd.dead_zone = g_ThreeLoopParaBefLock[(SEV_SPEED_DS)&0x0F];
 4126              		.loc 1 1406 0
 4127 00da 1161     		str	r1, [r2, #16]
1407:Src/pid.c     **** 
 4128              		.loc 1 1407 0
 4129 00dc B3F90E40 		ldrsh	r4, [r3, #14]
 4130 00e0 5461     		str	r4, [r2, #20]
1409:Src/pid.c     **** 		pid_IQ.Ki = g_ThreeLoopParaBefLock[(SEV_CURRENT_I)&0x0F];
 4131              		.loc 1 1409 0
 4132 00e2 B3F90260 		ldrsh	r6, [r3, #2]
 4133 00e6 124A     		ldr	r2, .L281+16
 4134 00e8 9660     		str	r6, [r2, #8]
1410:Src/pid.c     **** 		pid_IQ.Kd = 0;
 4135              		.loc 1 1410 0
 4136 00ea B3F90450 		ldrsh	r5, [r3, #4]
 4137 00ee D560     		str	r5, [r2, #12]
1411:Src/pid.c     **** 		pid_IQ.dead_zone = 4;	
 4138              		.loc 1 1411 0
 4139 00f0 1161     		str	r1, [r2, #16]
1412:Src/pid.c     **** 
 4140              		.loc 1 1412 0
 4141 00f2 0424     		movs	r4, #4
 4142 00f4 5461     		str	r4, [r2, #20]
1414:Src/pid.c     **** 		pid_ID.Ki = g_ThreeLoopParaBefLock[(SEV_CURRENT_I)&0x0F];
 4143              		.loc 1 1414 0
 4144 00f6 0F4A     		ldr	r2, .L281+20
 4145 00f8 9660     		str	r6, [r2, #8]
1415:Src/pid.c     **** 		pid_ID.Kd = 0;
 4146              		.loc 1 1415 0
 4147 00fa D560     		str	r5, [r2, #12]
1416:Src/pid.c     **** 		pid_ID.dead_zone = 4;	
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 108


 4148              		.loc 1 1416 0
 4149 00fc 1161     		str	r1, [r2, #16]
1417:Src/pid.c     **** 
 4150              		.loc 1 1417 0
 4151 00fe 5461     		str	r4, [r2, #20]
1419:Src/pid.c     **** 		pid_force.Ki = g_ThreeLoopParaBefLock[(SEV_FORCE_I)&0x0F];
 4152              		.loc 1 1419 0
 4153 0100 B3F91810 		ldrsh	r1, [r3, #24]
 4154 0104 0C4A     		ldr	r2, .L281+24
 4155 0106 9160     		str	r1, [r2, #8]
1420:Src/pid.c     **** 		pid_force.Kd = g_ThreeLoopParaBefLock[(SEV_FORCE_D)&0x0F];
 4156              		.loc 1 1420 0
 4157 0108 B3F91A10 		ldrsh	r1, [r3, #26]
 4158 010c D160     		str	r1, [r2, #12]
1421:Src/pid.c     **** 		pid_force.dead_zone = g_ThreeLoopParaBefLock[(SEV_FORCE_DS)&0x0F];
 4159              		.loc 1 1421 0
 4160 010e B3F91C10 		ldrsh	r1, [r3, #28]
 4161 0112 1161     		str	r1, [r2, #16]
1422:Src/pid.c     **** 		gPos_ds = g_ThreeLoopParaBefLock[(SEV_POSITION_DS)&0x0F];
 4162              		.loc 1 1422 0
 4163 0114 B3F91E30 		ldrsh	r3, [r3, #30]
 4164 0118 5361     		str	r3, [r2, #20]
1423:Src/pid.c     **** 	}
 4165              		.loc 1 1423 0
 4166 011a 084B     		ldr	r3, .L281+28
 4167 011c 1860     		str	r0, [r3]
 4168 011e C6E7     		b	.L276
 4169              	.L282:
 4170              		.align	2
 4171              	.L281:
 4172 0120 00000000 		.word	g_CmdMap
 4173 0124 00000000 		.word	g_Encode_offset
 4174 0128 00000000 		.word	pid_pos
 4175 012c 00000000 		.word	pid_spd
 4176 0130 00000000 		.word	pid_IQ
 4177 0134 00000000 		.word	pid_ID
 4178 0138 00000000 		.word	pid_force
 4179 013c 00000000 		.word	gPos_ds
 4180 0140 00000000 		.word	g_ThreeLoopParaBefLock
 4181              		.cfi_endproc
 4182              	.LFE350:
 4184              		.section	.text.EXTI3_IRQHandler,"ax",%progbits
 4185              		.align	1
 4186              		.global	EXTI3_IRQHandler
 4187              		.syntax unified
 4188              		.thumb
 4189              		.thumb_func
 4190              		.fpu fpv4-sp-d16
 4192              	EXTI3_IRQHandler:
 4193              	.LFB351:
1455:Src/pid.c     **** 
1456:Src/pid.c     **** 
1457:Src/pid.c     **** // Î»ï¿½Ã»ï¿½ï¿½ï¿½ï¿½Ù¶È»ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½ 2KHz
1458:Src/pid.c     **** void EXTI3_IRQHandler(void)
1459:Src/pid.c     **** {
 4194              		.loc 1 1459 0
 4195              		.cfi_startproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 109


 4196              		@ args = 0, pretend = 0, frame = 0
 4197              		@ frame_needed = 0, uses_anonymous_args = 0
 4198 0000 08B5     		push	{r3, lr}
 4199              	.LCFI31:
 4200              		.cfi_def_cfa_offset 8
 4201              		.cfi_offset 3, -8
 4202              		.cfi_offset 14, -4
1460:Src/pid.c     ****  // if(EXTI_GetITStatus(EXTI_Line3) != RESET)
1461:Src/pid.c     ****   {
1462:Src/pid.c     **** 		//LED2_TOOGLE(); fortest
1463:Src/pid.c     **** 		EXTI->PR1 |= 0x0008;		// ï¿½ï¿½ï¿½ï¿½ï¿½Ö¾
 4203              		.loc 1 1463 0
 4204 0002 044A     		ldr	r2, .L285
 4205 0004 5369     		ldr	r3, [r2, #20]
 4206 0006 43F00803 		orr	r3, r3, #8
 4207 000a 5361     		str	r3, [r2, #20]
1464:Src/pid.c     ****     Pos_Spd_PID();  // ï¿½ï¿½ï¿½ï¿½Î»ï¿½Ã»ï¿½ï¿½ï¿½ï¿½Ù¶È»ï¿½				
 4208              		.loc 1 1464 0
 4209 000c FFF7FEFF 		bl	Pos_Spd_PID
 4210              	.LVL236:
1465:Src/pid.c     **** 		//UpdateErrorStateLED(); 		
1466:Src/pid.c     ****   }
1467:Src/pid.c     **** }
 4211              		.loc 1 1467 0
 4212 0010 08BD     		pop	{r3, pc}
 4213              	.L286:
 4214 0012 00BF     		.align	2
 4215              	.L285:
 4216 0014 00040140 		.word	1073808384
 4217              		.cfi_endproc
 4218              	.LFE351:
 4220              		.global	Vel_PPS_raw1
 4221              		.comm	hall_total_time,8,8
 4222              		.global	hall_previous_3_time
 4223              		.global	hall_previous_2_time
 4224              		.global	hall_previous_1_time
 4225              		.global	hall_now_time
 4226              		.global	hall_cnt
 4227              		.global	hall_speed_sample_timeout
 4228              		.global	hall_speed_sample_cnt
 4229              		.global	hall_speed_sample_timeout_cnt
 4230              		.global	last_time4_capture_ch1
 4231              		.global	pid_hall_sample_time_index
 4232              		.comm	pid_hall_sample_time_point,40,4
 4233              		.comm	speed3,4,4
 4234              		.comm	speed2,4,4
 4235              		.comm	speed1,4,4
 4236              		.global	last_hall_sample_time
 4237              		.comm	pid_last_hall_ture_value1,4,4
 4238              		.comm	pid_hall_ture_value1,4,4
 4239              		.global	ServoPro_En_count
 4240              		.global	shunt_conductance
 4241              		.global	phase_current_rev_gain_
 4242              		.global	last_beta
 4243              		.global	last_alpha
 4244              		.comm	delata_beta,4,4
 4245              		.comm	delta_alpha,4,4
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 110


 4246              		.comm	I_Beta,4,4
 4247              		.comm	I_Alpha,4,4
 4248              		.global	s_Disable_Delay
 4249              		.comm	integre_observer_ElectricAngle,4,4
 4250              		.comm	observer_speed,4,4
 4251              		.comm	observer_ElectricAngle,4,4
 4252              		.comm	temp_L,4,4
 4253              		.comm	L,4,4
 4254              		.global	v
 4255              		.comm	pid_pll,72,8
 4256              		.comm	pid_pos,72,8
 4257              		.comm	pid_spd,72,8
 4258              		.comm	pid_force,72,8
 4259              		.comm	pid_ID,72,8
 4260              		.comm	pid_IQ,72,8
 4261              		.global	pos_error_to_target
 4262              		.global	T_t_1
 4263              		.global	T_t
 4264              		.global	Para_Identificaion
 4265              		.global	index_I_phase
 4266              		.global	I_phase
 4267              		.global	motor_para_identification_count_Tms
 4268              		.global	sin_wave_t_us
 4269              		.global	Test_dirt_last
 4270              		.global	Test_dirt
 4271              		.global	Test_perm
 4272              		.global	Flag_Set_OpenLen
 4273              		.global	Brake_rellease_delay_cnt
 4274              		.global	Brake_rellease_delay
 4275              		.global	Grriper_Run_off_delay_cnt
 4276              		.global	Grriper_Run_on_delay_cnt
 4277              		.global	Grriper_Run_last
 4278              		.global	Grriper_Run
 4279              		.global	Grriper_Ready
 4280              		.global	Spd_RPM_CatchLimit
 4281              		.comm	g_Z,4,4
 4282              		.comm	g_Y,4,4
 4283              		.comm	g_X,4,4
 4284              		.global	g_decLen
 4285              		.comm	anlge_reg,2,2
 4286              		.global	g_spd_error
 4287              		.comm	time4_capture_ch1,4,4
 4288              		.global	PosAtDead_Flag_Last
 4289              		.global	PosAtDead_Flag
 4290              		.global	g_posPID_e
 4291              		.global	g_testAngle
 4292              		.global	V_SetTotal
 4293              		.global	V_AddReg
 4294              		.global	g_Pos_Spd
 4295              		.global	g_Pos_PID_16BIT
 4296              		.global	Speed_I_out
 4297              		.global	Speed_P_out
 4298              		.global	g_Pos_Icnt
 4299              		.global	g_Spd_Icnt
 4300              		.global	g_Sector
 4301              		.global	g_V_Beta
 4302              		.global	g_V_Alpha
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 111


 4303              		.global	g_Vd_Pu
 4304              		.global	g_Vq_Pu
 4305              		.global	g_Vd
 4306              		.global	g_Vq
 4307              		.global	g_Id_sum
 4308              		.global	g_Iq_sum
 4309              		.global	g_I_Array_Index_Invalid
 4310              		.global	g_I_Array_Index
 4311              		.global	g_Id_Array
 4312              		.global	g_Iq_Array
 4313              		.comm	g_Id_filter,4,4
 4314              		.comm	g_Iq_filter,4,4
 4315              		.global	g_Id
 4316              		.global	g_Iq
 4317              		.global	g_Sum_ABC
 4318              		.global	g_IC_Raw
 4319              		.global	g_IC
 4320              		.global	g_IB_Raw
 4321              		.global	g_IB
 4322              		.global	g_IA_Raw
 4323              		.global	g_IA
 4324              		.section	.bss.Brake_rellease_delay,"aw",%nobits
 4327              	Brake_rellease_delay:
 4328 0000 00       		.space	1
 4329              		.section	.bss.Brake_rellease_delay_cnt,"aw",%nobits
 4330              		.align	2
 4333              	Brake_rellease_delay_cnt:
 4334 0000 00000000 		.space	4
 4335              		.section	.bss.Flag_Set_OpenLen,"aw",%nobits
 4336              		.set	.LANCHOR24,. + 0
 4339              	Flag_Set_OpenLen:
 4340 0000 00       		.space	1
 4341              		.section	.bss.Grriper_Ready,"aw",%nobits
 4344              	Grriper_Ready:
 4345 0000 00       		.space	1
 4346              		.section	.bss.Grriper_Run,"aw",%nobits
 4347              		.set	.LANCHOR23,. + 0
 4350              	Grriper_Run:
 4351 0000 00       		.space	1
 4352              		.section	.bss.Grriper_Run_last,"aw",%nobits
 4353              		.set	.LANCHOR25,. + 0
 4356              	Grriper_Run_last:
 4357 0000 00       		.space	1
 4358              		.section	.bss.Grriper_Run_off_delay_cnt,"aw",%nobits
 4359              		.align	2
 4362              	Grriper_Run_off_delay_cnt:
 4363 0000 00000000 		.space	4
 4364              		.section	.bss.Grriper_Run_on_delay_cnt,"aw",%nobits
 4365              		.align	2
 4368              	Grriper_Run_on_delay_cnt:
 4369 0000 00000000 		.space	4
 4370              		.section	.bss.I_phase,"aw",%nobits
 4371              		.align	2
 4372              		.set	.LANCHOR9,. + 0
 4375              	I_phase:
 4376 0000 00000000 		.space	1200
 4376      00000000 
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 112


 4376      00000000 
 4376      00000000 
 4376      00000000 
 4377              		.section	.bss.Para_Identificaion,"aw",%nobits
 4378              		.align	2
 4379              		.set	.LANCHOR6,. + 0
 4382              	Para_Identificaion:
 4383 0000 00000000 		.space	4
 4384              		.section	.bss.PlusPosition_flag.12127,"aw",%nobits
 4385              		.set	.LANCHOR36,. + 0
 4388              	PlusPosition_flag.12127:
 4389 0000 00       		.space	1
 4390              		.section	.bss.PosAtDead_Flag,"aw",%nobits
 4391              		.set	.LANCHOR21,. + 0
 4394              	PosAtDead_Flag:
 4395 0000 00       		.space	1
 4396              		.section	.bss.PosAtDead_Flag_Last,"aw",%nobits
 4397              		.set	.LANCHOR22,. + 0
 4400              	PosAtDead_Flag_Last:
 4401 0000 00       		.space	1
 4402              		.section	.bss.ServoPro_En_count,"aw",%nobits
 4403              		.align	2
 4406              	ServoPro_En_count:
 4407 0000 00000000 		.space	4
 4408              		.section	.bss.Spd_RPM_CatchLimit,"aw",%nobits
 4409              		.align	1
 4412              	Spd_RPM_CatchLimit:
 4413 0000 0000     		.space	2
 4414              		.section	.bss.Speed_I_out,"aw",%nobits
 4415              		.align	2
 4418              	Speed_I_out:
 4419 0000 00000000 		.space	4
 4420              		.section	.bss.Speed_P_out,"aw",%nobits
 4421              		.align	2
 4424              	Speed_P_out:
 4425 0000 00000000 		.space	4
 4426              		.section	.bss.T_t,"aw",%nobits
 4427              		.align	3
 4428              		.set	.LANCHOR12,. + 0
 4431              	T_t:
 4432 0000 00000000 		.space	8
 4432      00000000 
 4433              		.section	.bss.T_t_1,"aw",%nobits
 4434              		.align	3
 4435              		.set	.LANCHOR13,. + 0
 4438              	T_t_1:
 4439 0000 00000000 		.space	8
 4439      00000000 
 4440              		.section	.bss.Test_perm,"aw",%nobits
 4441              		.set	.LANCHOR18,. + 0
 4444              	Test_perm:
 4445 0000 00       		.space	1
 4446              		.section	.bss.V_AddReg,"aw",%nobits
 4447              		.align	2
 4450              	V_AddReg:
 4451 0000 00000000 		.space	4
 4452              		.section	.bss.V_SetTotal,"aw",%nobits
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 113


 4453              		.align	2
 4456              	V_SetTotal:
 4457 0000 00000000 		.space	4
 4458              		.section	.bss.Vel_PPS_raw1,"aw",%nobits
 4459              		.align	3
 4462              	Vel_PPS_raw1:
 4463 0000 00000000 		.space	8
 4463      00000000 
 4464              		.section	.bss.delay_cnt.12025,"aw",%nobits
 4465              		.align	1
 4466              		.set	.LANCHOR20,. + 0
 4469              	delay_cnt.12025:
 4470 0000 0000     		.space	2
 4471              		.section	.bss.g_IA,"aw",%nobits
 4472              		.align	1
 4473              		.set	.LANCHOR28,. + 0
 4476              	g_IA:
 4477 0000 0000     		.space	2
 4478              		.section	.bss.g_IA_Raw,"aw",%nobits
 4479              		.align	1
 4480              		.set	.LANCHOR8,. + 0
 4483              	g_IA_Raw:
 4484 0000 0000     		.space	2
 4485              		.section	.bss.g_IB,"aw",%nobits
 4486              		.align	1
 4487              		.set	.LANCHOR29,. + 0
 4490              	g_IB:
 4491 0000 0000     		.space	2
 4492              		.section	.bss.g_IB_Raw,"aw",%nobits
 4493              		.align	1
 4494              		.set	.LANCHOR10,. + 0
 4497              	g_IB_Raw:
 4498 0000 0000     		.space	2
 4499              		.section	.bss.g_IC,"aw",%nobits
 4500              		.align	1
 4501              		.set	.LANCHOR30,. + 0
 4504              	g_IC:
 4505 0000 0000     		.space	2
 4506              		.section	.bss.g_IC_Raw,"aw",%nobits
 4507              		.align	1
 4508              		.set	.LANCHOR11,. + 0
 4511              	g_IC_Raw:
 4512 0000 0000     		.space	2
 4513              		.section	.bss.g_I_Array_Index,"aw",%nobits
 4514              		.align	2
 4517              	g_I_Array_Index:
 4518 0000 00000000 		.space	4
 4519              		.section	.bss.g_I_Array_Index_Invalid,"aw",%nobits
 4520              		.align	2
 4523              	g_I_Array_Index_Invalid:
 4524 0000 00000000 		.space	4
 4525              		.section	.bss.g_Id,"aw",%nobits
 4526              		.align	2
 4527              		.set	.LANCHOR34,. + 0
 4530              	g_Id:
 4531 0000 00000000 		.space	4
 4532              		.section	.bss.g_Id_Array,"aw",%nobits
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 114


 4533              		.align	2
 4536              	g_Id_Array:
 4537 0000 00000000 		.space	2048
 4537      00000000 
 4537      00000000 
 4537      00000000 
 4537      00000000 
 4538              		.section	.bss.g_Id_sum,"aw",%nobits
 4539              		.align	2
 4542              	g_Id_sum:
 4543 0000 00000000 		.space	4
 4544              		.section	.bss.g_Iq,"aw",%nobits
 4545              		.align	2
 4546              		.set	.LANCHOR33,. + 0
 4549              	g_Iq:
 4550 0000 00000000 		.space	4
 4551              		.section	.bss.g_Iq_Array,"aw",%nobits
 4552              		.align	2
 4555              	g_Iq_Array:
 4556 0000 00000000 		.space	2048
 4556      00000000 
 4556      00000000 
 4556      00000000 
 4556      00000000 
 4557              		.section	.bss.g_Iq_sum,"aw",%nobits
 4558              		.align	2
 4561              	g_Iq_sum:
 4562 0000 00000000 		.space	4
 4563              		.section	.bss.g_Pos_Icnt,"aw",%nobits
 4564              		.align	3
 4567              	g_Pos_Icnt:
 4568 0000 00000000 		.space	8
 4568      00000000 
 4569              		.section	.bss.g_Pos_PID_16BIT,"aw",%nobits
 4570              		.align	2
 4573              	g_Pos_PID_16BIT:
 4574 0000 00000000 		.space	4
 4575              		.section	.bss.g_Pos_Spd,"aw",%nobits
 4576              		.align	2
 4579              	g_Pos_Spd:
 4580 0000 00000000 		.space	4
 4581              		.section	.bss.g_Sector,"aw",%nobits
 4582              		.align	2
 4583              		.set	.LANCHOR15,. + 0
 4586              	g_Sector:
 4587 0000 00000000 		.space	4
 4588              		.section	.bss.g_Spd_Icnt,"aw",%nobits
 4589              		.align	2
 4592              	g_Spd_Icnt:
 4593 0000 00000000 		.space	4
 4594              		.section	.bss.g_Sum_ABC,"aw",%nobits
 4595              		.align	1
 4598              	g_Sum_ABC:
 4599 0000 0000     		.space	2
 4600              		.section	.bss.g_V_Alpha,"aw",%nobits
 4601              		.align	2
 4602              		.set	.LANCHOR2,. + 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 115


 4605              	g_V_Alpha:
 4606 0000 00000000 		.space	4
 4607              		.section	.bss.g_V_Beta,"aw",%nobits
 4608              		.align	2
 4609              		.set	.LANCHOR3,. + 0
 4612              	g_V_Beta:
 4613 0000 00000000 		.space	4
 4614              		.section	.bss.g_Vd,"aw",%nobits
 4615              		.align	2
 4616              		.set	.LANCHOR1,. + 0
 4619              	g_Vd:
 4620 0000 00000000 		.space	4
 4621              		.section	.bss.g_Vd_Pu,"aw",%nobits
 4622              		.align	2
 4625              	g_Vd_Pu:
 4626 0000 00000000 		.space	4
 4627              		.section	.bss.g_Vq,"aw",%nobits
 4628              		.align	2
 4629              		.set	.LANCHOR0,. + 0
 4632              	g_Vq:
 4633 0000 00000000 		.space	4
 4634              		.section	.bss.g_Vq_Pu,"aw",%nobits
 4635              		.align	2
 4638              	g_Vq_Pu:
 4639 0000 00000000 		.space	4
 4640              		.section	.bss.g_decLen,"aw",%nobits
 4641              		.align	2
 4644              	g_decLen:
 4645 0000 00000000 		.space	4
 4646              		.section	.bss.g_posPID_e,"aw",%nobits
 4647              		.align	2
 4650              	g_posPID_e:
 4651 0000 00000000 		.space	4
 4652              		.section	.bss.g_spd_error,"aw",%nobits
 4653              		.align	2
 4656              	g_spd_error:
 4657 0000 00000000 		.space	4
 4658              		.section	.bss.g_testAngle,"aw",%nobits
 4659              		.align	1
 4662              	g_testAngle:
 4663 0000 0000     		.space	2
 4664              		.section	.bss.hall_cnt,"aw",%nobits
 4665              		.align	2
 4668              	hall_cnt:
 4669 0000 00000000 		.space	4
 4670              		.section	.bss.hall_now_time,"aw",%nobits
 4671              		.align	2
 4674              	hall_now_time:
 4675 0000 00000000 		.space	4
 4676              		.section	.bss.hall_previous_1_time,"aw",%nobits
 4677              		.align	2
 4680              	hall_previous_1_time:
 4681 0000 00000000 		.space	4
 4682              		.section	.bss.hall_previous_2_time,"aw",%nobits
 4683              		.align	2
 4686              	hall_previous_2_time:
 4687 0000 00000000 		.space	4
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 116


 4688              		.section	.bss.hall_previous_3_time,"aw",%nobits
 4689              		.align	2
 4692              	hall_previous_3_time:
 4693 0000 00000000 		.space	4
 4694              		.section	.bss.hall_speed_sample_cnt,"aw",%nobits
 4695              		.align	2
 4698              	hall_speed_sample_cnt:
 4699 0000 00000000 		.space	4
 4700              		.section	.bss.hall_speed_sample_timeout,"aw",%nobits
 4701              		.align	2
 4704              	hall_speed_sample_timeout:
 4705 0000 00000000 		.space	4
 4706              		.section	.bss.hall_speed_sample_timeout_cnt,"aw",%nobits
 4707              		.align	2
 4710              	hall_speed_sample_timeout_cnt:
 4711 0000 00000000 		.space	4
 4712              		.section	.bss.index_I_phase,"aw",%nobits
 4713              		.align	2
 4714              		.set	.LANCHOR7,. + 0
 4717              	index_I_phase:
 4718 0000 00000000 		.space	4
 4719              		.section	.bss.last_alpha,"aw",%nobits
 4720              		.align	2
 4721              		.set	.LANCHOR31,. + 0
 4724              	last_alpha:
 4725 0000 00000000 		.space	4
 4726              		.section	.bss.last_beta,"aw",%nobits
 4727              		.align	2
 4728              		.set	.LANCHOR32,. + 0
 4731              	last_beta:
 4732 0000 00000000 		.space	4
 4733              		.section	.bss.last_hall_sample_time,"aw",%nobits
 4734              		.align	2
 4737              	last_hall_sample_time:
 4738 0000 00000000 		.space	4
 4739              		.section	.bss.last_time4_capture_ch1,"aw",%nobits
 4740              		.align	2
 4743              	last_time4_capture_ch1:
 4744 0000 00000000 		.space	4
 4745              		.section	.bss.motor_para_identification_count_Tms,"aw",%nobits
 4746              		.align	2
 4747              		.set	.LANCHOR4,. + 0
 4750              	motor_para_identification_count_Tms:
 4751 0000 00000000 		.space	4
 4752              		.section	.bss.pid_hall_sample_time_index,"aw",%nobits
 4753              		.align	2
 4756              	pid_hall_sample_time_index:
 4757 0000 00000000 		.space	4
 4758              		.section	.bss.pos_error_to_target,"aw",%nobits
 4759              		.align	2
 4760              		.set	.LANCHOR19,. + 0
 4763              	pos_error_to_target:
 4764 0000 00000000 		.space	4
 4765              		.section	.bss.s_Disable_Delay,"aw",%nobits
 4766              		.align	2
 4767              		.set	.LANCHOR40,. + 0
 4770              	s_Disable_Delay:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 117


 4771 0000 00000000 		.space	4
 4772              		.section	.bss.s_Enable_Delay.12064,"aw",%nobits
 4773              		.align	2
 4774              		.set	.LANCHOR39,. + 0
 4777              	s_Enable_Delay.12064:
 4778 0000 00000000 		.space	4
 4779              		.section	.bss.s_count.12063,"aw",%nobits
 4780              		.align	2
 4781              		.set	.LANCHOR38,. + 0
 4784              	s_count.12063:
 4785 0000 00000000 		.space	4
 4786              		.section	.bss.s_count.12128,"aw",%nobits
 4787              		.align	2
 4788              		.set	.LANCHOR37,. + 0
 4791              	s_count.12128:
 4792 0000 00000000 		.space	4
 4793              		.section	.bss.s_test_speed_t_count.12020,"aw",%nobits
 4794              		.align	2
 4795              		.set	.LANCHOR17,. + 0
 4798              	s_test_speed_t_count.12020:
 4799 0000 00000000 		.space	4
 4800              		.section	.bss.sin_wave_t_us,"aw",%nobits
 4801              		.align	2
 4802              		.set	.LANCHOR5,. + 0
 4805              	sin_wave_t_us:
 4806 0000 00000000 		.space	4
 4807              		.section	.bss.test.12007,"aw",%nobits
 4808              		.align	1
 4809              		.set	.LANCHOR14,. + 0
 4812              	test.12007:
 4813 0000 0000     		.space	2
 4814              		.section	.data.Test_dirt,"aw",%progbits
 4815              		.align	2
 4816              		.set	.LANCHOR16,. + 0
 4819              	Test_dirt:
 4820 0000 01000000 		.word	1
 4821              		.section	.data.Test_dirt_last,"aw",%progbits
 4822              		.align	2
 4825              	Test_dirt_last:
 4826 0000 01000000 		.word	1
 4827              		.section	.data.phase_current_rev_gain_,"aw",%progbits
 4828              		.align	2
 4829              		.set	.LANCHOR26,. + 0
 4832              	phase_current_rev_gain_:
 4833 0000 103E783D 		.word	1031290384
 4834              		.section	.data.shunt_conductance,"aw",%progbits
 4835              		.align	2
 4836              		.set	.LANCHOR27,. + 0
 4839              	shunt_conductance:
 4840 0000 0000C842 		.word	1120403456
 4841              		.section	.data.v,"aw",%progbits
 4842              		.align	2
 4843              		.set	.LANCHOR35,. + 0
 4846              	v:
 4847 0000 A4703D41 		.word	1094545572
 4848              		.text
 4849              	.Letext0:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 118


 4850              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 4851              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 4852              		.file 4 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 4853              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 4854              		.file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/system_stm32g4xx.h"
 4855              		.file 7 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 4856              		.file 8 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 4857              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 4858              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 4859              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 4860              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_exti.h"
 4861              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_flash.h"
 4862              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 4863              		.file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 4864              		.file 16 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
 4865              		.file 17 "Inc/pid.h"
 4866              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 4867              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 4868              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-ea
 4869              		.file 21 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 4870              		.file 22 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 4871              		.file 23 "Inc/uart.h"
 4872              		.file 24 "Inc/pwm.h"
 4873              		.file 25 "Inc/spi_MEncoder.h"
 4874              		.file 26 "Inc/adc.h"
 4875              		.file 27 "Inc/stm32_math_sin.h"
 4876              		.file 28 "Inc/profile_joint.h"
 4877              		.file 29 "Inc/icmu.h"
 4878              		.file 30 "Inc/performance_test.h"
 4879              		.file 31 "Inc/global.h"
 4880              		.file 32 "Inc/sensorless.h"
 4881              		.file 33 "Inc/parameter_identification.h"
 4882              		.file 34 "Inc/stm32_math.h"
 4883              		.file 35 "Inc/security.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 119


DEFINED SYMBOLS
                            *ABS*:00000000 pid.c
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:18     .text.OpenLoop:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:24     .text.OpenLoop:00000000 OpenLoop
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:191    .text.OpenLoop:0000011c $d
                            *COM*:00000002 anlge_reg
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:215    .text.Calculate_CCR_SVP:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:221    .text.Calculate_CCR_SVP:00000000 Calculate_CCR_SVP
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:249    .text.Calculate_CCR_SVP:00000012 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:255    .text.Calculate_CCR_SVP:00000018 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:615    .text.Calculate_CCR_SVP:00000228 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:635    .text.PID_ini:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:642    .text.PID_ini:00000000 PID_ini
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:667    .text.PID_control:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:674    .text.PID_control:00000000 PID_control
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:906    .text.PID_control:00000148 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:913    .text.CurrentPID:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:919    .text.CurrentPID:00000000 CurrentPID
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1311   .text.CurrentPID:000002b8 $d
                            *COM*:00000048 pid_spd
                            *COM*:00000048 pid_IQ
                            *COM*:00000048 pid_ID
                            *COM*:00000004 g_X
                            *COM*:00000004 g_Y
                            *COM*:00000004 g_Z
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1339   .text.CurrentPID:00000320 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1539   .text.CurrentPID:00000498 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1547   .text.ForcePID:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1553   .text.ForcePID:00000000 ForcePID
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1720   .text.ForcePID:00000124 $d
                            *COM*:00000048 pid_force
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1730   .text.force_PID_out:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1737   .text.force_PID_out:00000000 force_PID_out
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1797   .text.SpeedPID:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:1803   .text.SpeedPID:00000000 SpeedPID
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2139   .text.SpeedPID:0000026c $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2148   .text.SpeedPID:00000288 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2288   .text.SpeedPID:00000380 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2297   .text.PositionPID:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2304   .text.PositionPID:00000000 PositionPID
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2450   .text.PositionPID:000000dc $d
                            *COM*:00000048 pid_pos
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2463   .text.Gripper_control:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2470   .text.Gripper_control:00000000 Gripper_control
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2725   .text.Gripper_control:00000180 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2744   .text.phase_current_from_adcval:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2751   .text.phase_current_from_adcval:00000000 phase_current_from_adcval
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2781   .text.phase_current_from_adcval:00000028 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2788   .text.GetCurrent:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:2795   .text.GetCurrent:00000000 GetCurrent
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3027   .text.GetCurrent:000001a4 $d
                            *COM*:00000004 I_Alpha
                            *COM*:00000004 I_Beta
                            *COM*:00000004 delta_alpha
                            *COM*:00000004 delata_beta
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3057   .text.park_transform:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3064   .text.park_transform:00000000 park_transform
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 120


C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3130   .text.park_transform:00000054 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3138   .text.hfi_update_angle:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3145   .text.hfi_update_angle:00000000 hfi_update_angle
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3360   .text.hfi_update_angle:00000180 $d
                            *COM*:00000048 pid_pll
                            *COM*:00000004 L
                            *COM*:00000004 temp_L
                            *COM*:00000004 observer_ElectricAngle
                            *COM*:00000004 observer_speed
                            *COM*:00000004 integre_observer_ElectricAngle
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3389   .text.ServoPro_Fast:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3396   .text.ServoPro_Fast:00000000 ServoPro_Fast
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3516   .text.ServoPro_Fast:000000a0 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3528   .text.Loop3_EnableManage:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3535   .text.Loop3_EnableManage:00000000 Loop3_EnableManage
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3689   .text.Loop3_EnableManage:000000ec $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3700   .text.Pos_Spd_PID:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3706   .text.Pos_Spd_PID:00000000 Pos_Spd_PID
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3963   .text.Pos_Spd_PID:0000018c $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3980   .text.work_var_updata:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:3987   .text.work_var_updata:00000000 work_var_updata
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4172   .text.work_var_updata:00000120 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4185   .text.EXTI3_IRQHandler:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4192   .text.EXTI3_IRQHandler:00000000 EXTI3_IRQHandler
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4216   .text.EXTI3_IRQHandler:00000014 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4462   .bss.Vel_PPS_raw1:00000000 Vel_PPS_raw1
                            *COM*:00000008 hall_total_time
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4692   .bss.hall_previous_3_time:00000000 hall_previous_3_time
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4686   .bss.hall_previous_2_time:00000000 hall_previous_2_time
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4680   .bss.hall_previous_1_time:00000000 hall_previous_1_time
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4674   .bss.hall_now_time:00000000 hall_now_time
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4668   .bss.hall_cnt:00000000 hall_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4704   .bss.hall_speed_sample_timeout:00000000 hall_speed_sample_timeout
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4698   .bss.hall_speed_sample_cnt:00000000 hall_speed_sample_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4710   .bss.hall_speed_sample_timeout_cnt:00000000 hall_speed_sample_timeout_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4743   .bss.last_time4_capture_ch1:00000000 last_time4_capture_ch1
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4756   .bss.pid_hall_sample_time_index:00000000 pid_hall_sample_time_index
                            *COM*:00000028 pid_hall_sample_time_point
                            *COM*:00000004 speed3
                            *COM*:00000004 speed2
                            *COM*:00000004 speed1
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4737   .bss.last_hall_sample_time:00000000 last_hall_sample_time
                            *COM*:00000004 pid_last_hall_ture_value1
                            *COM*:00000004 pid_hall_ture_value1
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4406   .bss.ServoPro_En_count:00000000 ServoPro_En_count
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4839   .data.shunt_conductance:00000000 shunt_conductance
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4832   .data.phase_current_rev_gain_:00000000 phase_current_rev_gain_
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4731   .bss.last_beta:00000000 last_beta
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4724   .bss.last_alpha:00000000 last_alpha
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4770   .bss.s_Disable_Delay:00000000 s_Disable_Delay
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4846   .data.v:00000000 v
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4763   .bss.pos_error_to_target:00000000 pos_error_to_target
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4438   .bss.T_t_1:00000000 T_t_1
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4431   .bss.T_t:00000000 T_t
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4382   .bss.Para_Identificaion:00000000 Para_Identificaion
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4717   .bss.index_I_phase:00000000 index_I_phase
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4375   .bss.I_phase:00000000 I_phase
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 121


C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4750   .bss.motor_para_identification_count_Tms:00000000 motor_para_identification_count_Tms
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4805   .bss.sin_wave_t_us:00000000 sin_wave_t_us
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4825   .data.Test_dirt_last:00000000 Test_dirt_last
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4819   .data.Test_dirt:00000000 Test_dirt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4444   .bss.Test_perm:00000000 Test_perm
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4339   .bss.Flag_Set_OpenLen:00000000 Flag_Set_OpenLen
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4333   .bss.Brake_rellease_delay_cnt:00000000 Brake_rellease_delay_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4327   .bss.Brake_rellease_delay:00000000 Brake_rellease_delay
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4362   .bss.Grriper_Run_off_delay_cnt:00000000 Grriper_Run_off_delay_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4368   .bss.Grriper_Run_on_delay_cnt:00000000 Grriper_Run_on_delay_cnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4356   .bss.Grriper_Run_last:00000000 Grriper_Run_last
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4350   .bss.Grriper_Run:00000000 Grriper_Run
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4344   .bss.Grriper_Ready:00000000 Grriper_Ready
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4412   .bss.Spd_RPM_CatchLimit:00000000 Spd_RPM_CatchLimit
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4644   .bss.g_decLen:00000000 g_decLen
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4656   .bss.g_spd_error:00000000 g_spd_error
                            *COM*:00000004 time4_capture_ch1
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4400   .bss.PosAtDead_Flag_Last:00000000 PosAtDead_Flag_Last
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4394   .bss.PosAtDead_Flag:00000000 PosAtDead_Flag
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4650   .bss.g_posPID_e:00000000 g_posPID_e
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4662   .bss.g_testAngle:00000000 g_testAngle
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4456   .bss.V_SetTotal:00000000 V_SetTotal
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4450   .bss.V_AddReg:00000000 V_AddReg
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4579   .bss.g_Pos_Spd:00000000 g_Pos_Spd
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4573   .bss.g_Pos_PID_16BIT:00000000 g_Pos_PID_16BIT
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4418   .bss.Speed_I_out:00000000 Speed_I_out
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4424   .bss.Speed_P_out:00000000 Speed_P_out
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4567   .bss.g_Pos_Icnt:00000000 g_Pos_Icnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4592   .bss.g_Spd_Icnt:00000000 g_Spd_Icnt
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4586   .bss.g_Sector:00000000 g_Sector
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4612   .bss.g_V_Beta:00000000 g_V_Beta
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4605   .bss.g_V_Alpha:00000000 g_V_Alpha
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4625   .bss.g_Vd_Pu:00000000 g_Vd_Pu
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4638   .bss.g_Vq_Pu:00000000 g_Vq_Pu
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4619   .bss.g_Vd:00000000 g_Vd
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4632   .bss.g_Vq:00000000 g_Vq
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4542   .bss.g_Id_sum:00000000 g_Id_sum
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4561   .bss.g_Iq_sum:00000000 g_Iq_sum
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4523   .bss.g_I_Array_Index_Invalid:00000000 g_I_Array_Index_Invalid
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4517   .bss.g_I_Array_Index:00000000 g_I_Array_Index
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4536   .bss.g_Id_Array:00000000 g_Id_Array
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4555   .bss.g_Iq_Array:00000000 g_Iq_Array
                            *COM*:00000004 g_Id_filter
                            *COM*:00000004 g_Iq_filter
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4530   .bss.g_Id:00000000 g_Id
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4549   .bss.g_Iq:00000000 g_Iq
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4598   .bss.g_Sum_ABC:00000000 g_Sum_ABC
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4511   .bss.g_IC_Raw:00000000 g_IC_Raw
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4504   .bss.g_IC:00000000 g_IC
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4497   .bss.g_IB_Raw:00000000 g_IB_Raw
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4490   .bss.g_IB:00000000 g_IB
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4483   .bss.g_IA_Raw:00000000 g_IA_Raw
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4476   .bss.g_IA:00000000 g_IA
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4328   .bss.Brake_rellease_delay:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4330   .bss.Brake_rellease_delay_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4340   .bss.Flag_Set_OpenLen:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4345   .bss.Grriper_Ready:00000000 $d
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 122


C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4351   .bss.Grriper_Run:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4357   .bss.Grriper_Run_last:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4359   .bss.Grriper_Run_off_delay_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4365   .bss.Grriper_Run_on_delay_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4371   .bss.I_phase:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4378   .bss.Para_Identificaion:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4388   .bss.PlusPosition_flag.12127:00000000 PlusPosition_flag.12127
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4389   .bss.PlusPosition_flag.12127:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4395   .bss.PosAtDead_Flag:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4401   .bss.PosAtDead_Flag_Last:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4403   .bss.ServoPro_En_count:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4409   .bss.Spd_RPM_CatchLimit:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4415   .bss.Speed_I_out:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4421   .bss.Speed_P_out:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4427   .bss.T_t:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4434   .bss.T_t_1:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4445   .bss.Test_perm:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4447   .bss.V_AddReg:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4453   .bss.V_SetTotal:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4459   .bss.Vel_PPS_raw1:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4465   .bss.delay_cnt.12025:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4469   .bss.delay_cnt.12025:00000000 delay_cnt.12025
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4472   .bss.g_IA:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4479   .bss.g_IA_Raw:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4486   .bss.g_IB:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4493   .bss.g_IB_Raw:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4500   .bss.g_IC:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4507   .bss.g_IC_Raw:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4514   .bss.g_I_Array_Index:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4520   .bss.g_I_Array_Index_Invalid:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4526   .bss.g_Id:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4533   .bss.g_Id_Array:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4539   .bss.g_Id_sum:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4545   .bss.g_Iq:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4552   .bss.g_Iq_Array:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4558   .bss.g_Iq_sum:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4564   .bss.g_Pos_Icnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4570   .bss.g_Pos_PID_16BIT:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4576   .bss.g_Pos_Spd:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4582   .bss.g_Sector:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4589   .bss.g_Spd_Icnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4595   .bss.g_Sum_ABC:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4601   .bss.g_V_Alpha:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4608   .bss.g_V_Beta:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4615   .bss.g_Vd:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4622   .bss.g_Vd_Pu:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4628   .bss.g_Vq:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4635   .bss.g_Vq_Pu:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4641   .bss.g_decLen:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4647   .bss.g_posPID_e:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4653   .bss.g_spd_error:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4659   .bss.g_testAngle:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4665   .bss.hall_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4671   .bss.hall_now_time:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4677   .bss.hall_previous_1_time:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4683   .bss.hall_previous_2_time:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4689   .bss.hall_previous_3_time:00000000 $d
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 123


C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4695   .bss.hall_speed_sample_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4701   .bss.hall_speed_sample_timeout:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4707   .bss.hall_speed_sample_timeout_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4713   .bss.index_I_phase:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4720   .bss.last_alpha:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4727   .bss.last_beta:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4734   .bss.last_hall_sample_time:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4740   .bss.last_time4_capture_ch1:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4746   .bss.motor_para_identification_count_Tms:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4753   .bss.pid_hall_sample_time_index:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4759   .bss.pos_error_to_target:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4766   .bss.s_Disable_Delay:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4773   .bss.s_Enable_Delay.12064:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4777   .bss.s_Enable_Delay.12064:00000000 s_Enable_Delay.12064
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4780   .bss.s_count.12063:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4784   .bss.s_count.12063:00000000 s_count.12063
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4787   .bss.s_count.12128:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4791   .bss.s_count.12128:00000000 s_count.12128
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4794   .bss.s_test_speed_t_count.12020:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4798   .bss.s_test_speed_t_count.12020:00000000 s_test_speed_t_count.12020
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4801   .bss.sin_wave_t_us:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4808   .bss.test.12007:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4812   .bss.test.12007:00000000 test.12007
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4815   .data.Test_dirt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4822   .data.Test_dirt_last:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4828   .data.phase_current_rev_gain_:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4835   .data.shunt_conductance:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s:4842   .data.v:00000000 $d

UNDEFINED SYMBOLS
Math_Sin_EN360
Math_Cos_EN360
Q15_MUL
update_current_control
PWM_OutPut_Open
g_CmdMap
g_Timer1CCR
g_ElectricAngle
bus_voltage_
motor_
EN_0
EN_360
__aeabi_i2d
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2uiz
log
sqrtf
Q16_MUL
g_high_fre_pulse
g_Sector_test
flag_processing_Jtest
state_Jtest
force_set
force_act
status_Mode_POSITION_FORCE
Flag_Profile_Enable
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccVrmqAS.s 			page 124


g_flag_monitor_from_host
gPos_ds
Profile_moving
flag_posReg_strengthen
Profile
Profile_ParaSet
Gripper_Move
Flag_contact
Flag_grip_F_OK
Flag_grip_P_OK
Flag_rellease_P_OK
Motor_forbidden
g_pos_tag
tCnt_f
update_current_meas
g_ZeroCur_MotorC
g_ZeroCur_MotorB
g_ZeroCur_MotorA
g_bEnableHB
g_pCur_ref_base_mA
__aeabi_f2d
__aeabi_d2f
EN_90
GetElectricAngle
measure_R
motor_fault_check
Pll_phase
non_linear_flux_observer
HAL_EXTI_GenerateSWI
g_ElectricAngle_15bit
pll_estimated_spd
pll_estimated_phase
MTPro
get_average_force_data
Get_Pos_Rod
Stroke_protection
icmu_sdtransmission_test
PWM_Enable
PWM_Disable
g_servo_cmd_period_cnt
Flag_1ms
s_count_50ms
Flag_50ms
Motor_emergercy_stop
Motor_pause_flag
g_Encode_offset
g_ThreeLoopParaBefLock
