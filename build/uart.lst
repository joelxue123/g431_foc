ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"uart.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.self_putchar,"ax",%progbits
  18              		.align	1
  19              		.global	self_putchar
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	self_putchar:
  26              	.LFB333:
  27              		.file 1 "Src/uart.c"
   1:Src/uart.c    **** #include "uart.h"
   2:Src/uart.c    **** 
   3:Src/uart.c    **** 
   4:Src/uart.c    **** void	self_putchar( char ch)
   5:Src/uart.c    **** {
  28              		.loc 1 5 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
   6:Src/uart.c    **** 	huart1.Instance->TDR = ch;
  34              		.loc 1 6 0
  35 0000 034B     		ldr	r3, .L5
  36 0002 1B68     		ldr	r3, [r3]
  37 0004 9862     		str	r0, [r3, #40]
  38              	.L2:
   7:Src/uart.c    **** 	while( __HAL_UART_GET_FLAG(&huart1, UART_FLAG_TXE) == RESET );
  39              		.loc 1 7 0 discriminator 1
  40 0006 DA69     		ldr	r2, [r3, #28]
  41 0008 1206     		lsls	r2, r2, #24
  42 000a FCD5     		bpl	.L2
   8:Src/uart.c    **** 	
   9:Src/uart.c    **** }
  43              		.loc 1 9 0
  44 000c 7047     		bx	lr
  45              	.L6:
  46 000e 00BF     		.align	2
  47              	.L5:
  48 0010 00000000 		.word	huart1
  49              		.cfi_endproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 2


  50              	.LFE333:
  52              		.section	.text.UART_PushFrame,"ax",%progbits
  53              		.align	1
  54              		.global	UART_PushFrame
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  58              		.fpu fpv4-sp-d16
  60              	UART_PushFrame:
  61              	.LFB335:
  10:Src/uart.c    **** 	
  11:Src/uart.c    **** 
  12:Src/uart.c    **** #if 1
  13:Src/uart.c    **** 
  14:Src/uart.c    ****  //   #include <stdio.h>
  15:Src/uart.c    ****  //   #include <rt_misc.h>
  16:Src/uart.c    **** 
  17:Src/uart.c    **** //    #pragma import(__use_no_semihosting) 
  18:Src/uart.c    **** 
  19:Src/uart.c    **** /*----------------------------------------------------------------------------
  20:Src/uart.c    **** Write character to Serial Port
  21:Src/uart.c    **** #define PRINTF_UART  
  22:Src/uart.c    **** *----------------------------------------------------------------------------*/
  23:Src/uart.c    **** #define PRINTF_UART USART3
  24:Src/uart.c    **** 
  25:Src/uart.c    **** /*----------------------------------------------------------------------------
  26:Src/uart.c    **** Read character from Serial Port   (blocking read)
  27:Src/uart.c    **** *----------------------------------------------------------------------------*/
  28:Src/uart.c    **** UART_HandleTypeDef huart1;
  29:Src/uart.c    **** 
  30:Src/uart.c    **** DMA_HandleTypeDef hdma_usart1_rx;
  31:Src/uart.c    **** DMA_HandleTypeDef hdma_usart1_tx;
  32:Src/uart.c    **** 
  33:Src/uart.c    **** uint8_t uart1_dma_rx_arry[128];
  34:Src/uart.c    **** uint8_t uart1_dma_tx_arry[128]={0x55,0xaa,0x11,0x22,0x33,0x44,0x55};
  35:Src/uart.c    **** 
  36:Src/uart.c    **** 
  37:Src/uart.c    **** 
  38:Src/uart.c    **** 
  39:Src/uart.c    **** #endif
  40:Src/uart.c    **** volatile u8 g_flag_monitor_from_host = 0;   // ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ú¼ï¿½ï¿½
  41:Src/uart.c    **** volatile u8 g_bUARTPushingFrames = 0;   // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½
  42:Src/uart.c    **** 
  43:Src/uart.c    **** u8 g_UART_RxBuf[RX_BUF_SIZE]; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  44:Src/uart.c    **** u8 g_UART_Rx_Modbus[RX_BUF_SIZE] = {0};
  45:Src/uart.c    **** u16 g_index_Modbus = 0; 
  46:Src/uart.c    **** u8 g_UART_TxBuf[TX_BUF_SIZE]; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  47:Src/uart.c    **** u8 g_UART_Tx_Modbus[TX_BUF_SIZE] = {0}; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  48:Src/uart.c    **** u8 g_UART_Tx_Modbus_len = 0; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  49:Src/uart.c    **** s32 g_RxBufptr = 0;	
  50:Src/uart.c    **** volatile u16 g_UART_RXlen = 0;// ï¿½ï¿½Ç°ï¿½ï¿½ï¿½Ýµï¿½Ö·
  51:Src/uart.c    **** volatile u8 g_UARTisSending = 0;	// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  52:Src/uart.c    **** volatile u8 g_fast_debug = 0;	    // 
  53:Src/uart.c    **** volatile struct HIGH_FREQ_FRAME struct_hFrame; 
  54:Src/uart.c    **** s16 g_test_debug = 0;// ï¿½ï¿½Ç°ï¿½ï¿½ï¿½Ýµï¿½Ö·
  55:Src/uart.c    **** static u8 CheckSum(u8* pdata, u32 len)
  56:Src/uart.c    **** {
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 3


  57:Src/uart.c    **** 	u8 sum = 0;
  58:Src/uart.c    **** 	u32 i;
  59:Src/uart.c    **** 	for(i=0; i<len; i++)
  60:Src/uart.c    **** 		sum += pdata[i];
  61:Src/uart.c    **** 	return sum;
  62:Src/uart.c    **** }
  63:Src/uart.c    **** 
  64:Src/uart.c    **** 
  65:Src/uart.c    **** /**
  66:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  67:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
  68:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
  69:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
  70:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
  71:Src/uart.c    ****   * @retval None
  72:Src/uart.c    ****   */
  73:Src/uart.c    **** void UART_PushFrame(u8 DataLen,u8 Cmd, u16 Index, u8* pdata)
  74:Src/uart.c    **** {
  62              		.loc 1 74 0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66              	.LVL1:
  67 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  68              	.LCFI0:
  69              		.cfi_def_cfa_offset 20
  70              		.cfi_offset 4, -20
  71              		.cfi_offset 5, -16
  72              		.cfi_offset 6, -12
  73              		.cfi_offset 7, -8
  74              		.cfi_offset 14, -4
  75:Src/uart.c    **** 	s16 i;
  76:Src/uart.c    **** 	u16 pos = 0;
  77:Src/uart.c    **** 	g_bUARTPushingFrames = 1;
  75              		.loc 1 77 0
  76 0002 1D4D     		ldr	r5, .L13
  77 0004 0124     		movs	r4, #1
  78 0006 2C70     		strb	r4, [r5]
  79              	.LVL2:
  78:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
  80              		.loc 1 78 0
  81 0008 1C4C     		ldr	r4, .L13+4
  82 000a AA26     		movs	r6, #170
  83 000c 2670     		strb	r6, [r4]
  84              	.LVL3:
  79:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
  85              		.loc 1 79 0
  86 000e 5526     		movs	r6, #85
  87 0010 6670     		strb	r6, [r4, #1]
  88              	.LVL4:
  80:Src/uart.c    **** 	if (Cmd == CMDTYPE_WR)
  81:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+3;		      // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
  82:Src/uart.c    **** 	else
  83:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+3;		      // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
  89              		.loc 1 83 0
  90 0012 C61C     		adds	r6, r0, #3
  91 0014 A670     		strb	r6, [r4, #2]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 4


  92              	.LVL5:
  84:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
  93              		.loc 1 84 0
  94 0016 1A4E     		ldr	r6, .L13+8
  85:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
  86:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;
  95              		.loc 1 86 0
  96 0018 6271     		strb	r2, [r4, #5]
  84:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
  97              		.loc 1 84 0
  98 001a B689     		ldrh	r6, [r6, #12]
  99 001c E670     		strb	r6, [r4, #3]
 100              	.LVL6:
  87:Src/uart.c    **** 	g_UART_TxBuf[pos++] = (Index>>8)&0xff;
 101              		.loc 1 87 0
 102 001e 120A     		lsrs	r2, r2, #8
 103              	.LVL7:
 104 0020 A271     		strb	r2, [r4, #6]
  85:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 105              		.loc 1 85 0
 106 0022 2171     		strb	r1, [r4, #4]
 107              	.LVL8:
  88:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
 108              		.loc 1 88 0
 109 0024 0022     		movs	r2, #0
 110              	.LVL9:
 111              	.L8:
 112              		.loc 1 88 0 is_stmt 0 discriminator 1
 113 0026 8242     		cmp	r2, r0
 114 0028 21DB     		blt	.L9
 115              	.LBB4:
 116              	.LBB5:
  57:Src/uart.c    **** 	u32 i;
 117              		.loc 1 57 0 is_stmt 1
 118 002a 0023     		movs	r3, #0
 119              	.LVL10:
 120 002c 00F10801 		add	r1, r0, #8
 121 0030 C61D     		adds	r6, r0, #7
  59:Src/uart.c    **** 		sum += pdata[i];
 122              		.loc 1 59 0
 123 0032 1A46     		mov	r2, r3
 124              	.LVL11:
 125              	.LBE5:
 126              	.LBE4:
  89:Src/uart.c    **** 	{
  90:Src/uart.c    **** 		g_UART_TxBuf[pos++] = pdata[i];
  91:Src/uart.c    **** 	}
  92:Src/uart.c    **** 	g_UART_TxBuf[pos] = CheckSum(&g_UART_TxBuf[2], pos-2);  // Ð£ï¿½ï¿½ï¿½
 127              		.loc 1 92 0
 128 0034 0530     		adds	r0, r0, #5
 129              	.LVL12:
 130              	.L10:
 131              	.LBB7:
 132              	.LBB6:
  60:Src/uart.c    **** 	return sum;
 133              		.loc 1 60 0
 134 0036 A718     		adds	r7, r4, r2
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 5


  59:Src/uart.c    **** 		sum += pdata[i];
 135              		.loc 1 59 0
 136 0038 0132     		adds	r2, r2, #1
 137              	.LVL13:
  60:Src/uart.c    **** 	return sum;
 138              		.loc 1 60 0
 139 003a BF78     		ldrb	r7, [r7, #2]	@ zero_extendqisi2
  59:Src/uart.c    **** 		sum += pdata[i];
 140              		.loc 1 59 0
 141 003c 9042     		cmp	r0, r2
  60:Src/uart.c    **** 	return sum;
 142              		.loc 1 60 0
 143 003e 3B44     		add	r3, r3, r7
 144              	.LVL14:
 145 0040 DBB2     		uxtb	r3, r3
 146              	.LVL15:
  59:Src/uart.c    **** 		sum += pdata[i];
 147              		.loc 1 59 0
 148 0042 F8D8     		bhi	.L10
 149              	.LVL16:
 150              	.LBE6:
 151              	.LBE7:
 152              		.loc 1 92 0
 153 0044 A355     		strb	r3, [r4, r6]
  93:Src/uart.c    **** 	pos++;
  94:Src/uart.c    **** 	if(g_fast_debug == 0)
 154              		.loc 1 94 0
 155 0046 0F4B     		ldr	r3, .L13+12
 156 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 157 004a 6BB9     		cbnz	r3, .L11
  95:Src/uart.c    **** 	{
  96:Src/uart.c    **** 
  97:Src/uart.c    **** 		__HAL_DMA_DISABLE(&hdma_usart1_tx);
 158              		.loc 1 97 0
 159 004c 0E4B     		ldr	r3, .L13+16
 160 004e 1B68     		ldr	r3, [r3]
 161 0050 1A68     		ldr	r2, [r3]
 162 0052 22F00102 		bic	r2, r2, #1
 163 0056 1A60     		str	r2, [r3]
  98:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 164              		.loc 1 98 0
 165 0058 0C4A     		ldr	r2, .L13+20
 166 005a 9A60     		str	r2, [r3, #8]
  99:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 167              		.loc 1 99 0
 168 005c 5960     		str	r1, [r3, #4]
 100:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 169              		.loc 1 100 0
 170 005e DC60     		str	r4, [r3, #12]
 101:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx);
 171              		.loc 1 101 0
 172 0060 1A68     		ldr	r2, [r3]
 173 0062 42F00102 		orr	r2, r2, #1
 174 0066 1A60     		str	r2, [r3]
 175              	.L11:
 102:Src/uart.c    **** //		HAL_UART_Transmit_DMA(&huart1,&g_UART_TxBuf[0],8);
 103:Src/uart.c    **** 	}		
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 6


 104:Src/uart.c    **** //	}
 105:Src/uart.c    **** 	g_bUARTPushingFrames = 0;
 176              		.loc 1 105 0
 177 0068 0023     		movs	r3, #0
 178 006a 2B70     		strb	r3, [r5]
 106:Src/uart.c    **** }
 179              		.loc 1 106 0
 180 006c F0BD     		pop	{r4, r5, r6, r7, pc}
 181              	.LVL17:
 182              	.L9:
  90:Src/uart.c    **** 	}
 183              		.loc 1 90 0 discriminator 3
 184 006e A118     		adds	r1, r4, r2
 185 0070 9E5C     		ldrb	r6, [r3, r2]	@ zero_extendqisi2
 186 0072 CE71     		strb	r6, [r1, #7]
 187              	.LVL18:
 188 0074 0132     		adds	r2, r2, #1
 189              	.LVL19:
 190 0076 D6E7     		b	.L8
 191              	.L14:
 192              		.align	2
 193              	.L13:
 194 0078 00000000 		.word	.LANCHOR0
 195 007c 00000000 		.word	g_UART_TxBuf
 196 0080 00000000 		.word	g_CmdMap
 197 0084 00000000 		.word	.LANCHOR1
 198 0088 00000000 		.word	hdma_usart1_tx
 199 008c 28380140 		.word	1073821736
 200              		.cfi_endproc
 201              	.LFE335:
 203              		.section	.text.MX_USART1_UART_Init,"ax",%progbits
 204              		.align	1
 205              		.global	MX_USART1_UART_Init
 206              		.syntax unified
 207              		.thumb
 208              		.thumb_func
 209              		.fpu fpv4-sp-d16
 211              	MX_USART1_UART_Init:
 212              	.LFB336:
 107:Src/uart.c    **** 
 108:Src/uart.c    **** 
 109:Src/uart.c    **** 
 110:Src/uart.c    **** 
 111:Src/uart.c    **** void MX_USART1_UART_Init(void)
 112:Src/uart.c    **** {
 213              		.loc 1 112 0
 214              		.cfi_startproc
 215              		@ args = 0, pretend = 0, frame = 0
 216              		@ frame_needed = 0, uses_anonymous_args = 0
 217 0000 10B5     		push	{r4, lr}
 218              	.LCFI1:
 219              		.cfi_def_cfa_offset 8
 220              		.cfi_offset 4, -8
 221              		.cfi_offset 14, -4
 113:Src/uart.c    **** 
 114:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 0 */
 115:Src/uart.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 7


 116:Src/uart.c    ****   /* USER CODE END USART1_Init 0 */
 117:Src/uart.c    **** 
 118:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 1 */
 119:Src/uart.c    **** 
 120:Src/uart.c    ****   /* USER CODE END USART1_Init 1 */
 121:Src/uart.c    ****   huart1.Instance = USART1;
 122:Src/uart.c    **** 	huart1.Init.BaudRate = 115200;
 222              		.loc 1 122 0
 223 0002 244A     		ldr	r2, .L37
 121:Src/uart.c    **** 	huart1.Init.BaudRate = 115200;
 224              		.loc 1 121 0
 225 0004 244C     		ldr	r4, .L37+4
 226              		.loc 1 122 0
 227 0006 4FF4E133 		mov	r3, #115200
 228 000a C4E90023 		strd	r2, r3, [r4]
 123:Src/uart.c    **** 	
 124:Src/uart.c    **** 	switch (g_CmdMap[CMD_BAUDRATE_UART])
 229              		.loc 1 124 0
 230 000e 234B     		ldr	r3, .L37+8
 231 0010 DB89     		ldrh	r3, [r3, #14]
 232 0012 1BB2     		sxth	r3, r3
 233 0014 012B     		cmp	r3, #1
 234 0016 37D0     		beq	.L17
 235 0018 032B     		cmp	r3, #3
 236 001a 38D0     		beq	.L18
 237 001c 13B9     		cbnz	r3, .L16
 125:Src/uart.c    **** 	{
 126:Src/uart.c    **** 		case BAUD_UART_19200:
 127:Src/uart.c    **** 			huart1.Init.BaudRate = 19200;
 238              		.loc 1 127 0
 239 001e 4FF49643 		mov	r3, #19200
 240              	.L36:
 128:Src/uart.c    **** 		break;
 129:Src/uart.c    **** 		case BAUD_UART_57600:
 130:Src/uart.c    **** 			huart1.Init.BaudRate = 57600;
 131:Src/uart.c    **** 		break;
 132:Src/uart.c    **** 		case BAUD_UART_115200:
 133:Src/uart.c    **** 			huart1.Init.BaudRate = 115200;
 134:Src/uart.c    **** 		break;
 135:Src/uart.c    **** 		case BAUD_UART_921600:
 136:Src/uart.c    **** 			huart1.Init.BaudRate = 921600;
 241              		.loc 1 136 0
 242 0022 6360     		str	r3, [r4, #4]
 243              	.L16:
 137:Src/uart.c    **** 		break;
 138:Src/uart.c    **** 		default:
 139:Src/uart.c    **** 			huart1.Init.BaudRate = 115200;
 140:Src/uart.c    **** 		break;
 141:Src/uart.c    **** 	}
 142:Src/uart.c    **** 	
 143:Src/uart.c    ****   
 144:Src/uart.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 244              		.loc 1 144 0
 245 0024 0023     		movs	r3, #0
 145:Src/uart.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 146:Src/uart.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 147:Src/uart.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 8


 246              		.loc 1 147 0
 247 0026 0C22     		movs	r2, #12
 148:Src/uart.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 248              		.loc 1 148 0
 249 0028 C4E90523 		strd	r2, r3, [r4, #20]
 149:Src/uart.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 150:Src/uart.c    ****   huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 151:Src/uart.c    ****   huart1.Init.ClockPrescaler = UART_PRESCALER_DIV1;
 152:Src/uart.c    ****   huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 153:Src/uart.c    ****   if (HAL_RS485Ex_Init(&huart1, UART_DE_POLARITY_HIGH, 0, 0) != HAL_OK)
 250              		.loc 1 153 0
 251 002c 1946     		mov	r1, r3
 252 002e 1A46     		mov	r2, r3
 253 0030 1948     		ldr	r0, .L37+4
 146:Src/uart.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 254              		.loc 1 146 0
 255 0032 2361     		str	r3, [r4, #16]
 145:Src/uart.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 256              		.loc 1 145 0
 257 0034 C4E90233 		strd	r3, r3, [r4, #8]
 150:Src/uart.c    ****   huart1.Init.ClockPrescaler = UART_PRESCALER_DIV1;
 258              		.loc 1 150 0
 259 0038 C4E90733 		strd	r3, r3, [r4, #28]
 152:Src/uart.c    ****   if (HAL_RS485Ex_Init(&huart1, UART_DE_POLARITY_HIGH, 0, 0) != HAL_OK)
 260              		.loc 1 152 0
 261 003c C4E90933 		strd	r3, r3, [r4, #36]
 262              		.loc 1 153 0
 263 0040 FFF7FEFF 		bl	HAL_RS485Ex_Init
 264              	.LVL20:
 265 0044 08B1     		cbz	r0, .L20
 266              	.LBB8:
 154:Src/uart.c    ****   {
 155:Src/uart.c    ****     Error_Handler();
 267              		.loc 1 155 0
 268 0046 FFF7FEFF 		bl	Error_Handler
 269              	.LVL21:
 270              	.L20:
 271              	.LBE8:
 156:Src/uart.c    ****   }
 157:Src/uart.c    ****   if (HAL_UARTEx_SetTxFifoThreshold(&huart1, UART_TXFIFO_THRESHOLD_1_8) != HAL_OK)
 272              		.loc 1 157 0
 273 004a 0021     		movs	r1, #0
 274 004c 1248     		ldr	r0, .L37+4
 275 004e FFF7FEFF 		bl	HAL_UARTEx_SetTxFifoThreshold
 276              	.LVL22:
 277 0052 08B1     		cbz	r0, .L21
 278              	.LBB9:
 158:Src/uart.c    ****   {
 159:Src/uart.c    ****     Error_Handler();
 279              		.loc 1 159 0
 280 0054 FFF7FEFF 		bl	Error_Handler
 281              	.LVL23:
 282              	.L21:
 283              	.LBE9:
 160:Src/uart.c    ****   }
 161:Src/uart.c    ****   if (HAL_UARTEx_SetRxFifoThreshold(&huart1, UART_RXFIFO_THRESHOLD_1_8) != HAL_OK)
 284              		.loc 1 161 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 9


 285 0058 0021     		movs	r1, #0
 286 005a 0F48     		ldr	r0, .L37+4
 287 005c FFF7FEFF 		bl	HAL_UARTEx_SetRxFifoThreshold
 288              	.LVL24:
 289 0060 08B1     		cbz	r0, .L22
 290              	.LBB10:
 162:Src/uart.c    ****   {
 163:Src/uart.c    ****     Error_Handler();
 291              		.loc 1 163 0
 292 0062 FFF7FEFF 		bl	Error_Handler
 293              	.LVL25:
 294              	.L22:
 295              	.LBE10:
 164:Src/uart.c    ****   }
 165:Src/uart.c    ****   if (HAL_UARTEx_DisableFifoMode(&huart1) != HAL_OK)
 296              		.loc 1 165 0
 297 0066 0C48     		ldr	r0, .L37+4
 298 0068 FFF7FEFF 		bl	HAL_UARTEx_DisableFifoMode
 299              	.LVL26:
 300 006c 08B1     		cbz	r0, .L23
 301              	.LBB11:
 166:Src/uart.c    ****   {
 167:Src/uart.c    ****     Error_Handler();
 302              		.loc 1 167 0
 303 006e FFF7FEFF 		bl	Error_Handler
 304              	.LVL27:
 305              	.L23:
 306              	.LBE11:
 168:Src/uart.c    ****   }
 169:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 2 */
 170:Src/uart.c    **** 
 171:Src/uart.c    ****   /* USER CODE END USART1_Init 2 */
 172:Src/uart.c    **** 
 173:Src/uart.c    **** 	HAL_UARTEx_ReceiveToIdle_DMA(&huart1,g_UART_RxBuf,128);
 307              		.loc 1 173 0
 308 0072 8022     		movs	r2, #128
 309 0074 0A49     		ldr	r1, .L37+12
 310 0076 0848     		ldr	r0, .L37+4
 311 0078 FFF7FEFF 		bl	HAL_UARTEx_ReceiveToIdle_DMA
 312              	.LVL28:
 174:Src/uart.c    **** 	huart1.Instance->CR3 |= USART_CR3_DMAT;
 313              		.loc 1 174 0
 314 007c 2268     		ldr	r2, [r4]
 315 007e 9368     		ldr	r3, [r2, #8]
 316 0080 43F08003 		orr	r3, r3, #128
 317 0084 9360     		str	r3, [r2, #8]
 175:Src/uart.c    **** 	
 176:Src/uart.c    **** }
 318              		.loc 1 176 0
 319 0086 10BD     		pop	{r4, pc}
 320              	.L17:
 130:Src/uart.c    **** 		break;
 321              		.loc 1 130 0
 322 0088 4FF46143 		mov	r3, #57600
 323 008c C9E7     		b	.L36
 324              	.L18:
 136:Src/uart.c    **** 		break;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 10


 325              		.loc 1 136 0
 326 008e 4FF46123 		mov	r3, #921600
 327 0092 C6E7     		b	.L36
 328              	.L38:
 329              		.align	2
 330              	.L37:
 331 0094 00380140 		.word	1073821696
 332 0098 00000000 		.word	huart1
 333 009c 00000000 		.word	g_CmdMap
 334 00a0 00000000 		.word	g_UART_RxBuf
 335              		.cfi_endproc
 336              	.LFE336:
 338              		.section	.text.UART_PushFrame_Old,"ax",%progbits
 339              		.align	1
 340              		.global	UART_PushFrame_Old
 341              		.syntax unified
 342              		.thumb
 343              		.thumb_func
 344              		.fpu fpv4-sp-d16
 346              	UART_PushFrame_Old:
 347              	.LFB337:
 177:Src/uart.c    **** /**
 178:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½Îªï¿½ï¿½ï¿½ï¿½LAï¿½ï¿½Ð­ï¿½ï¿½
 179:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
 180:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 181:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
 182:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
 183:Src/uart.c    ****   * @retval None
 184:Src/uart.c    ****   */
 185:Src/uart.c    **** 
 186:Src/uart.c    **** void UART_PushFrame_Old(u8 DataLen,  u8 Cmd, u8 Index, u8* pdata)
 187:Src/uart.c    **** {
 348              		.loc 1 187 0
 349              		.cfi_startproc
 350              		@ args = 0, pretend = 0, frame = 0
 351              		@ frame_needed = 0, uses_anonymous_args = 0
 352              	.LVL29:
 353 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 354              	.LCFI2:
 355              		.cfi_def_cfa_offset 20
 356              		.cfi_offset 4, -20
 357              		.cfi_offset 5, -16
 358              		.cfi_offset 6, -12
 359              		.cfi_offset 7, -8
 360              		.cfi_offset 14, -4
 188:Src/uart.c    **** 	s16 i;
 189:Src/uart.c    **** 	u16 pos = 0;
 190:Src/uart.c    **** 	g_bUARTPushingFrames = 1;
 361              		.loc 1 190 0
 362 0002 1C4D     		ldr	r5, .L45
 363 0004 0124     		movs	r4, #1
 364 0006 2C70     		strb	r4, [r5]
 365              	.LVL30:
 191:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
 366              		.loc 1 191 0
 367 0008 1B4C     		ldr	r4, .L45+4
 368 000a AA26     		movs	r6, #170
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 11


 369 000c 2670     		strb	r6, [r4]
 370              	.LVL31:
 192:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
 371              		.loc 1 192 0
 372 000e 5526     		movs	r6, #85
 373 0010 6670     		strb	r6, [r4, #1]
 374              	.LVL32:
 193:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+2;		    // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
 375              		.loc 1 193 0
 376 0012 861C     		adds	r6, r0, #2
 377 0014 A670     		strb	r6, [r4, #2]
 194:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
 378              		.loc 1 194 0
 379 0016 194E     		ldr	r6, .L45+8
 195:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 196:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;       //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
 380              		.loc 1 196 0
 381 0018 6271     		strb	r2, [r4, #5]
 194:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
 382              		.loc 1 194 0
 383 001a B689     		ldrh	r6, [r6, #12]
 384 001c E670     		strb	r6, [r4, #3]
 385              	.LVL33:
 195:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 386              		.loc 1 195 0
 387 001e 2171     		strb	r1, [r4, #4]
 388              	.LVL34:
 197:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
 389              		.loc 1 197 0
 390 0020 0022     		movs	r2, #0
 391              	.LVL35:
 392              	.L40:
 393              		.loc 1 197 0 is_stmt 0 discriminator 1
 394 0022 9042     		cmp	r0, r2
 395 0024 20DC     		bgt	.L41
 396              	.LBB14:
 397              	.LBB15:
  57:Src/uart.c    **** 	u32 i;
 398              		.loc 1 57 0 is_stmt 1
 399 0026 0023     		movs	r3, #0
 400              	.LVL36:
 401 0028 C11D     		adds	r1, r0, #7
 402 002a 861D     		adds	r6, r0, #6
  59:Src/uart.c    **** 		sum += pdata[i];
 403              		.loc 1 59 0
 404 002c 1A46     		mov	r2, r3
 405              	.LVL37:
 406              	.LBE15:
 407              	.LBE14:
 198:Src/uart.c    **** 	{
 199:Src/uart.c    **** 		g_UART_TxBuf[pos++] = pdata[i];
 200:Src/uart.c    **** 	}
 201:Src/uart.c    **** 	g_UART_TxBuf[pos] = CheckSum(&g_UART_TxBuf[2], pos-2);  // Ð£ï¿½ï¿½ï¿½
 408              		.loc 1 201 0
 409 002e 0430     		adds	r0, r0, #4
 410              	.LVL38:
 411              	.L42:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 12


 412              	.LBB17:
 413              	.LBB16:
  60:Src/uart.c    **** 	return sum;
 414              		.loc 1 60 0
 415 0030 A718     		adds	r7, r4, r2
  59:Src/uart.c    **** 		sum += pdata[i];
 416              		.loc 1 59 0
 417 0032 0132     		adds	r2, r2, #1
 418              	.LVL39:
  60:Src/uart.c    **** 	return sum;
 419              		.loc 1 60 0
 420 0034 BF78     		ldrb	r7, [r7, #2]	@ zero_extendqisi2
  59:Src/uart.c    **** 		sum += pdata[i];
 421              		.loc 1 59 0
 422 0036 9042     		cmp	r0, r2
  60:Src/uart.c    **** 	return sum;
 423              		.loc 1 60 0
 424 0038 3B44     		add	r3, r3, r7
 425              	.LVL40:
 426 003a DBB2     		uxtb	r3, r3
 427              	.LVL41:
  59:Src/uart.c    **** 		sum += pdata[i];
 428              		.loc 1 59 0
 429 003c F8D8     		bhi	.L42
 430              	.LVL42:
 431              	.LBE16:
 432              	.LBE17:
 433              		.loc 1 201 0
 434 003e A355     		strb	r3, [r4, r6]
 202:Src/uart.c    **** 	pos++;
 203:Src/uart.c    **** 	if(g_fast_debug == 0)
 435              		.loc 1 203 0
 436 0040 0F4B     		ldr	r3, .L45+12
 437 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 438 0044 6BB9     		cbnz	r3, .L43
 204:Src/uart.c    **** 	{
 205:Src/uart.c    **** 				__HAL_DMA_DISABLE(&hdma_usart1_tx);
 439              		.loc 1 205 0
 440 0046 0F4B     		ldr	r3, .L45+16
 441 0048 1B68     		ldr	r3, [r3]
 442 004a 1A68     		ldr	r2, [r3]
 443 004c 22F00102 		bic	r2, r2, #1
 444 0050 1A60     		str	r2, [r3]
 206:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 445              		.loc 1 206 0
 446 0052 0D4A     		ldr	r2, .L45+20
 447 0054 9A60     		str	r2, [r3, #8]
 207:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 448              		.loc 1 207 0
 449 0056 5960     		str	r1, [r3, #4]
 208:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 450              		.loc 1 208 0
 451 0058 DC60     		str	r4, [r3, #12]
 209:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx); 
 452              		.loc 1 209 0
 453 005a 1A68     		ldr	r2, [r3]
 454 005c 42F00102 		orr	r2, r2, #1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 13


 455 0060 1A60     		str	r2, [r3]
 456              	.L43:
 210:Src/uart.c    **** 	}		
 211:Src/uart.c    **** 	g_bUARTPushingFrames = 0;
 457              		.loc 1 211 0
 458 0062 0023     		movs	r3, #0
 459 0064 2B70     		strb	r3, [r5]
 212:Src/uart.c    **** }
 460              		.loc 1 212 0
 461 0066 F0BD     		pop	{r4, r5, r6, r7, pc}
 462              	.LVL43:
 463              	.L41:
 199:Src/uart.c    **** 	}
 464              		.loc 1 199 0 discriminator 3
 465 0068 A118     		adds	r1, r4, r2
 466 006a 9E5C     		ldrb	r6, [r3, r2]	@ zero_extendqisi2
 467 006c 8E71     		strb	r6, [r1, #6]
 468              	.LVL44:
 469 006e 0132     		adds	r2, r2, #1
 470              	.LVL45:
 471 0070 D7E7     		b	.L40
 472              	.L46:
 473 0072 00BF     		.align	2
 474              	.L45:
 475 0074 00000000 		.word	.LANCHOR0
 476 0078 00000000 		.word	g_UART_TxBuf
 477 007c 00000000 		.word	g_CmdMap
 478 0080 00000000 		.word	.LANCHOR1
 479 0084 00000000 		.word	hdma_usart1_tx
 480 0088 28380140 		.word	1073821736
 481              		.cfi_endproc
 482              	.LFE337:
 484              		.section	.text.int_last_usr_mode,"ax",%progbits
 485              		.align	1
 486              		.global	int_last_usr_mode
 487              		.syntax unified
 488              		.thumb
 489              		.thumb_func
 490              		.fpu fpv4-sp-d16
 492              	int_last_usr_mode:
 493              	.LFB338:
 213:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½Ò»Ö¡ï¿½ï¿½ï¿½ï¿½
 214:Src/uart.c    **** u8 flag_is_writable = 0;
 215:Src/uart.c    **** 
 216:Src/uart.c    **** static int last_usr_mode = 0;
 217:Src/uart.c    **** void int_last_usr_mode(void)
 218:Src/uart.c    **** {
 494              		.loc 1 218 0
 495              		.cfi_startproc
 496              		@ args = 0, pretend = 0, frame = 0
 497              		@ frame_needed = 0, uses_anonymous_args = 0
 498              		@ link register save eliminated.
 219:Src/uart.c    **** 	last_usr_mode = g_CmdMap[CMD_USEER_MODE];
 499              		.loc 1 219 0
 500 0000 034B     		ldr	r3, .L48
 501 0002 044A     		ldr	r2, .L48+4
 502 0004 B3F84030 		ldrh	r3, [r3, #64]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 14


 503 0008 1BB2     		sxth	r3, r3
 504 000a 1360     		str	r3, [r2]
 220:Src/uart.c    **** }
 505              		.loc 1 220 0
 506 000c 7047     		bx	lr
 507              	.L49:
 508 000e 00BF     		.align	2
 509              	.L48:
 510 0010 00000000 		.word	g_CmdMap
 511 0014 00000000 		.word	.LANCHOR2
 512              		.cfi_endproc
 513              	.LFE338:
 515              		.global	__aeabi_ldivmod
 516              		.section	.text.UART_ParseFrame,"ax",%progbits
 517              		.align	1
 518              		.global	UART_ParseFrame
 519              		.syntax unified
 520              		.thumb
 521              		.thumb_func
 522              		.fpu fpv4-sp-d16
 524              	UART_ParseFrame:
 525              	.LFB339:
 221:Src/uart.c    **** 
 222:Src/uart.c    **** void UART_ParseFrame(u8* pdata)
 223:Src/uart.c    **** {
 526              		.loc 1 223 0
 527              		.cfi_startproc
 528              		@ args = 0, pretend = 0, frame = 0
 529              		@ frame_needed = 0, uses_anonymous_args = 0
 530              	.LVL46:
 531 0000 2DE9F341 		push	{r0, r1, r4, r5, r6, r7, r8, lr}
 532              	.LCFI3:
 533              		.cfi_def_cfa_offset 32
 534              		.cfi_offset 4, -24
 535              		.cfi_offset 5, -20
 536              		.cfi_offset 6, -16
 537              		.cfi_offset 7, -12
 538              		.cfi_offset 8, -8
 539              		.cfi_offset 14, -4
 224:Src/uart.c    **** 	s32 result = 0;
 225:Src/uart.c    **** 	s32 Index = ((s32)pdata[FRA_INDEX+1]<<8)+(s32)pdata[FRA_INDEX];
 226:Src/uart.c    **** 	u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 227:Src/uart.c    **** 	s32 datalen = 0;
 228:Src/uart.c    **** 	u8* p_source;u8* p_des;
 229:Src/uart.c    **** 	s16 pos_set_2000;
 230:Src/uart.c    **** 	s32 i = 0;
 231:Src/uart.c    **** //	g_CmdMap[CMD_ID] = 0X01;
 232:Src/uart.c    **** 	if(pdata[FRA_ID] != g_CmdMap[CMD_ID] && pdata[FRA_ID] != 0xFF)
 540              		.loc 1 232 0
 541 0004 B44C     		ldr	r4, .L150
 542 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 543 0008 A389     		ldrh	r3, [r4, #12]
 544 000a 1BB2     		sxth	r3, r3
 545 000c 9A42     		cmp	r2, r3
 223:Src/uart.c    **** 	s32 result = 0;
 546              		.loc 1 223 0
 547 000e 0546     		mov	r5, r0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 15


 548              		.loc 1 232 0
 549 0010 01D0     		beq	.L51
 550              		.loc 1 232 0 is_stmt 0 discriminator 1
 551 0012 FF2A     		cmp	r2, #255
 552 0014 74D1     		bne	.L50
 553              	.L51:
 233:Src/uart.c    **** 	{
 234:Src/uart.c    **** 		return;
 235:Src/uart.c    **** 	}
 236:Src/uart.c    **** 	
 237:Src/uart.c    **** 	g_flag_monitor_from_host = 1;	
 554              		.loc 1 237 0 is_stmt 1
 555 0016 B148     		ldr	r0, .L150+4
 556              	.LVL47:
 225:Src/uart.c    **** 	u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 557              		.loc 1 225 0
 558 0018 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 559 001a E978     		ldrb	r1, [r5, #3]	@ zero_extendqisi2
 560              		.loc 1 237 0
 561 001c 0123     		movs	r3, #1
 562 001e 0370     		strb	r3, [r0]
 238:Src/uart.c    **** 	if(pdata[FRA_CMD] == CMDTYPE_WR || pdata[FRA_CMD] == CMDTYPE_WR_NR)
 563              		.loc 1 238 0
 564 0020 A878     		ldrb	r0, [r5, #2]	@ zero_extendqisi2
 565 0022 00F0FD07 		and	r7, r0, #253
 566 0026 312F     		cmp	r7, #49
 225:Src/uart.c    **** 	u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 567              		.loc 1 225 0
 568 0028 01EB0226 		add	r6, r1, r2, lsl #8
 569              		.loc 1 238 0
 570 002c 40F0A281 		bne	.L53
 239:Src/uart.c    **** 	{
 240:Src/uart.c    **** 		datalen = (g_UART_RXlen-2)>>1;
 571              		.loc 1 240 0
 572 0030 AB48     		ldr	r0, .L150+8
 241:Src/uart.c    **** 		flag_is_writable = 1;		
 573              		.loc 1 241 0
 574 0032 AC4A     		ldr	r2, .L150+12
 240:Src/uart.c    **** 		flag_is_writable = 1;		
 575              		.loc 1 240 0
 576 0034 0788     		ldrh	r7, [r0]
 577              		.loc 1 241 0
 578 0036 1370     		strb	r3, [r2]
 240:Src/uart.c    **** 		flag_is_writable = 1;		
 579              		.loc 1 240 0
 580 0038 023F     		subs	r7, r7, #2
 242:Src/uart.c    **** 		if(Index>=USERCMDMAP_LEN)
 581              		.loc 1 242 0
 582 003a FF2E     		cmp	r6, #255
 240:Src/uart.c    **** 		flag_is_writable = 1;		
 583              		.loc 1 240 0
 584 003c 47FA03F7 		asr	r7, r7, r3
 585              	.LVL48:
 586              		.loc 1 242 0
 587 0040 40F38380 		ble	.L115
 243:Src/uart.c    **** 		{
 244:Src/uart.c    **** 			pbWRBuf = &g_CmdMap_bWR[0][0];
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 16


 245:Src/uart.c    **** 			if((u16)g_CmdMap[CMD_ACCESS_CODE] != (u16)0x1234)
 588              		.loc 1 245 0
 589 0044 618B     		ldrh	r1, [r4, #26]
 590 0046 41F2342C 		movw	ip, #4660
 591 004a 09B2     		sxth	r1, r1
 592 004c 6145     		cmp	r1, ip
 593 004e 4FF00001 		mov	r1, #0
 594 0052 6AD0     		beq	.L116
 246:Src/uart.c    **** 			{
 247:Src/uart.c    **** 				flag_is_writable = 0;
 595              		.loc 1 247 0
 596 0054 1170     		strb	r1, [r2]
 597              	.LVL49:
 598              	.L56:
 248:Src/uart.c    **** 			}
 249:Src/uart.c    **** 			else				
 250:Src/uart.c    **** 			{
 251:Src/uart.c    **** 				for(i=0; i<datalen; i++)
 252:Src/uart.c    **** 				{
 253:Src/uart.c    **** 					if (*(pbWRBuf+Index-USERCMDMAP_LEN+i) != WRFLG_RW)
 254:Src/uart.c    **** 					flag_is_writable = 0;			
 255:Src/uart.c    **** 				}
 256:Src/uart.c    **** 			}
 257:Src/uart.c    **** 		}
 258:Src/uart.c    **** 		else
 259:Src/uart.c    **** 		{
 260:Src/uart.c    **** 			pbWRBuf = &g_CmdMap_User_bWR[0][0];
 261:Src/uart.c    **** 			for(i=0; i<datalen; i++)
 262:Src/uart.c    **** 			{
 263:Src/uart.c    **** 				if (*(pbWRBuf+Index+i) != WRFLG_RW)
 264:Src/uart.c    **** 				flag_is_writable = 0;
 265:Src/uart.c    **** 			}
 266:Src/uart.c    **** 		}
 267:Src/uart.c    **** 		if(flag_is_writable == 1)
 599              		.loc 1 267 0
 600 0056 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 601 0058 012B     		cmp	r3, #1
 602 005a 7CD0     		beq	.L62
 603              	.LVL50:
 604              	.L67:
 268:Src/uart.c    **** 		{	
 269:Src/uart.c    **** 			p_source = (u8*)&pdata[FRA_DATA];
 270:Src/uart.c    **** 			p_des = (u8*)&g_CmdMap[Index];
 271:Src/uart.c    **** 			for(i=0;i<((g_UART_RXlen-2-1));i++)
 272:Src/uart.c    **** 			{
 273:Src/uart.c    **** 				*(p_des+i) = *(p_source+i);
 274:Src/uart.c    **** 			}
 275:Src/uart.c    **** 		}
 276:Src/uart.c    **** 		//memcpy((s32*)&g_CmdMap[Index], (s32*)&pdata[FRA_DATA], (g_UART_RXlen-2-1));				      
 277:Src/uart.c    **** 		/* void *memcpy(void*dest, const void *src, size_t n);
 278:Src/uart.c    **** 		ï¿½ï¿½srcÖ¸ï¿½ï¿½ï¿½Ö·Îªï¿½ï¿½Ê¼ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½nï¿½ï¿½ï¿½Ö½Úµï¿½ï¿½ï¿½ï¿½Ý¸ï¿½ï¿½Æµï¿½
 279:Src/uart.c    **** 		if(pdata[FRA_ID] != BROADCAST_ID && pdata[FRA_CMD] == CMDTYPE_WR)
 605              		.loc 1 279 0
 606 005c 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 607 005e FF2B     		cmp	r3, #255
 608 0060 40F08A80 		bne	.L63
 609              	.L64:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 17


 280:Src/uart.c    **** 		{	
 281:Src/uart.c    **** 			Return_state_frame(CMDTYPE_WR,Index);
 282:Src/uart.c    **** 		}
 283:Src/uart.c    **** 		if(Index >= POS_LINEARITY_ADC(0) && Index <= POS_LINEARITY_ADC(NUM_LINEARITY_SEG))	
 610              		.loc 1 283 0
 611 0064 A6F5B873 		sub	r3, r6, #368
 612 0068 B3F5BE7F 		cmp	r3, #380
 613 006c 00F28C80 		bhi	.L68
 284:Src/uart.c    **** 		{
 285:Src/uart.c    **** 			pos_linearity_ini();
 614              		.loc 1 285 0
 615 0070 FFF7FEFF 		bl	pos_linearity_ini
 616              	.LVL51:
 617              	.L69:
 286:Src/uart.c    **** 		}
 287:Src/uart.c    **** 		if(Index <= CMD_SPD_SET_PU && (Index+datalen) > CMD_SPD_SET_PU && g_CmdMap[TAG_WORK_MODE] == MODE
 288:Src/uart.c    **** 		{
 289:Src/uart.c    **** 			if(g_CmdMap[CMD_E_STOP] == 0)
 290:Src/uart.c    **** 			{
 291:Src/uart.c    **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 292:Src/uart.c    **** 			}
 293:Src/uart.c    **** 		}
 294:Src/uart.c    **** 		//Î»ï¿½ï¿½+ï¿½ï¿½Ä£Ê½ï¿½ï¿½ Í¬Ê±ï¿½Þ¸ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È¡ï¿½Î»ï¿½Ã¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
 295:Src/uart.c    **** 		if(Index <= CMD_FORCE_SET_PU && (Index+datalen) >= CMD_POS_SET_PU && (g_CmdMap[CMD_USEER_MODE] ==
 296:Src/uart.c    **** 		{
 297:Src/uart.c    **** 				/*Force>0ï¿½ï¿½ï¿½ï¿½Â£ï¿½ Pos_set>Pos_actï¿½ï¿½ï¿½È½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½Î»ï¿½Ãµï¿
 298:Src/uart.c    **** 													Pos_set<Pos_act,Ö±ï¿½Ó½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Ä£Ê½
 299:Src/uart.c    **** 					Force_set<0ï¿½ï¿½ï¿½ï¿½Â£ï¿½Pos_set<Pos_actï¿½ï¿½ï¿½È½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½Î»ï¿½Ãµ
 300:Src/uart.c    **** 													Pos_set>Pos_act,Ö±ï¿½Ó½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Ä£Ê½
 301:Src/uart.c    **** 				*/
 302:Src/uart.c    **** 				if(g_CmdMap[CMD_FORCE_DIR] == 0)
 303:Src/uart.c    **** 				{
 304:Src/uart.c    **** 					force_set = g_CmdMap[CMD_FORCE_SET_PU];
 305:Src/uart.c    **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 306:Src/uart.c    **** 				}
 307:Src/uart.c    **** 				else
 308:Src/uart.c    **** 				{
 309:Src/uart.c    **** 					force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
 310:Src/uart.c    **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 311:Src/uart.c    **** 				}
 312:Src/uart.c    **** 
 313:Src/uart.c    **** 						if(force_set>0) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 314:Src/uart.c    **** 						{
 315:Src/uart.c    **** 							if(force_set>force_act) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î»
 316:Src/uart.c    **** 							{
 317:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
 318:Src/uart.c    **** 								{
 319:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 320:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 321:Src/uart.c    **** 									recPosCmd();
 322:Src/uart.c    **** 								}
 323:Src/uart.c    **** 								else
 324:Src/uart.c    **** 								{
 325:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½
 326:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 327:Src/uart.c    **** 								}
 328:Src/uart.c    **** 							}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 18


 329:Src/uart.c    **** 							else 
 330:Src/uart.c    **** 							{
 331:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï
 332:Src/uart.c    **** 								{
 333:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 334:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 335:Src/uart.c    **** 									recPosCmd();
 336:Src/uart.c    **** 								}
 337:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
 338:Src/uart.c    **** 								{
 339:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
 340:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 341:Src/uart.c    **** 								}				
 342:Src/uart.c    **** 							}
 343:Src/uart.c    **** 						}
 344:Src/uart.c    **** 						else if(force_set<0)  //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 345:Src/uart.c    **** 						{													
 346:Src/uart.c    **** 							if(force_set<force_act) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
 347:Src/uart.c    **** 							{
 348:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
 349:Src/uart.c    **** 								{
 350:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Pro
 351:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 352:Src/uart.c    **** 									recPosCmd();
 353:Src/uart.c    **** 								}
 354:Src/uart.c    **** 								else
 355:Src/uart.c    **** 								{
 356:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 357:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 358:Src/uart.c    **** 								}
 359:Src/uart.c    **** 							}
 360:Src/uart.c    **** 							else 
 361:Src/uart.c    **** 							{
 362:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï¿½Ò²Ã»
 363:Src/uart.c    **** 								{
 364:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 365:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 366:Src/uart.c    **** 									recPosCmd();
 367:Src/uart.c    **** 								}
 368:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
 369:Src/uart.c    **** 								{
 370:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
 371:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 372:Src/uart.c    **** 								}				
 373:Src/uart.c    **** 							}							
 374:Src/uart.c    **** 						}
 375:Src/uart.c    **** 				else
 376:Src/uart.c    **** 				{
 377:Src/uart.c    **** 					status_Mode_POSITION_FORCE = 3; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Profile
 378:Src/uart.c    **** 				}				
 379:Src/uart.c    **** 		}		
 380:Src/uart.c    **** 		if(Index <= CMD_POS_SET_PU && (Index+datalen) > CMD_POS_SET_PU 
 618              		.loc 1 380 0
 619 0074 242E     		cmp	r6, #36
 620 0076 40F3EC80 		ble	.L73
 621              	.LVL52:
 622              	.L85:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 19


 381:Src/uart.c    **** 			&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_M
 382:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 383:Src/uart.c    **** 		{
 384:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 385:Src/uart.c    **** 				recPosCmd();
 386:Src/uart.c    **** 		}
 387:Src/uart.c    **** 		if(Index <= CMD_FORCE_SET_PU && (Index+datalen) >= CMD_FORCE_SET_PU && g_CmdMap[CMD_USEER_MODE] =
 388:Src/uart.c    **** 		{
 389:Src/uart.c    **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 390:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 391:Src/uart.c    **** 		}
 392:Src/uart.c    **** 		if(Index == SYS_SET_POS_ACT_PU)     
 623              		.loc 1 392 0
 624 007a 40F20713 		movw	r3, #263
 625 007e 9E42     		cmp	r6, r3
 626 0080 40F04A81 		bne	.L88
 393:Src/uart.c    **** 		{
 394:Src/uart.c    **** 				//ï¿½ï¿½ï¿½Ãµï¿½Ç°Î»ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ã¹«Ê½
 395:Src/uart.c    **** 			if(g_CmdMap[SYS_MU_COMM_TO_PC] == 1)     //MU Ð¾Æ¬ï¿½ê¶¨Ä£Ê½
 627              		.loc 1 395 0
 628 0084 B4F81832 		ldrh	r3, [r4, #536]
 629 0088 974A     		ldr	r2, .L150+16
 630 008a 1BB2     		sxth	r3, r3
 631 008c 012B     		cmp	r3, #1
 632 008e 1568     		ldr	r5, [r2]
 633              	.LVL53:
 634 0090 40F01E81 		bne	.L90
 396:Src/uart.c    **** 			{
 397:Src/uart.c    **** 				//	flag_first_exe = 0;
 398:Src/uart.c    **** 					rod_pos_Muti_Encoder = g_CmdMap[SYS_SET_POS_ACT_PU]*(*g_pPos_ref_base_um)*(int64_t)g_CmdMap[GE
 635              		.loc 1 398 0
 636 0094 9548     		ldr	r0, .L150+20
 637 0096 B4F80E62 		ldrh	r6, [r4, #526]
 638 009a 0068     		ldr	r0, [r0]
 639 009c B4F85032 		ldrh	r3, [r4, #592]
 640 00a0 B4F84E22 		ldrh	r2, [r4, #590]
 641 00a4 31B2     		sxth	r1, r6
 642 00a6 0668     		ldr	r6, [r0]
 643 00a8 1BB2     		sxth	r3, r3
 644 00aa 4E43     		muls	r6, r1, r6
 645 00ac 86FB0367 		smull	r6, r7, r6, r3
 646 00b0 002E     		cmp	r6, #0
 647 00b2 77F10003 		sbcs	r3, r7, #0
 648 00b6 02DA     		bge	.L91
 649 00b8 FF36     		adds	r6, r6, #255
 650 00ba 47F10007 		adc	r7, r7, #0
 651              	.L91:
 652 00be 12B2     		sxth	r2, r2
 653 00c0 300A     		lsrs	r0, r6, #8
 654 00c2 D317     		asrs	r3, r2, #31
 655 00c4 40EA0760 		orr	r0, r0, r7, lsl #24
 656 00c8 3912     		asrs	r1, r7, #8
 657 00ca FFF7FEFF 		bl	__aeabi_ldivmod
 658              	.LVL54:
 659 00ce 884B     		ldr	r3, .L150+24
 660 00d0 1860     		str	r0, [r3]
 661              	.L92:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 20


 399:Src/uart.c    **** 			}
 400:Src/uart.c    **** 			else
 401:Src/uart.c    **** 				*g_pMU_value_offset = MU_Value;
 402:Src/uart.c    **** 				range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_offs
 662              		.loc 1 402 0
 663 00d2 2B68     		ldr	r3, [r5]
 664 00d4 874A     		ldr	r2, .L150+28
 665 00d6 C3F1FF13 		rsb	r3, r3, #16711935
 666 00da 1268     		ldr	r2, [r2]
 667 00dc 03F57F43 		add	r3, r3, #65280
 668 00e0 D31A     		subs	r3, r2, r3
 669 00e2 854A     		ldr	r2, .L150+32
 670              	.L146:
 403:Src/uart.c    **** 		}
 404:Src/uart.c    **** 		if(Index == MOT_EANGLE_OFFSET)	
 405:Src/uart.c    **** 		{
 406:Src/uart.c    **** 				g_Encode_offset = (int)g_CmdMap[MOT_EANGLE_OFFSET];
 407:Src/uart.c    **** 				g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 671              		.loc 1 407 0
 672 00e4 1360     		str	r3, [r2]
 673              	.L93:
 408:Src/uart.c    **** 		}
 409:Src/uart.c    **** 		if(Index == SYS_SN_PART1)	
 410:Src/uart.c    **** 		{
 411:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART1] = g_CmdMap[SYS_SN_PART1];
 412:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART2] = g_CmdMap[SYS_SN_PART2];
 413:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART3] = g_CmdMap[SYS_SN_PART3];	
 414:Src/uart.c    **** 		}	
 415:Src/uart.c    **** 		if(Index == CMD_PF_TEST_WAVE_F)	
 416:Src/uart.c    **** 		{
 417:Src/uart.c    **** 			setPara_waveSinGenrator(&waveGen,g_CmdMap[CMD_PF_TEST_WAVE_F]
 418:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 419:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_TROUGH]
 420:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_CYCLE]
 421:Src/uart.c    **** 																			,g_CmdMap[CMD_POS_ACT_PU]);
 422:Src/uart.c    **** 		}	
 423:Src/uart.c    **** 		
 424:Src/uart.c    **** 		if(last_usr_mode != g_CmdMap[CMD_USEER_MODE])
 674              		.loc 1 424 0
 675 00e6 854A     		ldr	r2, .L150+36
 676 00e8 B4F84030 		ldrh	r3, [r4, #64]
 677 00ec 1168     		ldr	r1, [r2]
 678 00ee 1BB2     		sxth	r3, r3
 679 00f0 8B42     		cmp	r3, r1
 680 00f2 05D0     		beq	.L50
 425:Src/uart.c    **** 		{
 426:Src/uart.c    **** 			last_usr_mode = g_CmdMap[CMD_USEER_MODE];
 681              		.loc 1 426 0
 682 00f4 B4F84030 		ldrh	r3, [r4, #64]
 683 00f8 1BB2     		sxth	r3, r3
 684 00fa 1360     		str	r3, [r2]
 427:Src/uart.c    **** 			g_CmdMap[CMD_PAUSE] =1 ;
 685              		.loc 1 427 0
 686 00fc 0123     		movs	r3, #1
 687 00fe A382     		strh	r3, [r4, #20]	@ movhi
 688              	.L50:
 428:Src/uart.c    **** 		}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 21


 429:Src/uart.c    **** 	}
 430:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_GET_STATE)
 431:Src/uart.c    **** 	{		
 432:Src/uart.c    **** 				Return_state_frame(CMDTYPE_GET_STATE,0);
 433:Src/uart.c    **** 	}	
 434:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_RD)
 435:Src/uart.c    **** 	{		
 436:Src/uart.c    **** 				//UART_PushFrame(pdata[FRA_DATA],CMDTYPE_RD, Index, (u8*)(&g_CmdMap[Index]));	
 437:Src/uart.c    **** 				UART_PushFrame(2*pdata[FRA_DATA], CMDTYPE_RD, Index, (u8*)(&g_CmdMap[Index]));	//ï¿½Ä´ï¿½ï¿½ï¿½
 438:Src/uart.c    **** 	}
 439:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_DEBUG)
 440:Src/uart.c    **** 	{
 441:Src/uart.c    **** 				ScopeProDebug();
 442:Src/uart.c    **** 	}
 443:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_DEBUG_2)
 444:Src/uart.c    **** 	{
 445:Src/uart.c    **** 				ScopeProDebug_2();
 446:Src/uart.c    **** 	}
 447:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_ADC_CLIB)
 448:Src/uart.c    **** 	{
 449:Src/uart.c    **** 				ReturnCLibADC_Frame();
 450:Src/uart.c    **** 	}
 451:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_RD)//LAï¿½ï¿½Ð­ï¿½ï¿½Ä¶ï¿½Ö¸ï¿½ï¿½
 452:Src/uart.c    **** 	{		
 453:Src/uart.c    **** 		Return_OldFrame_data(CMDTYPE_OLD_RD,pdata[3],pdata[4]);
 454:Src/uart.c    **** 	}
 455:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_WR)//LAï¿½ï¿½Ð­ï¿½ï¿½ï¿½Ð´Ö¸ï¿½ï¿½
 456:Src/uart.c    **** 	{
 457:Src/uart.c    **** 		//IDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¡ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½È²ï¿½ï¿½
 458:Src/uart.c    **** 		datalen = pdata[0]-2;//Ð´ï¿½ï¿½ï¿½ï¿½Ö½Ú³ï¿½ï¿½ï¿½ 
 459:Src/uart.c    **** 		pdata[4]--;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 460:Src/uart.c    **** 		for(i=0;i<datalen;i++)
 461:Src/uart.c    **** 		{
 462:Src/uart.c    **** 			if(pdata[3]+i == 2)//ID
 463:Src/uart.c    **** 			{
 464:Src/uart.c    **** 				g_CmdMap[CMD_ID] = pdata[4+i];
 465:Src/uart.c    **** 			}
 466:Src/uart.c    **** 			else if(pdata[3]+i == 12)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 467:Src/uart.c    **** 			{
 468:Src/uart.c    **** 				g_CmdMap[CMD_BAUDRATE_UART] = pdata[4+i];
 469:Src/uart.c    **** 			}
 470:Src/uart.c    **** 			else if(pdata[3]+i == 31)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£×¼Î»
 471:Src/uart.c    **** 			{
 472:Src/uart.c    **** 				//g_CmdMap[CMD_BAUDRATE_UART] = pdata[4+i];
 473:Src/uart.c    **** 			}
 474:Src/uart.c    **** 			else if(pdata[3]+i == 32)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½Ö½ï¿½
 475:Src/uart.c    **** 			{
 476:Src/uart.c    **** 				g_CmdMap[CMD_OVER_CURRENT_SET] = (pdata[4+i]+(pdata[4+i+1]<<8))/10;
 477:Src/uart.c    **** 			}
 478:Src/uart.c    **** 			else if(pdata[3]+i == 98)//ï¿½ï¿½ï¿½Â±ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½Ö½ï¿½
 479:Src/uart.c    **** 			{
 480:Src/uart.c    **** 				g_CmdMap[CMD_OVER_TEMP_SET] = (pdata[4+i]+(pdata[4+i+1]<<8))/10;
 481:Src/uart.c    **** 			}
 482:Src/uart.c    **** 			else
 483:Src/uart.c    **** 			{
 484:Src/uart.c    **** 			}			
 485:Src/uart.c    **** 		}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 22


 486:Src/uart.c    **** 		Return_OldFrame_data(CMDTYPE_OLD_WR,pdata[3],0);
 487:Src/uart.c    **** 	}
 488:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_CMD )//LAï¿½ï¿½Ð­ï¿½ï¿½Äµï¿½ï¿½ï¿½Ö¸ï¿½ï¿½
 489:Src/uart.c    **** 	{
 490:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½
 491:Src/uart.c    **** 		//ï¿½ï¿½Í£
 492:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½
 493:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 494:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ö¸ï¿½ï¿½(0-2000)
 495:Src/uart.c    **** 		if(pdata[4] == 0x04)//Ê¹ï¿½ï¿½
 496:Src/uart.c    **** 		{
 497:Src/uart.c    **** //			g_CmdMap[CMD_E_STOP] = 0;
 498:Src/uart.c    **** 		}
 499:Src/uart.c    **** 		if(pdata[4] == 0x23)//ï¿½ï¿½Í£
 500:Src/uart.c    **** 		{
 501:Src/uart.c    **** 			g_CmdMap[CMD_E_STOP] = 1;
 502:Src/uart.c    **** 		}
 503:Src/uart.c    **** 		if(pdata[4] == 0x23)//ï¿½ï¿½Í£ï¿½Ë¶ï¿½
 504:Src/uart.c    **** 		{
 505:Src/uart.c    **** 			
 506:Src/uart.c    **** 		}
 507:Src/uart.c    **** 		if(pdata[4] == 0x20)//ï¿½ï¿½ï¿½æµ½Flash
 508:Src/uart.c    **** 		{
 509:Src/uart.c    **** 			g_CmdMap[CMD_SAVE] = 1;
 510:Src/uart.c    **** 		}
 511:Src/uart.c    **** 		if(pdata[4] == 0x22)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×´Ì¬
 512:Src/uart.c    **** 		{
 513:Src/uart.c    **** 			
 514:Src/uart.c    **** 		}
 515:Src/uart.c    **** 		if(pdata[4] == 0x1E)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¸ï¿½ï¿½
 516:Src/uart.c    **** 		{
 517:Src/uart.c    **** 			g_CmdMap[CMD_CLEAR_ERROR] = 1;
 518:Src/uart.c    **** 		}	
 519:Src/uart.c    **** 		Return_OldFrame_state(pdata[FRA_CMD],pdata[3],pdata[4]); 
 520:Src/uart.c    **** 		//Return_OldFrame_data(u8 cmd_type,u8 index,u8 length) 
 521:Src/uart.c    **** 	}
 522:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_POS || pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_1|| pdata[FRA_CMD
 523:Src/uart.c    **** 	{
 524:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ö¸ï¿½ï¿½(0-2000)
 525:Src/uart.c    **** 		if(pdata[3] == 0x37)
 526:Src/uart.c    **** 		{
 527:Src/uart.c    **** 			pos_set_2000 = (s16)pdata[4] + (((s16)pdata[5])<<8);
 528:Src/uart.c    **** 			if(pos_set_2000<0)
 529:Src/uart.c    **** 			{
 530:Src/uart.c    **** 				pos_set_2000 = 0;				
 531:Src/uart.c    **** 			}
 532:Src/uart.c    **** 			else if(pos_set_2000>2000)
 533:Src/uart.c    **** 			{
 534:Src/uart.c    **** 				pos_set_2000 = 2000;
 535:Src/uart.c    **** 			}
 536:Src/uart.c    **** 			g_CmdMap[CMD_POS_SET_PU] = pos_set_2000*PU_REFERENCE/2000;
 537:Src/uart.c    **** 		}
 538:Src/uart.c    **** 		recPosCmd();
 539:Src/uart.c    **** 		//Flag_Set_OpenLen = 1;
 540:Src/uart.c    **** 		g_CmdMap[CMD_SPD_SET_PU] = 16384;
 541:Src/uart.c    **** //		pos_interpolation_B_um = pos_interpolation_A_um;
 542:Src/uart.c    **** //		pos_interpolation_A_um = g_CmdMap[CMD_POS_SET_PU];
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 23


 543:Src/uart.c    **** //		time_interpolation_s = (double)g_servo_cmd_period/(double)(F_SPD_REGULATOR_HZ);
 544:Src/uart.c    **** //		vel_interpolation_umPs = (s32)((double)(pos_interpolation_A_um-pos_interpolation_B_um)/time_int
 545:Src/uart.c    **** //		Profile_ParaSet();
 546:Src/uart.c    **** //		if(pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_1|| pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_2)
 547:Src/uart.c    **** //		{
 548:Src/uart.c    **** //			g_servo_cmd_period = g_servo_cmd_period_cnt;//ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
 549:Src/uart.c    **** //			g_servo_cmd_period_cnt = 0; //ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¼ï¿½Ê±
 550:Src/uart.c    **** //			g_CmdMap[CMD_USEER_MODE] = CMD_USEER_MODE_1_SERVO;
 551:Src/uart.c    **** //		}
 552:Src/uart.c    **** //		else
 553:Src/uart.c    **** //		{
 554:Src/uart.c    **** //			g_servo_cmd_period = 3000;//ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ms
 555:Src/uart.c    **** //			g_servo_cmd_period_cnt = 0; //ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¼ï¿½Ê±
 556:Src/uart.c    **** //			g_CmdMap[CMD_USEER_MODE] = CMD_USEER_MODE_0_POSITION;
 557:Src/uart.c    **** //		}		
 558:Src/uart.c    **** 		Return_OldFrame_state(pdata[FRA_CMD],pdata[3],0); 
 559:Src/uart.c    **** 	}
 560:Src/uart.c    **** 	else
 561:Src/uart.c    **** 	{
 562:Src/uart.c    **** 		
 563:Src/uart.c    **** 	}
 564:Src/uart.c    **** }
 689              		.loc 1 564 0
 690 0100 02B0     		add	sp, sp, #8
 691              	.LCFI4:
 692              		.cfi_remember_state
 693              		.cfi_def_cfa_offset 24
 694              		@ sp needed
 695 0102 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 696              	.LVL55:
 697              	.L58:
 698              	.LCFI5:
 699              		.cfi_restore_state
 253:Src/uart.c    **** 					flag_is_writable = 0;			
 700              		.loc 1 253 0
 701 0106 0CEB060E 		add	lr, ip, r6
 702 010a AEF5807E 		sub	lr, lr, #256
 251:Src/uart.c    **** 				{
 703              		.loc 1 251 0
 704 010e 0CF1010C 		add	ip, ip, #1
 705              	.LVL56:
 253:Src/uart.c    **** 					flag_is_writable = 0;			
 706              		.loc 1 253 0
 707 0112 1EF808E0 		ldrb	lr, [lr, r8]	@ zero_extendqisi2
 708 0116 BEF1020F 		cmp	lr, #2
 709 011a 1CBF     		itt	ne
 710 011c 0121     		movne	r1, #1
 711 011e 0023     		movne	r3, #0
 712              	.LVL57:
 713              	.L55:
 251:Src/uart.c    **** 				{
 714              		.loc 1 251 0 discriminator 1
 715 0120 BC45     		cmp	ip, r7
 716 0122 F0DB     		blt	.L58
 717              	.L142:
 718 0124 B9B1     		cbz	r1, .L62
 719 0126 1370     		strb	r3, [r2]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 24


 720 0128 95E7     		b	.L56
 721              	.LVL58:
 722              	.L116:
 251:Src/uart.c    **** 				{
 723              		.loc 1 251 0 is_stmt 0
 724 012a 8C46     		mov	ip, r1
 253:Src/uart.c    **** 					flag_is_writable = 0;			
 725              		.loc 1 253 0 is_stmt 1
 726 012c DFF8E081 		ldr	r8, .L150+56
 727 0130 F6E7     		b	.L55
 728              	.LVL59:
 729              	.L61:
 263:Src/uart.c    **** 				flag_is_writable = 0;
 730              		.loc 1 263 0
 731 0132 1EF80C80 		ldrb	r8, [lr, ip]	@ zero_extendqisi2
 732 0136 B8F1020F 		cmp	r8, #2
 733 013a 1CBF     		itt	ne
 734 013c 0121     		movne	r1, #1
 735 013e 0023     		movne	r3, #0
 261:Src/uart.c    **** 			{
 736              		.loc 1 261 0
 737 0140 0CF1010C 		add	ip, ip, #1
 738              	.LVL60:
 739              	.L54:
 261:Src/uart.c    **** 			{
 740              		.loc 1 261 0 is_stmt 0 discriminator 1
 741 0144 BC45     		cmp	ip, r7
 742 0146 F4DB     		blt	.L61
 743 0148 ECE7     		b	.L142
 744              	.LVL61:
 745              	.L115:
 263:Src/uart.c    **** 				flag_is_writable = 0;
 746              		.loc 1 263 0 is_stmt 1
 747 014a DFF8C8E1 		ldr	lr, .L150+60
 748 014e 0021     		movs	r1, #0
 261:Src/uart.c    **** 			{
 749              		.loc 1 261 0
 750 0150 8C46     		mov	ip, r1
 263:Src/uart.c    **** 				flag_is_writable = 0;
 751              		.loc 1 263 0
 752 0152 B644     		add	lr, lr, r6
 753 0154 F6E7     		b	.L54
 754              	.LVL62:
 755              	.L62:
 270:Src/uart.c    **** 			for(i=0;i<((g_UART_RXlen-2-1));i++)
 756              		.loc 1 270 0
 757 0156 04EB4601 		add	r1, r4, r6, lsl #1
 758 015a 05F1040C 		add	ip, r5, #4
 271:Src/uart.c    **** 			{
 759              		.loc 1 271 0
 760 015e 0A46     		mov	r2, r1
 761              	.LVL63:
 762              	.L65:
 271:Src/uart.c    **** 			{
 763              		.loc 1 271 0 is_stmt 0 discriminator 1
 764 0160 0388     		ldrh	r3, [r0]
 765 0162 A2EB010E 		sub	lr, r2, r1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 25


 766              	.LVL64:
 767 0166 033B     		subs	r3, r3, #3
 768 0168 7345     		cmp	r3, lr
 769 016a 7FF777AF 		ble	.L67
 273:Src/uart.c    **** 			}
 770              		.loc 1 273 0 is_stmt 1 discriminator 3
 771 016e 1CF8013F 		ldrb	r3, [ip, #1]!	@ zero_extendqisi2
 772 0172 02F8013B 		strb	r3, [r2], #1
 773              	.LVL65:
 774 0176 F3E7     		b	.L65
 775              	.LVL66:
 776              	.L63:
 279:Src/uart.c    **** 		{	
 777              		.loc 1 279 0 discriminator 1
 778 0178 A878     		ldrb	r0, [r5, #2]	@ zero_extendqisi2
 779 017a 3128     		cmp	r0, #49
 780 017c 7FF472AF 		bne	.L64
 281:Src/uart.c    **** 		}
 781              		.loc 1 281 0
 782 0180 F1B2     		uxtb	r1, r6
 783 0182 FFF7FEFF 		bl	Return_state_frame
 784              	.LVL67:
 785 0186 6DE7     		b	.L64
 786              	.L68:
 287:Src/uart.c    **** 		{
 787              		.loc 1 287 0
 788 0188 232E     		cmp	r6, #35
 789 018a 3FF773AF 		bgt	.L69
 287:Src/uart.c    **** 		{
 790              		.loc 1 287 0 is_stmt 0 discriminator 1
 791 018e F319     		adds	r3, r6, r7
 792 0190 232B     		cmp	r3, #35
 793 0192 5EDD     		ble	.L73
 287:Src/uart.c    **** 		{
 794              		.loc 1 287 0 discriminator 2
 795 0194 B4F80432 		ldrh	r3, [r4, #516]
 796 0198 1BB2     		sxth	r3, r3
 797 019a 022B     		cmp	r3, #2
 798 019c 05D1     		bne	.L72
 289:Src/uart.c    **** 			{
 799              		.loc 1 289 0 is_stmt 1
 800 019e 638A     		ldrh	r3, [r4, #18]
 801 01a0 1BB2     		sxth	r3, r3
 802 01a2 13B9     		cbnz	r3, .L72
 291:Src/uart.c    **** 			}
 803              		.loc 1 291 0
 804 01a4 0123     		movs	r3, #1
 805 01a6 A4F80232 		strh	r3, [r4, #514]	@ movhi
 806              	.L72:
 295:Src/uart.c    **** 		{
 807              		.loc 1 295 0
 808 01aa 232E     		cmp	r6, #35
 809 01ac 51D0     		beq	.L73
 295:Src/uart.c    **** 		{
 810              		.loc 1 295 0 is_stmt 0 discriminator 2
 811 01ae B4F84030 		ldrh	r3, [r4, #64]
 812 01b2 1BB2     		sxth	r3, r3
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 26


 813 01b4 052B     		cmp	r3, #5
 814 01b6 4CD1     		bne	.L73
 302:Src/uart.c    **** 				{
 815              		.loc 1 302 0 is_stmt 1
 816 01b8 638D     		ldrh	r3, [r4, #42]
 817 01ba 514A     		ldr	r2, .L150+40
 818 01bc 5149     		ldr	r1, .L150+44
 819 01be 1BB2     		sxth	r3, r3
 820 01c0 03BB     		cbnz	r3, .L75
 304:Src/uart.c    **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 821              		.loc 1 304 0
 822 01c2 B4F84430 		ldrh	r3, [r4, #68]
 823 01c6 1380     		strh	r3, [r2]	@ movhi
 305:Src/uart.c    **** 				}
 824              		.loc 1 305 0
 825 01c8 B4F85A30 		ldrh	r3, [r4, #90]
 826              	.L143:
 310:Src/uart.c    **** 				}
 827              		.loc 1 310 0
 828 01cc 0B80     		strh	r3, [r1]	@ movhi
 313:Src/uart.c    **** 						{
 829              		.loc 1 313 0
 830 01ce 1388     		ldrh	r3, [r2]
 315:Src/uart.c    **** 							{
 831              		.loc 1 315 0
 832 01d0 1088     		ldrh	r0, [r2]
 313:Src/uart.c    **** 						{
 833              		.loc 1 313 0
 834 01d2 1BB2     		sxth	r3, r3
 835 01d4 002B     		cmp	r3, #0
 836 01d6 4C4B     		ldr	r3, .L150+48
 837 01d8 27DD     		ble	.L77
 315:Src/uart.c    **** 							{
 838              		.loc 1 315 0
 839 01da 0A88     		ldrh	r2, [r1]
 317:Src/uart.c    **** 								{
 840              		.loc 1 317 0
 841 01dc B4F84810 		ldrh	r1, [r4, #72]
 315:Src/uart.c    **** 							{
 842              		.loc 1 315 0
 843 01e0 12B2     		sxth	r2, r2
 844 01e2 00B2     		sxth	r0, r0
 845 01e4 9042     		cmp	r0, r2
 317:Src/uart.c    **** 								{
 846              		.loc 1 317 0
 847 01e6 B4F84C20 		ldrh	r2, [r4, #76]
 848 01ea 09B2     		sxth	r1, r1
 849 01ec 12B2     		sxth	r2, r2
 315:Src/uart.c    **** 							{
 850              		.loc 1 315 0
 851 01ee 13DD     		ble	.L78
 317:Src/uart.c    **** 								{
 852              		.loc 1 317 0
 853 01f0 9142     		cmp	r1, r2
 854 01f2 2ADD     		ble	.L83
 855              	.L149:
 350:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 27


 856              		.loc 1 350 0
 857 01f4 0122     		movs	r2, #1
 858 01f6 1A70     		strb	r2, [r3]
 351:Src/uart.c    **** 									recPosCmd();
 859              		.loc 1 351 0
 860 01f8 0323     		movs	r3, #3
 861 01fa A4F80432 		strh	r3, [r4, #516]	@ movhi
 862              	.L145:
 366:Src/uart.c    **** 								}
 863              		.loc 1 366 0
 864 01fe FFF7FEFF 		bl	recPosCmd
 865              	.LVL68:
 866 0202 26E0     		b	.L73
 867              	.L75:
 309:Src/uart.c    **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 868              		.loc 1 309 0
 869 0204 B4F84430 		ldrh	r3, [r4, #68]
 870 0208 5B42     		negs	r3, r3
 871 020a 1BB2     		sxth	r3, r3
 872 020c 1380     		strh	r3, [r2]	@ movhi
 310:Src/uart.c    **** 				}
 873              		.loc 1 310 0
 874 020e B4F85A30 		ldrh	r3, [r4, #90]
 875 0212 5B42     		negs	r3, r3
 876 0214 1BB2     		sxth	r3, r3
 877 0216 D9E7     		b	.L143
 878              	.L78:
 331:Src/uart.c    **** 								{
 879              		.loc 1 331 0
 880 0218 9142     		cmp	r1, r2
 881 021a 4FF00302 		mov	r2, #3
 882 021e 4FDD     		ble	.L84
 883              	.L144:
 364:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 884              		.loc 1 364 0
 885 0220 0121     		movs	r1, #1
 886 0222 1970     		strb	r1, [r3]
 365:Src/uart.c    **** 									recPosCmd();
 887              		.loc 1 365 0
 888 0224 A4F80422 		strh	r2, [r4, #516]	@ movhi
 889 0228 E9E7     		b	.L145
 890              	.L77:
 344:Src/uart.c    **** 						{													
 891              		.loc 1 344 0
 892 022a 0004     		lsls	r0, r0, #16
 893 022c 4DD5     		bpl	.L81
 346:Src/uart.c    **** 							{
 894              		.loc 1 346 0
 895 022e 1088     		ldrh	r0, [r2]
 896 0230 0A88     		ldrh	r2, [r1]
 348:Src/uart.c    **** 								{
 897              		.loc 1 348 0
 898 0232 B4F84810 		ldrh	r1, [r4, #72]
 346:Src/uart.c    **** 							{
 899              		.loc 1 346 0
 900 0236 12B2     		sxth	r2, r2
 901 0238 00B2     		sxth	r0, r0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 28


 902 023a 9042     		cmp	r0, r2
 348:Src/uart.c    **** 								{
 903              		.loc 1 348 0
 904 023c B4F84C20 		ldrh	r2, [r4, #76]
 905 0240 09B2     		sxth	r1, r1
 906 0242 12B2     		sxth	r2, r2
 346:Src/uart.c    **** 							{
 907              		.loc 1 346 0
 908 0244 38DA     		bge	.L82
 348:Src/uart.c    **** 								{
 909              		.loc 1 348 0
 910 0246 9142     		cmp	r1, r2
 911 0248 D4DB     		blt	.L149
 912              	.L83:
 356:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 913              		.loc 1 356 0
 914 024a 0222     		movs	r2, #2
 915 024c 1A70     		strb	r2, [r3]
 357:Src/uart.c    **** 								}
 916              		.loc 1 357 0
 917 024e A4F80422 		strh	r2, [r4, #516]	@ movhi
 918              	.L73:
 380:Src/uart.c    **** 			&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_M
 919              		.loc 1 380 0 discriminator 1
 920 0252 3744     		add	r7, r7, r6
 921              	.LVL69:
 922 0254 242F     		cmp	r7, #36
 923 0256 12DD     		ble	.L86
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 924              		.loc 1 381 0
 925 0258 B4F84030 		ldrh	r3, [r4, #64]
 926 025c 1BB2     		sxth	r3, r3
 927 025e 022B     		cmp	r3, #2
 928 0260 08D0     		beq	.L87
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 929              		.loc 1 381 0 is_stmt 0 discriminator 1
 930 0262 B4F84030 		ldrh	r3, [r4, #64]
 931 0266 1BB2     		sxth	r3, r3
 932 0268 23B1     		cbz	r3, .L87
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 933              		.loc 1 381 0 discriminator 2
 934 026a B4F84030 		ldrh	r3, [r4, #64]
 935 026e 1BB2     		sxth	r3, r3
 936 0270 012B     		cmp	r3, #1
 937 0272 04D1     		bne	.L86
 938              	.L87:
 384:Src/uart.c    **** 				recPosCmd();
 939              		.loc 1 384 0 is_stmt 1
 940 0274 0323     		movs	r3, #3
 941 0276 A4F80432 		strh	r3, [r4, #516]	@ movhi
 385:Src/uart.c    **** 		}
 942              		.loc 1 385 0
 943 027a FFF7FEFF 		bl	recPosCmd
 944              	.LVL70:
 945              	.L86:
 387:Src/uart.c    **** 		{
 946              		.loc 1 387 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 29


 947 027e 222E     		cmp	r6, #34
 948 0280 3FF7FBAE 		bgt	.L85
 387:Src/uart.c    **** 		{
 949              		.loc 1 387 0 is_stmt 0 discriminator 1
 950 0284 212F     		cmp	r7, #33
 951 0286 47DD     		ble	.L88
 387:Src/uart.c    **** 		{
 952              		.loc 1 387 0 discriminator 2
 953 0288 B4F84030 		ldrh	r3, [r4, #64]
 954 028c 1AB2     		sxth	r2, r3
 955 028e 042A     		cmp	r2, #4
 956 0290 42D1     		bne	.L88
 389:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 957              		.loc 1 389 0 is_stmt 1
 958 0292 0122     		movs	r2, #1
 959 0294 A4F80222 		strh	r2, [r4, #514]	@ movhi
 390:Src/uart.c    **** 		}
 960              		.loc 1 390 0
 961 0298 A4F80432 		strh	r3, [r4, #516]	@ movhi
 962              	.L89:
 409:Src/uart.c    **** 		{
 963              		.loc 1 409 0
 964 029c 40F20313 		movw	r3, #259
 965 02a0 9E42     		cmp	r6, r3
 966 02a2 4CD1     		bne	.L94
 411:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART2] = g_CmdMap[SYS_SN_PART2];
 967              		.loc 1 411 0
 968 02a4 B4F80632 		ldrh	r3, [r4, #518]
 969 02a8 E380     		strh	r3, [r4, #6]	@ movhi
 412:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART3] = g_CmdMap[SYS_SN_PART3];	
 970              		.loc 1 412 0
 971 02aa B4F80832 		ldrh	r3, [r4, #520]
 972 02ae 2381     		strh	r3, [r4, #8]	@ movhi
 413:Src/uart.c    **** 		}	
 973              		.loc 1 413 0
 974 02b0 B4F80A32 		ldrh	r3, [r4, #522]
 975 02b4 6381     		strh	r3, [r4, #10]	@ movhi
 976 02b6 16E7     		b	.L93
 977              	.LVL71:
 978              	.L82:
 362:Src/uart.c    **** 								{
 979              		.loc 1 362 0
 980 02b8 9142     		cmp	r1, r2
 981 02ba 4FF00302 		mov	r2, #3
 982 02be AFDB     		blt	.L144
 983              	.L84:
 370:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 984              		.loc 1 370 0
 985 02c0 1A70     		strb	r2, [r3]
 371:Src/uart.c    **** 								}				
 986              		.loc 1 371 0
 987 02c2 0423     		movs	r3, #4
 988 02c4 A4F80432 		strh	r3, [r4, #516]	@ movhi
 989 02c8 C3E7     		b	.L73
 990              	.L81:
 377:Src/uart.c    **** 				}				
 991              		.loc 1 377 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 30


 992 02ca 0322     		movs	r2, #3
 993 02cc 1A70     		strb	r2, [r3]
 994 02ce C0E7     		b	.L73
 995              	.LVL72:
 996              	.L90:
 401:Src/uart.c    **** 				range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_offs
 997              		.loc 1 401 0
 998 02d0 0E4B     		ldr	r3, .L150+52
 999 02d2 1B68     		ldr	r3, [r3]
 1000 02d4 2B60     		str	r3, [r5]
 1001 02d6 FCE6     		b	.L92
 1002              	.L151:
 1003              		.align	2
 1004              	.L150:
 1005 02d8 00000000 		.word	g_CmdMap
 1006 02dc 00000000 		.word	.LANCHOR3
 1007 02e0 00000000 		.word	.LANCHOR4
 1008 02e4 00000000 		.word	.LANCHOR5
 1009 02e8 00000000 		.word	g_pMU_value_offset
 1010 02ec 00000000 		.word	g_pPos_ref_base_um
 1011 02f0 00000000 		.word	rod_pos_Muti_Encoder
 1012 02f4 00000000 		.word	range_icmu_vlaue_at_stroke
 1013 02f8 00000000 		.word	range_icmu_vlaue_need_addMax
 1014 02fc 00000000 		.word	.LANCHOR2
 1015 0300 00000000 		.word	force_set
 1016 0304 00000000 		.word	force_act
 1017 0308 00000000 		.word	status_Mode_POSITION_FORCE
 1018 030c 00000000 		.word	MU_Value
 1019 0310 00000000 		.word	g_CmdMap_bWR
 1020 0314 00000000 		.word	g_CmdMap_User_bWR
 1021              	.LVL73:
 1022              	.L88:
 404:Src/uart.c    **** 		{
 1023              		.loc 1 404 0
 1024 0318 B6F5937F 		cmp	r6, #294
 1025 031c BED1     		bne	.L89
 406:Src/uart.c    **** 				g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 1026              		.loc 1 406 0
 1027 031e B4F84C32 		ldrh	r3, [r4, #588]
 1028 0322 654A     		ldr	r2, .L152
 1029 0324 1BB2     		sxth	r3, r3
 1030 0326 1360     		str	r3, [r2]
 407:Src/uart.c    **** 		}
 1031              		.loc 1 407 0
 1032 0328 1368     		ldr	r3, [r2]
 1033 032a 644A     		ldr	r2, .L152+4
 1034 032c B2F90020 		ldrsh	r2, [r2]
 1035 0330 5343     		muls	r3, r2, r3
 1036 0332 4FF4B472 		mov	r2, #360
 1037 0336 93FBF2F3 		sdiv	r3, r3, r2
 1038 033a 614A     		ldr	r2, .L152+8
 1039 033c D2E6     		b	.L146
 1040              	.L94:
 415:Src/uart.c    **** 		{
 1041              		.loc 1 415 0
 1042 033e 502E     		cmp	r6, #80
 1043 0340 7FF4D1AE 		bne	.L93
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 31


 417:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 1044              		.loc 1 417 0
 1045 0344 B4F8A030 		ldrh	r3, [r4, #160]
 418:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_TROUGH]
 1046              		.loc 1 418 0
 1047 0348 B4F8A410 		ldrh	r1, [r4, #164]
 419:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_CYCLE]
 1048              		.loc 1 419 0
 1049 034c B4F8A620 		ldrh	r2, [r4, #166]
 417:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 1050              		.loc 1 417 0
 1051 0350 1BB2     		sxth	r3, r3
 1052 0352 00EE103A 		vmov	s0, r3	@ int
 420:Src/uart.c    **** 																			,g_CmdMap[CMD_POS_ACT_PU]);
 1053              		.loc 1 420 0
 1054 0356 B4F8A230 		ldrh	r3, [r4, #162]
 421:Src/uart.c    **** 		}	
 1055              		.loc 1 421 0
 1056 035a B4F84C00 		ldrh	r0, [r4, #76]
 1057 035e 00B2     		sxth	r0, r0
 417:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 1058              		.loc 1 417 0
 1059 0360 0090     		str	r0, [sp]
 1060 0362 1BB2     		sxth	r3, r3
 1061 0364 12B2     		sxth	r2, r2
 1062 0366 09B2     		sxth	r1, r1
 1063 0368 B8EEC00A 		vcvt.f32.s32	s0, s0
 1064 036c 5548     		ldr	r0, .L152+12
 1065 036e FFF7FEFF 		bl	setPara_waveSinGenrator
 1066              	.LVL74:
 1067 0372 B8E6     		b	.L93
 1068              	.LVL75:
 1069              	.L53:
 430:Src/uart.c    **** 	{		
 1070              		.loc 1 430 0
 1071 0374 3028     		cmp	r0, #48
 1072 0376 05D1     		bne	.L96
 432:Src/uart.c    **** 	}	
 1073              		.loc 1 432 0
 1074 0378 0021     		movs	r1, #0
 1075              		.loc 1 564 0
 1076 037a 02B0     		add	sp, sp, #8
 1077              	.LCFI6:
 1078              		.cfi_remember_state
 1079              		.cfi_def_cfa_offset 24
 1080              		@ sp needed
 1081 037c BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1082              	.LCFI7:
 1083              		.cfi_restore 14
 1084              		.cfi_restore 8
 1085              		.cfi_restore 7
 1086              		.cfi_restore 6
 1087              		.cfi_restore 5
 1088              		.cfi_restore 4
 1089              		.cfi_def_cfa_offset 0
 1090              	.LVL76:
 432:Src/uart.c    **** 	}	
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 32


 1091              		.loc 1 432 0
 1092 0380 FFF7FEBF 		b	Return_state_frame
 1093              	.LVL77:
 1094              	.L96:
 1095              	.LCFI8:
 1096              		.cfi_restore_state
 434:Src/uart.c    **** 	{		
 1097              		.loc 1 434 0
 1098 0384 3228     		cmp	r0, #50
 1099 0386 0CD1     		bne	.L97
 437:Src/uart.c    **** 	}
 1100              		.loc 1 437 0
 1101 0388 6D79     		ldrb	r5, [r5, #5]	@ zero_extendqisi2
 1102              	.LVL78:
 1103 038a 6D00     		lsls	r5, r5, #1
 1104 038c 0146     		mov	r1, r0
 1105 038e 04EB4603 		add	r3, r4, r6, lsl #1
 1106 0392 B2B2     		uxth	r2, r6
 1107 0394 05F0FE00 		and	r0, r5, #254
 1108              		.loc 1 564 0
 1109 0398 02B0     		add	sp, sp, #8
 1110              	.LCFI9:
 1111              		.cfi_remember_state
 1112              		.cfi_def_cfa_offset 24
 1113              		@ sp needed
 1114 039a BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1115              	.LCFI10:
 1116              		.cfi_restore 14
 1117              		.cfi_restore 8
 1118              		.cfi_restore 7
 1119              		.cfi_restore 6
 1120              		.cfi_restore 5
 1121              		.cfi_restore 4
 1122              		.cfi_def_cfa_offset 0
 437:Src/uart.c    **** 	}
 1123              		.loc 1 437 0
 1124 039e FFF7FEBF 		b	UART_PushFrame
 1125              	.LVL79:
 1126              	.L97:
 1127              	.LCFI11:
 1128              		.cfi_restore_state
 439:Src/uart.c    **** 	{
 1129              		.loc 1 439 0
 1130 03a2 3828     		cmp	r0, #56
 1131 03a4 04D1     		bne	.L98
 1132              		.loc 1 564 0
 1133 03a6 02B0     		add	sp, sp, #8
 1134              	.LCFI12:
 1135              		.cfi_remember_state
 1136              		.cfi_def_cfa_offset 24
 1137              		@ sp needed
 1138 03a8 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1139              	.LCFI13:
 1140              		.cfi_restore 14
 1141              		.cfi_restore 8
 1142              		.cfi_restore 7
 1143              		.cfi_restore 6
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 33


 1144              		.cfi_restore 5
 1145              		.cfi_restore 4
 1146              		.cfi_def_cfa_offset 0
 1147              	.LVL80:
 441:Src/uart.c    **** 	}
 1148              		.loc 1 441 0
 1149 03ac FFF7FEBF 		b	ScopeProDebug
 1150              	.LVL81:
 1151              	.L98:
 1152              	.LCFI14:
 1153              		.cfi_restore_state
 443:Src/uart.c    **** 	{
 1154              		.loc 1 443 0
 1155 03b0 3C28     		cmp	r0, #60
 1156 03b2 04D1     		bne	.L99
 1157              		.loc 1 564 0
 1158 03b4 02B0     		add	sp, sp, #8
 1159              	.LCFI15:
 1160              		.cfi_remember_state
 1161              		.cfi_def_cfa_offset 24
 1162              		@ sp needed
 1163 03b6 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1164              	.LCFI16:
 1165              		.cfi_restore 14
 1166              		.cfi_restore 8
 1167              		.cfi_restore 7
 1168              		.cfi_restore 6
 1169              		.cfi_restore 5
 1170              		.cfi_restore 4
 1171              		.cfi_def_cfa_offset 0
 1172              	.LVL82:
 445:Src/uart.c    **** 	}
 1173              		.loc 1 445 0
 1174 03ba FFF7FEBF 		b	ScopeProDebug_2
 1175              	.LVL83:
 1176              	.L99:
 1177              	.LCFI17:
 1178              		.cfi_restore_state
 447:Src/uart.c    **** 	{
 1179              		.loc 1 447 0
 1180 03be 3928     		cmp	r0, #57
 1181 03c0 04D1     		bne	.L100
 1182              		.loc 1 564 0
 1183 03c2 02B0     		add	sp, sp, #8
 1184              	.LCFI18:
 1185              		.cfi_remember_state
 1186              		.cfi_def_cfa_offset 24
 1187              		@ sp needed
 1188 03c4 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1189              	.LCFI19:
 1190              		.cfi_restore 14
 1191              		.cfi_restore 8
 1192              		.cfi_restore 7
 1193              		.cfi_restore 6
 1194              		.cfi_restore 5
 1195              		.cfi_restore 4
 1196              		.cfi_def_cfa_offset 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 34


 1197              	.LVL84:
 449:Src/uart.c    **** 	}
 1198              		.loc 1 449 0
 1199 03c8 FFF7FEBF 		b	ReturnCLibADC_Frame
 1200              	.LVL85:
 1201              	.L100:
 1202              	.LCFI20:
 1203              		.cfi_restore_state
 451:Src/uart.c    **** 	{		
 1204              		.loc 1 451 0
 1205 03cc 0128     		cmp	r0, #1
 1206 03ce 04D1     		bne	.L101
 1207              	.LVL86:
 1208              	.L147:
 1209              		.loc 1 564 0
 1210 03d0 02B0     		add	sp, sp, #8
 1211              	.LCFI21:
 1212              		.cfi_remember_state
 1213              		.cfi_def_cfa_offset 24
 1214              		@ sp needed
 1215 03d2 BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1216              	.LCFI22:
 1217              		.cfi_restore 14
 1218              		.cfi_restore 8
 1219              		.cfi_restore 7
 1220              		.cfi_restore 6
 1221              		.cfi_restore 5
 1222              		.cfi_restore 4
 1223              		.cfi_def_cfa_offset 0
 1224              	.LVL87:
 486:Src/uart.c    **** 	}
 1225              		.loc 1 486 0
 1226 03d6 FFF7FEBF 		b	Return_OldFrame_data
 1227              	.LVL88:
 1228              	.L101:
 1229              	.LCFI23:
 1230              		.cfi_restore_state
 455:Src/uart.c    **** 	{
 1231              		.loc 1 455 0
 1232 03da 0228     		cmp	r0, #2
 1233 03dc 33D1     		bne	.L102
 458:Src/uart.c    **** 		pdata[4]--;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1234              		.loc 1 458 0
 1235 03de 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 459:Src/uart.c    **** 		for(i=0;i<datalen;i++)
 1236              		.loc 1 459 0
 1237 03e0 013A     		subs	r2, r2, #1
 458:Src/uart.c    **** 		pdata[4]--;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1238              		.loc 1 458 0
 1239 03e2 0238     		subs	r0, r0, #2
 1240              	.LVL89:
 459:Src/uart.c    **** 		for(i=0;i<datalen;i++)
 1241              		.loc 1 459 0
 1242 03e4 2A71     		strb	r2, [r5, #4]
 1243              	.LVL90:
 460:Src/uart.c    **** 		{
 1244              		.loc 1 460 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 35


 1245 03e6 0023     		movs	r3, #0
 480:Src/uart.c    **** 			}
 1246              		.loc 1 480 0
 1247 03e8 0A26     		movs	r6, #10
 1248              	.LVL91:
 1249              	.L103:
 460:Src/uart.c    **** 		{
 1250              		.loc 1 460 0 discriminator 1
 1251 03ea 8342     		cmp	r3, r0
 1252 03ec E978     		ldrb	r1, [r5, #3]	@ zero_extendqisi2
 1253 03ee 02DB     		blt	.L108
 486:Src/uart.c    **** 	}
 1254              		.loc 1 486 0
 1255 03f0 0022     		movs	r2, #0
 1256 03f2 0220     		movs	r0, #2
 1257              	.LVL92:
 1258 03f4 ECE7     		b	.L147
 1259              	.LVL93:
 1260              	.L108:
 462:Src/uart.c    **** 			{
 1261              		.loc 1 462 0
 1262 03f6 1944     		add	r1, r1, r3
 1263 03f8 0229     		cmp	r1, #2
 1264 03fa 04D1     		bne	.L104
 464:Src/uart.c    **** 			}
 1265              		.loc 1 464 0
 1266 03fc EA18     		adds	r2, r5, r3
 1267 03fe 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 1268 0400 A281     		strh	r2, [r4, #12]	@ movhi
 1269              	.L105:
 460:Src/uart.c    **** 		{
 1270              		.loc 1 460 0 discriminator 2
 1271 0402 0133     		adds	r3, r3, #1
 1272              	.LVL94:
 1273 0404 F1E7     		b	.L103
 1274              	.L104:
 466:Src/uart.c    **** 			{
 1275              		.loc 1 466 0
 1276 0406 0C29     		cmp	r1, #12
 1277 0408 03D1     		bne	.L106
 468:Src/uart.c    **** 			}
 1278              		.loc 1 468 0
 1279 040a EA18     		adds	r2, r5, r3
 1280 040c 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 1281 040e E281     		strh	r2, [r4, #14]	@ movhi
 1282 0410 F7E7     		b	.L105
 1283              	.L106:
 470:Src/uart.c    **** 			{
 1284              		.loc 1 470 0
 1285 0412 1F29     		cmp	r1, #31
 1286 0414 F5D0     		beq	.L105
 474:Src/uart.c    **** 			{
 1287              		.loc 1 474 0
 1288 0416 2029     		cmp	r1, #32
 1289 0418 09D1     		bne	.L107
 1290 041a E918     		adds	r1, r5, r3
 476:Src/uart.c    **** 			}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 36


 1291              		.loc 1 476 0
 1292 041c 4F79     		ldrb	r7, [r1, #5]	@ zero_extendqisi2
 1293 041e 0A79     		ldrb	r2, [r1, #4]	@ zero_extendqisi2
 1294 0420 02EB0722 		add	r2, r2, r7, lsl #8
 1295 0424 92FBF6F2 		sdiv	r2, r2, r6
 1296 0428 12B2     		sxth	r2, r2
 1297 042a 2284     		strh	r2, [r4, #32]	@ movhi
 1298 042c E9E7     		b	.L105
 1299              	.L107:
 478:Src/uart.c    **** 			{
 1300              		.loc 1 478 0
 1301 042e 6229     		cmp	r1, #98
 1302 0430 E7D1     		bne	.L105
 1303 0432 E918     		adds	r1, r5, r3
 480:Src/uart.c    **** 			}
 1304              		.loc 1 480 0
 1305 0434 4F79     		ldrb	r7, [r1, #5]	@ zero_extendqisi2
 1306 0436 0A79     		ldrb	r2, [r1, #4]	@ zero_extendqisi2
 1307 0438 02EB0722 		add	r2, r2, r7, lsl #8
 1308 043c 92FBF6F2 		sdiv	r2, r2, r6
 1309 0440 12B2     		sxth	r2, r2
 1310 0442 A283     		strh	r2, [r4, #28]	@ movhi
 1311 0444 DDE7     		b	.L105
 1312              	.LVL95:
 1313              	.L102:
 488:Src/uart.c    **** 	{
 1314              		.loc 1 488 0
 1315 0446 0428     		cmp	r0, #4
 1316 0448 15D1     		bne	.L109
 499:Src/uart.c    **** 		{
 1317              		.loc 1 499 0
 1318 044a 232A     		cmp	r2, #35
 501:Src/uart.c    **** 		}
 1319              		.loc 1 501 0
 1320 044c 04BF     		itt	eq
 1321 044e 0123     		moveq	r3, #1
 1322 0450 6382     		strheq	r3, [r4, #18]	@ movhi
 507:Src/uart.c    **** 		{
 1323              		.loc 1 507 0
 1324 0452 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 1325 0454 202B     		cmp	r3, #32
 509:Src/uart.c    **** 		}
 1326              		.loc 1 509 0
 1327 0456 04BF     		itt	eq
 1328 0458 0123     		moveq	r3, #1
 1329 045a 2383     		strheq	r3, [r4, #24]	@ movhi
 515:Src/uart.c    **** 		{
 1330              		.loc 1 515 0
 1331 045c 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 1332 045e 1E2B     		cmp	r3, #30
 517:Src/uart.c    **** 		}	
 1333              		.loc 1 517 0
 1334 0460 04BF     		itt	eq
 1335 0462 0123     		moveq	r3, #1
 1336 0464 2382     		strheq	r3, [r4, #16]	@ movhi
 519:Src/uart.c    **** 		//Return_OldFrame_data(u8 cmd_type,u8 index,u8 length) 
 1337              		.loc 1 519 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 37


 1338 0466 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 1339              	.LVL96:
 1340              	.L148:
 558:Src/uart.c    **** 	}
 1341              		.loc 1 558 0
 1342 0468 E978     		ldrb	r1, [r5, #3]	@ zero_extendqisi2
 1343 046a A878     		ldrb	r0, [r5, #2]	@ zero_extendqisi2
 1344              		.loc 1 564 0
 1345 046c 02B0     		add	sp, sp, #8
 1346              	.LCFI24:
 1347              		.cfi_remember_state
 1348              		.cfi_def_cfa_offset 24
 1349              		@ sp needed
 1350 046e BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 1351              	.LCFI25:
 1352              		.cfi_restore 14
 1353              		.cfi_restore 8
 1354              		.cfi_restore 7
 1355              		.cfi_restore 6
 1356              		.cfi_restore 5
 1357              		.cfi_restore 4
 1358              		.cfi_def_cfa_offset 0
 1359              	.LVL97:
 558:Src/uart.c    **** 	}
 1360              		.loc 1 558 0
 1361 0472 FFF7FEBF 		b	Return_OldFrame_state
 1362              	.LVL98:
 1363              	.L109:
 1364              	.LCFI26:
 1365              		.cfi_restore_state
 522:Src/uart.c    **** 	{
 1366              		.loc 1 522 0
 1367 0476 2038     		subs	r0, r0, #32
 1368 0478 0228     		cmp	r0, #2
 1369 047a 3FF641AE 		bhi	.L50
 525:Src/uart.c    **** 		{
 1370              		.loc 1 525 0
 1371 047e 3729     		cmp	r1, #55
 1372 0480 12D1     		bne	.L113
 1373              	.LVL99:
 527:Src/uart.c    **** 			if(pos_set_2000<0)
 1374              		.loc 1 527 0
 1375 0482 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 1376 0484 02EB0323 		add	r3, r2, r3, lsl #8
 1377 0488 1BB2     		sxth	r3, r3
 1378 048a B3F5FA6F 		cmp	r3, #2000
 1379 048e A8BF     		it	ge
 1380 0490 4FF4FA63 		movge	r3, #2000
 1381              	.LVL100:
 536:Src/uart.c    **** 		}
 1382              		.loc 1 536 0
 1383 0494 23EAE373 		bic	r3, r3, r3, asr #31
 1384              	.LVL101:
 1385 0498 9B03     		lsls	r3, r3, #14
 1386 049a 4FF4FA62 		mov	r2, #2000
 1387              	.LVL102:
 1388 049e 93FBF2F3 		sdiv	r3, r3, r2
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 38


 1389 04a2 1BB2     		sxth	r3, r3
 1390 04a4 A4F84830 		strh	r3, [r4, #72]	@ movhi
 1391              	.LVL103:
 1392              	.L113:
 538:Src/uart.c    **** 		//Flag_Set_OpenLen = 1;
 1393              		.loc 1 538 0
 1394 04a8 FFF7FEFF 		bl	recPosCmd
 1395              	.LVL104:
 540:Src/uart.c    **** //		pos_interpolation_B_um = pos_interpolation_A_um;
 1396              		.loc 1 540 0
 1397 04ac 4FF48043 		mov	r3, #16384
 1398 04b0 A4F84630 		strh	r3, [r4, #70]	@ movhi
 558:Src/uart.c    **** 	}
 1399              		.loc 1 558 0
 1400 04b4 0022     		movs	r2, #0
 1401 04b6 D7E7     		b	.L148
 1402              	.L153:
 1403              		.align	2
 1404              	.L152:
 1405 04b8 00000000 		.word	g_Encode_offset
 1406 04bc 00000000 		.word	EN_360
 1407 04c0 00000000 		.word	g_Encode_offset_EN
 1408 04c4 00000000 		.word	waveGen
 1409              		.cfi_endproc
 1410              	.LFE339:
 1412              		.section	.text.UART_ParseData,"ax",%progbits
 1413              		.align	1
 1414              		.global	UART_ParseData
 1415              		.syntax unified
 1416              		.thumb
 1417              		.thumb_func
 1418              		.fpu fpv4-sp-d16
 1420              	UART_ParseData:
 1421              	.LFB340:
 565:Src/uart.c    **** 
 566:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ð­ï¿½ï¿½ï¿½Ê½ 0x55 0xAA [ï¿½ï¿½ï¿½ï¿½]
 567:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 568:Src/uart.c    **** int UART_ParseData(u8 data)
 569:Src/uart.c    **** {
 1422              		.loc 1 569 0
 1423              		.cfi_startproc
 1424              		@ args = 0, pretend = 0, frame = 0
 1425              		@ frame_needed = 0, uses_anonymous_args = 0
 1426              	.LVL105:
 1427 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1428              	.LCFI27:
 1429              		.cfi_def_cfa_offset 24
 1430              		.cfi_offset 3, -24
 1431              		.cfi_offset 4, -20
 1432              		.cfi_offset 5, -16
 1433              		.cfi_offset 6, -12
 1434              		.cfi_offset 7, -8
 1435              		.cfi_offset 14, -4
 570:Src/uart.c    **** 	static unsigned char s_RXBuf[RX_BUF_SIZE] = {0};
 571:Src/uart.c    **** 	static unsigned char s_bFrameHead1 = 0;
 572:Src/uart.c    **** 	static unsigned char s_bBeginFrame = 0;
 573:Src/uart.c    **** 	static unsigned char s_rxPos = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 39


 574:Src/uart.c    **** 	static unsigned char s_rxLen = 0;
 575:Src/uart.c    **** 	static unsigned char csum = 0;
 576:Src/uart.c    **** 	int ret = 1;
 577:Src/uart.c    **** 	
 578:Src/uart.c    **** 	if(s_bBeginFrame)  // ï¿½Ç·ï¿½Ê¼ï¿½Âµï¿½Ò»Ö¡
 1436              		.loc 1 578 0
 1437 0002 274A     		ldr	r2, .L167
 1438 0004 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1439 0006 1646     		mov	r6, r2
 1440 0008 002B     		cmp	r3, #0
 1441 000a 35D0     		beq	.L155
 579:Src/uart.c    **** 	{
 580:Src/uart.c    **** 		s_RXBuf[s_rxPos] = data;
 1442              		.loc 1 580 0
 1443 000c 254C     		ldr	r4, .L167+4
 1444 000e 264F     		ldr	r7, .L167+8
 1445 0010 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1446 0012 DFF8A8C0 		ldr	ip, .L167+28
 1447 0016 F854     		strb	r0, [r7, r3]
 1448 0018 244D     		ldr	r5, .L167+12
 581:Src/uart.c    **** 		if(s_rxPos == FRA_LENGTH)
 1449              		.loc 1 581 0
 1450 001a 83B9     		cbnz	r3, .L156
 582:Src/uart.c    **** 		{
 583:Src/uart.c    **** 			s_rxLen = data+3;//data+3;
 1451              		.loc 1 583 0
 1452 001c C11C     		adds	r1, r0, #3
 1453 001e C9B2     		uxtb	r1, r1
 1454 0020 8CF80010 		strb	r1, [ip]
 584:Src/uart.c    **** 			if(s_rxLen >= RX_BUF_SIZE)
 1455              		.loc 1 584 0
 1456 0024 0906     		lsls	r1, r1, #24
 1457 0026 07D5     		bpl	.L157
 585:Src/uart.c    **** 			{
 586:Src/uart.c    **** 				s_rxLen  =0;
 587:Src/uart.c    **** 				s_bFrameHead1 = s_bBeginFrame = 0;
 1458              		.loc 1 587 0
 1459 0028 1370     		strb	r3, [r2]
 1460 002a 214A     		ldr	r2, .L167+16
 586:Src/uart.c    **** 				s_bFrameHead1 = s_bBeginFrame = 0;
 1461              		.loc 1 586 0
 1462 002c 8CF80030 		strb	r3, [ip]
 1463              		.loc 1 587 0
 1464 0030 1370     		strb	r3, [r2]
 588:Src/uart.c    **** 				csum = 0;
 1465              		.loc 1 588 0
 1466 0032 2B70     		strb	r3, [r5]
 1467              	.LVL106:
 1468              	.L166:
 589:Src/uart.c    **** 				return 1;
 590:Src/uart.c    **** 			}
 591:Src/uart.c    **** 			g_UART_RXlen = data;
 592:Src/uart.c    **** 		}
 593:Src/uart.c    **** 		s_rxPos++;
 594:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 595:Src/uart.c    **** 		{
 596:Src/uart.c    **** 			if(csum == s_RXBuf[s_rxPos-1])   //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½Í¬
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 40


 597:Src/uart.c    **** 			{
 598:Src/uart.c    **** 				UART_ParseFrame(&s_RXBuf[0]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 599:Src/uart.c    **** 				g_index_Modbus = 0;
 600:Src/uart.c    **** 			}
 601:Src/uart.c    **** 			else
 602:Src/uart.c    **** 			{
 603:Src/uart.c    **** //				while(1);
 604:Src/uart.c    **** 			}
 605:Src/uart.c    **** 			s_bFrameHead1 = s_bBeginFrame = 0;
 606:Src/uart.c    **** 			s_rxPos = 0;
 607:Src/uart.c    **** 			csum = 0;
 608:Src/uart.c    **** 			ret = 0;
 609:Src/uart.c    **** 			return 0;
 610:Src/uart.c    **** 		}
 611:Src/uart.c    **** 		else
 612:Src/uart.c    **** 		{
 613:Src/uart.c    **** 			csum += data;
 614:Src/uart.c    **** 		}
 615:Src/uart.c    **** 	}
 616:Src/uart.c    **** 	else if(data == 0x55 && !s_bFrameHead1)
 617:Src/uart.c    **** 	{
 618:Src/uart.c    **** 		s_bFrameHead1 = 1;
 619:Src/uart.c    **** 	}
 620:Src/uart.c    **** 	else if(data == 0xAA && s_bFrameHead1 && !s_bBeginFrame)
 621:Src/uart.c    **** 	{
 622:Src/uart.c    **** 		s_bBeginFrame = 1;
 623:Src/uart.c    **** 	}
 624:Src/uart.c    **** 	else
 625:Src/uart.c    **** 	{
 626:Src/uart.c    **** 		s_bFrameHead1 = s_bBeginFrame = 0;
 627:Src/uart.c    **** 		csum = 0;
 628:Src/uart.c    **** 	}
 629:Src/uart.c    **** 	
 630:Src/uart.c    **** 	return 1;
 1469              		.loc 1 630 0
 1470 0034 0120     		movs	r0, #1
 1471 0036 1BE0     		b	.L154
 1472              	.LVL107:
 1473              	.L157:
 591:Src/uart.c    **** 		}
 1474              		.loc 1 591 0
 1475 0038 1E49     		ldr	r1, .L167+20
 1476 003a 82B2     		uxth	r2, r0
 1477 003c 0A80     		strh	r2, [r1]	@ movhi
 1478              	.L156:
 593:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1479              		.loc 1 593 0
 1480 003e 0133     		adds	r3, r3, #1
 594:Src/uart.c    **** 		{
 1481              		.loc 1 594 0
 1482 0040 9CF80010 		ldrb	r1, [ip]	@ zero_extendqisi2
 1483 0044 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 593:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1484              		.loc 1 593 0
 1485 0046 DBB2     		uxtb	r3, r3
 594:Src/uart.c    **** 		{
 1486              		.loc 1 594 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 41


 1487 0048 9942     		cmp	r1, r3
 593:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1488              		.loc 1 593 0
 1489 004a 2370     		strb	r3, [r4]
 594:Src/uart.c    **** 		{
 1490              		.loc 1 594 0
 1491 004c 11D1     		bne	.L159
 596:Src/uart.c    **** 			{
 1492              		.loc 1 596 0
 1493 004e 7B18     		adds	r3, r7, r1
 1494 0050 13F8013C 		ldrb	r3, [r3, #-1]	@ zero_extendqisi2
 1495 0054 9342     		cmp	r3, r2
 1496 0056 05D1     		bne	.L160
 598:Src/uart.c    **** 				g_index_Modbus = 0;
 1497              		.loc 1 598 0
 1498 0058 1348     		ldr	r0, .L167+8
 1499              	.LVL108:
 1500 005a FFF7FEFF 		bl	UART_ParseFrame
 1501              	.LVL109:
 599:Src/uart.c    **** 			}
 1502              		.loc 1 599 0
 1503 005e 164B     		ldr	r3, .L167+24
 1504 0060 0022     		movs	r2, #0
 1505 0062 1A80     		strh	r2, [r3]	@ movhi
 1506              	.L160:
 605:Src/uart.c    **** 			s_rxPos = 0;
 1507              		.loc 1 605 0
 1508 0064 124B     		ldr	r3, .L167+16
 1509 0066 0020     		movs	r0, #0
 1510 0068 3070     		strb	r0, [r6]
 1511 006a 1870     		strb	r0, [r3]
 606:Src/uart.c    **** 			csum = 0;
 1512              		.loc 1 606 0
 1513 006c 2070     		strb	r0, [r4]
 607:Src/uart.c    **** 			ret = 0;
 1514              		.loc 1 607 0
 1515 006e 2870     		strb	r0, [r5]
 1516              	.LVL110:
 1517              	.L154:
 631:Src/uart.c    **** 	
 632:Src/uart.c    **** 	
 633:Src/uart.c    **** }
 1518              		.loc 1 633 0
 1519 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1520              	.LVL111:
 1521              	.L159:
 613:Src/uart.c    **** 		}
 1522              		.loc 1 613 0
 1523 0072 1044     		add	r0, r0, r2
 1524              	.LVL112:
 1525 0074 2870     		strb	r0, [r5]
 1526 0076 DDE7     		b	.L166
 1527              	.LVL113:
 1528              	.L155:
 616:Src/uart.c    **** 	{
 1529              		.loc 1 616 0
 1530 0078 5528     		cmp	r0, #85
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 42


 1531 007a 0D4B     		ldr	r3, .L167+16
 1532 007c 04D1     		bne	.L161
 616:Src/uart.c    **** 	{
 1533              		.loc 1 616 0 is_stmt 0 discriminator 1
 1534 007e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1535 0080 4AB9     		cbnz	r2, .L162
 618:Src/uart.c    **** 	}
 1536              		.loc 1 618 0 is_stmt 1
 1537 0082 0120     		movs	r0, #1
 1538              	.LVL114:
 1539 0084 1870     		strb	r0, [r3]
 1540 0086 F3E7     		b	.L154
 1541              	.LVL115:
 1542              	.L161:
 620:Src/uart.c    **** 	{
 1543              		.loc 1 620 0
 1544 0088 AA28     		cmp	r0, #170
 1545 008a 04D1     		bne	.L162
 620:Src/uart.c    **** 	{
 1546              		.loc 1 620 0 is_stmt 0 discriminator 1
 1547 008c 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 1548 008e 11B1     		cbz	r1, .L162
 622:Src/uart.c    **** 	}
 1549              		.loc 1 622 0 is_stmt 1
 1550 0090 0120     		movs	r0, #1
 1551              	.LVL116:
 1552 0092 1070     		strb	r0, [r2]
 1553 0094 ECE7     		b	.L154
 1554              	.LVL117:
 1555              	.L162:
 626:Src/uart.c    **** 		csum = 0;
 1556              		.loc 1 626 0
 1557 0096 0022     		movs	r2, #0
 1558 0098 1A70     		strb	r2, [r3]
 627:Src/uart.c    **** 	}
 1559              		.loc 1 627 0
 1560 009a 044B     		ldr	r3, .L167+12
 1561 009c 1A70     		strb	r2, [r3]
 1562 009e C9E7     		b	.L166
 1563              	.L168:
 1564              		.align	2
 1565              	.L167:
 1566 00a0 00000000 		.word	.LANCHOR6
 1567 00a4 00000000 		.word	.LANCHOR7
 1568 00a8 00000000 		.word	.LANCHOR8
 1569 00ac 00000000 		.word	.LANCHOR11
 1570 00b0 00000000 		.word	.LANCHOR10
 1571 00b4 00000000 		.word	.LANCHOR4
 1572 00b8 00000000 		.word	.LANCHOR12
 1573 00bc 00000000 		.word	.LANCHOR9
 1574              		.cfi_endproc
 1575              	.LFE340:
 1577              		.section	.text.UART_CheckReceive,"ax",%progbits
 1578              		.align	1
 1579              		.global	UART_CheckReceive
 1580              		.syntax unified
 1581              		.thumb
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 43


 1582              		.thumb_func
 1583              		.fpu fpv4-sp-d16
 1585              	UART_CheckReceive:
 1586              	.LFB342:
 634:Src/uart.c    **** 
 635:Src/uart.c    **** static unsigned char uart_sum(unsigned char *p, int len)
 636:Src/uart.c    **** {
 637:Src/uart.c    **** 	int i = 0;
 638:Src/uart.c    **** 	unsigned char sum = 0;
 639:Src/uart.c    **** 	
 640:Src/uart.c    **** 	for(i=0;i<len;i++)
 641:Src/uart.c    **** 	{
 642:Src/uart.c    **** 		sum += p[i];
 643:Src/uart.c    **** 	}
 644:Src/uart.c    **** 	return sum;
 645:Src/uart.c    **** }
 646:Src/uart.c    **** 
 647:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ð­ï¿½ï¿½ï¿½Ê½ 0x55 0xAA [ï¿½ï¿½ï¿½ï¿½]
 648:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 649:Src/uart.c    **** typedef struct
 650:Src/uart.c    **** {
 651:Src/uart.c    **** 	volatile s32 len;
 652:Src/uart.c    **** 	volatile s32 last_dma_pointer;
 653:Src/uart.c    ****   unsigned char buf[RX_BUF_SIZE];
 654:Src/uart.c    **** } uart_recv_buf_t;
 655:Src/uart.c    **** 
 656:Src/uart.c    **** 
 657:Src/uart.c    **** static uart_recv_buf_t uart_recv_buf = {0,0,{0}};
 658:Src/uart.c    **** 
 659:Src/uart.c    **** void UART_CheckReceive(void)
 660:Src/uart.c    **** {
 1587              		.loc 1 660 0
 1588              		.cfi_startproc
 1589              		@ args = 0, pretend = 0, frame = 0
 1590              		@ frame_needed = 0, uses_anonymous_args = 0
 1591              	.LVL118:
 661:Src/uart.c    **** 	s16 i = 0,len = 0;
 662:Src/uart.c    ****   s32 DAMCnt = RX_BUF_SIZE - (DMA1_Channel1->CNDTR);
 1592              		.loc 1 662 0
 1593 0000 2748     		ldr	r0, .L182
 1594 0002 4368     		ldr	r3, [r0, #4]
 1595              	.LVL119:
 663:Src/uart.c    **** 	s32 cnt_temp = 0,temp =0,rx_len =0,p_rx_len= 0,p_last_len =0,p_last_pointer =0;
 664:Src/uart.c    **** 	width_t CRC_RX,CRC_Tmp;
 665:Src/uart.c    **** 	int ret = 1;
 666:Src/uart.c    **** 	int plen=0;
 667:Src/uart.c    **** 	int csum =0;
 668:Src/uart.c    **** 	int j =0;
 669:Src/uart.c    **** 	unsigned char psum = 0;
 670:Src/uart.c    **** 
 671:Src/uart.c    **** 	if(__HAL_UART_GET_FLAG(&huart1,UART_FLAG_IDLE) != RESET)//
 1596              		.loc 1 671 0
 1597 0004 274B     		ldr	r3, .L182+4
 1598 0006 1B68     		ldr	r3, [r3]
 1599 0008 DA69     		ldr	r2, [r3, #28]
 1600 000a D206     		lsls	r2, r2, #27
 660:Src/uart.c    **** 	s16 i = 0,len = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 44


 1601              		.loc 1 660 0
 1602 000c F0B5     		push	{r4, r5, r6, r7, lr}
 1603              	.LCFI28:
 1604              		.cfi_def_cfa_offset 20
 1605              		.cfi_offset 4, -20
 1606              		.cfi_offset 5, -16
 1607              		.cfi_offset 6, -12
 1608              		.cfi_offset 7, -8
 1609              		.cfi_offset 14, -4
 1610              		.loc 1 671 0
 1611 000e 22D5     		bpl	.L170
 672:Src/uart.c    **** 	{			
 673:Src/uart.c    **** 		
 674:Src/uart.c    **** 		//	USART_ClearFlag(USART2,USART_FLAG_IDLE);
 675:Src/uart.c    **** 		 __HAL_UART_CLEAR_FLAG(&huart1, UART_CLEAR_IDLEF);
 1612              		.loc 1 675 0
 1613 0010 1022     		movs	r2, #16
 676:Src/uart.c    **** 		
 677:Src/uart.c    **** 		
 678:Src/uart.c    **** 			if(g_bUARTPushingFrames == 1)
 1614              		.loc 1 678 0
 1615 0012 254E     		ldr	r6, .L182+8
 675:Src/uart.c    **** 		
 1616              		.loc 1 675 0
 1617 0014 1A62     		str	r2, [r3, #32]
 1618              		.loc 1 678 0
 1619 0016 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 679:Src/uart.c    **** 			{
 680:Src/uart.c    **** //				while(1);
 681:Src/uart.c    **** 			}
 682:Src/uart.c    **** 			if( g_RxBufptr != DAMCnt )
 683:Src/uart.c    **** 			{
 684:Src/uart.c    **** 				if( DAMCnt > g_RxBufptr )
 685:Src/uart.c    **** 				{
 686:Src/uart.c    **** 					len = DAMCnt - g_RxBufptr;
 687:Src/uart.c    **** 				}
 688:Src/uart.c    **** 				else
 689:Src/uart.c    **** 				{
 690:Src/uart.c    **** 					len = RX_BUF_SIZE + DAMCnt - g_RxBufptr;
 691:Src/uart.c    **** 				}
 692:Src/uart.c    **** 			}
 693:Src/uart.c    **** 			
 694:Src/uart.c    **** //			if(len    < 10)
 695:Src/uart.c    **** //			{
 696:Src/uart.c    **** //				g_RxBufptr = DAMCnt;
 697:Src/uart.c    **** //		//		while(1);
 698:Src/uart.c    **** //				return;
 699:Src/uart.c    **** //			}
 700:Src/uart.c    **** //			if(len   >  12)
 701:Src/uart.c    **** //			{
 702:Src/uart.c    **** //				g_RxBufptr = DAMCnt;
 703:Src/uart.c    **** //		//		while(1);
 704:Src/uart.c    **** //		//		return;
 705:Src/uart.c    **** //			}
 706:Src/uart.c    **** 			
 707:Src/uart.c    **** 			temp = (DMA1_Channel1->CNDTR);
 708:Src/uart.c    **** 			rx_len =  RX_BUF_SIZE - temp; //?????????????,???????????
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 45


 709:Src/uart.c    **** 
 710:Src/uart.c    **** 
 711:Src/uart.c    **** 
 712:Src/uart.c    **** 			if(uart_recv_buf.len < RX_BUF_SIZE - 12)
 1620              		.loc 1 712 0
 1621 0018 244B     		ldr	r3, .L182+12
 707:Src/uart.c    **** 			rx_len =  RX_BUF_SIZE - temp; //?????????????,???????????
 1622              		.loc 1 707 0
 1623 001a 4168     		ldr	r1, [r0, #4]
 1624              	.LVL120:
 1625              		.loc 1 712 0
 1626 001c 1A68     		ldr	r2, [r3]
 1627 001e 732A     		cmp	r2, #115
 1628 0020 17DC     		bgt	.L171
 713:Src/uart.c    **** 			{
 714:Src/uart.c    **** 				p_last_pointer = uart_recv_buf.last_dma_pointer;
 1629              		.loc 1 714 0
 1630 0022 5A68     		ldr	r2, [r3, #4]
 1631              	.LVL121:
 715:Src/uart.c    **** 				p_rx_len = rx_len - uart_recv_buf.last_dma_pointer;
 1632              		.loc 1 715 0
 1633 0024 5D68     		ldr	r5, [r3, #4]
 708:Src/uart.c    **** 
 1634              		.loc 1 708 0
 1635 0026 C1F18001 		rsb	r1, r1, #128
 1636              	.LVL122:
 716:Src/uart.c    **** 				
 717:Src/uart.c    **** 				if(p_rx_len<0)
 1637              		.loc 1 717 0
 1638 002a 4D1B     		subs	r5, r1, r5
 1639              	.LVL123:
 1640 002c 0AD5     		bpl	.L172
 718:Src/uart.c    **** 				{
 719:Src/uart.c    **** 						p_last_len = RX_BUF_SIZE-uart_recv_buf.last_dma_pointer;
 1641              		.loc 1 719 0
 1642 002e 5F68     		ldr	r7, [r3, #4]
 720:Src/uart.c    **** 						for(i=0;i<p_last_len;i++)
 721:Src/uart.c    **** 						{
 722:Src/uart.c    **** 								uart_recv_buf.buf[uart_recv_buf.len++] = g_UART_RxBuf[p_last_pointer++];
 1643              		.loc 1 722 0
 1644 0030 1F4D     		ldr	r5, .L182+16
 1645              	.LVL124:
 720:Src/uart.c    **** 						for(i=0;i<p_last_len;i++)
 1646              		.loc 1 720 0
 1647 0032 0024     		movs	r4, #0
 719:Src/uart.c    **** 						for(i=0;i<p_last_len;i++)
 1648              		.loc 1 719 0
 1649 0034 C7F18007 		rsb	r7, r7, #128
 1650              	.LVL125:
 1651              		.loc 1 722 0
 1652 0038 2A44     		add	r2, r2, r5
 1653              	.LVL126:
 723:Src/uart.c    **** 								if(uart_recv_buf.len > RX_BUF_SIZE -1)
 724:Src/uart.c    **** 								{
 725:Src/uart.c    **** 										uart_recv_buf.len = 0;
 1654              		.loc 1 725 0
 1655 003a A446     		mov	ip, r4
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 46


 1656              	.LVL127:
 1657              	.L173:
 720:Src/uart.c    **** 						{
 1658              		.loc 1 720 0 discriminator 1
 1659 003c A742     		cmp	r7, r4
 1660 003e 0CDC     		bgt	.L175
 726:Src/uart.c    **** 								}
 727:Src/uart.c    **** 						}
 728:Src/uart.c    **** 						p_rx_len = rx_len;
 1661              		.loc 1 728 0
 1662 0040 0D46     		mov	r5, r1
 729:Src/uart.c    **** 						p_last_pointer = 0;
 1663              		.loc 1 729 0
 1664 0042 0022     		movs	r2, #0
 1665              	.LVL128:
 1666              	.L172:
 730:Src/uart.c    **** 				}
 731:Src/uart.c    **** 				
 732:Src/uart.c    **** 				
 733:Src/uart.c    **** 				for(i=0;i<p_rx_len;i++)
 734:Src/uart.c    **** 				{
 735:Src/uart.c    **** 						uart_recv_buf.buf[uart_recv_buf.len++] = g_UART_RxBuf[p_last_pointer++];
 1667              		.loc 1 735 0
 1668 0044 1A4F     		ldr	r7, .L182+16
 733:Src/uart.c    **** 				{
 1669              		.loc 1 733 0
 1670 0046 0024     		movs	r4, #0
 1671              		.loc 1 735 0
 1672 0048 3A44     		add	r2, r2, r7
 1673              	.LVL129:
 736:Src/uart.c    **** 						if(uart_recv_buf.len>RX_BUF_SIZE)
 737:Src/uart.c    **** 						{
 738:Src/uart.c    **** 								uart_recv_buf.len = 0;
 1674              		.loc 1 738 0
 1675 004a A446     		mov	ip, r4
 1676              	.LVL130:
 1677              	.L176:
 733:Src/uart.c    **** 				{
 1678              		.loc 1 733 0 discriminator 1
 1679 004c A542     		cmp	r5, r4
 1680 004e 15DC     		bgt	.L178
 739:Src/uart.c    **** 						}
 740:Src/uart.c    **** 				}
 741:Src/uart.c    **** 				uart_recv_buf.last_dma_pointer = rx_len;
 1681              		.loc 1 741 0
 1682 0050 5960     		str	r1, [r3, #4]
 1683              	.LVL131:
 1684              	.L171:
 742:Src/uart.c    **** 			}
 743:Src/uart.c    **** 
 744:Src/uart.c    **** 			
 745:Src/uart.c    **** 			#if 0
 746:Src/uart.c    **** //			while(g_RxBufptr != DAMCnt)
 747:Src/uart.c    **** //			{
 748:Src/uart.c    **** //				ret = UART_ParseData(g_UART_RxBuf[g_RxBufptr]);
 749:Src/uart.c    **** //				if(ret == 0)
 750:Src/uart.c    **** //				{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 47


 751:Src/uart.c    **** //					g_RxBufptr = DAMCnt;
 752:Src/uart.c    **** //					break;
 753:Src/uart.c    **** //				}
 754:Src/uart.c    **** //				g_UART_Rx_Modbus[g_index_Modbus] = g_UART_RxBuf[g_RxBufptr];
 755:Src/uart.c    **** //				g_index_Modbus++;
 756:Src/uart.c    **** //				if(g_index_Modbus >= RX_BUF_SIZE)
 757:Src/uart.c    **** //				{
 758:Src/uart.c    **** //					g_index_Modbus = 0;
 759:Src/uart.c    **** //				}
 760:Src/uart.c    **** //				cnt_temp++;
 761:Src/uart.c    **** //				g_RxBufptr++;
 762:Src/uart.c    **** //				if( g_RxBufptr == RX_BUF_SIZE )
 763:Src/uart.c    **** //				{
 764:Src/uart.c    **** //					g_RxBufptr = 0;
 765:Src/uart.c    **** //				}
 766:Src/uart.c    **** //			}
 767:Src/uart.c    **** 			
 768:Src/uart.c    **** 			#endif
 769:Src/uart.c    **** 			g_bUARTPushingFrames = 0;
 1685              		.loc 1 769 0
 1686 0052 0023     		movs	r3, #0
 1687 0054 3370     		strb	r3, [r6]
 1688              	.L170:
 770:Src/uart.c    **** //					USART_ClearFlag(USART2,USART_FLAG_IDLE);
 771:Src/uart.c    **** //					DMA_Cmd(DMA1_Channel7, DISABLE);
 772:Src/uart.c    **** //					DMA1_Channel7->CPAR = (uint32_t)(&(USART2->TDR));				
 773:Src/uart.c    **** //					DMA1_Channel7->CNDTR = g_index_Modbus;
 774:Src/uart.c    **** //					DMA1_Channel7->CMAR = (uint32_t)&(g_UART_Rx_Modbus);
 775:Src/uart.c    **** //					DMA_Cmd(DMA1_Channel7, ENABLE); 
 776:Src/uart.c    **** 
 777:Src/uart.c    **** #if 0
 778:Src/uart.c    **** //			if(g_index_Modbus >= 8)
 779:Src/uart.c    **** //			{
 780:Src/uart.c    **** //										//Ñ°ï¿½ï¿½Ö¡Í· ID ï¿½Í¹ï¿½ï¿½Üºï¿½
 781:Src/uart.c    **** //										for(i=g_index_Modbus-8;i>0;i--)
 782:Src/uart.c    **** //										{
 783:Src/uart.c    **** //												if(	(g_UART_Rx_Modbus[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿
 784:Src/uart.c    **** //														&&(g_UART_Rx_Modbus[i+1] == 0x03||g_UART_Rx_Modbus[i+1] == 0x06||g_UART_Rx_Modbus[i
 785:Src/uart.c    **** //													)
 786:Src/uart.c    **** //												{
 787:Src/uart.c    **** //													break;
 788:Src/uart.c    **** //												}											
 789:Src/uart.c    **** //										}
 790:Src/uart.c    **** ////										if(i>g_index_Modbus-3)
 791:Src/uart.c    **** ////										{
 792:Src/uart.c    **** ////											g_index_Modbus = 0;
 793:Src/uart.c    **** ////											return;
 794:Src/uart.c    **** ////										}
 795:Src/uart.c    **** //											CRC_Tmp =  ModBusCRC16(&g_UART_Rx_Modbus[i], g_index_Modbus-2-i); 
 796:Src/uart.c    **** //											CRC_RX = ((width_t)g_UART_Rx_Modbus[g_index_Modbus-1]<<8) + g_UART_Rx_Modbus[g_index_M
 797:Src/uart.c    **** //											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 798:Src/uart.c    **** //											{			
 799:Src/uart.c    **** //														if(g_UART_Rx_Modbus[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿
 800:Src/uart.c    **** //														{														
 801:Src/uart.c    **** //																Rx_Pro_Modbus(&g_UART_Rx_Modbus[i],g_index_Modbus-i);
 802:Src/uart.c    **** //														}
 803:Src/uart.c    **** //														g_index_Modbus = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 48


 804:Src/uart.c    **** //											}
 805:Src/uart.c    **** //		}
 806:Src/uart.c    **** 
 807:Src/uart.c    **** 	#endif
 808:Src/uart.c    **** 	}
 809:Src/uart.c    **** 	//Modbus Ð­ï¿½é´¦ï¿½ï¿½	
 810:Src/uart.c    ****   DAMCnt = RX_BUF_SIZE - (DMA1_Channel1->CNDTR);
 1689              		.loc 1 810 0
 1690 0056 4368     		ldr	r3, [r0, #4]
 811:Src/uart.c    **** 	
 812:Src/uart.c    **** 	
 813:Src/uart.c    **** 
 814:Src/uart.c    **** 
 815:Src/uart.c    **** }
 1691              		.loc 1 815 0
 1692 0058 F0BD     		pop	{r4, r5, r6, r7, pc}
 1693              	.LVL132:
 1694              	.L175:
 722:Src/uart.c    **** 								if(uart_recv_buf.len > RX_BUF_SIZE -1)
 1695              		.loc 1 722 0
 1696 005a 1D68     		ldr	r5, [r3]
 1697 005c 05F1010E 		add	lr, r5, #1
 1698 0060 1D44     		add	r5, r5, r3
 1699 0062 C3F800E0 		str	lr, [r3]
 1700 0066 12F804E0 		ldrb	lr, [r2, r4]	@ zero_extendqisi2
 1701 006a 85F808E0 		strb	lr, [r5, #8]
 723:Src/uart.c    **** 								{
 1702              		.loc 1 723 0
 1703 006e 1D68     		ldr	r5, [r3]
 1704 0070 7F2D     		cmp	r5, #127
 725:Src/uart.c    **** 								}
 1705              		.loc 1 725 0
 1706 0072 C8BF     		it	gt
 1707 0074 C3F800C0 		strgt	ip, [r3]
 1708              	.LVL133:
 1709 0078 0134     		adds	r4, r4, #1
 1710              	.LVL134:
 1711 007a DFE7     		b	.L173
 1712              	.LVL135:
 1713              	.L178:
 735:Src/uart.c    **** 						if(uart_recv_buf.len>RX_BUF_SIZE)
 1714              		.loc 1 735 0
 1715 007c 1F68     		ldr	r7, [r3]
 1716 007e 07F1010E 		add	lr, r7, #1
 1717 0082 1F44     		add	r7, r7, r3
 1718 0084 C3F800E0 		str	lr, [r3]
 1719 0088 12F804E0 		ldrb	lr, [r2, r4]	@ zero_extendqisi2
 1720 008c 87F808E0 		strb	lr, [r7, #8]
 736:Src/uart.c    **** 						{
 1721              		.loc 1 736 0
 1722 0090 1F68     		ldr	r7, [r3]
 1723 0092 802F     		cmp	r7, #128
 738:Src/uart.c    **** 						}
 1724              		.loc 1 738 0
 1725 0094 C8BF     		it	gt
 1726 0096 C3F800C0 		strgt	ip, [r3]
 1727              	.LVL136:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 49


 1728 009a 0134     		adds	r4, r4, #1
 1729              	.LVL137:
 1730 009c D6E7     		b	.L176
 1731              	.L183:
 1732 009e 00BF     		.align	2
 1733              	.L182:
 1734 00a0 08000240 		.word	1073872904
 1735 00a4 00000000 		.word	huart1
 1736 00a8 00000000 		.word	.LANCHOR0
 1737 00ac 00000000 		.word	.LANCHOR13
 1738 00b0 00000000 		.word	g_UART_RxBuf
 1739              		.cfi_endproc
 1740              	.LFE342:
 1742              		.section	.text.Rx_Send_Modbus,"ax",%progbits
 1743              		.align	1
 1744              		.global	Rx_Send_Modbus
 1745              		.syntax unified
 1746              		.thumb
 1747              		.thumb_func
 1748              		.fpu fpv4-sp-d16
 1750              	Rx_Send_Modbus:
 1751              	.LFB345:
 816:Src/uart.c    **** 
 817:Src/uart.c    **** void UART_CheckReceive_1(void)
 818:Src/uart.c    **** {
 819:Src/uart.c    **** 	int i = 0;
 820:Src/uart.c    **** 	int len = 0;
 821:Src/uart.c    **** 	unsigned char psum = 0;
 822:Src/uart.c    **** 	int ret = 0;
 823:Src/uart.c    **** 	width_t CRC_RX,CRC_Tmp;
 824:Src/uart.c    **** 	
 825:Src/uart.c    **** 	if( uart_recv_buf.len < 4 )
 826:Src/uart.c    **** 	{
 827:Src/uart.c    **** 		uart_recv_buf.len = 0;
 828:Src/uart.c    **** 	}
 829:Src/uart.c    **** 	
 830:Src/uart.c    **** 	
 831:Src/uart.c    **** 	if(uart_recv_buf.len)
 832:Src/uart.c    **** 	{
 833:Src/uart.c    **** 		len = uart_recv_buf.len;
 834:Src/uart.c    **** 		
 835:Src/uart.c    **** //		for(i = 0; i < len; i++)  
 836:Src/uart.c    **** //		{
 837:Src/uart.c    **** ////				g_UART_RXlen = uart_recv_buf.buf[2];
 838:Src/uart.c    **** ////				UART_ParseFrame(&uart_recv_buf.buf[2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 839:Src/uart.c    **** ////				g_index_Modbus = 0;
 840:Src/uart.c    **** ////				uart_recv_buf.len =0;
 841:Src/uart.c    **** //				
 842:Src/uart.c    **** //				ret = UART_ParseData(uart_recv_buf.buf[i]);
 843:Src/uart.c    **** //				if(ret == 0)
 844:Src/uart.c    **** //				{
 845:Src/uart.c    **** //					uart_recv_buf.len = 0;
 846:Src/uart.c    **** //					break;
 847:Src/uart.c    **** //				}
 848:Src/uart.c    **** //			}
 849:Src/uart.c    **** //			
 850:Src/uart.c    **** //			if(uart_recv_buf.buf[i] ==0x55 && uart_recv_buf.buf[i+1] ==0xaa  )
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 50


 851:Src/uart.c    **** //			{
 852:Src/uart.c    **** //				plen = uart_recv_buf.buf[i+2];
 853:Src/uart.c    **** //				csum =0;
 854:Src/uart.c    **** //				
 855:Src/uart.c    **** //				for(j=0;j<plen+2;j++)
 856:Src/uart.c    **** //				{
 857:Src/uart.c    **** //					csum += uart_recv_buf.buf[i+2+j];
 858:Src/uart.c    **** //				}
 859:Src/uart.c    **** //				
 860:Src/uart.c    **** //				if(csum == uart_recv_buf.buf[i+plen+4])   //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½Í¬
 861:Src/uart.c    **** //				{
 862:Src/uart.c    **** //					g_UART_RXlen = uart_recv_buf.buf[i+2];
 863:Src/uart.c    **** //					UART_ParseFrame(&uart_recv_buf.buf[i+2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 864:Src/uart.c    **** //					g_index_Modbus = 0;
 865:Src/uart.c    **** //					uart_recv_buf.len = 0;
 866:Src/uart.c    **** //					break;
 867:Src/uart.c    **** //				}
 868:Src/uart.c    **** //			}
 869:Src/uart.c    **** //			
 870:Src/uart.c    **** //			if( g_RxBufptr == RX_BUF_SIZE )
 871:Src/uart.c    **** //			{
 872:Src/uart.c    **** //				g_RxBufptr = 0;
 873:Src/uart.c    **** //			}
 874:Src/uart.c    **** //		}
 875:Src/uart.c    **** 
 876:Src/uart.c    **** 
 877:Src/uart.c    **** 		for(i = 0; i < len; i++)  
 878:Src/uart.c    **** 		{
 879:Src/uart.c    **** 			if(uart_recv_buf.buf[i] ==0x55 && uart_recv_buf.buf[i+1] ==0xaa  )
 880:Src/uart.c    **** 			{
 881:Src/uart.c    **** 				if( (i+2) > ( len-1) )
 882:Src/uart.c    **** 				{
 883:Src/uart.c    **** 					break;
 884:Src/uart.c    **** 				}
 885:Src/uart.c    **** 				g_UART_RXlen = uart_recv_buf.buf[i+2];
 886:Src/uart.c    **** 				
 887:Src/uart.c    **** 				if( g_UART_RXlen > (len - i - 5))
 888:Src/uart.c    **** 				{
 889:Src/uart.c    **** 					break;
 890:Src/uart.c    **** 				}
 891:Src/uart.c    **** 				
 892:Src/uart.c    **** 				psum = uart_recv_buf.buf[i+g_UART_RXlen+4];
 893:Src/uart.c    **** 				if( psum == uart_sum(&uart_recv_buf.buf[i+2],g_UART_RXlen+2) )
 894:Src/uart.c    **** 				{
 895:Src/uart.c    **** 					UART_ParseFrame(&uart_recv_buf.buf[i+2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 896:Src/uart.c    **** 					g_index_Modbus = 0;
 897:Src/uart.c    **** 					uart_recv_buf.len = 0;
 898:Src/uart.c    **** 					break;
 899:Src/uart.c    **** 				}
 900:Src/uart.c    **** 				else
 901:Src/uart.c    **** 				{
 902:Src/uart.c    **** 				//	while(1);
 903:Src/uart.c    **** 				}
 904:Src/uart.c    **** 			}
 905:Src/uart.c    **** 		}
 906:Src/uart.c    **** 
 907:Src/uart.c    **** 		g_index_Modbus = len;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 51


 908:Src/uart.c    **** 		if(g_index_Modbus >= 8)
 909:Src/uart.c    **** 		{
 910:Src/uart.c    **** 										//Ñ°ï¿½ï¿½Ö¡Í· ID ï¿½Í¹ï¿½ï¿½Üºï¿½
 911:Src/uart.c    **** 										for(i=g_index_Modbus-8;i>0;i--)
 912:Src/uart.c    **** 										{
 913:Src/uart.c    **** 												if(	(uart_recv_buf.buf[i] == g_CmdMap[CMD_ID]|| uart_recv_buf.buf[i] ==  0xff)  //ID ï¿
 914:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 915:Src/uart.c    **** 													)
 916:Src/uart.c    **** 												{
 917:Src/uart.c    **** 													break;
 918:Src/uart.c    **** 												}											
 919:Src/uart.c    **** 										}
 920:Src/uart.c    **** 										if(i>g_index_Modbus-3)
 921:Src/uart.c    **** 										{
 922:Src/uart.c    **** 											g_index_Modbus = 0;
 923:Src/uart.c    **** 											return;
 924:Src/uart.c    **** 										}
 925:Src/uart.c    **** 											CRC_Tmp =  ModBusCRC16(&uart_recv_buf.buf[i], g_index_Modbus-2-i); 
 926:Src/uart.c    **** 											CRC_RX = ((width_t)uart_recv_buf.buf[g_index_Modbus-1]<<8) + uart_recv_buf.buf[g_index_M
 927:Src/uart.c    **** 											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 928:Src/uart.c    **** 											{			
 929:Src/uart.c    **** 														if(uart_recv_buf.buf[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿½
 930:Src/uart.c    **** 														{														
 931:Src/uart.c    **** 																Rx_Pro_Modbus(&uart_recv_buf.buf[i],g_index_Modbus-i);
 932:Src/uart.c    **** 														}
 933:Src/uart.c    **** 														g_index_Modbus = 0;
 934:Src/uart.c    **** 											}
 935:Src/uart.c    **** 		}
 936:Src/uart.c    **** 		uart_recv_buf.len =0;
 937:Src/uart.c    **** 	}
 938:Src/uart.c    **** }
 939:Src/uart.c    **** 	
 940:Src/uart.c    **** 
 941:Src/uart.c    **** void Rx_Pro_Modbus(u8* p_frame,u8 rx_cur_Num)
 942:Src/uart.c    **** {
 943:Src/uart.c    **** 	  int16_t add_reg =0, num_reg = 0,i = 0;
 944:Src/uart.c    **** 	  s32 result = 1;
 945:Src/uart.c    **** 		u16 pos = 0;
 946:Src/uart.c    **** 	  u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 947:Src/uart.c    **** //		static int last_cmd = 0;
 948:Src/uart.c    **** //		static int cur_cmd = 0;
 949:Src/uart.c    **** 		g_bUARTPushingFrames = 1;
 950:Src/uart.c    **** //		cur_cmd = p_frame[1];
 951:Src/uart.c    **** 		if(p_frame[1] == 0x03)//ï¿½ï¿½×´Ì¬
 952:Src/uart.c    **** 			 {
 953:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
 954:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 955:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 956:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 0x03;
 957:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 2*num_reg;//ï¿½Ö½Ú³ï¿½ï¿½ï¿½
 958:Src/uart.c    **** 				 for(i=0;i<num_reg;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿
 959:Src/uart.c    **** 				 {
 960:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] >>8;
 961:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] & 0x0ff;					 	 
 962:Src/uart.c    **** 				 }			 				 
 963:Src/uart.c    **** 			 }
 964:Src/uart.c    **** 		else if(p_frame[1] == 0x06)//Ð´ï¿½Ä´ï¿½ï¿½ï¿½
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 52


 965:Src/uart.c    **** 			 {
 966:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
 967:Src/uart.c    **** 				 num_reg = 1;
 968:Src/uart.c    **** 				 for(i=0;i<rx_cur_Num-2;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»
 969:Src/uart.c    **** 				 {
 970:Src/uart.c    **** 					g_UART_Tx_Modbus[pos++] = p_frame[i];			 
 971:Src/uart.c    **** 				 }
 972:Src/uart.c    **** 			 }
 973:Src/uart.c    **** 		else if(p_frame[1] == 0x10)//Ð´ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½
 974:Src/uart.c    **** 			 {
 975:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
 976:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 977:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 978:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = 0x10;
 979:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = num_reg;
 980:Src/uart.c    **** 				 for(i=0;i<6;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿½Ç°ï¿½
 981:Src/uart.c    **** 				 {
 982:Src/uart.c    **** 					g_UART_Tx_Modbus[pos++] =    p_frame[i];					 
 983:Src/uart.c    **** 				 }				 
 984:Src/uart.c    **** 			}
 985:Src/uart.c    **** 		else
 986:Src/uart.c    **** 		{
 987:Src/uart.c    **** 			g_bUARTPushingFrames = 0;
 988:Src/uart.c    **** 			return;
 989:Src/uart.c    **** 		}
 990:Src/uart.c    **** 	if(p_frame[1] == 0x06 || p_frame[1] == 0x10)
 991:Src/uart.c    **** 	{		
 992:Src/uart.c    **** 			{
 993:Src/uart.c    **** 				if(add_reg>=USERCMDMAP_LEN)
 994:Src/uart.c    **** 				{
 995:Src/uart.c    **** 					pbWRBuf = &g_CmdMap_bWR[0][0];
 996:Src/uart.c    **** 					if((u16)g_CmdMap[CMD_ACCESS_CODE] != (u16)0x1234)
 997:Src/uart.c    **** 					{
 998:Src/uart.c    **** 						result = 0;
 999:Src/uart.c    **** 					}
1000:Src/uart.c    **** 					else				
1001:Src/uart.c    **** 					{
1002:Src/uart.c    **** 						for(i=0; i<num_reg; i++)
1003:Src/uart.c    **** 						{
1004:Src/uart.c    **** 						if (*(pbWRBuf+add_reg-USERCMDMAP_LEN+i) != WRFLG_RW)
1005:Src/uart.c    **** 						result = 0;			
1006:Src/uart.c    **** 						}
1007:Src/uart.c    **** 					}
1008:Src/uart.c    **** 				}
1009:Src/uart.c    **** 				else
1010:Src/uart.c    **** 				{
1011:Src/uart.c    **** 					pbWRBuf = &g_CmdMap_User_bWR[0][0];
1012:Src/uart.c    **** 					for(i=0; i<num_reg; i++)
1013:Src/uart.c    **** 					{
1014:Src/uart.c    **** 						if (*(pbWRBuf+add_reg+i) != WRFLG_RW)
1015:Src/uart.c    **** 						result = 0;
1016:Src/uart.c    **** 					}
1017:Src/uart.c    **** 				}
1018:Src/uart.c    **** 				if(result)
1019:Src/uart.c    **** 				{	
1020:Src/uart.c    **** 					if(p_frame[1] == 0x06)
1021:Src/uart.c    **** 					{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 53


1022:Src/uart.c    **** 						g_CmdMap[add_reg] = (p_frame[4]<<8) + p_frame[5];
1023:Src/uart.c    **** 					}
1024:Src/uart.c    **** 					if(p_frame[1] == 0x10)
1025:Src/uart.c    **** 					{
1026:Src/uart.c    **** 						for(i=0;i<num_reg;i++)  //(g_UART_RXlen-2-1)
1027:Src/uart.c    **** 						{
1028:Src/uart.c    **** 							g_CmdMap[add_reg+i] = (p_frame[7+2*i]<<8) + p_frame[8+2*i];
1029:Src/uart.c    **** 						}
1030:Src/uart.c    **** 					}
1031:Src/uart.c    **** 				}
1032:Src/uart.c    **** 				if(add_reg >= POS_LINEARITY_ADC(0) && add_reg <= POS_LINEARITY_ADC(NUM_LINEARITY_SEG))	
1033:Src/uart.c    **** 				{
1034:Src/uart.c    **** 					pos_linearity_ini();
1035:Src/uart.c    **** 				}				
1036:Src/uart.c    **** 				if(add_reg <= CMD_POS_SET_PU && (add_reg+num_reg) >= CMD_POS_SET_PU 
1037:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
1038:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
1039:Src/uart.c    **** 				{
1040:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1041:Src/uart.c    **** 						recPosCmd();
1042:Src/uart.c    **** 				}
1043:Src/uart.c    **** 				if(add_reg <= CMD_FORCE_SET_PU && (add_reg+num_reg)>= CMD_FORCE_SET_PU && g_CmdMap[CMD_USEER_MO
1044:Src/uart.c    **** 				{
1045:Src/uart.c    **** 						g_CmdMap[TAG_MOTOR_ENABLE] = 1;
1046:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
1047:Src/uart.c    **** 				}
1048:Src/uart.c    **** 				
1049:Src/uart.c    **** 								//Î»ï¿½ï¿½+ï¿½ï¿½Ä£Ê½ï¿½ï¿½ Í¬Ê±ï¿½Þ¸ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È¡ï¿½Î»ï¿½Ã¼Ä´ï¿½ï¿½ï¿½ï¿½ï
1050:Src/uart.c    **** 				if(add_reg <= CMD_FORCE_SET_PU && (add_reg+num_reg) >= CMD_POS_SET_PU && (g_CmdMap[CMD_USEER_MO
1051:Src/uart.c    **** 				{
1052:Src/uart.c    **** 						if(g_CmdMap[CMD_FORCE_DIR] == 0)
1053:Src/uart.c    **** 						{
1054:Src/uart.c    **** 							force_set = g_CmdMap[CMD_FORCE_SET_PU];
1055:Src/uart.c    **** 							force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
1056:Src/uart.c    **** 						}
1057:Src/uart.c    **** 						else
1058:Src/uart.c    **** 						{
1059:Src/uart.c    **** 							force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
1060:Src/uart.c    **** 							force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
1061:Src/uart.c    **** 						}
1062:Src/uart.c    **** 
1063:Src/uart.c    **** 						if(force_set>0) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1064:Src/uart.c    **** 						{
1065:Src/uart.c    **** 							if(force_set>force_act) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î»
1066:Src/uart.c    **** 							{
1067:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
1068:Src/uart.c    **** 								{
1069:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1070:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1071:Src/uart.c    **** 									recPosCmd();
1072:Src/uart.c    **** 								}
1073:Src/uart.c    **** 								else
1074:Src/uart.c    **** 								{
1075:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½
1076:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
1077:Src/uart.c    **** 								}
1078:Src/uart.c    **** 							}
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 54


1079:Src/uart.c    **** 							else 
1080:Src/uart.c    **** 							{
1081:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï
1082:Src/uart.c    **** 								{
1083:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1084:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1085:Src/uart.c    **** 									recPosCmd();
1086:Src/uart.c    **** 								}
1087:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
1088:Src/uart.c    **** 								{
1089:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
1090:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
1091:Src/uart.c    **** 								}				
1092:Src/uart.c    **** 							}
1093:Src/uart.c    **** 						}
1094:Src/uart.c    **** 						else if(force_set<0)  //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1095:Src/uart.c    **** 						{													
1096:Src/uart.c    **** 							if(force_set<force_act) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
1097:Src/uart.c    **** 							{
1098:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
1099:Src/uart.c    **** 								{
1100:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Pro
1101:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1102:Src/uart.c    **** 									recPosCmd();
1103:Src/uart.c    **** 								}
1104:Src/uart.c    **** 								else
1105:Src/uart.c    **** 								{
1106:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1107:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
1108:Src/uart.c    **** 								}
1109:Src/uart.c    **** 							}
1110:Src/uart.c    **** 							else 
1111:Src/uart.c    **** 							{
1112:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï¿½Ò²Ã»
1113:Src/uart.c    **** 								{
1114:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1115:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1116:Src/uart.c    **** 									recPosCmd();
1117:Src/uart.c    **** 								}
1118:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
1119:Src/uart.c    **** 								{
1120:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
1121:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
1122:Src/uart.c    **** 								}				
1123:Src/uart.c    **** 							}							
1124:Src/uart.c    **** 						}
1125:Src/uart.c    **** 						else
1126:Src/uart.c    **** 						{
1127:Src/uart.c    **** 							status_Mode_POSITION_FORCE = 3; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Profi
1128:Src/uart.c    **** 						}				
1129:Src/uart.c    **** 				}		
1130:Src/uart.c    **** 				
1131:Src/uart.c    **** 				
1132:Src/uart.c    **** 				
1133:Src/uart.c    **** 				
1134:Src/uart.c    **** 				
1135:Src/uart.c    **** 				if(add_reg == SYS_SET_POS_ACT_PU)     
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 55


1136:Src/uart.c    **** 				{
1137:Src/uart.c    **** 						//ï¿½ï¿½ï¿½Ãµï¿½Ç°Î»ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ã¹«Ê½
1138:Src/uart.c    **** 					if(g_CmdMap[SYS_MU_COMM_TO_PC] == 1)     //MU Ð¾Æ¬ï¿½ê¶¨Ä£Ê½
1139:Src/uart.c    **** 					{
1140:Src/uart.c    **** 						//	flag_first_exe = 0;
1141:Src/uart.c    **** 							rod_pos_Muti_Encoder = g_CmdMap[SYS_SET_POS_ACT_PU]*(*g_pPos_ref_base_um)*(int64_t)g_CmdMap[
1142:Src/uart.c    **** 					}
1143:Src/uart.c    **** 					else
1144:Src/uart.c    **** 						*g_pMU_value_offset = MU_Value;
1145:Src/uart.c    **** 						range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_of
1146:Src/uart.c    **** 				}
1147:Src/uart.c    **** 				if(add_reg == MOT_EANGLE_OFFSET)	
1148:Src/uart.c    **** 				{
1149:Src/uart.c    **** 						g_Encode_offset = (int)g_CmdMap[MOT_EANGLE_OFFSET];
1150:Src/uart.c    **** 						g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
1151:Src/uart.c    **** 				}		
1152:Src/uart.c    **** 			}		
1153:Src/uart.c    **** 	}
1154:Src/uart.c    **** 	ModBusCRC16Send(g_UART_Tx_Modbus, pos);//buf
1155:Src/uart.c    **** 	pos = pos + 2;
1156:Src/uart.c    **** 	g_UART_Tx_Modbus_len = pos;
1157:Src/uart.c    **** 	flag_rev_modbus = 1;
1158:Src/uart.c    **** 
1159:Src/uart.c    **** }
1160:Src/uart.c    **** void Rx_Send_Modbus(void)
1161:Src/uart.c    **** {
 1752              		.loc 1 1161 0
 1753              		.cfi_startproc
 1754              		@ args = 0, pretend = 0, frame = 0
 1755              		@ frame_needed = 0, uses_anonymous_args = 0
 1756              		@ link register save eliminated.
1162:Src/uart.c    **** 	if(flag_rev_modbus == 1)
 1757              		.loc 1 1162 0
 1758 0000 144B     		ldr	r3, .L188
 1759 0002 1549     		ldr	r1, .L188+4
 1760 0004 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1761 0006 012A     		cmp	r2, #1
 1762 0008 1A46     		mov	r2, r3
1163:Src/uart.c    **** 	{
1164:Src/uart.c    **** 		modbus_rly_delay_ms++;	
 1763              		.loc 1 1164 0
 1764 000a 01BF     		itttt	eq
 1765 000c 0B88     		ldrheq	r3, [r1]
 1766 000e 0133     		addeq	r3, r3, #1
 1767 0010 1BB2     		sxtheq	r3, r3
 1768 0012 0B80     		strheq	r3, [r1]	@ movhi
1165:Src/uart.c    **** 	}	
1166:Src/uart.c    **** 	if(modbus_rly_delay_ms >= 1)
 1769              		.loc 1 1166 0
 1770 0014 0B88     		ldrh	r3, [r1]
 1771 0016 1BB2     		sxth	r3, r3
 1772 0018 002B     		cmp	r3, #0
 1773 001a 19DD     		ble	.L184
1167:Src/uart.c    **** 	{
1168:Src/uart.c    **** 		modbus_rly_delay_ms = 0;
 1774              		.loc 1 1168 0
 1775 001c 0023     		movs	r3, #0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 56


 1776 001e 0B80     		strh	r3, [r1]	@ movhi
1169:Src/uart.c    **** 		flag_rev_modbus = 0;
 1777              		.loc 1 1169 0
 1778 0020 1370     		strb	r3, [r2]
1170:Src/uart.c    **** 		if(g_fast_debug == 0)
 1779              		.loc 1 1170 0
 1780 0022 0E4B     		ldr	r3, .L188+8
 1781 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1782 0026 83B9     		cbnz	r3, .L187
1171:Src/uart.c    **** 		{
1172:Src/uart.c    **** 			__HAL_DMA_DISABLE(&hdma_usart1_tx);
 1783              		.loc 1 1172 0
 1784 0028 0D4B     		ldr	r3, .L188+12
 1785 002a 1B68     		ldr	r3, [r3]
 1786 002c 1A68     		ldr	r2, [r3]
 1787 002e 22F00102 		bic	r2, r2, #1
 1788 0032 1A60     		str	r2, [r3]
1173:Src/uart.c    **** 			hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 1789              		.loc 1 1173 0
 1790 0034 0B4A     		ldr	r2, .L188+16
 1791 0036 9A60     		str	r2, [r3, #8]
1174:Src/uart.c    **** 			hdma_usart1_tx.Instance->CNDTR = g_UART_Tx_Modbus_len;//g_Frames[g_Frames_Tail].len;
 1792              		.loc 1 1174 0
 1793 0038 0B4A     		ldr	r2, .L188+20
 1794 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1795 003c 5A60     		str	r2, [r3, #4]
1175:Src/uart.c    **** 			hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_Tx_Modbus[0];//(uint32_t)&(g_Frames[g_Frames_T
 1796              		.loc 1 1175 0
 1797 003e 0B4A     		ldr	r2, .L188+24
 1798 0040 DA60     		str	r2, [r3, #12]
1176:Src/uart.c    **** 			__HAL_DMA_ENABLE(&hdma_usart1_tx);
 1799              		.loc 1 1176 0
 1800 0042 1A68     		ldr	r2, [r3]
 1801 0044 42F00102 		orr	r2, r2, #1
 1802 0048 1A60     		str	r2, [r3]
 1803              	.L187:
1177:Src/uart.c    **** 		}		
1178:Src/uart.c    **** 		g_bUARTPushingFrames = 0;
 1804              		.loc 1 1178 0
 1805 004a 094B     		ldr	r3, .L188+28
 1806 004c 0022     		movs	r2, #0
 1807 004e 1A70     		strb	r2, [r3]
 1808              	.L184:
1179:Src/uart.c    **** 	}
1180:Src/uart.c    **** }
 1809              		.loc 1 1180 0
 1810 0050 7047     		bx	lr
 1811              	.L189:
 1812 0052 00BF     		.align	2
 1813              	.L188:
 1814 0054 00000000 		.word	flag_rev_modbus
 1815 0058 00000000 		.word	modbus_rly_delay_ms
 1816 005c 00000000 		.word	.LANCHOR1
 1817 0060 00000000 		.word	hdma_usart1_tx
 1818 0064 28380140 		.word	1073821736
 1819 0068 00000000 		.word	.LANCHOR14
 1820 006c 00000000 		.word	.LANCHOR15
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 57


 1821 0070 00000000 		.word	.LANCHOR0
 1822              		.cfi_endproc
 1823              	.LFE345:
 1825              		.section	.text.ModBusCRC16,"ax",%progbits
 1826              		.align	1
 1827              		.global	ModBusCRC16
 1828              		.syntax unified
 1829              		.thumb
 1830              		.thumb_func
 1831              		.fpu fpv4-sp-d16
 1833              	ModBusCRC16:
 1834              	.LFB346:
1181:Src/uart.c    **** unsigned int ModBusCRC16(unsigned char *  cmd, unsigned int len)
1182:Src/uart.c    **** {
 1835              		.loc 1 1182 0
 1836              		.cfi_startproc
 1837              		@ args = 0, pretend = 0, frame = 0
 1838              		@ frame_needed = 0, uses_anonymous_args = 0
 1839              	.LVL138:
 1840 0000 30B5     		push	{r4, r5, lr}
 1841              	.LCFI29:
 1842              		.cfi_def_cfa_offset 12
 1843              		.cfi_offset 4, -12
 1844              		.cfi_offset 5, -8
 1845              		.cfi_offset 14, -4
 1846 0002 0144     		add	r1, r1, r0
 1847              	.LVL139:
1183:Src/uart.c    ****     unsigned int i, j, tmp, CRC16;//out;
1184:Src/uart.c    ****     CRC16 = 0xFFFF;             //CRC??????
 1848              		.loc 1 1184 0
 1849 0004 4FF6FF73 		movw	r3, #65535
1185:Src/uart.c    ****     for (i = 0; i < len; i++)
1186:Src/uart.c    ****     {
1187:Src/uart.c    ****         CRC16 ^= cmd[i];
1188:Src/uart.c    ****         for (j = 0; j < 8; j++)
1189:Src/uart.c    ****         {
1190:Src/uart.c    ****             tmp = (unsigned int)(CRC16 & 0x0001);
1191:Src/uart.c    ****             CRC16 >>= 1;
1192:Src/uart.c    ****             if (tmp == 1)
1193:Src/uart.c    ****             {
1194:Src/uart.c    ****                 CRC16 ^= 0xA001;    //?????
 1850              		.loc 1 1194 0
 1851 0008 4AF20104 		movw	r4, #40961
 1852              	.LVL140:
 1853              	.L191:
1185:Src/uart.c    ****     for (i = 0; i < len; i++)
 1854              		.loc 1 1185 0 discriminator 1
 1855 000c 8842     		cmp	r0, r1
 1856 000e 01D1     		bne	.L194
1195:Src/uart.c    ****             }
1196:Src/uart.c    ****         }
1197:Src/uart.c    ****     }
1198:Src/uart.c    **** 		return CRC16; 
1199:Src/uart.c    ****     //cmd[i++] = (byte) (CRC16 & 0x00FF);
1200:Src/uart.c    ****     //cmd[i++] = (byte) ((CRC16 & 0xFF00)>>8);
1201:Src/uart.c    **** }
 1857              		.loc 1 1201 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 58


 1858 0010 1846     		mov	r0, r3
 1859              	.LVL141:
 1860 0012 30BD     		pop	{r4, r5, pc}
 1861              	.LVL142:
 1862              	.L194:
1187:Src/uart.c    ****         for (j = 0; j < 8; j++)
 1863              		.loc 1 1187 0
 1864 0014 10F8012B 		ldrb	r2, [r0], #1	@ zero_extendqisi2
 1865              	.LVL143:
 1866 0018 5340     		eors	r3, r3, r2
 1867              	.LVL144:
 1868 001a 0822     		movs	r2, #8
 1869              	.LVL145:
 1870              	.L193:
1190:Src/uart.c    ****             CRC16 >>= 1;
 1871              		.loc 1 1190 0
 1872 001c 03F00105 		and	r5, r3, #1
 1873              	.LVL146:
1191:Src/uart.c    ****             if (tmp == 1)
 1874              		.loc 1 1191 0
 1875 0020 5B08     		lsrs	r3, r3, #1
 1876              	.LVL147:
1192:Src/uart.c    ****             {
 1877              		.loc 1 1192 0
 1878 0022 05B1     		cbz	r5, .L192
1194:Src/uart.c    ****             }
 1879              		.loc 1 1194 0
 1880 0024 6340     		eors	r3, r3, r4
 1881              	.LVL148:
 1882              	.L192:
1188:Src/uart.c    ****         {
 1883              		.loc 1 1188 0 discriminator 2
 1884 0026 013A     		subs	r2, r2, #1
 1885              	.LVL149:
 1886 0028 F8D1     		bne	.L193
 1887 002a EFE7     		b	.L191
 1888              		.cfi_endproc
 1889              	.LFE346:
 1891              		.section	.text.ModBusCRC16Send,"ax",%progbits
 1892              		.align	1
 1893              		.global	ModBusCRC16Send
 1894              		.syntax unified
 1895              		.thumb
 1896              		.thumb_func
 1897              		.fpu fpv4-sp-d16
 1899              	ModBusCRC16Send:
 1900              	.LFB347:
1202:Src/uart.c    **** //ModbusCRC Ð£ï¿½ï¿½
1203:Src/uart.c    **** void ModBusCRC16Send(unsigned char *  cmd, unsigned int len)
1204:Src/uart.c    **** {
 1901              		.loc 1 1204 0
 1902              		.cfi_startproc
 1903              		@ args = 0, pretend = 0, frame = 0
 1904              		@ frame_needed = 0, uses_anonymous_args = 0
 1905              	.LVL150:
 1906 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1907              	.LCFI30:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 59


 1908              		.cfi_def_cfa_offset 20
 1909              		.cfi_offset 4, -20
 1910              		.cfi_offset 5, -16
 1911              		.cfi_offset 6, -12
 1912              		.cfi_offset 7, -8
 1913              		.cfi_offset 14, -4
 1914 0002 0246     		mov	r2, r0
 1915 0004 4518     		adds	r5, r0, r1
1205:Src/uart.c    ****     unsigned int i, j, tmp, CRC16;//out;
1206:Src/uart.c    ****     CRC16 = 0xFFFF;             //CRC??????
 1916              		.loc 1 1206 0
 1917 0006 4FF6FF73 		movw	r3, #65535
1207:Src/uart.c    ****     for (i = 0; i < len; i++)
1208:Src/uart.c    ****     {
1209:Src/uart.c    ****         CRC16 ^= cmd[i];
1210:Src/uart.c    ****         for (j = 0; j < 8; j++)
1211:Src/uart.c    ****         {
1212:Src/uart.c    ****             tmp = (unsigned int)(CRC16 & 0x0001);
1213:Src/uart.c    ****             CRC16 >>= 1;
1214:Src/uart.c    ****             if (tmp == 1)
1215:Src/uart.c    ****             {
1216:Src/uart.c    ****                 CRC16 ^= 0xA001;    //?????
 1918              		.loc 1 1216 0
 1919 000a 4AF20106 		movw	r6, #40961
 1920              	.LVL151:
 1921              	.L200:
1207:Src/uart.c    ****     for (i = 0; i < len; i++)
 1922              		.loc 1 1207 0 discriminator 1
 1923 000e AA42     		cmp	r2, r5
 1924 0010 03D1     		bne	.L203
 1925              	.LVL152:
1217:Src/uart.c    ****             }
1218:Src/uart.c    ****         }
1219:Src/uart.c    ****     }
1220:Src/uart.c    ****     cmd[i++] =  (CRC16 & 0x00FF);
 1926              		.loc 1 1220 0
 1927 0012 4354     		strb	r3, [r0, r1]
 1928              	.LVL153:
1221:Src/uart.c    ****     cmd[i++] =  ((CRC16 & 0xFF00)>>8);
 1929              		.loc 1 1221 0
 1930 0014 1B0A     		lsrs	r3, r3, #8
 1931              	.LVL154:
 1932 0016 5370     		strb	r3, [r2, #1]
1222:Src/uart.c    **** }
 1933              		.loc 1 1222 0
 1934 0018 F0BD     		pop	{r4, r5, r6, r7, pc}
 1935              	.LVL155:
 1936              	.L203:
1209:Src/uart.c    ****         for (j = 0; j < 8; j++)
 1937              		.loc 1 1209 0
 1938 001a 12F8014B 		ldrb	r4, [r2], #1	@ zero_extendqisi2
 1939 001e 6340     		eors	r3, r3, r4
 1940              	.LVL156:
 1941 0020 0824     		movs	r4, #8
 1942              	.LVL157:
 1943              	.L202:
1212:Src/uart.c    ****             CRC16 >>= 1;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 60


 1944              		.loc 1 1212 0
 1945 0022 03F00107 		and	r7, r3, #1
 1946              	.LVL158:
1213:Src/uart.c    ****             if (tmp == 1)
 1947              		.loc 1 1213 0
 1948 0026 5B08     		lsrs	r3, r3, #1
 1949              	.LVL159:
1214:Src/uart.c    ****             {
 1950              		.loc 1 1214 0
 1951 0028 07B1     		cbz	r7, .L201
1216:Src/uart.c    ****             }
 1952              		.loc 1 1216 0
 1953 002a 7340     		eors	r3, r3, r6
 1954              	.LVL160:
 1955              	.L201:
1210:Src/uart.c    ****         {
 1956              		.loc 1 1210 0 discriminator 2
 1957 002c 013C     		subs	r4, r4, #1
 1958              	.LVL161:
 1959 002e F8D1     		bne	.L202
 1960 0030 EDE7     		b	.L200
 1961              		.cfi_endproc
 1962              	.LFE347:
 1964              		.section	.text.Rx_Pro_Modbus,"ax",%progbits
 1965              		.align	1
 1966              		.global	Rx_Pro_Modbus
 1967              		.syntax unified
 1968              		.thumb
 1969              		.thumb_func
 1970              		.fpu fpv4-sp-d16
 1972              	Rx_Pro_Modbus:
 1973              	.LFB344:
 942:Src/uart.c    **** 	  int16_t add_reg =0, num_reg = 0,i = 0;
 1974              		.loc 1 942 0
 1975              		.cfi_startproc
 1976              		@ args = 0, pretend = 0, frame = 0
 1977              		@ frame_needed = 0, uses_anonymous_args = 0
 1978              	.LVL162:
 1979 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1980              	.LCFI31:
 1981              		.cfi_def_cfa_offset 24
 1982              		.cfi_offset 3, -24
 1983              		.cfi_offset 4, -20
 1984              		.cfi_offset 5, -16
 1985              		.cfi_offset 6, -12
 1986              		.cfi_offset 7, -8
 1987              		.cfi_offset 14, -4
 951:Src/uart.c    **** 			 {
 1988              		.loc 1 951 0
 1989 0002 4678     		ldrb	r6, [r0, #1]	@ zero_extendqisi2
 949:Src/uart.c    **** //		cur_cmd = p_frame[1];
 1990              		.loc 1 949 0
 1991 0004 B04B     		ldr	r3, .L285
 1992 0006 0122     		movs	r2, #1
 951:Src/uart.c    **** 			 {
 1993              		.loc 1 951 0
 1994 0008 032E     		cmp	r6, #3
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 61


 949:Src/uart.c    **** //		cur_cmd = p_frame[1];
 1995              		.loc 1 949 0
 1996 000a 1A70     		strb	r2, [r3]
 951:Src/uart.c    **** 			 {
 1997              		.loc 1 951 0
 1998 000c 2CD1     		bne	.L209
 953:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 1999              		.loc 1 953 0
 2000 000e 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2001 0010 C478     		ldrb	r4, [r0, #3]	@ zero_extendqisi2
 954:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 2002              		.loc 1 954 0
 2003 0012 4179     		ldrb	r1, [r0, #5]	@ zero_extendqisi2
 2004              	.LVL163:
 955:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 0x03;
 2005              		.loc 1 955 0
 2006 0014 AD4D     		ldr	r5, .L285+4
 2007 0016 AE4A     		ldr	r2, .L285+8
 2008 0018 AF89     		ldrh	r7, [r5, #12]
 953:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2009              		.loc 1 953 0
 2010 001a 04EB0324 		add	r4, r4, r3, lsl #8
 954:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 2011              		.loc 1 954 0
 2012 001e 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 956:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 2*num_reg;//ï¿½Ö½Ú³ï¿½ï¿½ï¿½
 2013              		.loc 1 956 0
 2014 0020 5670     		strb	r6, [r2, #1]
 954:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 2015              		.loc 1 954 0
 2016 0022 01EB0321 		add	r1, r1, r3, lsl #8
 2017 0026 89B2     		uxth	r1, r1
 2018 0028 0BB2     		sxth	r3, r1
 957:Src/uart.c    **** 				 for(i=0;i<num_reg;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿
 2019              		.loc 1 957 0
 2020 002a 4900     		lsls	r1, r1, #1
 2021 002c 9170     		strb	r1, [r2, #2]
 955:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 0x03;
 2022              		.loc 1 955 0
 2023 002e 1770     		strb	r7, [r2]
 953:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2024              		.loc 1 953 0
 2025 0030 24B2     		sxth	r4, r4
 2026              	.LVL164:
 2027 0032 0332     		adds	r2, r2, #3
 958:Src/uart.c    **** 				 {
 2028              		.loc 1 958 0
 2029 0034 0026     		movs	r6, #0
 2030 0036 2946     		mov	r1, r5
 2031              	.LVL165:
 2032              	.L210:
 958:Src/uart.c    **** 				 {
 2033              		.loc 1 958 0 is_stmt 0 discriminator 1
 2034 0038 35B2     		sxth	r5, r6
 2035 003a AB42     		cmp	r3, r5
 2036 003c 02F10202 		add	r2, r2, #2
 2037              	.LVL166:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 62


 2038 0040 05DC     		bgt	.L211
 2039 0042 23EAE375 		bic	r5, r3, r3, asr #31
 2040 0046 6D00     		lsls	r5, r5, #1
 2041 0048 0335     		adds	r5, r5, #3
 2042 004a ADB2     		uxth	r5, r5
 2043 004c 1DE0     		b	.L216
 2044              	.L211:
 2045              	.LVL167:
 2046 004e A719     		adds	r7, r4, r6
 2047 0050 0136     		adds	r6, r6, #1
 2048              	.LVL168:
 960:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] & 0x0ff;					 	 
 2049              		.loc 1 960 0 is_stmt 1 discriminator 3
 2050 0052 31F81750 		ldrh	r5, [r1, r7, lsl #1]
 2051              	.LVL169:
 2052 0056 45F30725 		sbfx	r5, r5, #8, #8
 2053 005a 02F8025C 		strb	r5, [r2, #-2]
 961:Src/uart.c    **** 				 }			 				 
 2054              		.loc 1 961 0 discriminator 3
 2055 005e 31F81750 		ldrh	r5, [r1, r7, lsl #1]
 2056 0062 02F8015C 		strb	r5, [r2, #-1]
 2057 0066 E7E7     		b	.L210
 2058              	.LVL170:
 2059              	.L209:
 964:Src/uart.c    **** 			 {
 2060              		.loc 1 964 0
 2061 0068 062E     		cmp	r6, #6
 2062 006a 3FD1     		bne	.L213
 966:Src/uart.c    **** 				 num_reg = 1;
 2063              		.loc 1 966 0
 2064 006c 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2065 006e C478     		ldrb	r4, [r0, #3]	@ zero_extendqisi2
 970:Src/uart.c    **** 				 }
 2066              		.loc 1 970 0
 2067 0070 974F     		ldr	r7, .L285+8
 966:Src/uart.c    **** 				 num_reg = 1;
 2068              		.loc 1 966 0
 2069 0072 04EB0324 		add	r4, r4, r3, lsl #8
 2070 0076 24B2     		sxth	r4, r4
 2071              	.LVL171:
 968:Src/uart.c    **** 				 {
 2072              		.loc 1 968 0
 2073 0078 0023     		movs	r3, #0
 2074 007a 0239     		subs	r1, r1, #2
 2075              	.LVL172:
 2076              	.L214:
 2077 007c 1AB2     		sxth	r2, r3
 968:Src/uart.c    **** 				 {
 2078              		.loc 1 968 0 is_stmt 0 discriminator 1
 2079 007e 8A42     		cmp	r2, r1
 2080 0080 9DB2     		uxth	r5, r3
 2081              	.LVL173:
 2082 0082 03F10106 		add	r6, r3, #1
 2083 0086 2CDB     		blt	.L215
 967:Src/uart.c    **** 				 for(i=0;i<rx_cur_Num-2;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»
 2084              		.loc 1 967 0 is_stmt 1
 2085 0088 0123     		movs	r3, #1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 63


 2086              	.LVL174:
 2087              	.L216:
 990:Src/uart.c    **** 	{		
 2088              		.loc 1 990 0
 2089 008a 4678     		ldrb	r6, [r0, #1]	@ zero_extendqisi2
 2090 008c 062E     		cmp	r6, #6
 2091 008e 02D0     		beq	.L220
 990:Src/uart.c    **** 	{		
 2092              		.loc 1 990 0 is_stmt 0 discriminator 1
 2093 0090 102E     		cmp	r6, #16
 2094 0092 40F06781 		bne	.L221
 2095              	.L220:
 993:Src/uart.c    **** 				{
 2096              		.loc 1 993 0 is_stmt 1
 2097 0096 FF2C     		cmp	r4, #255
 2098 0098 7FDD     		ble	.L257
 996:Src/uart.c    **** 					{
 2099              		.loc 1 996 0
 2100 009a 8C4A     		ldr	r2, .L285+4
 2101 009c 528B     		ldrh	r2, [r2, #26]
 2102 009e 41F23421 		movw	r1, #4660
 2103 00a2 12B2     		sxth	r2, r2
 2104 00a4 8A42     		cmp	r2, r1
 2105 00a6 67D0     		beq	.L258
 2106              	.LVL175:
 2107              	.L231:
1032:Src/uart.c    **** 				{
 2108              		.loc 1 1032 0
 2109 00a8 A4F5B872 		sub	r2, r4, #368
 2110 00ac 92B2     		uxth	r2, r2
 2111 00ae B2F5BE7F 		cmp	r2, #380
 2112 00b2 77D8     		bhi	.L278
1034:Src/uart.c    **** 				}				
 2113              		.loc 1 1034 0
 2114 00b4 FFF7FEFF 		bl	pos_linearity_ini
 2115              	.LVL176:
 2116              	.L245:
1147:Src/uart.c    **** 				{
 2117              		.loc 1 1147 0
 2118 00b8 B4F5937F 		cmp	r4, #294
 2119 00bc 40F05281 		bne	.L221
1149:Src/uart.c    **** 						g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 2120              		.loc 1 1149 0
 2121 00c0 824B     		ldr	r3, .L285+4
 2122 00c2 844A     		ldr	r2, .L285+12
 2123 00c4 B3F84C32 		ldrh	r3, [r3, #588]
 2124 00c8 1BB2     		sxth	r3, r3
 2125 00ca 1360     		str	r3, [r2]
1150:Src/uart.c    **** 				}		
 2126              		.loc 1 1150 0
 2127 00cc 1368     		ldr	r3, [r2]
 2128 00ce 824A     		ldr	r2, .L285+16
 2129 00d0 B2F90020 		ldrsh	r2, [r2]
 2130 00d4 5343     		muls	r3, r2, r3
 2131 00d6 4FF4B472 		mov	r2, #360
 2132 00da 93FBF2F3 		sdiv	r3, r3, r2
 2133 00de 7F4A     		ldr	r2, .L285+20
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 64


 2134 00e0 3FE1     		b	.L282
 2135              	.LVL177:
 2136              	.L215:
 970:Src/uart.c    **** 				 }
 2137              		.loc 1 970 0 discriminator 3
 2138 00e2 9BB2     		uxth	r3, r3
 2139 00e4 825C     		ldrb	r2, [r0, r2]	@ zero_extendqisi2
 2140              	.LVL178:
 2141 00e6 FA54     		strb	r2, [r7, r3]
 2142              	.LVL179:
 2143 00e8 3346     		mov	r3, r6
 2144 00ea C7E7     		b	.L214
 2145              	.LVL180:
 2146              	.L213:
 973:Src/uart.c    **** 			 {
 2147              		.loc 1 973 0
 2148 00ec 102E     		cmp	r6, #16
 2149 00ee 11D1     		bne	.L217
 975:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2150              		.loc 1 975 0
 2151 00f0 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2152 00f2 C478     		ldrb	r4, [r0, #3]	@ zero_extendqisi2
 976:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 2153              		.loc 1 976 0
 2154 00f4 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 975:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2155              		.loc 1 975 0
 2156 00f6 04EB0324 		add	r4, r4, r3, lsl #8
 976:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 2157              		.loc 1 976 0
 2158 00fa 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 2159 00fc 03EB0223 		add	r3, r3, r2, lsl #8
 982:Src/uart.c    **** 				 }				 
 2160              		.loc 1 982 0
 2161 0100 734A     		ldr	r2, .L285+8
 975:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2162              		.loc 1 975 0
 2163 0102 24B2     		sxth	r4, r4
 2164              	.LVL181:
 976:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 2165              		.loc 1 976 0
 2166 0104 1BB2     		sxth	r3, r3
 2167              	.LVL182:
 2168 0106 0025     		movs	r5, #0
 2169              	.LVL183:
 2170              	.L218:
 982:Src/uart.c    **** 				 }				 
 2171              		.loc 1 982 0 discriminator 3
 2172 0108 415D     		ldrb	r1, [r0, r5]	@ zero_extendqisi2
 2173 010a A954     		strb	r1, [r5, r2]
 2174              	.LVL184:
 2175 010c 0135     		adds	r5, r5, #1
 2176              	.LVL185:
 980:Src/uart.c    **** 				 {
 2177              		.loc 1 980 0 discriminator 3
 2178 010e 062D     		cmp	r5, #6
 2179 0110 FAD1     		bne	.L218
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 65


 2180 0112 BAE7     		b	.L216
 2181              	.LVL186:
 2182              	.L217:
 987:Src/uart.c    **** 			return;
 2183              		.loc 1 987 0
 2184 0114 0022     		movs	r2, #0
 2185              	.LVL187:
 2186              	.L283:
1157:Src/uart.c    **** 
 2187              		.loc 1 1157 0
 2188 0116 1A70     		strb	r2, [r3]
1159:Src/uart.c    **** void Rx_Send_Modbus(void)
 2189              		.loc 1 1159 0
 2190 0118 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2191              	.LVL188:
 2192              	.L227:
1004:Src/uart.c    **** 						result = 0;			
 2193              		.loc 1 1004 0
 2194 011a 6718     		adds	r7, r4, r1
 2195 011c A7F58077 		sub	r7, r7, #256
 2196 0120 0131     		adds	r1, r1, #1
 2197              	.LVL189:
 2198 0122 17F80C70 		ldrb	r7, [r7, ip]	@ zero_extendqisi2
1005:Src/uart.c    **** 						}
 2199              		.loc 1 1005 0
 2200 0126 022F     		cmp	r7, #2
 2201 0128 18BF     		it	ne
 2202 012a 0022     		movne	r2, #0
 2203              	.LVL190:
 2204              	.L223:
1002:Src/uart.c    **** 						{
 2205              		.loc 1 1002 0 discriminator 1
 2206 012c 0FB2     		sxth	r7, r1
 2207 012e BB42     		cmp	r3, r7
 2208 0130 F3DC     		bgt	.L227
 2209              	.L228:
1018:Src/uart.c    **** 				{	
 2210              		.loc 1 1018 0
 2211 0132 002A     		cmp	r2, #0
 2212 0134 B8D0     		beq	.L231
 2213              	.LVL191:
1020:Src/uart.c    **** 					{
 2214              		.loc 1 1020 0
 2215 0136 062E     		cmp	r6, #6
 2216 0138 07D1     		bne	.L232
1022:Src/uart.c    **** 					}
 2217              		.loc 1 1022 0
 2218 013a 0179     		ldrb	r1, [r0, #4]	@ zero_extendqisi2
 2219              	.LVL192:
 2220 013c 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
 2221 013e 02EB0122 		add	r2, r2, r1, lsl #8
 2222 0142 6249     		ldr	r1, .L285+4
 2223 0144 12B2     		sxth	r2, r2
 2224 0146 21F81420 		strh	r2, [r1, r4, lsl #1]	@ movhi
 2225              	.L232:
1024:Src/uart.c    **** 					{
 2226              		.loc 1 1024 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 66


 2227 014a 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 2228 014c 102A     		cmp	r2, #16
 2229 014e ABD1     		bne	.L231
1028:Src/uart.c    **** 						}
 2230              		.loc 1 1028 0
 2231 0150 5E4E     		ldr	r6, .L285+4
 2232 0152 0730     		adds	r0, r0, #7
 2233              	.LVL193:
1024:Src/uart.c    **** 					{
 2234              		.loc 1 1024 0
 2235 0154 0021     		movs	r1, #0
 2236              	.LVL194:
 2237              	.L233:
1026:Src/uart.c    **** 						{
 2238              		.loc 1 1026 0 discriminator 1
 2239 0156 0AB2     		sxth	r2, r1
 2240 0158 9342     		cmp	r3, r2
 2241 015a 00F10200 		add	r0, r0, #2
 2242 015e A3DD     		ble	.L231
1028:Src/uart.c    **** 						}
 2243              		.loc 1 1028 0 discriminator 3
 2244 0160 10F802CC 		ldrb	ip, [r0, #-2]	@ zero_extendqisi2
 2245 0164 10F8012C 		ldrb	r2, [r0, #-1]	@ zero_extendqisi2
 2246 0168 6718     		adds	r7, r4, r1
 2247 016a 02EB0C22 		add	r2, r2, ip, lsl #8
 2248 016e 12B2     		sxth	r2, r2
 2249 0170 26F81720 		strh	r2, [r6, r7, lsl #1]	@ movhi
 2250              	.LVL195:
 2251 0174 0131     		adds	r1, r1, #1
 2252              	.LVL196:
 2253 0176 EEE7     		b	.L233
 2254              	.LVL197:
 2255              	.L258:
 2256 0178 0021     		movs	r1, #0
 944:Src/uart.c    **** 		u16 pos = 0;
 2257              		.loc 1 944 0
 2258 017a 0122     		movs	r2, #1
1004:Src/uart.c    **** 						result = 0;			
 2259              		.loc 1 1004 0
 2260 017c DFF874C1 		ldr	ip, .L285+44
 2261 0180 D4E7     		b	.L223
 2262              	.LVL198:
 2263              	.L230:
1014:Src/uart.c    **** 						result = 0;
 2264              		.loc 1 1014 0
 2265 0182 17F801C0 		ldrb	ip, [r7, r1]	@ zero_extendqisi2
1015:Src/uart.c    **** 					}
 2266              		.loc 1 1015 0
 2267 0186 BCF1020F 		cmp	ip, #2
 2268 018a 18BF     		it	ne
 2269 018c 0022     		movne	r2, #0
 2270              	.LVL199:
 2271 018e 0131     		adds	r1, r1, #1
 2272              	.LVL200:
 2273              	.L222:
1012:Src/uart.c    **** 					{
 2274              		.loc 1 1012 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 67


 2275 0190 0FFA81FC 		sxth	ip, r1
 2276 0194 6345     		cmp	r3, ip
 2277 0196 F4DC     		bgt	.L230
 2278 0198 CBE7     		b	.L228
 2279              	.LVL201:
 2280              	.L257:
1014:Src/uart.c    **** 						result = 0;
 2281              		.loc 1 1014 0
 2282 019a 514F     		ldr	r7, .L285+24
 2283 019c 0021     		movs	r1, #0
 944:Src/uart.c    **** 		u16 pos = 0;
 2284              		.loc 1 944 0
 2285 019e 0122     		movs	r2, #1
1014:Src/uart.c    **** 						result = 0;
 2286              		.loc 1 1014 0
 2287 01a0 2744     		add	r7, r7, r4
 2288 01a2 F5E7     		b	.L222
 2289              	.LVL202:
 2290              	.L278:
1036:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
 2291              		.loc 1 1036 0
 2292 01a4 242C     		cmp	r4, #36
 2293 01a6 00F3A780 		bgt	.L236
1036:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
 2294              		.loc 1 1036 0 is_stmt 0 discriminator 1
 2295 01aa E618     		adds	r6, r4, r3
 2296 01ac 232E     		cmp	r6, #35
 2297 01ae 13DD     		ble	.L237
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2298              		.loc 1 1037 0 is_stmt 1
 2299 01b0 464A     		ldr	r2, .L285+4
 2300 01b2 B2F84030 		ldrh	r3, [r2, #64]
 2301              	.LVL203:
 2302 01b6 1BB2     		sxth	r3, r3
 2303 01b8 022B     		cmp	r3, #2
 2304 01ba 08D0     		beq	.L238
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2305              		.loc 1 1037 0 is_stmt 0 discriminator 1
 2306 01bc B2F84030 		ldrh	r3, [r2, #64]
 2307 01c0 1BB2     		sxth	r3, r3
 2308 01c2 23B1     		cbz	r3, .L238
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2309              		.loc 1 1037 0 discriminator 2
 2310 01c4 B2F84030 		ldrh	r3, [r2, #64]
 2311 01c8 1BB2     		sxth	r3, r3
 2312 01ca 012B     		cmp	r3, #1
 2313 01cc 04D1     		bne	.L237
 2314              	.L238:
1040:Src/uart.c    **** 						recPosCmd();
 2315              		.loc 1 1040 0 is_stmt 1
 2316 01ce 0323     		movs	r3, #3
 2317 01d0 A2F80432 		strh	r3, [r2, #516]	@ movhi
1041:Src/uart.c    **** 				}
 2318              		.loc 1 1041 0
 2319 01d4 FFF7FEFF 		bl	recPosCmd
 2320              	.LVL204:
 2321              	.L237:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 68


1043:Src/uart.c    **** 				{
 2322              		.loc 1 1043 0
 2323 01d8 222C     		cmp	r4, #34
 2324 01da 00F38D80 		bgt	.L236
1043:Src/uart.c    **** 				{
 2325              		.loc 1 1043 0 is_stmt 0 discriminator 1
 2326 01de 212E     		cmp	r6, #33
 2327 01e0 7FF76AAF 		ble	.L245
1043:Src/uart.c    **** 				{
 2328              		.loc 1 1043 0 discriminator 2
 2329 01e4 394B     		ldr	r3, .L285+4
 2330 01e6 B3F84020 		ldrh	r2, [r3, #64]
 2331 01ea 11B2     		sxth	r1, r2
 2332 01ec 0429     		cmp	r1, #4
 2333 01ee 04D1     		bne	.L239
1045:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 2334              		.loc 1 1045 0 is_stmt 1
 2335 01f0 0121     		movs	r1, #1
 2336 01f2 A3F80212 		strh	r1, [r3, #514]	@ movhi
1046:Src/uart.c    **** 				}
 2337              		.loc 1 1046 0
 2338 01f6 A3F80422 		strh	r2, [r3, #516]	@ movhi
 2339              	.L239:
1050:Src/uart.c    **** 				{
 2340              		.loc 1 1050 0
 2341 01fa 232E     		cmp	r6, #35
 2342 01fc 7FF75CAF 		ble	.L245
1050:Src/uart.c    **** 				{
 2343              		.loc 1 1050 0 is_stmt 0 discriminator 2
 2344 0200 B3F84020 		ldrh	r2, [r3, #64]
 2345 0204 12B2     		sxth	r2, r2
 2346 0206 052A     		cmp	r2, #5
 2347 0208 7FF456AF 		bne	.L245
1052:Src/uart.c    **** 						{
 2348              		.loc 1 1052 0 is_stmt 1
 2349 020c 5A8D     		ldrh	r2, [r3, #42]
 2350 020e 3549     		ldr	r1, .L285+28
 2351 0210 3548     		ldr	r0, .L285+32
 2352 0212 12B2     		sxth	r2, r2
 2353 0214 02BB     		cbnz	r2, .L240
1054:Src/uart.c    **** 							force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 2354              		.loc 1 1054 0
 2355 0216 B3F84420 		ldrh	r2, [r3, #68]
 2356 021a 0A80     		strh	r2, [r1]	@ movhi
1055:Src/uart.c    **** 						}
 2357              		.loc 1 1055 0
 2358 021c B3F85A20 		ldrh	r2, [r3, #90]
 2359              	.L279:
1060:Src/uart.c    **** 						}
 2360              		.loc 1 1060 0
 2361 0220 0280     		strh	r2, [r0]	@ movhi
1063:Src/uart.c    **** 						{
 2362              		.loc 1 1063 0
 2363 0222 0A88     		ldrh	r2, [r1]
1065:Src/uart.c    **** 							{
 2364              		.loc 1 1065 0
 2365 0224 0E88     		ldrh	r6, [r1]
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 69


1063:Src/uart.c    **** 						{
 2366              		.loc 1 1063 0
 2367 0226 12B2     		sxth	r2, r2
 2368 0228 002A     		cmp	r2, #0
 2369 022a 304A     		ldr	r2, .L285+36
 2370 022c 27DD     		ble	.L242
1065:Src/uart.c    **** 							{
 2371              		.loc 1 1065 0
 2372 022e 0188     		ldrh	r1, [r0]
1067:Src/uart.c    **** 								{
 2373              		.loc 1 1067 0
 2374 0230 B3F84800 		ldrh	r0, [r3, #72]
1065:Src/uart.c    **** 							{
 2375              		.loc 1 1065 0
 2376 0234 09B2     		sxth	r1, r1
 2377 0236 36B2     		sxth	r6, r6
 2378 0238 8E42     		cmp	r6, r1
1067:Src/uart.c    **** 								{
 2379              		.loc 1 1067 0
 2380 023a B3F84C10 		ldrh	r1, [r3, #76]
 2381 023e 00B2     		sxth	r0, r0
 2382 0240 09B2     		sxth	r1, r1
1065:Src/uart.c    **** 							{
 2383              		.loc 1 1065 0
 2384 0242 13DD     		ble	.L243
1067:Src/uart.c    **** 								{
 2385              		.loc 1 1067 0
 2386 0244 8842     		cmp	r0, r1
 2387 0246 2ADD     		ble	.L249
 2388              	.L284:
1100:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2389              		.loc 1 1100 0
 2390 0248 0121     		movs	r1, #1
 2391 024a 1170     		strb	r1, [r2]
1101:Src/uart.c    **** 									recPosCmd();
 2392              		.loc 1 1101 0
 2393 024c 0322     		movs	r2, #3
 2394 024e A3F80422 		strh	r2, [r3, #516]	@ movhi
 2395              	.L281:
1116:Src/uart.c    **** 								}
 2396              		.loc 1 1116 0
 2397 0252 FFF7FEFF 		bl	recPosCmd
 2398              	.LVL205:
 2399 0256 2FE7     		b	.L245
 2400              	.L240:
1059:Src/uart.c    **** 							force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 2401              		.loc 1 1059 0
 2402 0258 B3F84420 		ldrh	r2, [r3, #68]
 2403 025c 5242     		negs	r2, r2
 2404 025e 12B2     		sxth	r2, r2
 2405 0260 0A80     		strh	r2, [r1]	@ movhi
1060:Src/uart.c    **** 						}
 2406              		.loc 1 1060 0
 2407 0262 B3F85A20 		ldrh	r2, [r3, #90]
 2408 0266 5242     		negs	r2, r2
 2409 0268 12B2     		sxth	r2, r2
 2410 026a D9E7     		b	.L279
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 70


 2411              	.L243:
1081:Src/uart.c    **** 								{
 2412              		.loc 1 1081 0
 2413 026c 8842     		cmp	r0, r1
 2414 026e 4FF00301 		mov	r1, #3
 2415 0272 1DDD     		ble	.L250
 2416              	.L280:
1114:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2417              		.loc 1 1114 0
 2418 0274 0120     		movs	r0, #1
 2419 0276 1070     		strb	r0, [r2]
1115:Src/uart.c    **** 									recPosCmd();
 2420              		.loc 1 1115 0
 2421 0278 A3F80412 		strh	r1, [r3, #516]	@ movhi
 2422 027c E9E7     		b	.L281
 2423              	.L242:
1094:Src/uart.c    **** 						{													
 2424              		.loc 1 1094 0
 2425 027e 3604     		lsls	r6, r6, #16
 2426 0280 1BD5     		bpl	.L247
1096:Src/uart.c    **** 							{
 2427              		.loc 1 1096 0
 2428 0282 0E88     		ldrh	r6, [r1]
 2429 0284 0188     		ldrh	r1, [r0]
1098:Src/uart.c    **** 								{
 2430              		.loc 1 1098 0
 2431 0286 B3F84800 		ldrh	r0, [r3, #72]
1096:Src/uart.c    **** 							{
 2432              		.loc 1 1096 0
 2433 028a 09B2     		sxth	r1, r1
 2434 028c 36B2     		sxth	r6, r6
 2435 028e 8E42     		cmp	r6, r1
1098:Src/uart.c    **** 								{
 2436              		.loc 1 1098 0
 2437 0290 B3F84C10 		ldrh	r1, [r3, #76]
 2438 0294 00B2     		sxth	r0, r0
 2439 0296 09B2     		sxth	r1, r1
1096:Src/uart.c    **** 							{
 2440              		.loc 1 1096 0
 2441 0298 06DA     		bge	.L248
1098:Src/uart.c    **** 								{
 2442              		.loc 1 1098 0
 2443 029a 8842     		cmp	r0, r1
 2444 029c D4DB     		blt	.L284
 2445              	.L249:
1106:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 2446              		.loc 1 1106 0
 2447 029e 0221     		movs	r1, #2
 2448 02a0 1170     		strb	r1, [r2]
1107:Src/uart.c    **** 								}
 2449              		.loc 1 1107 0
 2450 02a2 A3F80412 		strh	r1, [r3, #516]	@ movhi
 2451 02a6 07E7     		b	.L245
 2452              	.L248:
1112:Src/uart.c    **** 								{
 2453              		.loc 1 1112 0
 2454 02a8 8842     		cmp	r0, r1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 71


 2455 02aa 4FF00301 		mov	r1, #3
 2456 02ae E1DB     		blt	.L280
 2457              	.L250:
1120:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 2458              		.loc 1 1120 0
 2459 02b0 1170     		strb	r1, [r2]
1121:Src/uart.c    **** 								}				
 2460              		.loc 1 1121 0
 2461 02b2 0422     		movs	r2, #4
 2462 02b4 A3F80422 		strh	r2, [r3, #516]	@ movhi
 2463 02b8 FEE6     		b	.L245
 2464              	.L247:
1127:Src/uart.c    **** 						}				
 2465              		.loc 1 1127 0
 2466 02ba 0323     		movs	r3, #3
 2467 02bc 1370     		strb	r3, [r2]
 2468 02be FBE6     		b	.L245
 2469              	.LVL206:
 2470              	.L251:
1144:Src/uart.c    **** 						range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_of
 2471              		.loc 1 1144 0
 2472 02c0 0B4B     		ldr	r3, .L285+40
 2473 02c2 1B68     		ldr	r3, [r3]
 2474 02c4 2360     		str	r3, [r4]
 2475 02c6 43E0     		b	.L253
 2476              	.L286:
 2477              		.align	2
 2478              	.L285:
 2479 02c8 00000000 		.word	.LANCHOR0
 2480 02cc 00000000 		.word	g_CmdMap
 2481 02d0 00000000 		.word	.LANCHOR15
 2482 02d4 00000000 		.word	g_Encode_offset
 2483 02d8 00000000 		.word	EN_360
 2484 02dc 00000000 		.word	g_Encode_offset_EN
 2485 02e0 00000000 		.word	g_CmdMap_User_bWR
 2486 02e4 00000000 		.word	force_set
 2487 02e8 00000000 		.word	force_act
 2488 02ec 00000000 		.word	status_Mode_POSITION_FORCE
 2489 02f0 00000000 		.word	MU_Value
 2490 02f4 00000000 		.word	g_CmdMap_bWR
 2491              	.LVL207:
 2492              	.L236:
1135:Src/uart.c    **** 				{
 2493              		.loc 1 1135 0
 2494 02f8 40F20713 		movw	r3, #263
 2495 02fc 9C42     		cmp	r4, r3
 2496 02fe 7FF4DBAE 		bne	.L245
1138:Src/uart.c    **** 					{
 2497              		.loc 1 1138 0
 2498 0302 1D4B     		ldr	r3, .L287
 2499 0304 1D49     		ldr	r1, .L287+4
 2500 0306 B3F81822 		ldrh	r2, [r3, #536]
 2501 030a 0C68     		ldr	r4, [r1]
 2502              	.LVL208:
 2503 030c 12B2     		sxth	r2, r2
 2504 030e 012A     		cmp	r2, #1
 2505 0310 D6D1     		bne	.L251
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 72


1141:Src/uart.c    **** 					}
 2506              		.loc 1 1141 0
 2507 0312 B3F80E62 		ldrh	r6, [r3, #526]
 2508 0316 B3F85012 		ldrh	r1, [r3, #592]
 2509 031a B3F84E22 		ldrh	r2, [r3, #590]
 2510 031e 184B     		ldr	r3, .L287+8
 2511 0320 1B68     		ldr	r3, [r3]
 2512 0322 30B2     		sxth	r0, r6
 2513 0324 1E68     		ldr	r6, [r3]
 2514 0326 09B2     		sxth	r1, r1
 2515 0328 4643     		muls	r6, r0, r6
 2516 032a 86FB0167 		smull	r6, r7, r6, r1
 2517 032e 002E     		cmp	r6, #0
 2518 0330 77F10003 		sbcs	r3, r7, #0
 2519 0334 02DA     		bge	.L252
 2520 0336 FF36     		adds	r6, r6, #255
 2521 0338 47F10007 		adc	r7, r7, #0
 2522              	.L252:
 2523 033c 12B2     		sxth	r2, r2
 2524 033e 300A     		lsrs	r0, r6, #8
 2525 0340 D317     		asrs	r3, r2, #31
 2526 0342 40EA0760 		orr	r0, r0, r7, lsl #24
 2527 0346 3912     		asrs	r1, r7, #8
 2528 0348 FFF7FEFF 		bl	__aeabi_ldivmod
 2529              	.LVL209:
 2530 034c 0D4B     		ldr	r3, .L287+12
 2531 034e 1860     		str	r0, [r3]
 2532              	.L253:
1145:Src/uart.c    **** 				}
 2533              		.loc 1 1145 0
 2534 0350 2368     		ldr	r3, [r4]
 2535 0352 0D4A     		ldr	r2, .L287+16
 2536 0354 C3F1FF13 		rsb	r3, r3, #16711935
 2537 0358 1268     		ldr	r2, [r2]
 2538 035a 03F57F43 		add	r3, r3, #65280
 2539 035e D31A     		subs	r3, r2, r3
 2540 0360 0A4A     		ldr	r2, .L287+20
 2541              	.L282:
1150:Src/uart.c    **** 				}		
 2542              		.loc 1 1150 0
 2543 0362 1360     		str	r3, [r2]
 2544              	.L221:
1154:Src/uart.c    **** 	pos = pos + 2;
 2545              		.loc 1 1154 0
 2546 0364 2946     		mov	r1, r5
 2547 0366 0A48     		ldr	r0, .L287+24
 2548 0368 FFF7FEFF 		bl	ModBusCRC16Send
 2549              	.LVL210:
1156:Src/uart.c    **** 	flag_rev_modbus = 1;
 2550              		.loc 1 1156 0
 2551 036c 094B     		ldr	r3, .L287+28
1155:Src/uart.c    **** 	g_UART_Tx_Modbus_len = pos;
 2552              		.loc 1 1155 0
 2553 036e 0235     		adds	r5, r5, #2
 2554              	.LVL211:
1156:Src/uart.c    **** 	flag_rev_modbus = 1;
 2555              		.loc 1 1156 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 73


 2556 0370 1D70     		strb	r5, [r3]
1157:Src/uart.c    **** 
 2557              		.loc 1 1157 0
 2558 0372 0122     		movs	r2, #1
 2559 0374 084B     		ldr	r3, .L287+32
 2560 0376 CEE6     		b	.L283
 2561              	.L288:
 2562              		.align	2
 2563              	.L287:
 2564 0378 00000000 		.word	g_CmdMap
 2565 037c 00000000 		.word	g_pMU_value_offset
 2566 0380 00000000 		.word	g_pPos_ref_base_um
 2567 0384 00000000 		.word	rod_pos_Muti_Encoder
 2568 0388 00000000 		.word	range_icmu_vlaue_at_stroke
 2569 038c 00000000 		.word	range_icmu_vlaue_need_addMax
 2570 0390 00000000 		.word	.LANCHOR15
 2571 0394 00000000 		.word	.LANCHOR14
 2572 0398 00000000 		.word	flag_rev_modbus
 2573              		.cfi_endproc
 2574              	.LFE344:
 2576              		.section	.text.UART_CheckReceive_1,"ax",%progbits
 2577              		.align	1
 2578              		.global	UART_CheckReceive_1
 2579              		.syntax unified
 2580              		.thumb
 2581              		.thumb_func
 2582              		.fpu fpv4-sp-d16
 2584              	UART_CheckReceive_1:
 2585              	.LFB343:
 818:Src/uart.c    **** 	int i = 0;
 2586              		.loc 1 818 0
 2587              		.cfi_startproc
 2588              		@ args = 0, pretend = 0, frame = 0
 2589              		@ frame_needed = 0, uses_anonymous_args = 0
 2590              	.LVL212:
 2591 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2592              	.LCFI32:
 2593              		.cfi_def_cfa_offset 40
 2594              		.cfi_offset 3, -40
 2595              		.cfi_offset 4, -36
 2596              		.cfi_offset 5, -32
 2597              		.cfi_offset 6, -28
 2598              		.cfi_offset 7, -24
 2599              		.cfi_offset 8, -20
 2600              		.cfi_offset 9, -16
 2601              		.cfi_offset 10, -12
 2602              		.cfi_offset 11, -8
 2603              		.cfi_offset 14, -4
 825:Src/uart.c    **** 	{
 2604              		.loc 1 825 0
 2605 0004 474C     		ldr	r4, .L315
 2606 0006 2368     		ldr	r3, [r4]
 2607 0008 032B     		cmp	r3, #3
 827:Src/uart.c    **** 	}
 2608              		.loc 1 827 0
 2609 000a DCBF     		itt	le
 2610 000c 0023     		movle	r3, #0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 74


 2611 000e 2360     		strle	r3, [r4]
 831:Src/uart.c    **** 	{
 2612              		.loc 1 831 0
 2613 0010 2368     		ldr	r3, [r4]
 2614 0012 002B     		cmp	r3, #0
 2615 0014 47D0     		beq	.L289
 833:Src/uart.c    **** 		
 2616              		.loc 1 833 0
 2617 0016 2668     		ldr	r6, [r4]
 2618              	.LVL213:
 2619 0018 434F     		ldr	r7, .L315+4
 885:Src/uart.c    **** 				
 2620              		.loc 1 885 0
 2621 001a 444D     		ldr	r5, .L315+8
 877:Src/uart.c    **** 		{
 2622              		.loc 1 877 0
 2623 001c 0022     		movs	r2, #0
 881:Src/uart.c    **** 				{
 2624              		.loc 1 881 0
 2625 001e 06F1FF3C 		add	ip, r6, #-1
 887:Src/uart.c    **** 				{
 2626              		.loc 1 887 0
 2627 0022 A6F1030E 		sub	lr, r6, #3
 2628 0026 07F1FF38 		add	r8, r7, #-1
 2629              	.LVL214:
 2630              	.L292:
 877:Src/uart.c    **** 		{
 2631              		.loc 1 877 0 discriminator 1
 2632 002a B242     		cmp	r2, r6
 2633 002c 29DA     		bge	.L295
 879:Src/uart.c    **** 			{
 2634              		.loc 1 879 0
 2635 002e A118     		adds	r1, r4, r2
 2636 0030 531C     		adds	r3, r2, #1
 2637 0032 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 2638 0034 5529     		cmp	r1, #85
 2639 0036 38D1     		bne	.L293
 2640 0038 E118     		adds	r1, r4, r3
 879:Src/uart.c    **** 			{
 2641              		.loc 1 879 0 is_stmt 0 discriminator 1
 2642 003a 087A     		ldrb	r0, [r1, #8]	@ zero_extendqisi2
 2643 003c AA28     		cmp	r0, #170
 2644 003e 34D1     		bne	.L293
 881:Src/uart.c    **** 				{
 2645              		.loc 1 881 0 is_stmt 1
 2646 0040 9C45     		cmp	ip, r3
 2647 0042 1EDD     		ble	.L295
 885:Src/uart.c    **** 				
 2648              		.loc 1 885 0
 2649 0044 497A     		ldrb	r1, [r1, #9]	@ zero_extendqisi2
 2650 0046 2980     		strh	r1, [r5]	@ movhi
 887:Src/uart.c    **** 				{
 2651              		.loc 1 887 0
 2652 0048 2988     		ldrh	r1, [r5]
 2653 004a AEEB0300 		sub	r0, lr, r3
 2654 004e 8842     		cmp	r0, r1
 2655 0050 17DD     		ble	.L295
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 75


 892:Src/uart.c    **** 				if( psum == uart_sum(&uart_recv_buf.buf[i+2],g_UART_RXlen+2) )
 2656              		.loc 1 892 0
 2657 0052 2988     		ldrh	r1, [r5]
 2658 0054 2144     		add	r1, r1, r4
 2659 0056 0A44     		add	r2, r2, r1
 893:Src/uart.c    **** 				{
 2660              		.loc 1 893 0
 2661 0058 2988     		ldrh	r1, [r5]
 892:Src/uart.c    **** 				if( psum == uart_sum(&uart_recv_buf.buf[i+2],g_UART_RXlen+2) )
 2662              		.loc 1 892 0
 2663 005a 92F80CA0 		ldrb	r10, [r2, #12]	@ zero_extendqisi2
 2664              	.LVL215:
 2665 005e F818     		adds	r0, r7, r3
 2666              	.LVL216:
 2667 0060 0131     		adds	r1, r1, #1
 2668              	.LVL217:
 2669 0062 08EB0309 		add	r9, r8, r3
 2670 0066 0144     		add	r1, r1, r0
 2671              	.LBB20:
 2672              	.LBB21:
 638:Src/uart.c    **** 	
 2673              		.loc 1 638 0
 2674 0068 0022     		movs	r2, #0
 2675              	.LVL218:
 2676              	.L297:
 642:Src/uart.c    **** 	}
 2677              		.loc 1 642 0
 2678 006a 19F801BF 		ldrb	fp, [r9, #1]!	@ zero_extendqisi2
 2679 006e 5A44     		add	r2, r2, fp
 2680              	.LVL219:
 640:Src/uart.c    **** 	{
 2681              		.loc 1 640 0
 2682 0070 8945     		cmp	r9, r1
 642:Src/uart.c    **** 	}
 2683              		.loc 1 642 0
 2684 0072 D2B2     		uxtb	r2, r2
 2685              	.LVL220:
 640:Src/uart.c    **** 	{
 2686              		.loc 1 640 0
 2687 0074 F9D1     		bne	.L297
 2688              	.LVL221:
 2689              	.LBE21:
 2690              	.LBE20:
 893:Src/uart.c    **** 				{
 2691              		.loc 1 893 0
 2692 0076 9245     		cmp	r10, r2
 2693 0078 17D1     		bne	.L293
 895:Src/uart.c    **** 					g_index_Modbus = 0;
 2694              		.loc 1 895 0
 2695 007a FFF7FEFF 		bl	UART_ParseFrame
 2696              	.LVL222:
 897:Src/uart.c    **** 					break;
 2697              		.loc 1 897 0
 2698 007e 0023     		movs	r3, #0
 2699 0080 2360     		str	r3, [r4]
 2700              	.LVL223:
 2701              	.L295:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 76


 907:Src/uart.c    **** 		if(g_index_Modbus >= 8)
 2702              		.loc 1 907 0
 2703 0082 B3B2     		uxth	r3, r6
 2704 0084 2A4F     		ldr	r7, .L315+12
 908:Src/uart.c    **** 		{
 2705              		.loc 1 908 0
 2706 0086 072B     		cmp	r3, #7
 907:Src/uart.c    **** 		if(g_index_Modbus >= 8)
 2707              		.loc 1 907 0
 2708 0088 3B80     		strh	r3, [r7]	@ movhi
 908:Src/uart.c    **** 		{
 2709              		.loc 1 908 0
 2710 008a 47D9     		bls	.L299
 913:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 2711              		.loc 1 913 0
 2712 008c 2948     		ldr	r0, .L315+16
 914:Src/uart.c    **** 													)
 2713              		.loc 1 914 0
 2714 008e DFF8ACC0 		ldr	ip, .L315+24
 2715 0092 9A46     		mov	r10, r3
 911:Src/uart.c    **** 										{
 2716              		.loc 1 911 0
 2717 0094 A3F10805 		sub	r5, r3, #8
 2718              	.LVL224:
 2719              	.L300:
 911:Src/uart.c    **** 										{
 2720              		.loc 1 911 0 is_stmt 0 discriminator 1
 2721 0098 4DB9     		cbnz	r5, .L304
 2722              	.L303:
 920:Src/uart.c    **** 										{
 2723              		.loc 1 920 0 is_stmt 1
 2724 009a AAF10208 		sub	r8, r10, #2
 2725 009e A845     		cmp	r8, r5
 2726 00a0 16DC     		bgt	.L305
 922:Src/uart.c    **** 											return;
 2727              		.loc 1 922 0
 2728 00a2 0023     		movs	r3, #0
 2729 00a4 3B80     		strh	r3, [r7]	@ movhi
 2730              	.LVL225:
 2731              	.L289:
 938:Src/uart.c    **** 	
 2732              		.loc 1 938 0
 2733 00a6 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2734              	.LVL226:
 2735              	.L293:
 877:Src/uart.c    **** 		{
 2736              		.loc 1 877 0
 2737 00aa 1A46     		mov	r2, r3
 2738 00ac BDE7     		b	.L292
 2739              	.LVL227:
 2740              	.L304:
 2741 00ae 6219     		adds	r2, r4, r5
 913:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 2742              		.loc 1 913 0
 2743 00b0 8389     		ldrh	r3, [r0, #12]
 2744 00b2 117A     		ldrb	r1, [r2, #8]	@ zero_extendqisi2
 2745 00b4 1BB2     		sxth	r3, r3
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 77


 2746 00b6 9942     		cmp	r1, r3
 2747 00b8 01D0     		beq	.L301
 913:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 2748              		.loc 1 913 0 is_stmt 0 discriminator 1
 2749 00ba FF29     		cmp	r1, #255
 2750 00bc 06D1     		bne	.L302
 2751              	.L301:
 914:Src/uart.c    **** 													)
 2752              		.loc 1 914 0 is_stmt 1
 2753 00be 537A     		ldrb	r3, [r2, #9]	@ zero_extendqisi2
 2754 00c0 102B     		cmp	r3, #16
 2755 00c2 03D8     		bhi	.L302
 2756 00c4 2CFA03F3 		lsr	r3, ip, r3
 2757 00c8 DB07     		lsls	r3, r3, #31
 2758 00ca E6D4     		bmi	.L303
 2759              	.L302:
 911:Src/uart.c    **** 										{
 2760              		.loc 1 911 0 discriminator 2
 2761 00cc 013D     		subs	r5, r5, #1
 2762              	.LVL228:
 2763 00ce E3E7     		b	.L300
 2764              	.L305:
 925:Src/uart.c    **** 											CRC_RX = ((width_t)uart_recv_buf.buf[g_index_Modbus-1]<<8) + uart_recv_buf.buf[g_index_M
 2765              		.loc 1 925 0
 2766 00d0 05F10809 		add	r9, r5, #8
 2767 00d4 A8EB0501 		sub	r1, r8, r5
 2768 00d8 A144     		add	r9, r9, r4
 926:Src/uart.c    **** 											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 2769              		.loc 1 926 0
 2770 00da A244     		add	r10, r10, r4
 2771 00dc A044     		add	r8, r8, r4
 925:Src/uart.c    **** 											CRC_RX = ((width_t)uart_recv_buf.buf[g_index_Modbus-1]<<8) + uart_recv_buf.buf[g_index_M
 2772              		.loc 1 925 0
 2773 00de 4846     		mov	r0, r9
 2774 00e0 FFF7FEFF 		bl	ModBusCRC16
 2775              	.LVL229:
 926:Src/uart.c    **** 											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 2776              		.loc 1 926 0
 2777 00e4 9AF80720 		ldrb	r2, [r10, #7]	@ zero_extendqisi2
 2778 00e8 98F80830 		ldrb	r3, [r8, #8]	@ zero_extendqisi2
 2779 00ec 03EB0223 		add	r3, r3, r2, lsl #8
 927:Src/uart.c    **** 											{			
 2780              		.loc 1 927 0
 2781 00f0 80B2     		uxth	r0, r0
 2782 00f2 9BB2     		uxth	r3, r3
 2783 00f4 9842     		cmp	r0, r3
 2784 00f6 11D1     		bne	.L299
 929:Src/uart.c    **** 														{														
 2785              		.loc 1 929 0
 2786 00f8 0E4B     		ldr	r3, .L315+16
 2787 00fa 6219     		adds	r2, r4, r5
 2788 00fc 9B89     		ldrh	r3, [r3, #12]
 2789 00fe 127A     		ldrb	r2, [r2, #8]	@ zero_extendqisi2
 2790 0100 1BB2     		sxth	r3, r3
 2791 0102 9A42     		cmp	r2, r3
 2792 0104 03D0     		beq	.L306
 929:Src/uart.c    **** 														{														
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 78


 2793              		.loc 1 929 0 is_stmt 0 discriminator 1
 2794 0106 0C4B     		ldr	r3, .L315+20
 2795 0108 5B5D     		ldrb	r3, [r3, r5]	@ zero_extendqisi2
 2796 010a FF2B     		cmp	r3, #255
 2797 010c 04D1     		bne	.L307
 2798              	.L306:
 931:Src/uart.c    **** 														}
 2799              		.loc 1 931 0 is_stmt 1
 2800 010e 711B     		subs	r1, r6, r5
 2801 0110 C9B2     		uxtb	r1, r1
 2802 0112 4846     		mov	r0, r9
 2803              	.LVL230:
 2804 0114 FFF7FEFF 		bl	Rx_Pro_Modbus
 2805              	.LVL231:
 2806              	.L307:
 933:Src/uart.c    **** 											}
 2807              		.loc 1 933 0
 2808 0118 0023     		movs	r3, #0
 2809 011a 3B80     		strh	r3, [r7]	@ movhi
 2810              	.LVL232:
 2811              	.L299:
 936:Src/uart.c    **** 	}
 2812              		.loc 1 936 0
 2813 011c 0023     		movs	r3, #0
 2814 011e 2360     		str	r3, [r4]
 2815 0120 C1E7     		b	.L289
 2816              	.L316:
 2817 0122 00BF     		.align	2
 2818              	.L315:
 2819 0124 00000000 		.word	.LANCHOR13
 2820 0128 09000000 		.word	.LANCHOR13+9
 2821 012c 00000000 		.word	.LANCHOR4
 2822 0130 00000000 		.word	.LANCHOR12
 2823 0134 00000000 		.word	g_CmdMap
 2824 0138 00000000 		.word	.LANCHOR16
 2825 013c 48000100 		.word	65608
 2826              		.cfi_endproc
 2827              	.LFE343:
 2829              		.section	.text.ini_HighFreqData,"ax",%progbits
 2830              		.align	1
 2831              		.global	ini_HighFreqData
 2832              		.syntax unified
 2833              		.thumb
 2834              		.thumb_func
 2835              		.fpu fpv4-sp-d16
 2837              	ini_HighFreqData:
 2838              	.LFB348:
1223:Src/uart.c    **** /**
1224:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1225:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1226:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
1227:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
1228:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
1229:Src/uart.c    ****   * @retval None
1230:Src/uart.c    ****   */
1231:Src/uart.c    **** /**
1232:Src/uart.c    ****   *   
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 79


1233:Src/uart.c    **** 	* AA 55 length internal cmd cnt_L cnt_H set actL atcH * * * * sum 
1234:Src/uart.c    ****   */
1235:Src/uart.c    **** void ini_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr)
1236:Src/uart.c    **** {		
 2839              		.loc 1 1236 0
 2840              		.cfi_startproc
 2841              		@ args = 0, pretend = 0, frame = 0
 2842              		@ frame_needed = 0, uses_anonymous_args = 0
 2843              	.LVL233:
 2844 0000 0022     		movs	r2, #0
 2845 0002 30B5     		push	{r4, r5, lr}
 2846              	.LCFI33:
 2847              		.cfi_def_cfa_offset 12
 2848              		.cfi_offset 4, -12
 2849              		.cfi_offset 5, -8
 2850              		.cfi_offset 14, -4
1237:Src/uart.c    **** 		u8 i = 0,j = 0;
1238:Src/uart.c    **** 		for(i = 0;i<LENGTH_HIGH_FREQ_FRAME-1;i++)
1239:Src/uart.c    **** 		{
1240:Src/uart.c    **** 			for(j = 0;j<NUM_FRAME-1;j++)
1241:Src/uart.c    **** 			{
1242:Src/uart.c    **** 				ptr->frame[j][i] = 0;
 2851              		.loc 1 1242 0
 2852 0004 1346     		mov	r3, r2
 2853 0006 1825     		movs	r5, #24
 2854              	.LVL234:
 2855              	.L318:
1236:Src/uart.c    **** 		u8 i = 0,j = 0;
 2856              		.loc 1 1236 0
 2857 0008 0021     		movs	r1, #0
 2858              	.LVL235:
 2859              	.L319:
 2860              		.loc 1 1242 0 discriminator 3
 2861 000a 05FB0104 		mla	r4, r5, r1, r0
 2862 000e 0131     		adds	r1, r1, #1
 2863              	.LVL236:
1240:Src/uart.c    **** 			{
 2864              		.loc 1 1240 0 discriminator 3
 2865 0010 0929     		cmp	r1, #9
 2866              		.loc 1 1242 0 discriminator 3
 2867 0012 A354     		strb	r3, [r4, r2]
1243:Src/uart.c    **** 				ptr->frame[j][i] = 0;
 2868              		.loc 1 1243 0 discriminator 3
 2869 0014 A354     		strb	r3, [r4, r2]
1240:Src/uart.c    **** 			{
 2870              		.loc 1 1240 0 discriminator 3
 2871 0016 F8D1     		bne	.L319
 2872              	.LVL237:
 2873 0018 0132     		adds	r2, r2, #1
 2874              	.LVL238:
1238:Src/uart.c    **** 		{
 2875              		.loc 1 1238 0 discriminator 2
 2876 001a 172A     		cmp	r2, #23
 2877 001c F4D1     		bne	.L318
1244:Src/uart.c    **** 			}
1245:Src/uart.c    **** 		}
1246:Src/uart.c    **** 		ptr->check_sum = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 80


 2878              		.loc 1 1246 0
 2879 001e A0F8FA30 		strh	r3, [r0, #250]	@ movhi
1247:Src/uart.c    **** 		ptr->ind_head_frame = 0;
 2880              		.loc 1 1247 0
 2881 0022 A0F8F230 		strh	r3, [r0, #242]	@ movhi
1248:Src/uart.c    **** 		ptr->ind_tail_frame = 0;
 2882              		.loc 1 1248 0
 2883 0026 A0F8F430 		strh	r3, [r0, #244]	@ movhi
1249:Src/uart.c    **** 		ptr->num_frame = 0;
 2884              		.loc 1 1249 0
 2885 002a A0F8F630 		strh	r3, [r0, #246]	@ movhi
1250:Src/uart.c    **** 		ptr->subindex_frame = 0;
 2886              		.loc 1 1250 0
 2887 002e A0F8F830 		strh	r3, [r0, #248]	@ movhi
1251:Src/uart.c    **** 		ptr->count = 0;
 2888              		.loc 1 1251 0
 2889 0032 A0F8F030 		strh	r3, [r0, #240]	@ movhi
1252:Src/uart.c    **** 		ptr->internal_us = 40; //1000usï¿½ï¿½ï¿½ï¿½
 2890              		.loc 1 1252 0
 2891 0036 2823     		movs	r3, #40
 2892 0038 A0F8FC30 		strh	r3, [r0, #252]	@ movhi
1253:Src/uart.c    **** }
 2893              		.loc 1 1253 0
 2894 003c 30BD     		pop	{r4, r5, pc}
 2895              		.cfi_endproc
 2896              	.LFE348:
 2898              		.section	.text.UART_PushFrame_HighFreqData,"ax",%progbits
 2899              		.align	1
 2900              		.global	UART_PushFrame_HighFreqData
 2901              		.syntax unified
 2902              		.thumb
 2903              		.thumb_func
 2904              		.fpu fpv4-sp-d16
 2906              	UART_PushFrame_HighFreqData:
 2907              	.LFB349:
1254:Src/uart.c    **** /**
1255:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1256:Src/uart.c    ****   * @param  ptr: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1257:Src/uart.c    ****   */
1258:Src/uart.c    **** void UART_PushFrame_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr,s16 set_data,s16 act_data)
1259:Src/uart.c    **** {
 2908              		.loc 1 1259 0
 2909              		.cfi_startproc
 2910              		@ args = 0, pretend = 0, frame = 0
 2911              		@ frame_needed = 0, uses_anonymous_args = 0
 2912              		@ link register save eliminated.
 2913              	.LVL239:
1260:Src/uart.c    **** #ifdef HIGHFRE_DEBUG
1261:Src/uart.c    **** 	u8 i = 0;
1262:Src/uart.c    **** 	static u16 delay_cnt = 0;
1263:Src/uart.c    **** 	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½Í¿ï¿½ï¿½Ð£ï¿½ï¿½Ò¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½Í·ï¿½ï¿½ï¿½
1264:Src/uart.c    **** 	if(ptr->num_frame == 0)
1265:Src/uart.c    **** 	{
1266:Src/uart.c    **** 		g_fast_debug = 0;
1267:Src/uart.c    **** 	}
1268:Src/uart.c    **** 	if(g_CmdMap[SYS_SELF_TUNING] == 0)
1269:Src/uart.c    **** 	{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 81


1270:Src/uart.c    **** 		return;
1271:Src/uart.c    **** 	}
1272:Src/uart.c    **** 	if(ptr->num_frame>=NUM_FRAME-1)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü¼ï¿½ï¿½
1273:Src/uart.c    **** 	{
1274:Src/uart.c    **** 		g_CmdMap[SYS_SELF_TUNING] = 0;
1275:Src/uart.c    **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 0;
1276:Src/uart.c    **** 		g_CmdMap[CMD_CUR_SET_PU] = 0;
1277:Src/uart.c    **** 		return;
1278:Src/uart.c    **** 	}
1279:Src/uart.c    **** 	if(ptr->ind_head_frame>=NUM_FRAME-1)
1280:Src/uart.c    **** 	{
1281:Src/uart.c    **** 		g_CmdMap[SYS_SELF_TUNING] = 0;
1282:Src/uart.c    **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 0;
1283:Src/uart.c    **** 		g_CmdMap[CMD_CUR_SET_PU] = 0;
1284:Src/uart.c    **** 		return;
1285:Src/uart.c    **** 	}
1286:Src/uart.c    **** 	if(g_CmdMap[SYS_SELF_TUNING] != 0)
1287:Src/uart.c    **** 	{
1288:Src/uart.c    **** 		if(ptr->subindex_frame>=LENGTH_HIGH_FREQ_FRAME-2 || (ptr->num_frame == 0 && ptr->subindex_frame =
1289:Src/uart.c    **** 		{
1290:Src/uart.c    **** 			//ï¿½ï¿½ï¿½ÃºÃ·ï¿½ï¿½Íºï¿½ï¿½Þ¸Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ä¿ï¿½ï¿½ï¿½ï¿½ï¿½é£¬ï¿½ï¿½Ð´ï¿½ï¿½Ö¡Í·
1291:Src/uart.c    **** 			if(ptr->subindex_frame == 0 && ptr->ind_head_frame == 0)
1292:Src/uart.c    **** 			{
1293:Src/uart.c    **** 				
1294:Src/uart.c    **** 			}
1295:Src/uart.c    **** 			else
1296:Src/uart.c    **** 			{
1297:Src/uart.c    **** 				ptr->ind_head_frame++;
1298:Src/uart.c    **** 				ptr->num_frame++;
1299:Src/uart.c    **** 				if(ptr->ind_head_frame>=NUM_FRAME)
1300:Src/uart.c    **** 				{
1301:Src/uart.c    **** 					return;
1302:Src/uart.c    **** 					ptr->ind_head_frame = 0;
1303:Src/uart.c    **** 				}
1304:Src/uart.c    **** 			}
1305:Src/uart.c    **** 			ptr->subindex_frame = 0;
1306:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = 0xAA;				      
1307:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = 0x55;				    
1308:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = LENGTH_DATA+3;
1309:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = ptr->internal_us;//ID
1310:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = CMDTYPE_HIGH_F;
1311:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = ptr->count&0xff;
1312:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (ptr->count>>8)&0xff;
1313:Src/uart.c    **** 		}
1314:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = set_data&0xFF;
1315:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (set_data>>8)&0xFF;
1316:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = act_data & 0xFF;
1317:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (act_data>>8)&0xFF;
1318:Src/uart.c    **** 		ptr->count++;
1319:Src/uart.c    **** 	}
1320:Src/uart.c    **** #endif
1321:Src/uart.c    **** }
 2914              		.loc 1 1321 0
 2915 0000 7047     		bx	lr
 2916              		.cfi_endproc
 2917              	.LFE349:
 2919              		.section	.text.UART_SendFrame_HighFreqData,"ax",%progbits
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 82


 2920              		.align	1
 2921              		.global	UART_SendFrame_HighFreqData
 2922              		.syntax unified
 2923              		.thumb
 2924              		.thumb_func
 2925              		.fpu fpv4-sp-d16
 2927              	UART_SendFrame_HighFreqData:
 2928              	.LFB350:
1322:Src/uart.c    **** /**
1323:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1324:Src/uart.c    ****   * @param  ptr: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1325:Src/uart.c    ****   */
1326:Src/uart.c    **** void UART_SendFrame_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr)
1327:Src/uart.c    **** {
 2929              		.loc 1 1327 0
 2930              		.cfi_startproc
 2931              		@ args = 0, pretend = 0, frame = 0
 2932              		@ frame_needed = 0, uses_anonymous_args = 0
 2933              		@ link register save eliminated.
 2934              	.LVL240:
1328:Src/uart.c    **** #ifdef	HIGHFRE_DEBUG
1329:Src/uart.c    **** 	u8 i = 0;
1330:Src/uart.c    **** 	static u16 delay_cnt = 0;
1331:Src/uart.c    **** 	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½Í¿ï¿½ï¿½Ð£ï¿½ï¿½Ò¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½Í·ï¿½ï¿½ï¿½
1332:Src/uart.c    **** 	if(ptr->num_frame == 0)
1333:Src/uart.c    **** 	{
1334:Src/uart.c    **** 		g_fast_debug = 0;
1335:Src/uart.c    **** 	}
1336:Src/uart.c    **** 	if(ptr->num_frame>0 && g_UARTisSending == 0)
1337:Src/uart.c    **** 	{
1338:Src/uart.c    **** 		g_fast_debug = 1;
1339:Src/uart.c    **** 		if(delay_cnt++>(25*4))
1340:Src/uart.c    **** 		{
1341:Src/uart.c    **** 			ptr->check_sum = 0;
1342:Src/uart.c    **** 			for(i = 2;i<LENGTH_HIGH_FREQ_FRAME-1;i++)
1343:Src/uart.c    **** 			{
1344:Src/uart.c    **** 				ptr->check_sum = ptr->check_sum+ptr->frame[ptr->ind_tail_frame][i];
1345:Src/uart.c    **** 			}
1346:Src/uart.c    **** 			ptr->frame[ptr->ind_tail_frame][LENGTH_HIGH_FREQ_FRAME-1] = ptr->check_sum;
1347:Src/uart.c    **** 
1348:Src/uart.c    **** 			DMA_Cmd(DMA1_Channel7, DISABLE);
1349:Src/uart.c    **** 			DMA1_Channel7->CPAR = (uint32_t)(&(USART2->TDR));				
1350:Src/uart.c    **** 			DMA1_Channel7->CNDTR = LENGTH_HIGH_FREQ_FRAME;
1351:Src/uart.c    **** 			DMA1_Channel7->CMAR = (uint32_t)&ptr->frame[ptr->ind_tail_frame][0];
1352:Src/uart.c    **** 			DMA_Cmd(DMA1_Channel7, ENABLE);
1353:Src/uart.c    **** 			g_UARTisSending = 1;
1354:Src/uart.c    **** 			ptr->ind_tail_frame++;
1355:Src/uart.c    **** 			ptr->num_frame--;
1356:Src/uart.c    **** 			if(ptr->num_frame == 0)
1357:Src/uart.c    **** 			{
1358:Src/uart.c    **** 				g_fast_debug = 0;
1359:Src/uart.c    **** 			}
1360:Src/uart.c    **** 			if(ptr->num_frame == 0)
1361:Src/uart.c    **** 			{
1362:Src/uart.c    **** 				ptr->check_sum = 0;
1363:Src/uart.c    **** 				ptr->ind_head_frame = 0;
1364:Src/uart.c    **** 				ptr->ind_tail_frame = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 83


1365:Src/uart.c    **** 				ptr->num_frame = 0;
1366:Src/uart.c    **** 				ptr->subindex_frame = 0;
1367:Src/uart.c    **** 				ptr->count = 0;
1368:Src/uart.c    **** 			}
1369:Src/uart.c    **** 			delay_cnt = 0;
1370:Src/uart.c    **** 		}
1371:Src/uart.c    **** 	}
1372:Src/uart.c    **** #endif
1373:Src/uart.c    **** }
 2935              		.loc 1 1373 0
 2936 0000 7047     		bx	lr
 2937              		.cfi_endproc
 2938              	.LFE350:
 2940              		.global	flag_is_writable
 2941              		.global	g_test_debug
 2942              		.comm	struct_hFrame,254,2
 2943              		.global	g_fast_debug
 2944              		.global	g_UARTisSending
 2945              		.global	g_UART_RXlen
 2946              		.global	g_RxBufptr
 2947              		.global	g_UART_Tx_Modbus_len
 2948              		.global	g_UART_Tx_Modbus
 2949              		.comm	g_UART_TxBuf,128,1
 2950              		.global	g_index_Modbus
 2951              		.global	g_UART_Rx_Modbus
 2952              		.comm	g_UART_RxBuf,128,1
 2953              		.global	g_bUARTPushingFrames
 2954              		.global	g_flag_monitor_from_host
 2955              		.global	uart1_dma_tx_arry
 2956              		.comm	uart1_dma_rx_arry,128,1
 2957              		.comm	hdma_usart1_tx,96,4
 2958              		.comm	hdma_usart1_rx,96,4
 2959              		.comm	huart1,148,4
 2960              		.section	.bss.csum.11938,"aw",%nobits
 2961              		.set	.LANCHOR11,. + 0
 2964              	csum.11938:
 2965 0000 00       		.space	1
 2966              		.section	.bss.flag_is_writable,"aw",%nobits
 2967              		.set	.LANCHOR5,. + 0
 2970              	flag_is_writable:
 2971 0000 00       		.space	1
 2972              		.section	.bss.g_RxBufptr,"aw",%nobits
 2973              		.align	2
 2976              	g_RxBufptr:
 2977 0000 00000000 		.space	4
 2978              		.section	.bss.g_UART_RXlen,"aw",%nobits
 2979              		.align	1
 2980              		.set	.LANCHOR4,. + 0
 2983              	g_UART_RXlen:
 2984 0000 0000     		.space	2
 2985              		.section	.bss.g_UART_Rx_Modbus,"aw",%nobits
 2986              		.set	.LANCHOR16,. + 0
 2989              	g_UART_Rx_Modbus:
 2990 0000 00000000 		.space	128
 2990      00000000 
 2990      00000000 
 2990      00000000 
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 84


 2990      00000000 
 2991              		.section	.bss.g_UART_Tx_Modbus,"aw",%nobits
 2992              		.set	.LANCHOR15,. + 0
 2995              	g_UART_Tx_Modbus:
 2996 0000 00000000 		.space	128
 2996      00000000 
 2996      00000000 
 2996      00000000 
 2996      00000000 
 2997              		.section	.bss.g_UART_Tx_Modbus_len,"aw",%nobits
 2998              		.set	.LANCHOR14,. + 0
 3001              	g_UART_Tx_Modbus_len:
 3002 0000 00       		.space	1
 3003              		.section	.bss.g_UARTisSending,"aw",%nobits
 3006              	g_UARTisSending:
 3007 0000 00       		.space	1
 3008              		.section	.bss.g_bUARTPushingFrames,"aw",%nobits
 3009              		.set	.LANCHOR0,. + 0
 3012              	g_bUARTPushingFrames:
 3013 0000 00       		.space	1
 3014              		.section	.bss.g_fast_debug,"aw",%nobits
 3015              		.set	.LANCHOR1,. + 0
 3018              	g_fast_debug:
 3019 0000 00       		.space	1
 3020              		.section	.bss.g_flag_monitor_from_host,"aw",%nobits
 3021              		.set	.LANCHOR3,. + 0
 3024              	g_flag_monitor_from_host:
 3025 0000 00       		.space	1
 3026              		.section	.bss.g_index_Modbus,"aw",%nobits
 3027              		.align	1
 3028              		.set	.LANCHOR12,. + 0
 3031              	g_index_Modbus:
 3032 0000 0000     		.space	2
 3033              		.section	.bss.g_test_debug,"aw",%nobits
 3034              		.align	1
 3037              	g_test_debug:
 3038 0000 0000     		.space	2
 3039              		.section	.bss.last_usr_mode,"aw",%nobits
 3040              		.align	2
 3041              		.set	.LANCHOR2,. + 0
 3044              	last_usr_mode:
 3045 0000 00000000 		.space	4
 3046              		.section	.bss.s_RXBuf.11933,"aw",%nobits
 3047              		.set	.LANCHOR8,. + 0
 3050              	s_RXBuf.11933:
 3051 0000 00000000 		.space	128
 3051      00000000 
 3051      00000000 
 3051      00000000 
 3051      00000000 
 3052              		.section	.bss.s_bBeginFrame.11935,"aw",%nobits
 3053              		.set	.LANCHOR6,. + 0
 3056              	s_bBeginFrame.11935:
 3057 0000 00       		.space	1
 3058              		.section	.bss.s_bFrameHead1.11934,"aw",%nobits
 3059              		.set	.LANCHOR10,. + 0
 3062              	s_bFrameHead1.11934:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 85


 3063 0000 00       		.space	1
 3064              		.section	.bss.s_rxLen.11937,"aw",%nobits
 3065              		.set	.LANCHOR9,. + 0
 3068              	s_rxLen.11937:
 3069 0000 00       		.space	1
 3070              		.section	.bss.s_rxPos.11936,"aw",%nobits
 3071              		.set	.LANCHOR7,. + 0
 3074              	s_rxPos.11936:
 3075 0000 00       		.space	1
 3076              		.section	.bss.uart_recv_buf,"aw",%nobits
 3077              		.align	2
 3078              		.set	.LANCHOR13,. + 0
 3081              	uart_recv_buf:
 3082 0000 00000000 		.space	136
 3082      00000000 
 3082      00000000 
 3082      00000000 
 3082      00000000 
 3083              		.section	.data.uart1_dma_tx_arry,"aw",%progbits
 3086              	uart1_dma_tx_arry:
 3087 0000 55       		.byte	85
 3088 0001 AA       		.byte	-86
 3089 0002 11       		.byte	17
 3090 0003 22       		.byte	34
 3091 0004 33       		.byte	51
 3092 0005 44       		.byte	68
 3093 0006 55       		.byte	85
 3094 0007 00000000 		.space	121
 3094      00000000 
 3094      00000000 
 3094      00000000 
 3094      00000000 
 3095              		.text
 3096              	.Letext0:
 3097              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 3098              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 3099              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 3100              		.file 5 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/system_stm32g4xx.h"
 3101              		.file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 3102              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 3103              		.file 8 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 3104              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 3105              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 3106              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 3107              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_flash.h"
 3108              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 3109              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 3110              		.file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
 3111              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3112              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3113              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-ea
 3114              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3115              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3116              		.file 21 "Inc/pwm.h"
 3117              		.file 22 "Inc/spi_MEncoder.h"
 3118              		.file 23 "Inc/adc.h"
 3119              		.file 24 "Inc/stm32_math_sin.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 86


 3120              		.file 25 "Inc/pid.h"
 3121              		.file 26 "Inc/profile_joint.h"
 3122              		.file 27 "Inc/icmu.h"
 3123              		.file 28 "Inc/performance_test.h"
 3124              		.file 29 "Inc/global.h"
 3125              		.file 30 "Inc/uart.h"
 3126              		.file 31 "Inc/scope.h"
 3127              		.file 32 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart_ex.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 87


DEFINED SYMBOLS
                            *ABS*:00000000 uart.c
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:18     .text.self_putchar:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:25     .text.self_putchar:00000000 self_putchar
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:48     .text.self_putchar:00000010 $d
                            *COM*:00000094 huart1
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:53     .text.UART_PushFrame:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:60     .text.UART_PushFrame:00000000 UART_PushFrame
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:194    .text.UART_PushFrame:00000078 $d
                            *COM*:00000080 g_UART_TxBuf
                            *COM*:00000060 hdma_usart1_tx
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:204    .text.MX_USART1_UART_Init:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:211    .text.MX_USART1_UART_Init:00000000 MX_USART1_UART_Init
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:331    .text.MX_USART1_UART_Init:00000094 $d
                            *COM*:00000080 g_UART_RxBuf
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:339    .text.UART_PushFrame_Old:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:346    .text.UART_PushFrame_Old:00000000 UART_PushFrame_Old
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:475    .text.UART_PushFrame_Old:00000074 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:485    .text.int_last_usr_mode:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:492    .text.int_last_usr_mode:00000000 int_last_usr_mode
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:510    .text.int_last_usr_mode:00000010 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:517    .text.UART_ParseFrame:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:524    .text.UART_ParseFrame:00000000 UART_ParseFrame
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1005   .text.UART_ParseFrame:000002d8 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1024   .text.UART_ParseFrame:00000318 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1405   .text.UART_ParseFrame:000004b8 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1413   .text.UART_ParseData:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1420   .text.UART_ParseData:00000000 UART_ParseData
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1566   .text.UART_ParseData:000000a0 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1578   .text.UART_CheckReceive:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1585   .text.UART_CheckReceive:00000000 UART_CheckReceive
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1734   .text.UART_CheckReceive:000000a0 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1743   .text.Rx_Send_Modbus:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1750   .text.Rx_Send_Modbus:00000000 Rx_Send_Modbus
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1814   .text.Rx_Send_Modbus:00000054 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1826   .text.ModBusCRC16:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1833   .text.ModBusCRC16:00000000 ModBusCRC16
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1892   .text.ModBusCRC16Send:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1899   .text.ModBusCRC16Send:00000000 ModBusCRC16Send
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1965   .text.Rx_Pro_Modbus:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:1972   .text.Rx_Pro_Modbus:00000000 Rx_Pro_Modbus
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2479   .text.Rx_Pro_Modbus:000002c8 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2494   .text.Rx_Pro_Modbus:000002f8 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2564   .text.Rx_Pro_Modbus:00000378 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2577   .text.UART_CheckReceive_1:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2584   .text.UART_CheckReceive_1:00000000 UART_CheckReceive_1
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2819   .text.UART_CheckReceive_1:00000124 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2830   .text.ini_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2837   .text.ini_HighFreqData:00000000 ini_HighFreqData
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2899   .text.UART_PushFrame_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2906   .text.UART_PushFrame_HighFreqData:00000000 UART_PushFrame_HighFreqData
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2920   .text.UART_SendFrame_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2927   .text.UART_SendFrame_HighFreqData:00000000 UART_SendFrame_HighFreqData
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2970   .bss.flag_is_writable:00000000 flag_is_writable
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3037   .bss.g_test_debug:00000000 g_test_debug
                            *COM*:000000fe struct_hFrame
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3018   .bss.g_fast_debug:00000000 g_fast_debug
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 88


C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3006   .bss.g_UARTisSending:00000000 g_UARTisSending
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2983   .bss.g_UART_RXlen:00000000 g_UART_RXlen
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2976   .bss.g_RxBufptr:00000000 g_RxBufptr
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3001   .bss.g_UART_Tx_Modbus_len:00000000 g_UART_Tx_Modbus_len
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2995   .bss.g_UART_Tx_Modbus:00000000 g_UART_Tx_Modbus
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3031   .bss.g_index_Modbus:00000000 g_index_Modbus
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2989   .bss.g_UART_Rx_Modbus:00000000 g_UART_Rx_Modbus
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3012   .bss.g_bUARTPushingFrames:00000000 g_bUARTPushingFrames
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3024   .bss.g_flag_monitor_from_host:00000000 g_flag_monitor_from_host
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3086   .data.uart1_dma_tx_arry:00000000 uart1_dma_tx_arry
                            *COM*:00000080 uart1_dma_rx_arry
                            *COM*:00000060 hdma_usart1_rx
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2964   .bss.csum.11938:00000000 csum.11938
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2965   .bss.csum.11938:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2971   .bss.flag_is_writable:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2973   .bss.g_RxBufptr:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2979   .bss.g_UART_RXlen:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2990   .bss.g_UART_Rx_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:2996   .bss.g_UART_Tx_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3002   .bss.g_UART_Tx_Modbus_len:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3007   .bss.g_UARTisSending:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3013   .bss.g_bUARTPushingFrames:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3019   .bss.g_fast_debug:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3025   .bss.g_flag_monitor_from_host:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3027   .bss.g_index_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3034   .bss.g_test_debug:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3040   .bss.last_usr_mode:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3044   .bss.last_usr_mode:00000000 last_usr_mode
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3050   .bss.s_RXBuf.11933:00000000 s_RXBuf.11933
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3051   .bss.s_RXBuf.11933:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3056   .bss.s_bBeginFrame.11935:00000000 s_bBeginFrame.11935
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3057   .bss.s_bBeginFrame.11935:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3062   .bss.s_bFrameHead1.11934:00000000 s_bFrameHead1.11934
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3063   .bss.s_bFrameHead1.11934:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3068   .bss.s_rxLen.11937:00000000 s_rxLen.11937
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3069   .bss.s_rxLen.11937:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3074   .bss.s_rxPos.11936:00000000 s_rxPos.11936
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3075   .bss.s_rxPos.11936:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3077   .bss.uart_recv_buf:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3081   .bss.uart_recv_buf:00000000 uart_recv_buf
C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s:3094   .data.uart1_dma_tx_arry:00000007 $d

UNDEFINED SYMBOLS
g_CmdMap
HAL_RS485Ex_Init
Error_Handler
HAL_UARTEx_SetTxFifoThreshold
HAL_UARTEx_SetRxFifoThreshold
HAL_UARTEx_DisableFifoMode
HAL_UARTEx_ReceiveToIdle_DMA
__aeabi_ldivmod
pos_linearity_ini
Return_state_frame
recPosCmd
g_pMU_value_offset
g_pPos_ref_base_um
rod_pos_Muti_Encoder
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccT7ARcK.s 			page 89


range_icmu_vlaue_at_stroke
range_icmu_vlaue_need_addMax
force_set
force_act
status_Mode_POSITION_FORCE
MU_Value
g_CmdMap_bWR
g_CmdMap_User_bWR
setPara_waveSinGenrator
ScopeProDebug
ScopeProDebug_2
ReturnCLibADC_Frame
Return_OldFrame_data
Return_OldFrame_state
g_Encode_offset
EN_360
g_Encode_offset_EN
waveGen
flag_rev_modbus
modbus_rly_delay_ms
