ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"uart.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.CheckSum,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	CheckSum:
  25              	.LFB334:
  26              		.file 1 "Src/uart.c"
   1:Src/uart.c    **** #include "uart.h"
   2:Src/uart.c    **** 
   3:Src/uart.c    **** 
   4:Src/uart.c    **** void	self_putchar( char ch)
   5:Src/uart.c    **** {
   6:Src/uart.c    **** 	huart1.Instance->TDR = ch;
   7:Src/uart.c    **** 	while( __HAL_UART_GET_FLAG(&huart1, UART_FLAG_TXE) == RESET );
   8:Src/uart.c    **** 	
   9:Src/uart.c    **** }
  10:Src/uart.c    **** 	
  11:Src/uart.c    **** 
  12:Src/uart.c    **** #if 1
  13:Src/uart.c    **** 
  14:Src/uart.c    ****  //   #include <stdio.h>
  15:Src/uart.c    ****  //   #include <rt_misc.h>
  16:Src/uart.c    **** 
  17:Src/uart.c    **** //    #pragma import(__use_no_semihosting) 
  18:Src/uart.c    **** 
  19:Src/uart.c    **** /*----------------------------------------------------------------------------
  20:Src/uart.c    **** Write character to Serial Port
  21:Src/uart.c    **** #define PRINTF_UART  
  22:Src/uart.c    **** *----------------------------------------------------------------------------*/
  23:Src/uart.c    **** #define PRINTF_UART USART3
  24:Src/uart.c    **** 
  25:Src/uart.c    **** /*----------------------------------------------------------------------------
  26:Src/uart.c    **** Read character from Serial Port   (blocking read)
  27:Src/uart.c    **** *----------------------------------------------------------------------------*/
  28:Src/uart.c    **** UART_HandleTypeDef huart1;
  29:Src/uart.c    **** 
  30:Src/uart.c    **** DMA_HandleTypeDef hdma_usart1_rx;
  31:Src/uart.c    **** DMA_HandleTypeDef hdma_usart1_tx;
  32:Src/uart.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 2


  33:Src/uart.c    **** uint8_t uart1_dma_rx_arry[128];
  34:Src/uart.c    **** uint8_t uart1_dma_tx_arry[128]={0x55,0xaa,0x11,0x22,0x33,0x44,0x55};
  35:Src/uart.c    **** 
  36:Src/uart.c    **** 
  37:Src/uart.c    **** 
  38:Src/uart.c    **** 
  39:Src/uart.c    **** #endif
  40:Src/uart.c    **** volatile u8 g_flag_monitor_from_host = 0;   // ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ú¼ï¿½ï¿½
  41:Src/uart.c    **** volatile u8 g_bUARTPushingFrames = 0;   // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½
  42:Src/uart.c    **** 
  43:Src/uart.c    **** u8 g_UART_RxBuf[RX_BUF_SIZE]; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  44:Src/uart.c    **** u8 g_UART_Rx_Modbus[RX_BUF_SIZE] = {0};
  45:Src/uart.c    **** u16 g_index_Modbus = 0; 
  46:Src/uart.c    **** u8 g_UART_TxBuf[TX_BUF_SIZE]; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  47:Src/uart.c    **** u8 g_UART_Tx_Modbus[TX_BUF_SIZE] = {0}; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  48:Src/uart.c    **** u8 g_UART_Tx_Modbus_len = 0; 	// ï¿½ï¿½ï¿½Ý½ï¿½ï¿½Õ»ï¿½ï¿½ï¿½
  49:Src/uart.c    **** s32 g_RxBufptr = 0;	
  50:Src/uart.c    **** volatile u16 g_UART_RXlen = 0;// ï¿½ï¿½Ç°ï¿½ï¿½ï¿½Ýµï¿½Ö·
  51:Src/uart.c    **** volatile u8 g_UARTisSending = 0;	// ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  52:Src/uart.c    **** volatile u8 g_fast_debug = 0;	    // 
  53:Src/uart.c    **** volatile struct HIGH_FREQ_FRAME struct_hFrame; 
  54:Src/uart.c    **** s16 g_test_debug = 0;// ï¿½ï¿½Ç°ï¿½ï¿½ï¿½Ýµï¿½Ö·
  55:Src/uart.c    **** static u8 CheckSum(u8* pdata, u32 len)
  56:Src/uart.c    **** {
  27              		.loc 1 56 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  57:Src/uart.c    **** 	u8 sum = 0;
  58:Src/uart.c    **** 	u32 i;
  59:Src/uart.c    **** 	for(i=0; i<len; i++)
  33              		.loc 1 59 0
  34 0000 0023     		movs	r3, #0
  57:Src/uart.c    **** 	u8 sum = 0;
  35              		.loc 1 57 0
  36 0002 1A46     		mov	r2, r3
  37              	.LVL1:
  38              		.loc 1 59 0
  39 0004 8B42     		cmp	r3, r1
  40 0006 0AD2     		bcs	.L8
  56:Src/uart.c    **** 	u8 sum = 0;
  41              		.loc 1 56 0
  42 0008 10B4     		push	{r4}
  43              	.LCFI0:
  44              		.cfi_def_cfa_offset 4
  45              		.cfi_offset 4, -4
  46              	.LVL2:
  47              	.L3:
  60:Src/uart.c    **** 		sum += pdata[i];
  48              		.loc 1 60 0 discriminator 3
  49 000a C45C     		ldrb	r4, [r0, r3]	@ zero_extendqisi2
  50 000c 2244     		add	r2, r2, r4
  51 000e D2B2     		uxtb	r2, r2
  52              	.LVL3:
  59:Src/uart.c    **** 		sum += pdata[i];
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 3


  53              		.loc 1 59 0 discriminator 3
  54 0010 0133     		adds	r3, r3, #1
  55              	.LVL4:
  56 0012 8B42     		cmp	r3, r1
  57 0014 F9D3     		bcc	.L3
  61:Src/uart.c    **** 	return sum;
  62:Src/uart.c    **** }
  58              		.loc 1 62 0
  59 0016 1046     		mov	r0, r2
  60              	.LVL5:
  61 0018 5DF8044B 		ldr	r4, [sp], #4
  62              	.LCFI1:
  63              		.cfi_restore 4
  64              		.cfi_def_cfa_offset 0
  65 001c 7047     		bx	lr
  66              	.LVL6:
  67              	.L8:
  68 001e 1846     		mov	r0, r3
  69              	.LVL7:
  70 0020 7047     		bx	lr
  71              		.cfi_endproc
  72              	.LFE334:
  74              		.section	.text.uart_sum,"ax",%progbits
  75              		.align	1
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  79              		.fpu fpv4-sp-d16
  81              	uart_sum:
  82              	.LFB341:
  63:Src/uart.c    **** 
  64:Src/uart.c    **** 
  65:Src/uart.c    **** /**
  66:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  67:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
  68:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
  69:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
  70:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
  71:Src/uart.c    ****   * @retval None
  72:Src/uart.c    ****   */
  73:Src/uart.c    **** void UART_PushFrame(u8 DataLen,u8 Cmd, u16 Index, u8* pdata)
  74:Src/uart.c    **** {
  75:Src/uart.c    **** 	s16 i;
  76:Src/uart.c    **** 	u16 pos = 0;
  77:Src/uart.c    **** 	g_bUARTPushingFrames = 1;
  78:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
  79:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
  80:Src/uart.c    **** 	if (Cmd == CMDTYPE_WR)
  81:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+3;		      // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
  82:Src/uart.c    **** 	else
  83:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+3;		      // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
  84:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
  85:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
  86:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;
  87:Src/uart.c    **** 	g_UART_TxBuf[pos++] = (Index>>8)&0xff;
  88:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
  89:Src/uart.c    **** 	{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 4


  90:Src/uart.c    **** 		g_UART_TxBuf[pos++] = pdata[i];
  91:Src/uart.c    **** 	}
  92:Src/uart.c    **** 	g_UART_TxBuf[pos] = CheckSum(&g_UART_TxBuf[2], pos-2);  // Ð£ï¿½ï¿½ï¿½
  93:Src/uart.c    **** 	pos++;
  94:Src/uart.c    **** 	if(g_fast_debug == 0)
  95:Src/uart.c    **** 	{
  96:Src/uart.c    **** 
  97:Src/uart.c    **** 		__HAL_DMA_DISABLE(&hdma_usart1_tx);
  98:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
  99:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 100:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 101:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx);
 102:Src/uart.c    **** //		HAL_UART_Transmit_DMA(&huart1,&g_UART_TxBuf[0],8);
 103:Src/uart.c    **** 	}		
 104:Src/uart.c    **** //	}
 105:Src/uart.c    **** 	g_bUARTPushingFrames = 0;
 106:Src/uart.c    **** }
 107:Src/uart.c    **** 
 108:Src/uart.c    **** 
 109:Src/uart.c    **** 
 110:Src/uart.c    **** 
 111:Src/uart.c    **** void MX_USART1_UART_Init(void)
 112:Src/uart.c    **** {
 113:Src/uart.c    **** 
 114:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 0 */
 115:Src/uart.c    **** 
 116:Src/uart.c    ****   /* USER CODE END USART1_Init 0 */
 117:Src/uart.c    **** 
 118:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 1 */
 119:Src/uart.c    **** 
 120:Src/uart.c    ****   /* USER CODE END USART1_Init 1 */
 121:Src/uart.c    ****   huart1.Instance = USART1;
 122:Src/uart.c    **** 	huart1.Init.BaudRate = 115200;
 123:Src/uart.c    **** 	
 124:Src/uart.c    **** 	switch (g_CmdMap[CMD_BAUDRATE_UART])
 125:Src/uart.c    **** 	{
 126:Src/uart.c    **** 		case BAUD_UART_19200:
 127:Src/uart.c    **** 			huart1.Init.BaudRate = 19200;
 128:Src/uart.c    **** 		break;
 129:Src/uart.c    **** 		case BAUD_UART_57600:
 130:Src/uart.c    **** 			huart1.Init.BaudRate = 57600;
 131:Src/uart.c    **** 		break;
 132:Src/uart.c    **** 		case BAUD_UART_115200:
 133:Src/uart.c    **** 			huart1.Init.BaudRate = 115200;
 134:Src/uart.c    **** 		break;
 135:Src/uart.c    **** 		case BAUD_UART_921600:
 136:Src/uart.c    **** 			huart1.Init.BaudRate = 921600;
 137:Src/uart.c    **** 		break;
 138:Src/uart.c    **** 		default:
 139:Src/uart.c    **** 			huart1.Init.BaudRate = 115200;
 140:Src/uart.c    **** 		break;
 141:Src/uart.c    **** 	}
 142:Src/uart.c    **** 	
 143:Src/uart.c    ****   
 144:Src/uart.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 145:Src/uart.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 146:Src/uart.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 5


 147:Src/uart.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 148:Src/uart.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 149:Src/uart.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 150:Src/uart.c    ****   huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 151:Src/uart.c    ****   huart1.Init.ClockPrescaler = UART_PRESCALER_DIV1;
 152:Src/uart.c    ****   huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 153:Src/uart.c    ****   if (HAL_RS485Ex_Init(&huart1, UART_DE_POLARITY_HIGH, 0, 0) != HAL_OK)
 154:Src/uart.c    ****   {
 155:Src/uart.c    ****     Error_Handler();
 156:Src/uart.c    ****   }
 157:Src/uart.c    ****   if (HAL_UARTEx_SetTxFifoThreshold(&huart1, UART_TXFIFO_THRESHOLD_1_8) != HAL_OK)
 158:Src/uart.c    ****   {
 159:Src/uart.c    ****     Error_Handler();
 160:Src/uart.c    ****   }
 161:Src/uart.c    ****   if (HAL_UARTEx_SetRxFifoThreshold(&huart1, UART_RXFIFO_THRESHOLD_1_8) != HAL_OK)
 162:Src/uart.c    ****   {
 163:Src/uart.c    ****     Error_Handler();
 164:Src/uart.c    ****   }
 165:Src/uart.c    ****   if (HAL_UARTEx_DisableFifoMode(&huart1) != HAL_OK)
 166:Src/uart.c    ****   {
 167:Src/uart.c    ****     Error_Handler();
 168:Src/uart.c    ****   }
 169:Src/uart.c    ****   /* USER CODE BEGIN USART1_Init 2 */
 170:Src/uart.c    **** 
 171:Src/uart.c    ****   /* USER CODE END USART1_Init 2 */
 172:Src/uart.c    **** 
 173:Src/uart.c    **** 	HAL_UARTEx_ReceiveToIdle_DMA(&huart1,g_UART_RxBuf,128);
 174:Src/uart.c    **** 	huart1.Instance->CR3 |= USART_CR3_DMAT;
 175:Src/uart.c    **** 	
 176:Src/uart.c    **** }
 177:Src/uart.c    **** /**
 178:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£ï¿½Îªï¿½ï¿½ï¿½ï¿½LAï¿½ï¿½Ð­ï¿½ï¿½
 179:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
 180:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
 181:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
 182:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
 183:Src/uart.c    ****   * @retval None
 184:Src/uart.c    ****   */
 185:Src/uart.c    **** 
 186:Src/uart.c    **** void UART_PushFrame_Old(u8 DataLen,  u8 Cmd, u8 Index, u8* pdata)
 187:Src/uart.c    **** {
 188:Src/uart.c    **** 	s16 i;
 189:Src/uart.c    **** 	u16 pos = 0;
 190:Src/uart.c    **** 	g_bUARTPushingFrames = 1;
 191:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
 192:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
 193:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+2;		    // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
 194:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
 195:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 196:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;       //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
 197:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
 198:Src/uart.c    **** 	{
 199:Src/uart.c    **** 		g_UART_TxBuf[pos++] = pdata[i];
 200:Src/uart.c    **** 	}
 201:Src/uart.c    **** 	g_UART_TxBuf[pos] = CheckSum(&g_UART_TxBuf[2], pos-2);  // Ð£ï¿½ï¿½ï¿½
 202:Src/uart.c    **** 	pos++;
 203:Src/uart.c    **** 	if(g_fast_debug == 0)
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 6


 204:Src/uart.c    **** 	{
 205:Src/uart.c    **** 				__HAL_DMA_DISABLE(&hdma_usart1_tx);
 206:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 207:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 208:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 209:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx); 
 210:Src/uart.c    **** 	}		
 211:Src/uart.c    **** 	g_bUARTPushingFrames = 0;
 212:Src/uart.c    **** }
 213:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½Ò»Ö¡ï¿½ï¿½ï¿½ï¿½
 214:Src/uart.c    **** u8 flag_is_writable = 0;
 215:Src/uart.c    **** 
 216:Src/uart.c    **** static int last_usr_mode = 0;
 217:Src/uart.c    **** void int_last_usr_mode(void)
 218:Src/uart.c    **** {
 219:Src/uart.c    **** 	last_usr_mode = g_CmdMap[CMD_USEER_MODE];
 220:Src/uart.c    **** }
 221:Src/uart.c    **** 
 222:Src/uart.c    **** void UART_ParseFrame(u8* pdata)
 223:Src/uart.c    **** {
 224:Src/uart.c    **** 	s32 result = 0;
 225:Src/uart.c    **** 	s32 Index = ((s32)pdata[FRA_INDEX+1]<<8)+(s32)pdata[FRA_INDEX];
 226:Src/uart.c    **** 	u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 227:Src/uart.c    **** 	s32 datalen = 0;
 228:Src/uart.c    **** 	u8* p_source;u8* p_des;
 229:Src/uart.c    **** 	s16 pos_set_2000;
 230:Src/uart.c    **** 	s32 i = 0;
 231:Src/uart.c    **** //	g_CmdMap[CMD_ID] = 0X01;
 232:Src/uart.c    **** 	if(pdata[FRA_ID] != g_CmdMap[CMD_ID] && pdata[FRA_ID] != 0xFF)
 233:Src/uart.c    **** 	{
 234:Src/uart.c    **** 		return;
 235:Src/uart.c    **** 	}
 236:Src/uart.c    **** 	
 237:Src/uart.c    **** 	g_flag_monitor_from_host = 1;	
 238:Src/uart.c    **** 	if(pdata[FRA_CMD] == CMDTYPE_WR || pdata[FRA_CMD] == CMDTYPE_WR_NR)
 239:Src/uart.c    **** 	{
 240:Src/uart.c    **** 		datalen = (g_UART_RXlen-2)>>1;
 241:Src/uart.c    **** 		flag_is_writable = 1;		
 242:Src/uart.c    **** 		if(Index>=USERCMDMAP_LEN)
 243:Src/uart.c    **** 		{
 244:Src/uart.c    **** 			pbWRBuf = &g_CmdMap_bWR[0][0];
 245:Src/uart.c    **** 			if((u16)g_CmdMap[CMD_ACCESS_CODE] != (u16)0x1234)
 246:Src/uart.c    **** 			{
 247:Src/uart.c    **** 				flag_is_writable = 0;
 248:Src/uart.c    **** 			}
 249:Src/uart.c    **** 			else				
 250:Src/uart.c    **** 			{
 251:Src/uart.c    **** 				for(i=0; i<datalen; i++)
 252:Src/uart.c    **** 				{
 253:Src/uart.c    **** 					if (*(pbWRBuf+Index-USERCMDMAP_LEN+i) != WRFLG_RW)
 254:Src/uart.c    **** 					flag_is_writable = 0;			
 255:Src/uart.c    **** 				}
 256:Src/uart.c    **** 			}
 257:Src/uart.c    **** 		}
 258:Src/uart.c    **** 		else
 259:Src/uart.c    **** 		{
 260:Src/uart.c    **** 			pbWRBuf = &g_CmdMap_User_bWR[0][0];
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 7


 261:Src/uart.c    **** 			for(i=0; i<datalen; i++)
 262:Src/uart.c    **** 			{
 263:Src/uart.c    **** 				if (*(pbWRBuf+Index+i) != WRFLG_RW)
 264:Src/uart.c    **** 				flag_is_writable = 0;
 265:Src/uart.c    **** 			}
 266:Src/uart.c    **** 		}
 267:Src/uart.c    **** 		if(flag_is_writable == 1)
 268:Src/uart.c    **** 		{	
 269:Src/uart.c    **** 			p_source = (u8*)&pdata[FRA_DATA];
 270:Src/uart.c    **** 			p_des = (u8*)&g_CmdMap[Index];
 271:Src/uart.c    **** 			for(i=0;i<((g_UART_RXlen-2-1));i++)
 272:Src/uart.c    **** 			{
 273:Src/uart.c    **** 				*(p_des+i) = *(p_source+i);
 274:Src/uart.c    **** 			}
 275:Src/uart.c    **** 		}
 276:Src/uart.c    **** 		//memcpy((s32*)&g_CmdMap[Index], (s32*)&pdata[FRA_DATA], (g_UART_RXlen-2-1));				      
 277:Src/uart.c    **** 		/* void *memcpy(void*dest, const void *src, size_t n);
 278:Src/uart.c    **** 		ï¿½ï¿½srcÖ¸ï¿½ï¿½ï¿½Ö·Îªï¿½ï¿½Ê¼ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½nï¿½ï¿½ï¿½Ö½Úµï¿½ï¿½ï¿½ï¿½Ý¸ï¿½ï¿½Æµï¿½
 279:Src/uart.c    **** 		if(pdata[FRA_ID] != BROADCAST_ID && pdata[FRA_CMD] == CMDTYPE_WR)
 280:Src/uart.c    **** 		{	
 281:Src/uart.c    **** 			Return_state_frame(CMDTYPE_WR,Index);
 282:Src/uart.c    **** 		}
 283:Src/uart.c    **** 		if(Index >= POS_LINEARITY_ADC(0) && Index <= POS_LINEARITY_ADC(NUM_LINEARITY_SEG))	
 284:Src/uart.c    **** 		{
 285:Src/uart.c    **** 			pos_linearity_ini();
 286:Src/uart.c    **** 		}
 287:Src/uart.c    **** 		if(Index <= CMD_SPD_SET_PU && (Index+datalen) > CMD_SPD_SET_PU && g_CmdMap[TAG_WORK_MODE] == MODE
 288:Src/uart.c    **** 		{
 289:Src/uart.c    **** 			if(g_CmdMap[CMD_E_STOP] == 0)
 290:Src/uart.c    **** 			{
 291:Src/uart.c    **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 292:Src/uart.c    **** 			}
 293:Src/uart.c    **** 		}
 294:Src/uart.c    **** 		//Î»ï¿½ï¿½+ï¿½ï¿½Ä£Ê½ï¿½ï¿½ Í¬Ê±ï¿½Þ¸ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È¡ï¿½Î»ï¿½Ã¼Ä´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
 295:Src/uart.c    **** 		if(Index <= CMD_FORCE_SET_PU && (Index+datalen) >= CMD_POS_SET_PU && (g_CmdMap[CMD_USEER_MODE] ==
 296:Src/uart.c    **** 		{
 297:Src/uart.c    **** 				/*Force>0ï¿½ï¿½ï¿½ï¿½Â£ï¿½ Pos_set>Pos_actï¿½ï¿½ï¿½È½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½Î»ï¿½Ãµï¿
 298:Src/uart.c    **** 													Pos_set<Pos_act,Ö±ï¿½Ó½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Ä£Ê½
 299:Src/uart.c    **** 					Force_set<0ï¿½ï¿½ï¿½ï¿½Â£ï¿½Pos_set<Pos_actï¿½ï¿½ï¿½È½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ä£Ê½ï¿½ï¿½ï¿½ï¿½Î»ï¿½Ãµ
 300:Src/uart.c    **** 													Pos_set>Pos_act,Ö±ï¿½Ó½ï¿½ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½Ä£Ê½
 301:Src/uart.c    **** 				*/
 302:Src/uart.c    **** 				if(g_CmdMap[CMD_FORCE_DIR] == 0)
 303:Src/uart.c    **** 				{
 304:Src/uart.c    **** 					force_set = g_CmdMap[CMD_FORCE_SET_PU];
 305:Src/uart.c    **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 306:Src/uart.c    **** 				}
 307:Src/uart.c    **** 				else
 308:Src/uart.c    **** 				{
 309:Src/uart.c    **** 					force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
 310:Src/uart.c    **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 311:Src/uart.c    **** 				}
 312:Src/uart.c    **** 
 313:Src/uart.c    **** 						if(force_set>0) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 314:Src/uart.c    **** 						{
 315:Src/uart.c    **** 							if(force_set>force_act) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î»
 316:Src/uart.c    **** 							{
 317:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 8


 318:Src/uart.c    **** 								{
 319:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 320:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 321:Src/uart.c    **** 									recPosCmd();
 322:Src/uart.c    **** 								}
 323:Src/uart.c    **** 								else
 324:Src/uart.c    **** 								{
 325:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½
 326:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 327:Src/uart.c    **** 								}
 328:Src/uart.c    **** 							}
 329:Src/uart.c    **** 							else 
 330:Src/uart.c    **** 							{
 331:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï
 332:Src/uart.c    **** 								{
 333:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 334:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 335:Src/uart.c    **** 									recPosCmd();
 336:Src/uart.c    **** 								}
 337:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
 338:Src/uart.c    **** 								{
 339:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
 340:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 341:Src/uart.c    **** 								}				
 342:Src/uart.c    **** 							}
 343:Src/uart.c    **** 						}
 344:Src/uart.c    **** 						else if(force_set<0)  //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 345:Src/uart.c    **** 						{													
 346:Src/uart.c    **** 							if(force_set<force_act) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
 347:Src/uart.c    **** 							{
 348:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
 349:Src/uart.c    **** 								{
 350:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Pro
 351:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 352:Src/uart.c    **** 									recPosCmd();
 353:Src/uart.c    **** 								}
 354:Src/uart.c    **** 								else
 355:Src/uart.c    **** 								{
 356:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 357:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 358:Src/uart.c    **** 								}
 359:Src/uart.c    **** 							}
 360:Src/uart.c    **** 							else 
 361:Src/uart.c    **** 							{
 362:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï¿½Ò²Ã»
 363:Src/uart.c    **** 								{
 364:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
 365:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 366:Src/uart.c    **** 									recPosCmd();
 367:Src/uart.c    **** 								}
 368:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
 369:Src/uart.c    **** 								{
 370:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
 371:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 372:Src/uart.c    **** 								}				
 373:Src/uart.c    **** 							}							
 374:Src/uart.c    **** 						}
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 9


 375:Src/uart.c    **** 				else
 376:Src/uart.c    **** 				{
 377:Src/uart.c    **** 					status_Mode_POSITION_FORCE = 3; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Profile
 378:Src/uart.c    **** 				}				
 379:Src/uart.c    **** 		}		
 380:Src/uart.c    **** 		if(Index <= CMD_POS_SET_PU && (Index+datalen) > CMD_POS_SET_PU 
 381:Src/uart.c    **** 			&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_M
 382:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 383:Src/uart.c    **** 		{
 384:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 385:Src/uart.c    **** 				recPosCmd();
 386:Src/uart.c    **** 		}
 387:Src/uart.c    **** 		if(Index <= CMD_FORCE_SET_PU && (Index+datalen) >= CMD_FORCE_SET_PU && g_CmdMap[CMD_USEER_MODE] =
 388:Src/uart.c    **** 		{
 389:Src/uart.c    **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 1;
 390:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 391:Src/uart.c    **** 		}
 392:Src/uart.c    **** 		if(Index == SYS_SET_POS_ACT_PU)     
 393:Src/uart.c    **** 		{
 394:Src/uart.c    **** 				//ï¿½ï¿½ï¿½Ãµï¿½Ç°Î»ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ã¹«Ê½
 395:Src/uart.c    **** 			if(g_CmdMap[SYS_MU_COMM_TO_PC] == 1)     //MU Ð¾Æ¬ï¿½ê¶¨Ä£Ê½
 396:Src/uart.c    **** 			{
 397:Src/uart.c    **** 				//	flag_first_exe = 0;
 398:Src/uart.c    **** 					rod_pos_Muti_Encoder = g_CmdMap[SYS_SET_POS_ACT_PU]*(*g_pPos_ref_base_um)*(int64_t)g_CmdMap[GE
 399:Src/uart.c    **** 			}
 400:Src/uart.c    **** 			else
 401:Src/uart.c    **** 				*g_pMU_value_offset = MU_Value;
 402:Src/uart.c    **** 				range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_offs
 403:Src/uart.c    **** 		}
 404:Src/uart.c    **** 		if(Index == MOT_EANGLE_OFFSET)	
 405:Src/uart.c    **** 		{
 406:Src/uart.c    **** 				g_Encode_offset = (int)g_CmdMap[MOT_EANGLE_OFFSET];
 407:Src/uart.c    **** 				g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 408:Src/uart.c    **** 		}
 409:Src/uart.c    **** 		if(Index == SYS_SN_PART1)	
 410:Src/uart.c    **** 		{
 411:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART1] = g_CmdMap[SYS_SN_PART1];
 412:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART2] = g_CmdMap[SYS_SN_PART2];
 413:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART3] = g_CmdMap[SYS_SN_PART3];	
 414:Src/uart.c    **** 		}	
 415:Src/uart.c    **** 		if(Index == CMD_PF_TEST_WAVE_F)	
 416:Src/uart.c    **** 		{
 417:Src/uart.c    **** 			setPara_waveSinGenrator(&waveGen,g_CmdMap[CMD_PF_TEST_WAVE_F]
 418:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 419:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_TROUGH]
 420:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_CYCLE]
 421:Src/uart.c    **** 																			,g_CmdMap[CMD_POS_ACT_PU]);
 422:Src/uart.c    **** 		}	
 423:Src/uart.c    **** 		
 424:Src/uart.c    **** 		if(last_usr_mode != g_CmdMap[CMD_USEER_MODE])
 425:Src/uart.c    **** 		{
 426:Src/uart.c    **** 			last_usr_mode = g_CmdMap[CMD_USEER_MODE];
 427:Src/uart.c    **** 			g_CmdMap[CMD_PAUSE] =1 ;
 428:Src/uart.c    **** 		}
 429:Src/uart.c    **** 	}
 430:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_GET_STATE)
 431:Src/uart.c    **** 	{		
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 10


 432:Src/uart.c    **** 				Return_state_frame(CMDTYPE_GET_STATE,0);
 433:Src/uart.c    **** 	}	
 434:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_RD)
 435:Src/uart.c    **** 	{		
 436:Src/uart.c    **** 				//UART_PushFrame(pdata[FRA_DATA],CMDTYPE_RD, Index, (u8*)(&g_CmdMap[Index]));	
 437:Src/uart.c    **** 				UART_PushFrame(2*pdata[FRA_DATA], CMDTYPE_RD, Index, (u8*)(&g_CmdMap[Index]));	//ï¿½Ä´ï¿½ï¿½ï¿½
 438:Src/uart.c    **** 	}
 439:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_DEBUG)
 440:Src/uart.c    **** 	{
 441:Src/uart.c    **** 				ScopeProDebug();
 442:Src/uart.c    **** 	}
 443:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_DEBUG_2)
 444:Src/uart.c    **** 	{
 445:Src/uart.c    **** 				ScopeProDebug_2();
 446:Src/uart.c    **** 	}
 447:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_ADC_CLIB)
 448:Src/uart.c    **** 	{
 449:Src/uart.c    **** 				ReturnCLibADC_Frame();
 450:Src/uart.c    **** 	}
 451:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_RD)//LAï¿½ï¿½Ð­ï¿½ï¿½Ä¶ï¿½Ö¸ï¿½ï¿½
 452:Src/uart.c    **** 	{		
 453:Src/uart.c    **** 		Return_OldFrame_data(CMDTYPE_OLD_RD,pdata[3],pdata[4]);
 454:Src/uart.c    **** 	}
 455:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_WR)//LAï¿½ï¿½Ð­ï¿½ï¿½ï¿½Ð´Ö¸ï¿½ï¿½
 456:Src/uart.c    **** 	{
 457:Src/uart.c    **** 		//IDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¡ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½È²ï¿½ï¿½
 458:Src/uart.c    **** 		datalen = pdata[0]-2;//Ð´ï¿½ï¿½ï¿½ï¿½Ö½Ú³ï¿½ï¿½ï¿½ 
 459:Src/uart.c    **** 		pdata[4]--;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 460:Src/uart.c    **** 		for(i=0;i<datalen;i++)
 461:Src/uart.c    **** 		{
 462:Src/uart.c    **** 			if(pdata[3]+i == 2)//ID
 463:Src/uart.c    **** 			{
 464:Src/uart.c    **** 				g_CmdMap[CMD_ID] = pdata[4+i];
 465:Src/uart.c    **** 			}
 466:Src/uart.c    **** 			else if(pdata[3]+i == 12)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 467:Src/uart.c    **** 			{
 468:Src/uart.c    **** 				g_CmdMap[CMD_BAUDRATE_UART] = pdata[4+i];
 469:Src/uart.c    **** 			}
 470:Src/uart.c    **** 			else if(pdata[3]+i == 31)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð£×¼Î»
 471:Src/uart.c    **** 			{
 472:Src/uart.c    **** 				//g_CmdMap[CMD_BAUDRATE_UART] = pdata[4+i];
 473:Src/uart.c    **** 			}
 474:Src/uart.c    **** 			else if(pdata[3]+i == 32)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½Ö½ï¿½
 475:Src/uart.c    **** 			{
 476:Src/uart.c    **** 				g_CmdMap[CMD_OVER_CURRENT_SET] = (pdata[4+i]+(pdata[4+i+1]<<8))/10;
 477:Src/uart.c    **** 			}
 478:Src/uart.c    **** 			else if(pdata[3]+i == 98)//ï¿½ï¿½ï¿½Â±ï¿½ï¿½ï¿½Öµï¿½ï¿½ï¿½Ö½ï¿½
 479:Src/uart.c    **** 			{
 480:Src/uart.c    **** 				g_CmdMap[CMD_OVER_TEMP_SET] = (pdata[4+i]+(pdata[4+i+1]<<8))/10;
 481:Src/uart.c    **** 			}
 482:Src/uart.c    **** 			else
 483:Src/uart.c    **** 			{
 484:Src/uart.c    **** 			}			
 485:Src/uart.c    **** 		}
 486:Src/uart.c    **** 		Return_OldFrame_data(CMDTYPE_OLD_WR,pdata[3],0);
 487:Src/uart.c    **** 	}
 488:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_CMD )//LAï¿½ï¿½Ð­ï¿½ï¿½Äµï¿½ï¿½ï¿½Ö¸ï¿½ï¿½
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 11


 489:Src/uart.c    **** 	{
 490:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½
 491:Src/uart.c    **** 		//ï¿½ï¿½Í£
 492:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½
 493:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 494:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ö¸ï¿½ï¿½(0-2000)
 495:Src/uart.c    **** 		if(pdata[4] == 0x04)//Ê¹ï¿½ï¿½
 496:Src/uart.c    **** 		{
 497:Src/uart.c    **** //			g_CmdMap[CMD_E_STOP] = 0;
 498:Src/uart.c    **** 		}
 499:Src/uart.c    **** 		if(pdata[4] == 0x23)//ï¿½ï¿½Í£
 500:Src/uart.c    **** 		{
 501:Src/uart.c    **** 			g_CmdMap[CMD_E_STOP] = 1;
 502:Src/uart.c    **** 		}
 503:Src/uart.c    **** 		if(pdata[4] == 0x23)//ï¿½ï¿½Í£ï¿½Ë¶ï¿½
 504:Src/uart.c    **** 		{
 505:Src/uart.c    **** 			
 506:Src/uart.c    **** 		}
 507:Src/uart.c    **** 		if(pdata[4] == 0x20)//ï¿½ï¿½ï¿½æµ½Flash
 508:Src/uart.c    **** 		{
 509:Src/uart.c    **** 			g_CmdMap[CMD_SAVE] = 1;
 510:Src/uart.c    **** 		}
 511:Src/uart.c    **** 		if(pdata[4] == 0x22)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×´Ì¬
 512:Src/uart.c    **** 		{
 513:Src/uart.c    **** 			
 514:Src/uart.c    **** 		}
 515:Src/uart.c    **** 		if(pdata[4] == 0x1E)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¸ï¿½ï¿½
 516:Src/uart.c    **** 		{
 517:Src/uart.c    **** 			g_CmdMap[CMD_CLEAR_ERROR] = 1;
 518:Src/uart.c    **** 		}	
 519:Src/uart.c    **** 		Return_OldFrame_state(pdata[FRA_CMD],pdata[3],pdata[4]); 
 520:Src/uart.c    **** 		//Return_OldFrame_data(u8 cmd_type,u8 index,u8 length) 
 521:Src/uart.c    **** 	}
 522:Src/uart.c    **** 	else if(pdata[FRA_CMD] == CMDTYPE_OLD_POS || pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_1|| pdata[FRA_CMD
 523:Src/uart.c    **** 	{
 524:Src/uart.c    **** 		//ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½Ö¸ï¿½ï¿½(0-2000)
 525:Src/uart.c    **** 		if(pdata[3] == 0x37)
 526:Src/uart.c    **** 		{
 527:Src/uart.c    **** 			pos_set_2000 = (s16)pdata[4] + (((s16)pdata[5])<<8);
 528:Src/uart.c    **** 			if(pos_set_2000<0)
 529:Src/uart.c    **** 			{
 530:Src/uart.c    **** 				pos_set_2000 = 0;				
 531:Src/uart.c    **** 			}
 532:Src/uart.c    **** 			else if(pos_set_2000>2000)
 533:Src/uart.c    **** 			{
 534:Src/uart.c    **** 				pos_set_2000 = 2000;
 535:Src/uart.c    **** 			}
 536:Src/uart.c    **** 			g_CmdMap[CMD_POS_SET_PU] = pos_set_2000*PU_REFERENCE/2000;
 537:Src/uart.c    **** 		}
 538:Src/uart.c    **** 		recPosCmd();
 539:Src/uart.c    **** 		//Flag_Set_OpenLen = 1;
 540:Src/uart.c    **** 		g_CmdMap[CMD_SPD_SET_PU] = 16384;
 541:Src/uart.c    **** //		pos_interpolation_B_um = pos_interpolation_A_um;
 542:Src/uart.c    **** //		pos_interpolation_A_um = g_CmdMap[CMD_POS_SET_PU];
 543:Src/uart.c    **** //		time_interpolation_s = (double)g_servo_cmd_period/(double)(F_SPD_REGULATOR_HZ);
 544:Src/uart.c    **** //		vel_interpolation_umPs = (s32)((double)(pos_interpolation_A_um-pos_interpolation_B_um)/time_int
 545:Src/uart.c    **** //		Profile_ParaSet();
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 12


 546:Src/uart.c    **** //		if(pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_1|| pdata[FRA_CMD] == CMDTYPE_OLD_SERVO_2)
 547:Src/uart.c    **** //		{
 548:Src/uart.c    **** //			g_servo_cmd_period = g_servo_cmd_period_cnt;//ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï
 549:Src/uart.c    **** //			g_servo_cmd_period_cnt = 0; //ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¼ï¿½Ê±
 550:Src/uart.c    **** //			g_CmdMap[CMD_USEER_MODE] = CMD_USEER_MODE_1_SERVO;
 551:Src/uart.c    **** //		}
 552:Src/uart.c    **** //		else
 553:Src/uart.c    **** //		{
 554:Src/uart.c    **** //			g_servo_cmd_period = 3000;//ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ms
 555:Src/uart.c    **** //			g_servo_cmd_period_cnt = 0; //ï¿½ï¿½ÆµÎ»ï¿½ï¿½ï¿½Å·ï¿½ï¿½Â£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú¼ï¿½Ê±
 556:Src/uart.c    **** //			g_CmdMap[CMD_USEER_MODE] = CMD_USEER_MODE_0_POSITION;
 557:Src/uart.c    **** //		}		
 558:Src/uart.c    **** 		Return_OldFrame_state(pdata[FRA_CMD],pdata[3],0); 
 559:Src/uart.c    **** 	}
 560:Src/uart.c    **** 	else
 561:Src/uart.c    **** 	{
 562:Src/uart.c    **** 		
 563:Src/uart.c    **** 	}
 564:Src/uart.c    **** }
 565:Src/uart.c    **** 
 566:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ð­ï¿½ï¿½ï¿½Ê½ 0x55 0xAA [ï¿½ï¿½ï¿½ï¿½]
 567:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 568:Src/uart.c    **** int UART_ParseData(u8 data)
 569:Src/uart.c    **** {
 570:Src/uart.c    **** 	static unsigned char s_RXBuf[RX_BUF_SIZE] = {0};
 571:Src/uart.c    **** 	static unsigned char s_bFrameHead1 = 0;
 572:Src/uart.c    **** 	static unsigned char s_bBeginFrame = 0;
 573:Src/uart.c    **** 	static unsigned char s_rxPos = 0;
 574:Src/uart.c    **** 	static unsigned char s_rxLen = 0;
 575:Src/uart.c    **** 	static unsigned char csum = 0;
 576:Src/uart.c    **** 	int ret = 1;
 577:Src/uart.c    **** 	
 578:Src/uart.c    **** 	if(s_bBeginFrame)  // ï¿½Ç·ï¿½Ê¼ï¿½Âµï¿½Ò»Ö¡
 579:Src/uart.c    **** 	{
 580:Src/uart.c    **** 		s_RXBuf[s_rxPos] = data;
 581:Src/uart.c    **** 		if(s_rxPos == FRA_LENGTH)
 582:Src/uart.c    **** 		{
 583:Src/uart.c    **** 			s_rxLen = data+3;//data+3;
 584:Src/uart.c    **** 			if(s_rxLen >= RX_BUF_SIZE)
 585:Src/uart.c    **** 			{
 586:Src/uart.c    **** 				s_rxLen  =0;
 587:Src/uart.c    **** 				s_bFrameHead1 = s_bBeginFrame = 0;
 588:Src/uart.c    **** 				csum = 0;
 589:Src/uart.c    **** 				return 1;
 590:Src/uart.c    **** 			}
 591:Src/uart.c    **** 			g_UART_RXlen = data;
 592:Src/uart.c    **** 		}
 593:Src/uart.c    **** 		s_rxPos++;
 594:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 595:Src/uart.c    **** 		{
 596:Src/uart.c    **** 			if(csum == s_RXBuf[s_rxPos-1])   //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½Í¬
 597:Src/uart.c    **** 			{
 598:Src/uart.c    **** 				UART_ParseFrame(&s_RXBuf[0]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 599:Src/uart.c    **** 				g_index_Modbus = 0;
 600:Src/uart.c    **** 			}
 601:Src/uart.c    **** 			else
 602:Src/uart.c    **** 			{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 13


 603:Src/uart.c    **** //				while(1);
 604:Src/uart.c    **** 			}
 605:Src/uart.c    **** 			s_bFrameHead1 = s_bBeginFrame = 0;
 606:Src/uart.c    **** 			s_rxPos = 0;
 607:Src/uart.c    **** 			csum = 0;
 608:Src/uart.c    **** 			ret = 0;
 609:Src/uart.c    **** 			return 0;
 610:Src/uart.c    **** 		}
 611:Src/uart.c    **** 		else
 612:Src/uart.c    **** 		{
 613:Src/uart.c    **** 			csum += data;
 614:Src/uart.c    **** 		}
 615:Src/uart.c    **** 	}
 616:Src/uart.c    **** 	else if(data == 0x55 && !s_bFrameHead1)
 617:Src/uart.c    **** 	{
 618:Src/uart.c    **** 		s_bFrameHead1 = 1;
 619:Src/uart.c    **** 	}
 620:Src/uart.c    **** 	else if(data == 0xAA && s_bFrameHead1 && !s_bBeginFrame)
 621:Src/uart.c    **** 	{
 622:Src/uart.c    **** 		s_bBeginFrame = 1;
 623:Src/uart.c    **** 	}
 624:Src/uart.c    **** 	else
 625:Src/uart.c    **** 	{
 626:Src/uart.c    **** 		s_bFrameHead1 = s_bBeginFrame = 0;
 627:Src/uart.c    **** 		csum = 0;
 628:Src/uart.c    **** 	}
 629:Src/uart.c    **** 	
 630:Src/uart.c    **** 	return 1;
 631:Src/uart.c    **** 	
 632:Src/uart.c    **** 	
 633:Src/uart.c    **** }
 634:Src/uart.c    **** 
 635:Src/uart.c    **** static unsigned char uart_sum(unsigned char *p, int len)
 636:Src/uart.c    **** {
  83              		.loc 1 636 0
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 0, uses_anonymous_args = 0
  87              		@ link register save eliminated.
  88              	.LVL8:
 637:Src/uart.c    **** 	int i = 0;
 638:Src/uart.c    **** 	unsigned char sum = 0;
  89              		.loc 1 638 0
  90 0000 0023     		movs	r3, #0
 639:Src/uart.c    **** 	
 640:Src/uart.c    **** 	for(i=0;i<len;i++)
  91              		.loc 1 640 0
  92 0002 1A46     		mov	r2, r3
  93              	.LVL9:
  94 0004 8B42     		cmp	r3, r1
  95 0006 0ADA     		bge	.L16
 636:Src/uart.c    **** 	int i = 0;
  96              		.loc 1 636 0
  97 0008 10B4     		push	{r4}
  98              	.LCFI2:
  99              		.cfi_def_cfa_offset 4
 100              		.cfi_offset 4, -4
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 14


 101              	.L11:
 641:Src/uart.c    **** 	{
 642:Src/uart.c    **** 		sum += p[i];
 102              		.loc 1 642 0 discriminator 3
 103 000a 845C     		ldrb	r4, [r0, r2]	@ zero_extendqisi2
 104 000c 2344     		add	r3, r3, r4
 105              	.LVL10:
 106 000e DBB2     		uxtb	r3, r3
 107              	.LVL11:
 640:Src/uart.c    **** 	{
 108              		.loc 1 640 0 discriminator 3
 109 0010 0132     		adds	r2, r2, #1
 110              	.LVL12:
 111 0012 8A42     		cmp	r2, r1
 112 0014 F9DB     		blt	.L11
 643:Src/uart.c    **** 	}
 644:Src/uart.c    **** 	return sum;
 645:Src/uart.c    **** }
 113              		.loc 1 645 0
 114 0016 1846     		mov	r0, r3
 115              	.LVL13:
 116 0018 5DF8044B 		ldr	r4, [sp], #4
 117              	.LCFI3:
 118              		.cfi_restore 4
 119              		.cfi_def_cfa_offset 0
 120 001c 7047     		bx	lr
 121              	.LVL14:
 122              	.L16:
 123 001e 1846     		mov	r0, r3
 124              	.LVL15:
 125 0020 7047     		bx	lr
 126              		.cfi_endproc
 127              	.LFE341:
 129              		.section	.text.self_putchar,"ax",%progbits
 130              		.align	1
 131              		.global	self_putchar
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 135              		.fpu fpv4-sp-d16
 137              	self_putchar:
 138              	.LFB333:
   5:Src/uart.c    **** 	huart1.Instance->TDR = ch;
 139              		.loc 1 5 0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143              		@ link register save eliminated.
 144              	.LVL16:
   6:Src/uart.c    **** 	while( __HAL_UART_GET_FLAG(&huart1, UART_FLAG_TXE) == RESET );
 145              		.loc 1 6 0
 146 0000 034B     		ldr	r3, .L19
 147 0002 1A68     		ldr	r2, [r3]
 148 0004 9062     		str	r0, [r2, #40]
 149              	.L18:
   7:Src/uart.c    **** 	
 150              		.loc 1 7 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 15


 151 0006 D369     		ldr	r3, [r2, #28]
 152 0008 13F0800F 		tst	r3, #128
 153 000c FBD0     		beq	.L18
   9:Src/uart.c    **** 	
 154              		.loc 1 9 0
 155 000e 7047     		bx	lr
 156              	.L20:
 157              		.align	2
 158              	.L19:
 159 0010 00000000 		.word	huart1
 160              		.cfi_endproc
 161              	.LFE333:
 163              		.section	.text.UART_PushFrame,"ax",%progbits
 164              		.align	1
 165              		.global	UART_PushFrame
 166              		.syntax unified
 167              		.thumb
 168              		.thumb_func
 169              		.fpu fpv4-sp-d16
 171              	UART_PushFrame:
 172              	.LFB335:
  74:Src/uart.c    **** 	s16 i;
 173              		.loc 1 74 0
 174              		.cfi_startproc
 175              		@ args = 0, pretend = 0, frame = 0
 176              		@ frame_needed = 0, uses_anonymous_args = 0
 177              	.LVL17:
 178 0000 70B5     		push	{r4, r5, r6, lr}
 179              	.LCFI4:
 180              		.cfi_def_cfa_offset 16
 181              		.cfi_offset 4, -16
 182              		.cfi_offset 5, -12
 183              		.cfi_offset 6, -8
 184              		.cfi_offset 14, -4
 185              	.LVL18:
  77:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
 186              		.loc 1 77 0
 187 0002 224C     		ldr	r4, .L29
 188 0004 0125     		movs	r5, #1
 189 0006 2570     		strb	r5, [r4]
 190              	.LVL19:
  78:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
 191              		.loc 1 78 0
 192 0008 214C     		ldr	r4, .L29+4
 193 000a AA25     		movs	r5, #170
 194 000c 2570     		strb	r5, [r4]
 195              	.LVL20:
  79:Src/uart.c    **** 	if (Cmd == CMDTYPE_WR)
 196              		.loc 1 79 0
 197 000e 5525     		movs	r5, #85
 198 0010 6570     		strb	r5, [r4, #1]
  80:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+3;		      // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
 199              		.loc 1 80 0
 200 0012 3129     		cmp	r1, #49
 201 0014 0DD0     		beq	.L28
 202              	.LVL21:
  83:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 16


 203              		.loc 1 83 0
 204 0016 C41C     		adds	r4, r0, #3
 205 0018 1D4D     		ldr	r5, .L29+4
 206 001a AC70     		strb	r4, [r5, #2]
 207              	.L23:
  84:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 208              		.loc 1 84 0
 209 001c 1D4C     		ldr	r4, .L29+8
 210 001e A589     		ldrh	r5, [r4, #12]
 211              	.LVL22:
 212 0020 1B4C     		ldr	r4, .L29+4
 213 0022 E570     		strb	r5, [r4, #3]
 214              	.LVL23:
  85:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;
 215              		.loc 1 85 0
 216 0024 2171     		strb	r1, [r4, #4]
 217              	.LVL24:
  86:Src/uart.c    **** 	g_UART_TxBuf[pos++] = (Index>>8)&0xff;
 218              		.loc 1 86 0
 219 0026 6271     		strb	r2, [r4, #5]
 220              	.LVL25:
  87:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
 221              		.loc 1 87 0
 222 0028 120A     		lsrs	r2, r2, #8
 223              	.LVL26:
 224 002a A271     		strb	r2, [r4, #6]
 225              	.LVL27:
 226 002c 0724     		movs	r4, #7
  88:Src/uart.c    **** 	{
 227              		.loc 1 88 0
 228 002e 0022     		movs	r2, #0
 229 0030 0AE0     		b	.L24
 230              	.LVL28:
 231              	.L28:
  81:Src/uart.c    **** 	else
 232              		.loc 1 81 0
 233 0032 C41C     		adds	r4, r0, #3
 234 0034 164D     		ldr	r5, .L29+4
 235 0036 AC70     		strb	r4, [r5, #2]
 236 0038 F0E7     		b	.L23
 237              	.LVL29:
 238              	.L25:
  90:Src/uart.c    **** 	}
 239              		.loc 1 90 0 discriminator 3
 240 003a 611C     		adds	r1, r4, #1
 241              	.LVL30:
 242 003c 9E5C     		ldrb	r6, [r3, r2]	@ zero_extendqisi2
 243 003e 144D     		ldr	r5, .L29+4
 244 0040 2E55     		strb	r6, [r5, r4]
  88:Src/uart.c    **** 	{
 245              		.loc 1 88 0 discriminator 3
 246 0042 0132     		adds	r2, r2, #1
 247              	.LVL31:
 248 0044 12B2     		sxth	r2, r2
 249              	.LVL32:
  90:Src/uart.c    **** 	}
 250              		.loc 1 90 0 discriminator 3
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 17


 251 0046 8CB2     		uxth	r4, r1
 252              	.LVL33:
 253              	.L24:
  88:Src/uart.c    **** 	{
 254              		.loc 1 88 0 discriminator 1
 255 0048 8242     		cmp	r2, r0
 256 004a F6DB     		blt	.L25
  92:Src/uart.c    **** 	pos++;
 257              		.loc 1 92 0
 258 004c 124D     		ldr	r5, .L29+12
 259 004e A11E     		subs	r1, r4, #2
 260 0050 2846     		mov	r0, r5
 261              	.LVL34:
 262 0052 FFF7FEFF 		bl	CheckSum
 263              	.LVL35:
 264 0056 023D     		subs	r5, r5, #2
 265 0058 2855     		strb	r0, [r5, r4]
  93:Src/uart.c    **** 	if(g_fast_debug == 0)
 266              		.loc 1 93 0
 267 005a 0134     		adds	r4, r4, #1
 268              	.LVL36:
 269 005c A4B2     		uxth	r4, r4
 270              	.LVL37:
  94:Src/uart.c    **** 	{
 271              		.loc 1 94 0
 272 005e 0F4B     		ldr	r3, .L29+16
 273 0060 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 274 0062 73B9     		cbnz	r3, .L26
  97:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 275              		.loc 1 97 0
 276 0064 0E4A     		ldr	r2, .L29+20
 277 0066 1168     		ldr	r1, [r2]
 278 0068 0B68     		ldr	r3, [r1]
 279 006a 23F00103 		bic	r3, r3, #1
 280 006e 0B60     		str	r3, [r1]
  98:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 281              		.loc 1 98 0
 282 0070 1368     		ldr	r3, [r2]
 283 0072 0C4A     		ldr	r2, .L29+24
 284 0074 9A60     		str	r2, [r3, #8]
  99:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 285              		.loc 1 99 0
 286 0076 5C60     		str	r4, [r3, #4]
 100:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx);
 287              		.loc 1 100 0
 288 0078 DD60     		str	r5, [r3, #12]
 101:Src/uart.c    **** //		HAL_UART_Transmit_DMA(&huart1,&g_UART_TxBuf[0],8);
 289              		.loc 1 101 0
 290 007a 1A68     		ldr	r2, [r3]
 291 007c 42F00102 		orr	r2, r2, #1
 292 0080 1A60     		str	r2, [r3]
 293              	.L26:
 105:Src/uart.c    **** }
 294              		.loc 1 105 0
 295 0082 024B     		ldr	r3, .L29
 296 0084 0022     		movs	r2, #0
 297 0086 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 18


 106:Src/uart.c    **** 
 298              		.loc 1 106 0
 299 0088 70BD     		pop	{r4, r5, r6, pc}
 300              	.LVL38:
 301              	.L30:
 302 008a 00BF     		.align	2
 303              	.L29:
 304 008c 00000000 		.word	.LANCHOR0
 305 0090 00000000 		.word	g_UART_TxBuf
 306 0094 00000000 		.word	g_CmdMap
 307 0098 02000000 		.word	g_UART_TxBuf+2
 308 009c 00000000 		.word	.LANCHOR1
 309 00a0 00000000 		.word	hdma_usart1_tx
 310 00a4 28380140 		.word	1073821736
 311              		.cfi_endproc
 312              	.LFE335:
 314              		.section	.text.MX_USART1_UART_Init,"ax",%progbits
 315              		.align	1
 316              		.global	MX_USART1_UART_Init
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 320              		.fpu fpv4-sp-d16
 322              	MX_USART1_UART_Init:
 323              	.LFB336:
 112:Src/uart.c    **** 
 324              		.loc 1 112 0
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 0
 327              		@ frame_needed = 0, uses_anonymous_args = 0
 328 0000 10B5     		push	{r4, lr}
 329              	.LCFI5:
 330              		.cfi_def_cfa_offset 8
 331              		.cfi_offset 4, -8
 332              		.cfi_offset 14, -4
 121:Src/uart.c    **** 	huart1.Init.BaudRate = 115200;
 333              		.loc 1 121 0
 334 0002 2A4B     		ldr	r3, .L46
 335 0004 2A4A     		ldr	r2, .L46+4
 336 0006 1A60     		str	r2, [r3]
 122:Src/uart.c    **** 	
 337              		.loc 1 122 0
 338 0008 4FF4E132 		mov	r2, #115200
 339 000c 5A60     		str	r2, [r3, #4]
 124:Src/uart.c    **** 	{
 340              		.loc 1 124 0
 341 000e 294B     		ldr	r3, .L46+8
 342 0010 DB89     		ldrh	r3, [r3, #14]
 343 0012 1BB2     		sxth	r3, r3
 344 0014 012B     		cmp	r3, #1
 345 0016 32D0     		beq	.L33
 346 0018 032B     		cmp	r3, #3
 347 001a 35D0     		beq	.L34
 348 001c 53B3     		cbz	r3, .L41
 349              	.L32:
 144:Src/uart.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 350              		.loc 1 144 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 19


 351 001e 2348     		ldr	r0, .L46
 352 0020 0021     		movs	r1, #0
 353 0022 8160     		str	r1, [r0, #8]
 145:Src/uart.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 354              		.loc 1 145 0
 355 0024 C160     		str	r1, [r0, #12]
 146:Src/uart.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 356              		.loc 1 146 0
 357 0026 0161     		str	r1, [r0, #16]
 147:Src/uart.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 358              		.loc 1 147 0
 359 0028 0C23     		movs	r3, #12
 360 002a 4361     		str	r3, [r0, #20]
 148:Src/uart.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 361              		.loc 1 148 0
 362 002c 8161     		str	r1, [r0, #24]
 149:Src/uart.c    ****   huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 363              		.loc 1 149 0
 364 002e C161     		str	r1, [r0, #28]
 150:Src/uart.c    ****   huart1.Init.ClockPrescaler = UART_PRESCALER_DIV1;
 365              		.loc 1 150 0
 366 0030 0162     		str	r1, [r0, #32]
 151:Src/uart.c    ****   huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 367              		.loc 1 151 0
 368 0032 4162     		str	r1, [r0, #36]
 152:Src/uart.c    ****   if (HAL_RS485Ex_Init(&huart1, UART_DE_POLARITY_HIGH, 0, 0) != HAL_OK)
 369              		.loc 1 152 0
 370 0034 8162     		str	r1, [r0, #40]
 153:Src/uart.c    ****   {
 371              		.loc 1 153 0
 372 0036 0B46     		mov	r3, r1
 373 0038 0A46     		mov	r2, r1
 374 003a FFF7FEFF 		bl	HAL_RS485Ex_Init
 375              	.LVL39:
 376 003e 40BB     		cbnz	r0, .L42
 377              	.L36:
 157:Src/uart.c    ****   {
 378              		.loc 1 157 0
 379 0040 0021     		movs	r1, #0
 380 0042 1A48     		ldr	r0, .L46
 381 0044 FFF7FEFF 		bl	HAL_UARTEx_SetTxFifoThreshold
 382              	.LVL40:
 383 0048 30BB     		cbnz	r0, .L43
 384              	.L37:
 161:Src/uart.c    ****   {
 385              		.loc 1 161 0
 386 004a 0021     		movs	r1, #0
 387 004c 1748     		ldr	r0, .L46
 388 004e FFF7FEFF 		bl	HAL_UARTEx_SetRxFifoThreshold
 389              	.LVL41:
 390 0052 20BB     		cbnz	r0, .L44
 391              	.L38:
 165:Src/uart.c    ****   {
 392              		.loc 1 165 0
 393 0054 1548     		ldr	r0, .L46
 394 0056 FFF7FEFF 		bl	HAL_UARTEx_DisableFifoMode
 395              	.LVL42:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 20


 396 005a 18BB     		cbnz	r0, .L45
 397              	.L39:
 173:Src/uart.c    **** 	huart1.Instance->CR3 |= USART_CR3_DMAT;
 398              		.loc 1 173 0
 399 005c 134C     		ldr	r4, .L46
 400 005e 8022     		movs	r2, #128
 401 0060 1549     		ldr	r1, .L46+12
 402 0062 2046     		mov	r0, r4
 403 0064 FFF7FEFF 		bl	HAL_UARTEx_ReceiveToIdle_DMA
 404              	.LVL43:
 174:Src/uart.c    **** 	
 405              		.loc 1 174 0
 406 0068 2268     		ldr	r2, [r4]
 407 006a 9368     		ldr	r3, [r2, #8]
 408 006c 43F08003 		orr	r3, r3, #128
 409 0070 9360     		str	r3, [r2, #8]
 176:Src/uart.c    **** /**
 410              		.loc 1 176 0
 411 0072 10BD     		pop	{r4, pc}
 412              	.L41:
 127:Src/uart.c    **** 		break;
 413              		.loc 1 127 0
 414 0074 0D4B     		ldr	r3, .L46
 415 0076 4FF49642 		mov	r2, #19200
 416 007a 5A60     		str	r2, [r3, #4]
 128:Src/uart.c    **** 		case BAUD_UART_57600:
 417              		.loc 1 128 0
 418 007c CFE7     		b	.L32
 419              	.L33:
 130:Src/uart.c    **** 		break;
 420              		.loc 1 130 0
 421 007e 0B4B     		ldr	r3, .L46
 422 0080 4FF46142 		mov	r2, #57600
 423 0084 5A60     		str	r2, [r3, #4]
 131:Src/uart.c    **** 		case BAUD_UART_115200:
 424              		.loc 1 131 0
 425 0086 CAE7     		b	.L32
 426              	.L34:
 136:Src/uart.c    **** 		break;
 427              		.loc 1 136 0
 428 0088 084B     		ldr	r3, .L46
 429 008a 4FF46122 		mov	r2, #921600
 430 008e 5A60     		str	r2, [r3, #4]
 137:Src/uart.c    **** 		default:
 431              		.loc 1 137 0
 432 0090 C5E7     		b	.L32
 433              	.L42:
 434              	.LBB2:
 155:Src/uart.c    ****   }
 435              		.loc 1 155 0
 436 0092 FFF7FEFF 		bl	Error_Handler
 437              	.LVL44:
 438 0096 D3E7     		b	.L36
 439              	.L43:
 440              	.LBE2:
 441              	.LBB3:
 159:Src/uart.c    ****   }
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 21


 442              		.loc 1 159 0
 443 0098 FFF7FEFF 		bl	Error_Handler
 444              	.LVL45:
 445 009c D5E7     		b	.L37
 446              	.L44:
 447              	.LBE3:
 448              	.LBB4:
 163:Src/uart.c    ****   }
 449              		.loc 1 163 0
 450 009e FFF7FEFF 		bl	Error_Handler
 451              	.LVL46:
 452 00a2 D7E7     		b	.L38
 453              	.L45:
 454              	.LBE4:
 455              	.LBB5:
 167:Src/uart.c    ****   }
 456              		.loc 1 167 0
 457 00a4 FFF7FEFF 		bl	Error_Handler
 458              	.LVL47:
 459 00a8 D8E7     		b	.L39
 460              	.L47:
 461 00aa 00BF     		.align	2
 462              	.L46:
 463 00ac 00000000 		.word	huart1
 464 00b0 00380140 		.word	1073821696
 465 00b4 00000000 		.word	g_CmdMap
 466 00b8 00000000 		.word	g_UART_RxBuf
 467              	.LBE5:
 468              		.cfi_endproc
 469              	.LFE336:
 471              		.section	.text.UART_PushFrame_Old,"ax",%progbits
 472              		.align	1
 473              		.global	UART_PushFrame_Old
 474              		.syntax unified
 475              		.thumb
 476              		.thumb_func
 477              		.fpu fpv4-sp-d16
 479              	UART_PushFrame_Old:
 480              	.LFB337:
 187:Src/uart.c    **** 	s16 i;
 481              		.loc 1 187 0
 482              		.cfi_startproc
 483              		@ args = 0, pretend = 0, frame = 0
 484              		@ frame_needed = 0, uses_anonymous_args = 0
 485              	.LVL48:
 486 0000 70B5     		push	{r4, r5, r6, lr}
 487              	.LCFI6:
 488              		.cfi_def_cfa_offset 16
 489              		.cfi_offset 4, -16
 490              		.cfi_offset 5, -12
 491              		.cfi_offset 6, -8
 492              		.cfi_offset 14, -4
 493              	.LVL49:
 190:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0xAA;				      // Ö¡Í·
 494              		.loc 1 190 0
 495 0002 1D4C     		ldr	r4, .L53
 496 0004 0125     		movs	r5, #1
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 22


 497 0006 2570     		strb	r5, [r4]
 498              	.LVL50:
 191:Src/uart.c    **** 	g_UART_TxBuf[pos++] = 0x55;				      // Ö¡Í·	
 499              		.loc 1 191 0
 500 0008 1C4C     		ldr	r4, .L53+4
 501 000a AA25     		movs	r5, #170
 502 000c 2570     		strb	r5, [r4]
 503              	.LVL51:
 192:Src/uart.c    **** 	g_UART_TxBuf[pos++] = DataLen+2;		    // ï¿½ï¿½ï¿½Ý³ï¿½ï¿½ï¿½
 504              		.loc 1 192 0
 505 000e 5525     		movs	r5, #85
 506 0010 6570     		strb	r5, [r4, #1]
 507              	.LVL52:
 193:Src/uart.c    **** 	g_UART_TxBuf[pos++] = g_CmdMap[CMD_ID];	// ID
 508              		.loc 1 193 0
 509 0012 851C     		adds	r5, r0, #2
 510 0014 A570     		strb	r5, [r4, #2]
 194:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Cmd;
 511              		.loc 1 194 0
 512 0016 1A4D     		ldr	r5, .L53+8
 513 0018 AD89     		ldrh	r5, [r5, #12]
 514              	.LVL53:
 515 001a E570     		strb	r5, [r4, #3]
 516              	.LVL54:
 195:Src/uart.c    **** 	g_UART_TxBuf[pos++] = Index&0xff;       //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
 517              		.loc 1 195 0
 518 001c 2171     		strb	r1, [r4, #4]
 519              	.LVL55:
 196:Src/uart.c    **** 	for (i=0; i<DataLen; i++)
 520              		.loc 1 196 0
 521 001e 6271     		strb	r2, [r4, #5]
 522              	.LVL56:
 523 0020 0624     		movs	r4, #6
 197:Src/uart.c    **** 	{
 524              		.loc 1 197 0
 525 0022 0022     		movs	r2, #0
 526              	.LVL57:
 527 0024 06E0     		b	.L49
 528              	.LVL58:
 529              	.L50:
 199:Src/uart.c    **** 	}
 530              		.loc 1 199 0 discriminator 3
 531 0026 611C     		adds	r1, r4, #1
 532              	.LVL59:
 533 0028 9E5C     		ldrb	r6, [r3, r2]	@ zero_extendqisi2
 534 002a 144D     		ldr	r5, .L53+4
 535 002c 2E55     		strb	r6, [r5, r4]
 197:Src/uart.c    **** 	{
 536              		.loc 1 197 0 discriminator 3
 537 002e 0132     		adds	r2, r2, #1
 538              	.LVL60:
 539 0030 12B2     		sxth	r2, r2
 540              	.LVL61:
 199:Src/uart.c    **** 	}
 541              		.loc 1 199 0 discriminator 3
 542 0032 8CB2     		uxth	r4, r1
 543              	.LVL62:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 23


 544              	.L49:
 197:Src/uart.c    **** 	{
 545              		.loc 1 197 0 discriminator 1
 546 0034 8242     		cmp	r2, r0
 547 0036 F6DB     		blt	.L50
 201:Src/uart.c    **** 	pos++;
 548              		.loc 1 201 0
 549 0038 124D     		ldr	r5, .L53+12
 550 003a A11E     		subs	r1, r4, #2
 551 003c 2846     		mov	r0, r5
 552              	.LVL63:
 553 003e FFF7FEFF 		bl	CheckSum
 554              	.LVL64:
 555 0042 023D     		subs	r5, r5, #2
 556 0044 2855     		strb	r0, [r5, r4]
 202:Src/uart.c    **** 	if(g_fast_debug == 0)
 557              		.loc 1 202 0
 558 0046 0134     		adds	r4, r4, #1
 559              	.LVL65:
 560 0048 A4B2     		uxth	r4, r4
 561              	.LVL66:
 203:Src/uart.c    **** 	{
 562              		.loc 1 203 0
 563 004a 0F4B     		ldr	r3, .L53+16
 564 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 565 004e 73B9     		cbnz	r3, .L51
 205:Src/uart.c    **** 		hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 566              		.loc 1 205 0
 567 0050 0E4A     		ldr	r2, .L53+20
 568 0052 1168     		ldr	r1, [r2]
 569 0054 0B68     		ldr	r3, [r1]
 570 0056 23F00103 		bic	r3, r3, #1
 571 005a 0B60     		str	r3, [r1]
 206:Src/uart.c    **** 		hdma_usart1_tx.Instance->CNDTR = pos;//g_Frames[g_Frames_Tail].len;
 572              		.loc 1 206 0
 573 005c 1368     		ldr	r3, [r2]
 574 005e 0C4A     		ldr	r2, .L53+24
 575 0060 9A60     		str	r2, [r3, #8]
 207:Src/uart.c    **** 		hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_TxBuf[0];//(uint32_t)&(g_Frames[g_Frames_Tail].
 576              		.loc 1 207 0
 577 0062 5C60     		str	r4, [r3, #4]
 208:Src/uart.c    **** 		__HAL_DMA_ENABLE(&hdma_usart1_tx); 
 578              		.loc 1 208 0
 579 0064 DD60     		str	r5, [r3, #12]
 209:Src/uart.c    **** 	}		
 580              		.loc 1 209 0
 581 0066 1A68     		ldr	r2, [r3]
 582 0068 42F00102 		orr	r2, r2, #1
 583 006c 1A60     		str	r2, [r3]
 584              	.L51:
 211:Src/uart.c    **** }
 585              		.loc 1 211 0
 586 006e 024B     		ldr	r3, .L53
 587 0070 0022     		movs	r2, #0
 588 0072 1A70     		strb	r2, [r3]
 212:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½Ò»Ö¡ï¿½ï¿½ï¿½ï¿½
 589              		.loc 1 212 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 24


 590 0074 70BD     		pop	{r4, r5, r6, pc}
 591              	.LVL67:
 592              	.L54:
 593 0076 00BF     		.align	2
 594              	.L53:
 595 0078 00000000 		.word	.LANCHOR0
 596 007c 00000000 		.word	g_UART_TxBuf
 597 0080 00000000 		.word	g_CmdMap
 598 0084 02000000 		.word	g_UART_TxBuf+2
 599 0088 00000000 		.word	.LANCHOR1
 600 008c 00000000 		.word	hdma_usart1_tx
 601 0090 28380140 		.word	1073821736
 602              		.cfi_endproc
 603              	.LFE337:
 605              		.section	.text.int_last_usr_mode,"ax",%progbits
 606              		.align	1
 607              		.global	int_last_usr_mode
 608              		.syntax unified
 609              		.thumb
 610              		.thumb_func
 611              		.fpu fpv4-sp-d16
 613              	int_last_usr_mode:
 614              	.LFB338:
 218:Src/uart.c    **** 	last_usr_mode = g_CmdMap[CMD_USEER_MODE];
 615              		.loc 1 218 0
 616              		.cfi_startproc
 617              		@ args = 0, pretend = 0, frame = 0
 618              		@ frame_needed = 0, uses_anonymous_args = 0
 619              		@ link register save eliminated.
 219:Src/uart.c    **** }
 620              		.loc 1 219 0
 621 0000 034B     		ldr	r3, .L56
 622 0002 B3F84030 		ldrh	r3, [r3, #64]
 623 0006 1BB2     		sxth	r3, r3
 624 0008 024A     		ldr	r2, .L56+4
 625 000a 1360     		str	r3, [r2]
 220:Src/uart.c    **** 
 626              		.loc 1 220 0
 627 000c 7047     		bx	lr
 628              	.L57:
 629 000e 00BF     		.align	2
 630              	.L56:
 631 0010 00000000 		.word	g_CmdMap
 632 0014 00000000 		.word	.LANCHOR2
 633              		.cfi_endproc
 634              	.LFE338:
 636              		.global	__aeabi_ldivmod
 637              		.section	.text.UART_ParseFrame,"ax",%progbits
 638              		.align	1
 639              		.global	UART_ParseFrame
 640              		.syntax unified
 641              		.thumb
 642              		.thumb_func
 643              		.fpu fpv4-sp-d16
 645              	UART_ParseFrame:
 646              	.LFB339:
 223:Src/uart.c    **** 	s32 result = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 25


 647              		.loc 1 223 0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 0
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651              	.LVL68:
 652 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 653              	.LCFI7:
 654              		.cfi_def_cfa_offset 20
 655              		.cfi_offset 4, -20
 656              		.cfi_offset 5, -16
 657              		.cfi_offset 6, -12
 658              		.cfi_offset 7, -8
 659              		.cfi_offset 14, -4
 660 0002 83B0     		sub	sp, sp, #12
 661              	.LCFI8:
 662              		.cfi_def_cfa_offset 32
 663              	.LVL69:
 225:Src/uart.c    **** 	u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 664              		.loc 1 225 0
 665 0004 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 666 0006 C178     		ldrb	r1, [r0, #3]	@ zero_extendqisi2
 667 0008 01EB0225 		add	r5, r1, r2, lsl #8
 668              	.LVL70:
 232:Src/uart.c    **** 	{
 669              		.loc 1 232 0
 670 000c 4478     		ldrb	r4, [r0, #1]	@ zero_extendqisi2
 671 000e B34B     		ldr	r3, .L154
 672 0010 9B89     		ldrh	r3, [r3, #12]
 673 0012 1BB2     		sxth	r3, r3
 674 0014 9C42     		cmp	r4, r3
 675 0016 03D0     		beq	.L59
 232:Src/uart.c    **** 	{
 676              		.loc 1 232 0 is_stmt 0 discriminator 1
 677 0018 FF2C     		cmp	r4, #255
 678 001a 01D0     		beq	.L59
 679              	.LVL71:
 680              	.L58:
 564:Src/uart.c    **** 
 681              		.loc 1 564 0 is_stmt 1
 682 001c 03B0     		add	sp, sp, #12
 683              	.LCFI9:
 684              		.cfi_remember_state
 685              		.cfi_def_cfa_offset 20
 686              		@ sp needed
 687 001e F0BD     		pop	{r4, r5, r6, r7, pc}
 688              	.LVL72:
 689              	.L59:
 690              	.LCFI10:
 691              		.cfi_restore_state
 692 0020 0446     		mov	r4, r0
 237:Src/uart.c    **** 	if(pdata[FRA_CMD] == CMDTYPE_WR || pdata[FRA_CMD] == CMDTYPE_WR_NR)
 693              		.loc 1 237 0
 694 0022 AF4B     		ldr	r3, .L154+4
 695 0024 0120     		movs	r0, #1
 696              	.LVL73:
 697 0026 1870     		strb	r0, [r3]
 238:Src/uart.c    **** 	{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 26


 698              		.loc 1 238 0
 699 0028 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 700 002a 312B     		cmp	r3, #49
 701 002c 2DD0     		beq	.L61
 238:Src/uart.c    **** 	{
 702              		.loc 1 238 0 is_stmt 0 discriminator 1
 703 002e 332B     		cmp	r3, #51
 704 0030 2BD0     		beq	.L61
 430:Src/uart.c    **** 	{		
 705              		.loc 1 430 0 is_stmt 1
 706 0032 302B     		cmp	r3, #48
 707 0034 00F03482 		beq	.L121
 434:Src/uart.c    **** 	{		
 708              		.loc 1 434 0
 709 0038 322B     		cmp	r3, #50
 710 003a 00F03682 		beq	.L122
 439:Src/uart.c    **** 	{
 711              		.loc 1 439 0
 712 003e 382B     		cmp	r3, #56
 713 0040 00F03F82 		beq	.L123
 443:Src/uart.c    **** 	{
 714              		.loc 1 443 0
 715 0044 3C2B     		cmp	r3, #60
 716 0046 00F03F82 		beq	.L124
 447:Src/uart.c    **** 	{
 717              		.loc 1 447 0
 718 004a 392B     		cmp	r3, #57
 719 004c 00F03F82 		beq	.L125
 451:Src/uart.c    **** 	{		
 720              		.loc 1 451 0
 721 0050 012B     		cmp	r3, #1
 722 0052 00F03F82 		beq	.L126
 455:Src/uart.c    **** 	{
 723              		.loc 1 455 0
 724 0056 022B     		cmp	r3, #2
 725 0058 00F04082 		beq	.L127
 488:Src/uart.c    **** 	{
 726              		.loc 1 488 0
 727 005c 042B     		cmp	r3, #4
 728 005e 00F07B82 		beq	.L128
 522:Src/uart.c    **** 	{
 729              		.loc 1 522 0
 730 0062 203B     		subs	r3, r3, #32
 731 0064 DBB2     		uxtb	r3, r3
 732 0066 022B     		cmp	r3, #2
 733 0068 D8D8     		bhi	.L58
 525:Src/uart.c    **** 		{
 734              		.loc 1 525 0
 735 006a 3729     		cmp	r1, #55
 736 006c 00F08E82 		beq	.L129
 737              	.L114:
 538:Src/uart.c    **** 		//Flag_Set_OpenLen = 1;
 738              		.loc 1 538 0
 739 0070 FFF7FEFF 		bl	recPosCmd
 740              	.LVL74:
 540:Src/uart.c    **** //		pos_interpolation_B_um = pos_interpolation_A_um;
 741              		.loc 1 540 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 27


 742 0074 994B     		ldr	r3, .L154
 743 0076 4FF48042 		mov	r2, #16384
 744 007a A3F84620 		strh	r2, [r3, #70]	@ movhi
 558:Src/uart.c    **** 	}
 745              		.loc 1 558 0
 746 007e 0022     		movs	r2, #0
 747 0080 E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 748 0082 A078     		ldrb	r0, [r4, #2]	@ zero_extendqisi2
 749 0084 FFF7FEFF 		bl	Return_OldFrame_state
 750              	.LVL75:
 751 0088 C8E7     		b	.L58
 752              	.L61:
 240:Src/uart.c    **** 		flag_is_writable = 1;		
 753              		.loc 1 240 0
 754 008a 964B     		ldr	r3, .L154+8
 755 008c 1E88     		ldrh	r6, [r3]
 756 008e 023E     		subs	r6, r6, #2
 757 0090 7610     		asrs	r6, r6, #1
 758              	.LVL76:
 241:Src/uart.c    **** 		if(Index>=USERCMDMAP_LEN)
 759              		.loc 1 241 0
 760 0092 954B     		ldr	r3, .L154+12
 761 0094 0122     		movs	r2, #1
 762 0096 1A70     		strb	r2, [r3]
 242:Src/uart.c    **** 		{
 763              		.loc 1 242 0
 764 0098 FF2D     		cmp	r5, #255
 765 009a 40F39D80 		ble	.L116
 245:Src/uart.c    **** 			{
 766              		.loc 1 245 0
 767 009e 8F4B     		ldr	r3, .L154
 768 00a0 5B8B     		ldrh	r3, [r3, #26]
 769 00a2 1BB2     		sxth	r3, r3
 770 00a4 41F23422 		movw	r2, #4660
 771 00a8 9342     		cmp	r3, r2
 772 00aa 00F08680 		beq	.L117
 247:Src/uart.c    **** 			}
 773              		.loc 1 247 0
 774 00ae 8E4B     		ldr	r3, .L154+12
 775 00b0 0022     		movs	r2, #0
 776 00b2 1A70     		strb	r2, [r3]
 777              	.LVL77:
 778              	.L65:
 267:Src/uart.c    **** 		{	
 779              		.loc 1 267 0
 780 00b4 8C4B     		ldr	r3, .L154+12
 781 00b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 782 00b8 012B     		cmp	r3, #1
 783 00ba 00F08F80 		beq	.L130
 784              	.L70:
 279:Src/uart.c    **** 		{	
 785              		.loc 1 279 0
 786 00be 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 787 00c0 FF2B     		cmp	r3, #255
 788 00c2 03D0     		beq	.L73
 279:Src/uart.c    **** 		{	
 789              		.loc 1 279 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 28


 790 00c4 A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 791 00c6 312B     		cmp	r3, #49
 792 00c8 00F09780 		beq	.L131
 793              	.L73:
 283:Src/uart.c    **** 		{
 794              		.loc 1 283 0 is_stmt 1
 795 00cc A5F5B873 		sub	r3, r5, #368
 796 00d0 B3F5BE7F 		cmp	r3, #380
 797 00d4 40F29680 		bls	.L132
 798              	.L74:
 287:Src/uart.c    **** 		{
 799              		.loc 1 287 0
 800 00d8 232D     		cmp	r5, #35
 801 00da 09DC     		bgt	.L75
 287:Src/uart.c    **** 		{
 802              		.loc 1 287 0 is_stmt 0 discriminator 1
 803 00dc AB19     		adds	r3, r5, r6
 804 00de 232B     		cmp	r3, #35
 805 00e0 06DD     		ble	.L75
 287:Src/uart.c    **** 		{
 806              		.loc 1 287 0 discriminator 2
 807 00e2 7E4B     		ldr	r3, .L154
 808 00e4 B3F80432 		ldrh	r3, [r3, #516]
 809 00e8 1BB2     		sxth	r3, r3
 810 00ea 022B     		cmp	r3, #2
 811 00ec 00F08D80 		beq	.L133
 812              	.L75:
 295:Src/uart.c    **** 		{
 813              		.loc 1 295 0 is_stmt 1
 814 00f0 222D     		cmp	r5, #34
 815 00f2 09DC     		bgt	.L76
 295:Src/uart.c    **** 		{
 816              		.loc 1 295 0 is_stmt 0 discriminator 1
 817 00f4 AB19     		adds	r3, r5, r6
 818 00f6 232B     		cmp	r3, #35
 819 00f8 06DD     		ble	.L76
 295:Src/uart.c    **** 		{
 820              		.loc 1 295 0 discriminator 2
 821 00fa 784B     		ldr	r3, .L154
 822 00fc B3F84030 		ldrh	r3, [r3, #64]
 823 0100 1BB2     		sxth	r3, r3
 824 0102 052B     		cmp	r3, #5
 825 0104 00F08C80 		beq	.L134
 826              	.L76:
 380:Src/uart.c    **** 			&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_M
 827              		.loc 1 380 0 is_stmt 1
 828 0108 242D     		cmp	r5, #36
 829 010a 19DC     		bgt	.L87
 380:Src/uart.c    **** 			&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_M
 830              		.loc 1 380 0 is_stmt 0 discriminator 1
 831 010c AB19     		adds	r3, r5, r6
 832 010e 242B     		cmp	r3, #36
 833 0110 16DD     		ble	.L87
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 834              		.loc 1 381 0 is_stmt 1
 835 0112 724B     		ldr	r3, .L154
 836 0114 B3F84030 		ldrh	r3, [r3, #64]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 29


 837 0118 1BB2     		sxth	r3, r3
 838 011a 022B     		cmp	r3, #2
 839 011c 0AD0     		beq	.L88
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 840              		.loc 1 381 0 is_stmt 0 discriminator 1
 841 011e 6F4B     		ldr	r3, .L154
 842 0120 B3F84030 		ldrh	r3, [r3, #64]
 843 0124 1BB2     		sxth	r3, r3
 844 0126 2BB1     		cbz	r3, .L88
 381:Src/uart.c    **** 			)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 845              		.loc 1 381 0 discriminator 2
 846 0128 6C4B     		ldr	r3, .L154
 847 012a B3F84030 		ldrh	r3, [r3, #64]
 848 012e 1BB2     		sxth	r3, r3
 849 0130 012B     		cmp	r3, #1
 850 0132 05D1     		bne	.L87
 851              	.L88:
 384:Src/uart.c    **** 				recPosCmd();
 852              		.loc 1 384 0 is_stmt 1
 853 0134 694B     		ldr	r3, .L154
 854 0136 0322     		movs	r2, #3
 855 0138 A3F80422 		strh	r2, [r3, #516]	@ movhi
 385:Src/uart.c    **** 		}
 856              		.loc 1 385 0
 857 013c FFF7FEFF 		bl	recPosCmd
 858              	.LVL78:
 859              	.L87:
 387:Src/uart.c    **** 		{
 860              		.loc 1 387 0
 861 0140 222D     		cmp	r5, #34
 862 0142 09DC     		bgt	.L89
 387:Src/uart.c    **** 		{
 863              		.loc 1 387 0 is_stmt 0 discriminator 1
 864 0144 2E44     		add	r6, r6, r5
 865              	.LVL79:
 866 0146 212E     		cmp	r6, #33
 867 0148 06DD     		ble	.L89
 387:Src/uart.c    **** 		{
 868              		.loc 1 387 0 discriminator 2
 869 014a 644B     		ldr	r3, .L154
 870 014c B3F84030 		ldrh	r3, [r3, #64]
 871 0150 1BB2     		sxth	r3, r3
 872 0152 042B     		cmp	r3, #4
 873 0154 00F01C81 		beq	.L135
 874              	.L89:
 392:Src/uart.c    **** 		{
 875              		.loc 1 392 0 is_stmt 1
 876 0158 40F20713 		movw	r3, #263
 877 015c 9D42     		cmp	r5, r3
 878 015e 00F01F81 		beq	.L136
 879              	.LVL80:
 880              	.L90:
 404:Src/uart.c    **** 		{
 881              		.loc 1 404 0
 882 0162 B5F5937F 		cmp	r5, #294
 883 0166 00F06181 		beq	.L137
 884              	.L94:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 30


 409:Src/uart.c    **** 		{
 885              		.loc 1 409 0
 886 016a 40F20313 		movw	r3, #259
 887 016e 9D42     		cmp	r5, r3
 888 0170 00F07281 		beq	.L138
 889              	.L95:
 415:Src/uart.c    **** 		{
 890              		.loc 1 415 0
 891 0174 502D     		cmp	r5, #80
 892 0176 00F07A81 		beq	.L139
 893              	.L96:
 424:Src/uart.c    **** 		{
 894              		.loc 1 424 0
 895 017a 584B     		ldr	r3, .L154
 896 017c B3F84030 		ldrh	r3, [r3, #64]
 897 0180 1BB2     		sxth	r3, r3
 898 0182 5A4A     		ldr	r2, .L154+16
 899 0184 1268     		ldr	r2, [r2]
 900 0186 9342     		cmp	r3, r2
 901 0188 3FF448AF 		beq	.L58
 426:Src/uart.c    **** 			g_CmdMap[CMD_PAUSE] =1 ;
 902              		.loc 1 426 0
 903 018c 534A     		ldr	r2, .L154
 904 018e B2F84030 		ldrh	r3, [r2, #64]
 905 0192 1BB2     		sxth	r3, r3
 906 0194 5549     		ldr	r1, .L154+16
 907 0196 0B60     		str	r3, [r1]
 427:Src/uart.c    **** 		}
 908              		.loc 1 427 0
 909 0198 0123     		movs	r3, #1
 910 019a 9382     		strh	r3, [r2, #20]	@ movhi
 911 019c 3EE7     		b	.L58
 912              	.LVL81:
 913              	.L66:
 251:Src/uart.c    **** 				{
 914              		.loc 1 251 0 discriminator 2
 915 019e 0133     		adds	r3, r3, #1
 916              	.LVL82:
 917              	.L64:
 251:Src/uart.c    **** 				{
 918              		.loc 1 251 0 is_stmt 0 discriminator 1
 919 01a0 B342     		cmp	r3, r6
 920 01a2 87DA     		bge	.L65
 253:Src/uart.c    **** 					flag_is_writable = 0;			
 921              		.loc 1 253 0 is_stmt 1
 922 01a4 EA18     		adds	r2, r5, r3
 923 01a6 A2F58072 		sub	r2, r2, #256
 924 01aa 5149     		ldr	r1, .L154+20
 925 01ac 525C     		ldrb	r2, [r2, r1]	@ zero_extendqisi2
 926 01ae 022A     		cmp	r2, #2
 927 01b0 F5D0     		beq	.L66
 254:Src/uart.c    **** 				}
 928              		.loc 1 254 0
 929 01b2 4D4A     		ldr	r2, .L154+12
 930 01b4 0021     		movs	r1, #0
 931 01b6 1170     		strb	r1, [r2]
 932 01b8 F1E7     		b	.L66
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 31


 933              	.LVL83:
 934              	.L117:
 251:Src/uart.c    **** 				{
 935              		.loc 1 251 0
 936 01ba 0023     		movs	r3, #0
 937 01bc F0E7     		b	.L64
 938              	.LVL84:
 939              	.L68:
 261:Src/uart.c    **** 			{
 940              		.loc 1 261 0 discriminator 2
 941 01be 0133     		adds	r3, r3, #1
 942              	.LVL85:
 943              	.L63:
 261:Src/uart.c    **** 			{
 944              		.loc 1 261 0 is_stmt 0 discriminator 1
 945 01c0 B342     		cmp	r3, r6
 946 01c2 BFF677AF 		bge	.L65
 263:Src/uart.c    **** 				flag_is_writable = 0;
 947              		.loc 1 263 0 is_stmt 1
 948 01c6 EA18     		adds	r2, r5, r3
 949 01c8 4A49     		ldr	r1, .L154+24
 950 01ca 525C     		ldrb	r2, [r2, r1]	@ zero_extendqisi2
 951 01cc 022A     		cmp	r2, #2
 952 01ce F6D0     		beq	.L68
 264:Src/uart.c    **** 			}
 953              		.loc 1 264 0
 954 01d0 454A     		ldr	r2, .L154+12
 955 01d2 0021     		movs	r1, #0
 956 01d4 1170     		strb	r1, [r2]
 957 01d6 F2E7     		b	.L68
 958              	.LVL86:
 959              	.L116:
 261:Src/uart.c    **** 			{
 960              		.loc 1 261 0
 961 01d8 0023     		movs	r3, #0
 962 01da F1E7     		b	.L63
 963              	.LVL87:
 964              	.L130:
 270:Src/uart.c    **** 			for(i=0;i<((g_UART_RXlen-2-1));i++)
 965              		.loc 1 270 0
 966 01dc 3F49     		ldr	r1, .L154
 967 01de 01EB4501 		add	r1, r1, r5, lsl #1
 968              	.LVL88:
 271:Src/uart.c    **** 			{
 969              		.loc 1 271 0
 970 01e2 0023     		movs	r3, #0
 971 01e4 03E0     		b	.L71
 972              	.LVL89:
 973              	.L72:
 273:Src/uart.c    **** 			}
 974              		.loc 1 273 0 discriminator 3
 975 01e6 5A1D     		adds	r2, r3, #5
 976 01e8 A25C     		ldrb	r2, [r4, r2]	@ zero_extendqisi2
 977 01ea CA54     		strb	r2, [r1, r3]
 271:Src/uart.c    **** 			{
 978              		.loc 1 271 0 discriminator 3
 979 01ec 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 32


 980              	.LVL90:
 981              	.L71:
 271:Src/uart.c    **** 			{
 982              		.loc 1 271 0 is_stmt 0 discriminator 1
 983 01ee 3D4A     		ldr	r2, .L154+8
 984 01f0 1288     		ldrh	r2, [r2]
 985 01f2 033A     		subs	r2, r2, #3
 986 01f4 9A42     		cmp	r2, r3
 987 01f6 F6DC     		bgt	.L72
 988 01f8 61E7     		b	.L70
 989              	.LVL91:
 990              	.L131:
 281:Src/uart.c    **** 		}
 991              		.loc 1 281 0 is_stmt 1
 992 01fa E9B2     		uxtb	r1, r5
 993 01fc 3120     		movs	r0, #49
 994 01fe FFF7FEFF 		bl	Return_state_frame
 995              	.LVL92:
 996 0202 63E7     		b	.L73
 997              	.L132:
 285:Src/uart.c    **** 		}
 998              		.loc 1 285 0
 999 0204 FFF7FEFF 		bl	pos_linearity_ini
 1000              	.LVL93:
 1001 0208 66E7     		b	.L74
 1002              	.L133:
 289:Src/uart.c    **** 			{
 1003              		.loc 1 289 0
 1004 020a 344B     		ldr	r3, .L154
 1005 020c 5B8A     		ldrh	r3, [r3, #18]
 1006 020e 1BB2     		sxth	r3, r3
 1007 0210 002B     		cmp	r3, #0
 1008 0212 7FF46DAF 		bne	.L75
 291:Src/uart.c    **** 			}
 1009              		.loc 1 291 0
 1010 0216 314B     		ldr	r3, .L154
 1011 0218 0122     		movs	r2, #1
 1012 021a A3F80222 		strh	r2, [r3, #514]	@ movhi
 1013 021e 67E7     		b	.L75
 1014              	.L134:
 302:Src/uart.c    **** 				{
 1015              		.loc 1 302 0
 1016 0220 2E4B     		ldr	r3, .L154
 1017 0222 5B8D     		ldrh	r3, [r3, #42]
 1018 0224 1BB2     		sxth	r3, r3
 1019 0226 2BBB     		cbnz	r3, .L77
 304:Src/uart.c    **** 					force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 1020              		.loc 1 304 0
 1021 0228 2C4B     		ldr	r3, .L154
 1022 022a B3F84410 		ldrh	r1, [r3, #68]
 1023 022e 324A     		ldr	r2, .L154+28
 1024 0230 1180     		strh	r1, [r2]	@ movhi
 305:Src/uart.c    **** 				}
 1025              		.loc 1 305 0
 1026 0232 B3F85A20 		ldrh	r2, [r3, #90]
 1027 0236 314B     		ldr	r3, .L154+32
 1028 0238 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 33


 1029              	.L78:
 313:Src/uart.c    **** 						{
 1030              		.loc 1 313 0
 1031 023a 2F4B     		ldr	r3, .L154+28
 1032 023c 1B88     		ldrh	r3, [r3]
 1033 023e 1BB2     		sxth	r3, r3
 1034 0240 002B     		cmp	r3, #0
 1035 0242 5FDD     		ble	.L79
 315:Src/uart.c    **** 							{
 1036              		.loc 1 315 0
 1037 0244 2C4B     		ldr	r3, .L154+28
 1038 0246 1A88     		ldrh	r2, [r3]
 1039 0248 12B2     		sxth	r2, r2
 1040 024a 2C4B     		ldr	r3, .L154+32
 1041 024c 1B88     		ldrh	r3, [r3]
 1042 024e 1BB2     		sxth	r3, r3
 1043 0250 9A42     		cmp	r2, r3
 1044 0252 27DD     		ble	.L80
 317:Src/uart.c    **** 								{
 1045              		.loc 1 317 0
 1046 0254 214B     		ldr	r3, .L154
 1047 0256 B3F84820 		ldrh	r2, [r3, #72]
 1048 025a 12B2     		sxth	r2, r2
 1049 025c B3F84C30 		ldrh	r3, [r3, #76]
 1050 0260 1BB2     		sxth	r3, r3
 1051 0262 9A42     		cmp	r2, r3
 1052 0264 14DC     		bgt	.L140
 325:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 1053              		.loc 1 325 0
 1054 0266 0223     		movs	r3, #2
 1055 0268 254A     		ldr	r2, .L154+36
 1056 026a 1370     		strb	r3, [r2]
 326:Src/uart.c    **** 								}
 1057              		.loc 1 326 0
 1058 026c 1B4A     		ldr	r2, .L154
 1059 026e A2F80432 		strh	r3, [r2, #516]	@ movhi
 1060 0272 49E7     		b	.L76
 1061              	.L77:
 309:Src/uart.c    **** 					force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 1062              		.loc 1 309 0
 1063 0274 194A     		ldr	r2, .L154
 1064 0276 B2F84430 		ldrh	r3, [r2, #68]
 1065 027a 5B42     		negs	r3, r3
 1066 027c 1BB2     		sxth	r3, r3
 1067 027e 1E49     		ldr	r1, .L154+28
 1068 0280 0B80     		strh	r3, [r1]	@ movhi
 310:Src/uart.c    **** 				}
 1069              		.loc 1 310 0
 1070 0282 B2F85A30 		ldrh	r3, [r2, #90]
 1071 0286 5B42     		negs	r3, r3
 1072 0288 1BB2     		sxth	r3, r3
 1073 028a 1C4A     		ldr	r2, .L154+32
 1074 028c 1380     		strh	r3, [r2]	@ movhi
 1075 028e D4E7     		b	.L78
 1076              	.L140:
 319:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 1077              		.loc 1 319 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 34


 1078 0290 1B4B     		ldr	r3, .L154+36
 1079 0292 0122     		movs	r2, #1
 1080 0294 1A70     		strb	r2, [r3]
 320:Src/uart.c    **** 									recPosCmd();
 1081              		.loc 1 320 0
 1082 0296 114B     		ldr	r3, .L154
 1083 0298 0322     		movs	r2, #3
 1084 029a A3F80422 		strh	r2, [r3, #516]	@ movhi
 321:Src/uart.c    **** 								}
 1085              		.loc 1 321 0
 1086 029e FFF7FEFF 		bl	recPosCmd
 1087              	.LVL94:
 1088 02a2 31E7     		b	.L76
 1089              	.L80:
 331:Src/uart.c    **** 								{
 1090              		.loc 1 331 0
 1091 02a4 0D4B     		ldr	r3, .L154
 1092 02a6 B3F84820 		ldrh	r2, [r3, #72]
 1093 02aa 12B2     		sxth	r2, r2
 1094 02ac B3F84C30 		ldrh	r3, [r3, #76]
 1095 02b0 1BB2     		sxth	r3, r3
 1096 02b2 9A42     		cmp	r2, r3
 1097 02b4 07DC     		bgt	.L141
 339:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 1098              		.loc 1 339 0
 1099 02b6 124B     		ldr	r3, .L154+36
 1100 02b8 0322     		movs	r2, #3
 1101 02ba 1A70     		strb	r2, [r3]
 340:Src/uart.c    **** 								}				
 1102              		.loc 1 340 0
 1103 02bc 074B     		ldr	r3, .L154
 1104 02be 0422     		movs	r2, #4
 1105 02c0 A3F80422 		strh	r2, [r3, #516]	@ movhi
 1106 02c4 20E7     		b	.L76
 1107              	.L141:
 333:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 1108              		.loc 1 333 0
 1109 02c6 0E4B     		ldr	r3, .L154+36
 1110 02c8 0122     		movs	r2, #1
 1111 02ca 1A70     		strb	r2, [r3]
 334:Src/uart.c    **** 									recPosCmd();
 1112              		.loc 1 334 0
 1113 02cc 034B     		ldr	r3, .L154
 1114 02ce 0322     		movs	r2, #3
 1115 02d0 A3F80422 		strh	r2, [r3, #516]	@ movhi
 335:Src/uart.c    **** 								}
 1116              		.loc 1 335 0
 1117 02d4 FFF7FEFF 		bl	recPosCmd
 1118              	.LVL95:
 1119 02d8 16E7     		b	.L76
 1120              	.L155:
 1121 02da 00BF     		.align	2
 1122              	.L154:
 1123 02dc 00000000 		.word	g_CmdMap
 1124 02e0 00000000 		.word	.LANCHOR3
 1125 02e4 00000000 		.word	.LANCHOR4
 1126 02e8 00000000 		.word	.LANCHOR5
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 35


 1127 02ec 00000000 		.word	.LANCHOR2
 1128 02f0 00000000 		.word	g_CmdMap_bWR
 1129 02f4 00000000 		.word	g_CmdMap_User_bWR
 1130 02f8 00000000 		.word	force_set
 1131 02fc 00000000 		.word	force_act
 1132 0300 00000000 		.word	status_Mode_POSITION_FORCE
 1133              	.L79:
 344:Src/uart.c    **** 						{													
 1134              		.loc 1 344 0
 1135 0304 AE4B     		ldr	r3, .L156
 1136 0306 1B88     		ldrh	r3, [r3]
 1137 0308 13F4004F 		tst	r3, #32768
 1138 030c 03D1     		bne	.L142
 377:Src/uart.c    **** 				}				
 1139              		.loc 1 377 0
 1140 030e AD4B     		ldr	r3, .L156+4
 1141 0310 0322     		movs	r2, #3
 1142 0312 1A70     		strb	r2, [r3]
 1143 0314 F8E6     		b	.L76
 1144              	.L142:
 346:Src/uart.c    **** 							{
 1145              		.loc 1 346 0
 1146 0316 AA4B     		ldr	r3, .L156
 1147 0318 1A88     		ldrh	r2, [r3]
 1148 031a 12B2     		sxth	r2, r2
 1149 031c AA4B     		ldr	r3, .L156+8
 1150 031e 1B88     		ldrh	r3, [r3]
 1151 0320 1BB2     		sxth	r3, r3
 1152 0322 9A42     		cmp	r2, r3
 1153 0324 19DA     		bge	.L84
 348:Src/uart.c    **** 								{
 1154              		.loc 1 348 0
 1155 0326 A94B     		ldr	r3, .L156+12
 1156 0328 B3F84820 		ldrh	r2, [r3, #72]
 1157 032c 12B2     		sxth	r2, r2
 1158 032e B3F84C30 		ldrh	r3, [r3, #76]
 1159 0332 1BB2     		sxth	r3, r3
 1160 0334 9A42     		cmp	r2, r3
 1161 0336 06DB     		blt	.L143
 356:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 1162              		.loc 1 356 0
 1163 0338 0223     		movs	r3, #2
 1164 033a A24A     		ldr	r2, .L156+4
 1165 033c 1370     		strb	r3, [r2]
 357:Src/uart.c    **** 								}
 1166              		.loc 1 357 0
 1167 033e A34A     		ldr	r2, .L156+12
 1168 0340 A2F80432 		strh	r3, [r2, #516]	@ movhi
 1169 0344 E0E6     		b	.L76
 1170              	.L143:
 350:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 1171              		.loc 1 350 0
 1172 0346 9F4B     		ldr	r3, .L156+4
 1173 0348 0122     		movs	r2, #1
 1174 034a 1A70     		strb	r2, [r3]
 351:Src/uart.c    **** 									recPosCmd();
 1175              		.loc 1 351 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 36


 1176 034c 9F4B     		ldr	r3, .L156+12
 1177 034e 0322     		movs	r2, #3
 1178 0350 A3F80422 		strh	r2, [r3, #516]	@ movhi
 352:Src/uart.c    **** 								}
 1179              		.loc 1 352 0
 1180 0354 FFF7FEFF 		bl	recPosCmd
 1181              	.LVL96:
 1182 0358 D6E6     		b	.L76
 1183              	.L84:
 362:Src/uart.c    **** 								{
 1184              		.loc 1 362 0
 1185 035a 9C4B     		ldr	r3, .L156+12
 1186 035c B3F84820 		ldrh	r2, [r3, #72]
 1187 0360 12B2     		sxth	r2, r2
 1188 0362 B3F84C30 		ldrh	r3, [r3, #76]
 1189 0366 1BB2     		sxth	r3, r3
 1190 0368 9A42     		cmp	r2, r3
 1191 036a 07DB     		blt	.L144
 370:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 1192              		.loc 1 370 0
 1193 036c 954B     		ldr	r3, .L156+4
 1194 036e 0322     		movs	r2, #3
 1195 0370 1A70     		strb	r2, [r3]
 371:Src/uart.c    **** 								}				
 1196              		.loc 1 371 0
 1197 0372 964B     		ldr	r3, .L156+12
 1198 0374 0422     		movs	r2, #4
 1199 0376 A3F80422 		strh	r2, [r3, #516]	@ movhi
 1200 037a C5E6     		b	.L76
 1201              	.L144:
 364:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 1202              		.loc 1 364 0
 1203 037c 914B     		ldr	r3, .L156+4
 1204 037e 0122     		movs	r2, #1
 1205 0380 1A70     		strb	r2, [r3]
 365:Src/uart.c    **** 									recPosCmd();
 1206              		.loc 1 365 0
 1207 0382 924B     		ldr	r3, .L156+12
 1208 0384 0322     		movs	r2, #3
 1209 0386 A3F80422 		strh	r2, [r3, #516]	@ movhi
 366:Src/uart.c    **** 								}
 1210              		.loc 1 366 0
 1211 038a FFF7FEFF 		bl	recPosCmd
 1212              	.LVL97:
 1213 038e BBE6     		b	.L76
 1214              	.LVL98:
 1215              	.L135:
 389:Src/uart.c    **** 				g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 1216              		.loc 1 389 0
 1217 0390 8E4B     		ldr	r3, .L156+12
 1218 0392 0122     		movs	r2, #1
 1219 0394 A3F80222 		strh	r2, [r3, #514]	@ movhi
 390:Src/uart.c    **** 		}
 1220              		.loc 1 390 0
 1221 0398 0422     		movs	r2, #4
 1222 039a A3F80422 		strh	r2, [r3, #516]	@ movhi
 1223 039e DBE6     		b	.L89
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 37


 1224              	.L136:
 395:Src/uart.c    **** 			{
 1225              		.loc 1 395 0
 1226 03a0 8A4B     		ldr	r3, .L156+12
 1227 03a2 B3F81832 		ldrh	r3, [r3, #536]
 1228 03a6 1BB2     		sxth	r3, r3
 1229 03a8 012B     		cmp	r3, #1
 1230 03aa 11D0     		beq	.L145
 401:Src/uart.c    **** 				range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_offs
 1231              		.loc 1 401 0
 1232 03ac 884B     		ldr	r3, .L156+16
 1233 03ae 1B68     		ldr	r3, [r3]
 1234 03b0 884A     		ldr	r2, .L156+20
 1235 03b2 1268     		ldr	r2, [r2]
 1236 03b4 1A60     		str	r2, [r3]
 1237              	.LVL99:
 1238              	.L93:
 402:Src/uart.c    **** 		}
 1239              		.loc 1 402 0
 1240 03b6 864B     		ldr	r3, .L156+16
 1241 03b8 1B68     		ldr	r3, [r3]
 1242 03ba 1B68     		ldr	r3, [r3]
 1243 03bc C3F1FF13 		rsb	r3, r3, #16711935
 1244 03c0 03F57F43 		add	r3, r3, #65280
 1245 03c4 844A     		ldr	r2, .L156+24
 1246 03c6 1268     		ldr	r2, [r2]
 1247 03c8 D31A     		subs	r3, r2, r3
 1248 03ca 844A     		ldr	r2, .L156+28
 1249 03cc 1360     		str	r3, [r2]
 1250 03ce C8E6     		b	.L90
 1251              	.LVL100:
 1252              	.L145:
 398:Src/uart.c    **** 			}
 1253              		.loc 1 398 0
 1254 03d0 7E49     		ldr	r1, .L156+12
 1255 03d2 B1F80E22 		ldrh	r2, [r1, #526]
 1256 03d6 13B2     		sxth	r3, r2
 1257 03d8 814A     		ldr	r2, .L156+32
 1258 03da 1268     		ldr	r2, [r2]
 1259 03dc 1268     		ldr	r2, [r2]
 1260 03de 02FB03F2 		mul	r2, r2, r3
 1261 03e2 D717     		asrs	r7, r2, #31
 1262 03e4 B1F85002 		ldrh	r0, [r1, #592]
 1263 03e8 03B2     		sxth	r3, r0
 1264 03ea DC17     		asrs	r4, r3, #31
 1265              	.LVL101:
 1266 03ec 02FB04F1 		mul	r1, r2, r4
 1267 03f0 03FB0711 		mla	r1, r3, r7, r1
 1268 03f4 A2FB0323 		umull	r2, r3, r2, r3
 1269 03f8 0B44     		add	r3, r3, r1
 1270 03fa 1646     		mov	r6, r2
 1271 03fc 1F46     		mov	r7, r3
 1272 03fe 002A     		cmp	r2, #0
 1273 0400 73F10001 		sbcs	r1, r3, #0
 1274 0404 0DDB     		blt	.L146
 1275              	.L92:
 1276 0406 300A     		lsrs	r0, r6, #8
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 38


 1277 0408 704B     		ldr	r3, .L156+12
 1278 040a B3F84E22 		ldrh	r2, [r3, #590]
 1279 040e 12B2     		sxth	r2, r2
 1280 0410 D317     		asrs	r3, r2, #31
 1281 0412 40EA0760 		orr	r0, r0, r7, lsl #24
 1282 0416 3912     		asrs	r1, r7, #8
 1283 0418 FFF7FEFF 		bl	__aeabi_ldivmod
 1284              	.LVL102:
 1285 041c 714B     		ldr	r3, .L156+36
 1286 041e 1860     		str	r0, [r3]
 1287 0420 C9E7     		b	.L93
 1288              	.L146:
 1289 0422 12F1FF06 		adds	r6, r2, #255
 1290 0426 43F10007 		adc	r7, r3, #0
 1291 042a ECE7     		b	.L92
 1292              	.L137:
 406:Src/uart.c    **** 				g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 1293              		.loc 1 406 0
 1294 042c 674B     		ldr	r3, .L156+12
 1295 042e B3F84C32 		ldrh	r3, [r3, #588]
 1296 0432 1BB2     		sxth	r3, r3
 1297 0434 6C4A     		ldr	r2, .L156+40
 1298 0436 1360     		str	r3, [r2]
 407:Src/uart.c    **** 		}
 1299              		.loc 1 407 0
 1300 0438 1368     		ldr	r3, [r2]
 1301 043a 6C4A     		ldr	r2, .L156+44
 1302 043c B2F90020 		ldrsh	r2, [r2]
 1303 0440 03FB02F3 		mul	r3, r3, r2
 1304 0444 6A4A     		ldr	r2, .L156+48
 1305 0446 82FB0312 		smull	r1, r2, r2, r3
 1306 044a 1A44     		add	r2, r2, r3
 1307 044c DB17     		asrs	r3, r3, #31
 1308 044e C3EB2223 		rsb	r3, r3, r2, asr #8
 1309 0452 684A     		ldr	r2, .L156+52
 1310 0454 1360     		str	r3, [r2]
 1311 0456 88E6     		b	.L94
 1312              	.L138:
 411:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART2] = g_CmdMap[SYS_SN_PART2];
 1313              		.loc 1 411 0
 1314 0458 5C4B     		ldr	r3, .L156+12
 1315 045a B3F80622 		ldrh	r2, [r3, #518]
 1316 045e DA80     		strh	r2, [r3, #6]	@ movhi
 412:Src/uart.c    **** 			g_CmdMap[CMD_SN_PART3] = g_CmdMap[SYS_SN_PART3];	
 1317              		.loc 1 412 0
 1318 0460 B3F80822 		ldrh	r2, [r3, #520]
 1319 0464 1A81     		strh	r2, [r3, #8]	@ movhi
 413:Src/uart.c    **** 		}	
 1320              		.loc 1 413 0
 1321 0466 B3F80A22 		ldrh	r2, [r3, #522]
 1322 046a 5A81     		strh	r2, [r3, #10]	@ movhi
 1323 046c 82E6     		b	.L95
 1324              	.L139:
 417:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 1325              		.loc 1 417 0
 1326 046e 5748     		ldr	r0, .L156+12
 1327 0470 B0F8A030 		ldrh	r3, [r0, #160]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 39


 1328 0474 1BB2     		sxth	r3, r3
 1329 0476 00EE103A 		vmov	s0, r3	@ int
 418:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_TROUGH]
 1330              		.loc 1 418 0
 1331 047a B0F8A410 		ldrh	r1, [r0, #164]
 419:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_CYCLE]
 1332              		.loc 1 419 0
 1333 047e B0F8A620 		ldrh	r2, [r0, #166]
 420:Src/uart.c    **** 																			,g_CmdMap[CMD_POS_ACT_PU]);
 1334              		.loc 1 420 0
 1335 0482 B0F8A230 		ldrh	r3, [r0, #162]
 421:Src/uart.c    **** 		}	
 1336              		.loc 1 421 0
 1337 0486 B0F84C00 		ldrh	r0, [r0, #76]
 1338 048a 00B2     		sxth	r0, r0
 417:Src/uart.c    **** 																			,g_CmdMap[CMD_PF_TEST_WAVE_PEAK]
 1339              		.loc 1 417 0
 1340 048c 0090     		str	r0, [sp]
 1341 048e 1BB2     		sxth	r3, r3
 1342 0490 12B2     		sxth	r2, r2
 1343 0492 09B2     		sxth	r1, r1
 1344 0494 B8EEC00A 		vcvt.f32.s32	s0, s0
 1345 0498 5748     		ldr	r0, .L156+56
 1346 049a FFF7FEFF 		bl	setPara_waveSinGenrator
 1347              	.LVL103:
 1348 049e 6CE6     		b	.L96
 1349              	.LVL104:
 1350              	.L121:
 432:Src/uart.c    **** 	}	
 1351              		.loc 1 432 0
 1352 04a0 0021     		movs	r1, #0
 1353 04a2 3020     		movs	r0, #48
 1354 04a4 FFF7FEFF 		bl	Return_state_frame
 1355              	.LVL105:
 1356 04a8 B8E5     		b	.L58
 1357              	.L122:
 437:Src/uart.c    **** 	}
 1358              		.loc 1 437 0
 1359 04aa 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1360 04ac 4000     		lsls	r0, r0, #1
 1361 04ae 474B     		ldr	r3, .L156+12
 1362 04b0 03EB4503 		add	r3, r3, r5, lsl #1
 1363 04b4 AAB2     		uxth	r2, r5
 1364 04b6 3221     		movs	r1, #50
 1365 04b8 00F0FE00 		and	r0, r0, #254
 1366 04bc FFF7FEFF 		bl	UART_PushFrame
 1367              	.LVL106:
 1368 04c0 ACE5     		b	.L58
 1369              	.L123:
 441:Src/uart.c    **** 	}
 1370              		.loc 1 441 0
 1371 04c2 FFF7FEFF 		bl	ScopeProDebug
 1372              	.LVL107:
 1373 04c6 A9E5     		b	.L58
 1374              	.L124:
 445:Src/uart.c    **** 	}
 1375              		.loc 1 445 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 40


 1376 04c8 FFF7FEFF 		bl	ScopeProDebug_2
 1377              	.LVL108:
 1378 04cc A6E5     		b	.L58
 1379              	.L125:
 449:Src/uart.c    **** 	}
 1380              		.loc 1 449 0
 1381 04ce FFF7FEFF 		bl	ReturnCLibADC_Frame
 1382              	.LVL109:
 1383 04d2 A3E5     		b	.L58
 1384              	.L126:
 453:Src/uart.c    **** 	}
 1385              		.loc 1 453 0
 1386 04d4 0120     		movs	r0, #1
 1387 04d6 FFF7FEFF 		bl	Return_OldFrame_data
 1388              	.LVL110:
 1389 04da 9FE5     		b	.L58
 1390              	.L127:
 458:Src/uart.c    **** 		pdata[4]--;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1391              		.loc 1 458 0
 1392 04dc 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 1393 04de 0239     		subs	r1, r1, #2
 1394              	.LVL111:
 459:Src/uart.c    **** 		for(i=0;i<datalen;i++)
 1395              		.loc 1 459 0
 1396 04e0 013A     		subs	r2, r2, #1
 1397 04e2 2271     		strb	r2, [r4, #4]
 460:Src/uart.c    **** 		{
 1398              		.loc 1 460 0
 1399 04e4 0022     		movs	r2, #0
 1400 04e6 04E0     		b	.L104
 1401              	.LVL112:
 1402              	.L148:
 464:Src/uart.c    **** 			}
 1403              		.loc 1 464 0
 1404 04e8 131D     		adds	r3, r2, #4
 1405 04ea E05C     		ldrb	r0, [r4, r3]	@ zero_extendqisi2
 1406 04ec 374B     		ldr	r3, .L156+12
 1407 04ee 9881     		strh	r0, [r3, #12]	@ movhi
 1408              	.L106:
 460:Src/uart.c    **** 		{
 1409              		.loc 1 460 0 discriminator 2
 1410 04f0 0132     		adds	r2, r2, #1
 1411              	.LVL113:
 1412              	.L104:
 460:Src/uart.c    **** 		{
 1413              		.loc 1 460 0 is_stmt 0 discriminator 1
 1414 04f2 8A42     		cmp	r2, r1
 1415 04f4 2ADA     		bge	.L147
 462:Src/uart.c    **** 			{
 1416              		.loc 1 462 0 is_stmt 1
 1417 04f6 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 1418 04f8 1344     		add	r3, r3, r2
 1419 04fa 022B     		cmp	r3, #2
 1420 04fc F4D0     		beq	.L148
 466:Src/uart.c    **** 			{
 1421              		.loc 1 466 0
 1422 04fe 0C2B     		cmp	r3, #12
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 41


 1423 0500 12D0     		beq	.L149
 470:Src/uart.c    **** 			{
 1424              		.loc 1 470 0
 1425 0502 1F2B     		cmp	r3, #31
 1426 0504 F4D0     		beq	.L106
 474:Src/uart.c    **** 			{
 1427              		.loc 1 474 0
 1428 0506 202B     		cmp	r3, #32
 1429 0508 13D0     		beq	.L150
 478:Src/uart.c    **** 			{
 1430              		.loc 1 478 0
 1431 050a 622B     		cmp	r3, #98
 1432 050c F0D1     		bne	.L106
 480:Src/uart.c    **** 			}
 1433              		.loc 1 480 0
 1434 050e 131D     		adds	r3, r2, #4
 1435 0510 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1436 0512 A018     		adds	r0, r4, r2
 1437 0514 4079     		ldrb	r0, [r0, #5]	@ zero_extendqisi2
 1438 0516 03EB0023 		add	r3, r3, r0, lsl #8
 1439 051a 3848     		ldr	r0, .L156+60
 1440 051c 80FB0303 		smull	r0, r3, r0, r3
 1441 0520 9B08     		lsrs	r3, r3, #2
 1442 0522 2A48     		ldr	r0, .L156+12
 1443 0524 8383     		strh	r3, [r0, #28]	@ movhi
 1444 0526 E3E7     		b	.L106
 1445              	.L149:
 468:Src/uart.c    **** 			}
 1446              		.loc 1 468 0
 1447 0528 131D     		adds	r3, r2, #4
 1448 052a E05C     		ldrb	r0, [r4, r3]	@ zero_extendqisi2
 1449 052c 274B     		ldr	r3, .L156+12
 1450 052e D881     		strh	r0, [r3, #14]	@ movhi
 1451 0530 DEE7     		b	.L106
 1452              	.L150:
 476:Src/uart.c    **** 			}
 1453              		.loc 1 476 0
 1454 0532 131D     		adds	r3, r2, #4
 1455 0534 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 1456 0536 A018     		adds	r0, r4, r2
 1457 0538 4079     		ldrb	r0, [r0, #5]	@ zero_extendqisi2
 1458 053a 03EB0023 		add	r3, r3, r0, lsl #8
 1459 053e 2F48     		ldr	r0, .L156+60
 1460 0540 80FB0303 		smull	r0, r3, r0, r3
 1461 0544 9B08     		lsrs	r3, r3, #2
 1462 0546 2148     		ldr	r0, .L156+12
 1463 0548 0384     		strh	r3, [r0, #32]	@ movhi
 1464 054a D1E7     		b	.L106
 1465              	.L147:
 486:Src/uart.c    **** 	}
 1466              		.loc 1 486 0
 1467 054c 0022     		movs	r2, #0
 1468              	.LVL114:
 1469 054e E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 1470              	.LVL115:
 1471 0550 0220     		movs	r0, #2
 1472 0552 FFF7FEFF 		bl	Return_OldFrame_data
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 42


 1473              	.LVL116:
 1474 0556 61E5     		b	.L58
 1475              	.LVL117:
 1476              	.L128:
 499:Src/uart.c    **** 		{
 1477              		.loc 1 499 0
 1478 0558 232A     		cmp	r2, #35
 1479 055a 0BD0     		beq	.L151
 1480              	.L111:
 503:Src/uart.c    **** 		{
 1481              		.loc 1 503 0
 1482 055c 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 507:Src/uart.c    **** 		{
 1483              		.loc 1 507 0
 1484 055e 202B     		cmp	r3, #32
 1485 0560 0CD0     		beq	.L152
 1486              	.L112:
 511:Src/uart.c    **** 		{
 1487              		.loc 1 511 0
 1488 0562 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 515:Src/uart.c    **** 		{
 1489              		.loc 1 515 0
 1490 0564 1E2B     		cmp	r3, #30
 1491 0566 0DD0     		beq	.L153
 1492              	.L113:
 519:Src/uart.c    **** 		//Return_OldFrame_data(u8 cmd_type,u8 index,u8 length) 
 1493              		.loc 1 519 0
 1494 0568 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 1495 056a E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 1496 056c A078     		ldrb	r0, [r4, #2]	@ zero_extendqisi2
 1497 056e FFF7FEFF 		bl	Return_OldFrame_state
 1498              	.LVL118:
 1499 0572 53E5     		b	.L58
 1500              	.L151:
 501:Src/uart.c    **** 		}
 1501              		.loc 1 501 0
 1502 0574 154B     		ldr	r3, .L156+12
 1503 0576 0122     		movs	r2, #1
 1504 0578 5A82     		strh	r2, [r3, #18]	@ movhi
 1505 057a EFE7     		b	.L111
 1506              	.L152:
 509:Src/uart.c    **** 		}
 1507              		.loc 1 509 0
 1508 057c 134B     		ldr	r3, .L156+12
 1509 057e 0122     		movs	r2, #1
 1510 0580 1A83     		strh	r2, [r3, #24]	@ movhi
 1511 0582 EEE7     		b	.L112
 1512              	.L153:
 517:Src/uart.c    **** 		}	
 1513              		.loc 1 517 0
 1514 0584 114B     		ldr	r3, .L156+12
 1515 0586 0122     		movs	r2, #1
 1516 0588 1A82     		strh	r2, [r3, #16]	@ movhi
 1517 058a EDE7     		b	.L113
 1518              	.L129:
 527:Src/uart.c    **** 			if(pos_set_2000<0)
 1519              		.loc 1 527 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 43


 1520 058c 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 1521 058e 02EB0323 		add	r3, r2, r3, lsl #8
 1522 0592 1BB2     		sxth	r3, r3
 1523              	.LVL119:
 528:Src/uart.c    **** 			{
 1524              		.loc 1 528 0
 1525 0594 002B     		cmp	r3, #0
 1526 0596 05DB     		blt	.L118
 532:Src/uart.c    **** 			{
 1527              		.loc 1 532 0
 1528 0598 B3F5FA6F 		cmp	r3, #2000
 1529 059c 03DD     		ble	.L115
 534:Src/uart.c    **** 			}
 1530              		.loc 1 534 0
 1531 059e 4FF4FA63 		mov	r3, #2000
 1532              	.LVL120:
 1533 05a2 00E0     		b	.L115
 1534              	.LVL121:
 1535              	.L118:
 530:Src/uart.c    **** 			}
 1536              		.loc 1 530 0
 1537 05a4 0023     		movs	r3, #0
 1538              	.LVL122:
 1539              	.L115:
 536:Src/uart.c    **** 		}
 1540              		.loc 1 536 0
 1541 05a6 9B03     		lsls	r3, r3, #14
 1542              	.LVL123:
 1543 05a8 154A     		ldr	r2, .L156+64
 1544 05aa 82FB0312 		smull	r1, r2, r2, r3
 1545 05ae DB17     		asrs	r3, r3, #31
 1546 05b0 C3EBE213 		rsb	r3, r3, r2, asr #7
 1547 05b4 1BB2     		sxth	r3, r3
 1548 05b6 054A     		ldr	r2, .L156+12
 1549 05b8 A2F84830 		strh	r3, [r2, #72]	@ movhi
 1550 05bc 58E5     		b	.L114
 1551              	.L157:
 1552 05be 00BF     		.align	2
 1553              	.L156:
 1554 05c0 00000000 		.word	force_set
 1555 05c4 00000000 		.word	status_Mode_POSITION_FORCE
 1556 05c8 00000000 		.word	force_act
 1557 05cc 00000000 		.word	g_CmdMap
 1558 05d0 00000000 		.word	g_pMU_value_offset
 1559 05d4 00000000 		.word	MU_Value
 1560 05d8 00000000 		.word	range_icmu_vlaue_at_stroke
 1561 05dc 00000000 		.word	range_icmu_vlaue_need_addMax
 1562 05e0 00000000 		.word	g_pPos_ref_base_um
 1563 05e4 00000000 		.word	rod_pos_Muti_Encoder
 1564 05e8 00000000 		.word	g_Encode_offset
 1565 05ec 00000000 		.word	EN_360
 1566 05f0 B7600BB6 		.word	-1240768329
 1567 05f4 00000000 		.word	g_Encode_offset_EN
 1568 05f8 00000000 		.word	waveGen
 1569 05fc 67666666 		.word	1717986919
 1570 0600 D34D6210 		.word	274877907
 1571              		.cfi_endproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 44


 1572              	.LFE339:
 1574              		.section	.text.UART_ParseData,"ax",%progbits
 1575              		.align	1
 1576              		.global	UART_ParseData
 1577              		.syntax unified
 1578              		.thumb
 1579              		.thumb_func
 1580              		.fpu fpv4-sp-d16
 1582              	UART_ParseData:
 1583              	.LFB340:
 569:Src/uart.c    **** 	static unsigned char s_RXBuf[RX_BUF_SIZE] = {0};
 1584              		.loc 1 569 0
 1585              		.cfi_startproc
 1586              		@ args = 0, pretend = 0, frame = 0
 1587              		@ frame_needed = 0, uses_anonymous_args = 0
 1588              	.LVL124:
 1589 0000 08B5     		push	{r3, lr}
 1590              	.LCFI11:
 1591              		.cfi_def_cfa_offset 8
 1592              		.cfi_offset 3, -8
 1593              		.cfi_offset 14, -4
 1594              	.LVL125:
 578:Src/uart.c    **** 	{
 1595              		.loc 1 578 0
 1596 0002 2F4B     		ldr	r3, .L173
 1597 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1598 0006 002B     		cmp	r3, #0
 1599 0008 3DD0     		beq	.L159
 580:Src/uart.c    **** 		if(s_rxPos == FRA_LENGTH)
 1600              		.loc 1 580 0
 1601 000a 2E4B     		ldr	r3, .L173+4
 1602 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1603 000e 2E4A     		ldr	r2, .L173+8
 1604 0010 D054     		strb	r0, [r2, r3]
 581:Src/uart.c    **** 		{
 1605              		.loc 1 581 0
 1606 0012 4BB9     		cbnz	r3, .L160
 583:Src/uart.c    **** 			if(s_rxLen >= RX_BUF_SIZE)
 1607              		.loc 1 583 0
 1608 0014 C21C     		adds	r2, r0, #3
 1609 0016 D2B2     		uxtb	r2, r2
 1610 0018 2C49     		ldr	r1, .L173+12
 1611 001a 0A70     		strb	r2, [r1]
 584:Src/uart.c    **** 			{
 1612              		.loc 1 584 0
 1613 001c 12F0800F 		tst	r2, #128
 1614 0020 10D1     		bne	.L168
 591:Src/uart.c    **** 		}
 1615              		.loc 1 591 0
 1616 0022 82B2     		uxth	r2, r0
 1617 0024 2A49     		ldr	r1, .L173+16
 1618 0026 0A80     		strh	r2, [r1]	@ movhi
 1619              	.L160:
 593:Src/uart.c    **** 		if(s_rxPos == s_rxLen) // Ò»Ö¡ï¿½ï¿½ï¿½Ý´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 1620              		.loc 1 593 0
 1621 0028 0133     		adds	r3, r3, #1
 1622 002a DBB2     		uxtb	r3, r3
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 45


 1623 002c 254A     		ldr	r2, .L173+4
 1624 002e 1370     		strb	r3, [r2]
 594:Src/uart.c    **** 		{
 1625              		.loc 1 594 0
 1626 0030 264A     		ldr	r2, .L173+12
 1627 0032 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1628 0034 9342     		cmp	r3, r2
 1629 0036 0ED0     		beq	.L169
 613:Src/uart.c    **** 		}
 1630              		.loc 1 613 0
 1631 0038 264A     		ldr	r2, .L173+20
 1632 003a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1633 003c 1844     		add	r0, r0, r3
 1634              	.LVL126:
 1635 003e 1070     		strb	r0, [r2]
 630:Src/uart.c    **** 	
 1636              		.loc 1 630 0
 1637 0040 0120     		movs	r0, #1
 1638 0042 2CE0     		b	.L158
 1639              	.LVL127:
 1640              	.L168:
 586:Src/uart.c    **** 				s_bFrameHead1 = s_bBeginFrame = 0;
 1641              		.loc 1 586 0
 1642 0044 0B70     		strb	r3, [r1]
 587:Src/uart.c    **** 				csum = 0;
 1643              		.loc 1 587 0
 1644 0046 1E4A     		ldr	r2, .L173
 1645 0048 1370     		strb	r3, [r2]
 1646 004a 234A     		ldr	r2, .L173+24
 1647 004c 1370     		strb	r3, [r2]
 588:Src/uart.c    **** 				return 1;
 1648              		.loc 1 588 0
 1649 004e 214A     		ldr	r2, .L173+20
 1650 0050 1370     		strb	r3, [r2]
 589:Src/uart.c    **** 			}
 1651              		.loc 1 589 0
 1652 0052 0120     		movs	r0, #1
 1653              	.LVL128:
 1654 0054 23E0     		b	.L158
 1655              	.LVL129:
 1656              	.L169:
 596:Src/uart.c    **** 			{
 1657              		.loc 1 596 0
 1658 0056 013B     		subs	r3, r3, #1
 1659 0058 1B4A     		ldr	r2, .L173+8
 1660 005a D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 1661 005c 1D4B     		ldr	r3, .L173+20
 1662 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1663 0060 9A42     		cmp	r2, r3
 1664 0062 09D0     		beq	.L170
 1665              	.LVL130:
 1666              	.L164:
 605:Src/uart.c    **** 			s_rxPos = 0;
 1667              		.loc 1 605 0
 1668 0064 0020     		movs	r0, #0
 1669 0066 164B     		ldr	r3, .L173
 1670 0068 1870     		strb	r0, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 46


 1671 006a 1B4B     		ldr	r3, .L173+24
 1672 006c 1870     		strb	r0, [r3]
 606:Src/uart.c    **** 			csum = 0;
 1673              		.loc 1 606 0
 1674 006e 154B     		ldr	r3, .L173+4
 1675 0070 1870     		strb	r0, [r3]
 607:Src/uart.c    **** 			ret = 0;
 1676              		.loc 1 607 0
 1677 0072 184B     		ldr	r3, .L173+20
 1678 0074 1870     		strb	r0, [r3]
 1679              	.LVL131:
 609:Src/uart.c    **** 		}
 1680              		.loc 1 609 0
 1681 0076 12E0     		b	.L158
 1682              	.LVL132:
 1683              	.L170:
 598:Src/uart.c    **** 				g_index_Modbus = 0;
 1684              		.loc 1 598 0
 1685 0078 1348     		ldr	r0, .L173+8
 1686              	.LVL133:
 1687 007a FFF7FEFF 		bl	UART_ParseFrame
 1688              	.LVL134:
 599:Src/uart.c    **** 			}
 1689              		.loc 1 599 0
 1690 007e 174B     		ldr	r3, .L173+28
 1691 0080 0022     		movs	r2, #0
 1692 0082 1A80     		strh	r2, [r3]	@ movhi
 1693 0084 EEE7     		b	.L164
 1694              	.LVL135:
 1695              	.L159:
 616:Src/uart.c    **** 	{
 1696              		.loc 1 616 0
 1697 0086 5528     		cmp	r0, #85
 1698 0088 0AD0     		beq	.L171
 1699              	.L165:
 620:Src/uart.c    **** 	{
 1700              		.loc 1 620 0
 1701 008a AA28     		cmp	r0, #170
 1702 008c 10D0     		beq	.L172
 1703              	.L166:
 626:Src/uart.c    **** 		csum = 0;
 1704              		.loc 1 626 0
 1705 008e 0023     		movs	r3, #0
 1706 0090 0B4A     		ldr	r2, .L173
 1707 0092 1370     		strb	r3, [r2]
 1708 0094 104A     		ldr	r2, .L173+24
 1709 0096 1370     		strb	r3, [r2]
 627:Src/uart.c    **** 	}
 1710              		.loc 1 627 0
 1711 0098 0E4A     		ldr	r2, .L173+20
 1712 009a 1370     		strb	r3, [r2]
 630:Src/uart.c    **** 	
 1713              		.loc 1 630 0
 1714 009c 0120     		movs	r0, #1
 1715              	.LVL136:
 1716              	.L158:
 633:Src/uart.c    **** 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 47


 1717              		.loc 1 633 0
 1718 009e 08BD     		pop	{r3, pc}
 1719              	.LVL137:
 1720              	.L171:
 616:Src/uart.c    **** 	{
 1721              		.loc 1 616 0 discriminator 1
 1722 00a0 0D4B     		ldr	r3, .L173+24
 1723 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1724 00a4 002B     		cmp	r3, #0
 1725 00a6 F0D1     		bne	.L165
 618:Src/uart.c    **** 	}
 1726              		.loc 1 618 0
 1727 00a8 0120     		movs	r0, #1
 1728              	.LVL138:
 1729 00aa 0B4B     		ldr	r3, .L173+24
 1730 00ac 1870     		strb	r0, [r3]
 1731 00ae F6E7     		b	.L158
 1732              	.LVL139:
 1733              	.L172:
 620:Src/uart.c    **** 	{
 1734              		.loc 1 620 0 discriminator 1
 1735 00b0 094B     		ldr	r3, .L173+24
 1736 00b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1737 00b4 002B     		cmp	r3, #0
 1738 00b6 EAD0     		beq	.L166
 622:Src/uart.c    **** 	}
 1739              		.loc 1 622 0
 1740 00b8 0120     		movs	r0, #1
 1741              	.LVL140:
 1742 00ba 014B     		ldr	r3, .L173
 1743 00bc 1870     		strb	r0, [r3]
 1744 00be EEE7     		b	.L158
 1745              	.L174:
 1746              		.align	2
 1747              	.L173:
 1748 00c0 00000000 		.word	.LANCHOR6
 1749 00c4 00000000 		.word	.LANCHOR7
 1750 00c8 00000000 		.word	.LANCHOR8
 1751 00cc 00000000 		.word	.LANCHOR9
 1752 00d0 00000000 		.word	.LANCHOR4
 1753 00d4 00000000 		.word	.LANCHOR11
 1754 00d8 00000000 		.word	.LANCHOR10
 1755 00dc 00000000 		.word	.LANCHOR12
 1756              		.cfi_endproc
 1757              	.LFE340:
 1759              		.section	.text.UART_CheckReceive,"ax",%progbits
 1760              		.align	1
 1761              		.global	UART_CheckReceive
 1762              		.syntax unified
 1763              		.thumb
 1764              		.thumb_func
 1765              		.fpu fpv4-sp-d16
 1767              	UART_CheckReceive:
 1768              	.LFB342:
 646:Src/uart.c    **** 
 647:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ð­ï¿½ï¿½ï¿½Ê½ 0x55 0xAA [ï¿½ï¿½ï¿½ï¿½]
 648:Src/uart.c    **** // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 48


 649:Src/uart.c    **** typedef struct
 650:Src/uart.c    **** {
 651:Src/uart.c    **** 	volatile s32 len;
 652:Src/uart.c    **** 	volatile s32 last_dma_pointer;
 653:Src/uart.c    ****   unsigned char buf[RX_BUF_SIZE];
 654:Src/uart.c    **** } uart_recv_buf_t;
 655:Src/uart.c    **** 
 656:Src/uart.c    **** 
 657:Src/uart.c    **** static uart_recv_buf_t uart_recv_buf = {0,0,{0}};
 658:Src/uart.c    **** 
 659:Src/uart.c    **** void UART_CheckReceive(void)
 660:Src/uart.c    **** {
 1769              		.loc 1 660 0
 1770              		.cfi_startproc
 1771              		@ args = 0, pretend = 0, frame = 0
 1772              		@ frame_needed = 0, uses_anonymous_args = 0
 1773              		@ link register save eliminated.
 1774              	.LVL141:
 661:Src/uart.c    **** 	s16 i = 0,len = 0;
 662:Src/uart.c    ****   s32 DAMCnt = RX_BUF_SIZE - (DMA1_Channel1->CNDTR);
 1775              		.loc 1 662 0
 1776 0000 2C4B     		ldr	r3, .L192
 1777 0002 5B68     		ldr	r3, [r3, #4]
 1778              	.LVL142:
 663:Src/uart.c    **** 	s32 cnt_temp = 0,temp =0,rx_len =0,p_rx_len= 0,p_last_len =0,p_last_pointer =0;
 664:Src/uart.c    **** 	width_t CRC_RX,CRC_Tmp;
 665:Src/uart.c    **** 	int ret = 1;
 666:Src/uart.c    **** 	int plen=0;
 667:Src/uart.c    **** 	int csum =0;
 668:Src/uart.c    **** 	int j =0;
 669:Src/uart.c    **** 	unsigned char psum = 0;
 670:Src/uart.c    **** 
 671:Src/uart.c    **** 	if(__HAL_UART_GET_FLAG(&huart1,UART_FLAG_IDLE) != RESET)//
 1779              		.loc 1 671 0
 1780 0004 2C4B     		ldr	r3, .L192+4
 1781 0006 1B68     		ldr	r3, [r3]
 1782 0008 DA69     		ldr	r2, [r3, #28]
 1783 000a 12F0100F 		tst	r2, #16
 1784 000e 4ED0     		beq	.L186
 660:Src/uart.c    **** 	s16 i = 0,len = 0;
 1785              		.loc 1 660 0
 1786 0010 F0B4     		push	{r4, r5, r6, r7}
 1787              	.LCFI12:
 1788              		.cfi_def_cfa_offset 16
 1789              		.cfi_offset 4, -16
 1790              		.cfi_offset 5, -12
 1791              		.cfi_offset 6, -8
 1792              		.cfi_offset 7, -4
 672:Src/uart.c    **** 	{			
 673:Src/uart.c    **** 		
 674:Src/uart.c    **** 		//	USART_ClearFlag(USART2,USART_FLAG_IDLE);
 675:Src/uart.c    **** 		 __HAL_UART_CLEAR_FLAG(&huart1, UART_CLEAR_IDLEF);
 1793              		.loc 1 675 0
 1794 0012 1022     		movs	r2, #16
 1795 0014 1A62     		str	r2, [r3, #32]
 676:Src/uart.c    **** 		
 677:Src/uart.c    **** 		
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 49


 678:Src/uart.c    **** 			if(g_bUARTPushingFrames == 1)
 1796              		.loc 1 678 0
 1797 0016 294B     		ldr	r3, .L192+8
 1798 0018 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 679:Src/uart.c    **** 			{
 680:Src/uart.c    **** //				while(1);
 681:Src/uart.c    **** 			}
 682:Src/uart.c    **** 			if( g_RxBufptr != DAMCnt )
 683:Src/uart.c    **** 			{
 684:Src/uart.c    **** 				if( DAMCnt > g_RxBufptr )
 685:Src/uart.c    **** 				{
 686:Src/uart.c    **** 					len = DAMCnt - g_RxBufptr;
 687:Src/uart.c    **** 				}
 688:Src/uart.c    **** 				else
 689:Src/uart.c    **** 				{
 690:Src/uart.c    **** 					len = RX_BUF_SIZE + DAMCnt - g_RxBufptr;
 691:Src/uart.c    **** 				}
 692:Src/uart.c    **** 			}
 693:Src/uart.c    **** 			
 694:Src/uart.c    **** //			if(len    < 10)
 695:Src/uart.c    **** //			{
 696:Src/uart.c    **** //				g_RxBufptr = DAMCnt;
 697:Src/uart.c    **** //		//		while(1);
 698:Src/uart.c    **** //				return;
 699:Src/uart.c    **** //			}
 700:Src/uart.c    **** //			if(len   >  12)
 701:Src/uart.c    **** //			{
 702:Src/uart.c    **** //				g_RxBufptr = DAMCnt;
 703:Src/uart.c    **** //		//		while(1);
 704:Src/uart.c    **** //		//		return;
 705:Src/uart.c    **** //			}
 706:Src/uart.c    **** 			
 707:Src/uart.c    **** 			temp = (DMA1_Channel1->CNDTR);
 1799              		.loc 1 707 0
 1800 001a 264B     		ldr	r3, .L192
 1801 001c 5F68     		ldr	r7, [r3, #4]
 1802              	.LVL143:
 708:Src/uart.c    **** 			rx_len =  RX_BUF_SIZE - temp; //?????????????,???????????
 1803              		.loc 1 708 0
 1804 001e C7F18007 		rsb	r7, r7, #128
 1805              	.LVL144:
 709:Src/uart.c    **** 
 710:Src/uart.c    **** 
 711:Src/uart.c    **** 
 712:Src/uart.c    **** 			if(uart_recv_buf.len < RX_BUF_SIZE - 12)
 1806              		.loc 1 712 0
 1807 0022 274B     		ldr	r3, .L192+12
 1808 0024 1B68     		ldr	r3, [r3]
 1809 0026 732B     		cmp	r3, #115
 1810 0028 3ADC     		bgt	.L177
 713:Src/uart.c    **** 			{
 714:Src/uart.c    **** 				p_last_pointer = uart_recv_buf.last_dma_pointer;
 1811              		.loc 1 714 0
 1812 002a 254B     		ldr	r3, .L192+12
 1813 002c 5868     		ldr	r0, [r3, #4]
 1814              	.LVL145:
 715:Src/uart.c    **** 				p_rx_len = rx_len - uart_recv_buf.last_dma_pointer;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 50


 1815              		.loc 1 715 0
 1816 002e 5E68     		ldr	r6, [r3, #4]
 1817              	.LVL146:
 716:Src/uart.c    **** 				
 717:Src/uart.c    **** 				if(p_rx_len<0)
 1818              		.loc 1 717 0
 1819 0030 BE1B     		subs	r6, r7, r6
 1820              	.LVL147:
 1821 0032 01D4     		bmi	.L189
 1822              	.LVL148:
 1823              	.L178:
 718:Src/uart.c    **** 				{
 719:Src/uart.c    **** 						p_last_len = RX_BUF_SIZE-uart_recv_buf.last_dma_pointer;
 720:Src/uart.c    **** 						for(i=0;i<p_last_len;i++)
 721:Src/uart.c    **** 						{
 722:Src/uart.c    **** 								uart_recv_buf.buf[uart_recv_buf.len++] = g_UART_RxBuf[p_last_pointer++];
 723:Src/uart.c    **** 								if(uart_recv_buf.len > RX_BUF_SIZE -1)
 724:Src/uart.c    **** 								{
 725:Src/uart.c    **** 										uart_recv_buf.len = 0;
 726:Src/uart.c    **** 								}
 727:Src/uart.c    **** 						}
 728:Src/uart.c    **** 						p_rx_len = rx_len;
 729:Src/uart.c    **** 						p_last_pointer = 0;
 730:Src/uart.c    **** 				}
 731:Src/uart.c    **** 				
 732:Src/uart.c    **** 				
 733:Src/uart.c    **** 				for(i=0;i<p_rx_len;i++)
 1824              		.loc 1 733 0
 1825 0034 0023     		movs	r3, #0
 1826 0036 1FE0     		b	.L182
 1827              	.LVL149:
 1828              	.L189:
 719:Src/uart.c    **** 						for(i=0;i<p_last_len;i++)
 1829              		.loc 1 719 0
 1830 0038 5E68     		ldr	r6, [r3, #4]
 1831              	.LVL150:
 1832 003a C6F18006 		rsb	r6, r6, #128
 1833              	.LVL151:
 720:Src/uart.c    **** 						{
 1834              		.loc 1 720 0
 1835 003e 0023     		movs	r3, #0
 1836 0040 02E0     		b	.L179
 1837              	.LVL152:
 1838              	.L180:
 720:Src/uart.c    **** 						{
 1839              		.loc 1 720 0 is_stmt 0 discriminator 2
 1840 0042 0133     		adds	r3, r3, #1
 1841              	.LVL153:
 1842 0044 1BB2     		sxth	r3, r3
 1843              	.LVL154:
 722:Src/uart.c    **** 								if(uart_recv_buf.len > RX_BUF_SIZE -1)
 1844              		.loc 1 722 0 is_stmt 1 discriminator 2
 1845 0046 2046     		mov	r0, r4
 1846              	.LVL155:
 1847              	.L179:
 720:Src/uart.c    **** 						{
 1848              		.loc 1 720 0 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 51


 1849 0048 B342     		cmp	r3, r6
 1850 004a 0FDA     		bge	.L190
 722:Src/uart.c    **** 								if(uart_recv_buf.len > RX_BUF_SIZE -1)
 1851              		.loc 1 722 0
 1852 004c 441C     		adds	r4, r0, #1
 1853              	.LVL156:
 1854 004e 1C4A     		ldr	r2, .L192+12
 1855 0050 1168     		ldr	r1, [r2]
 1856 0052 4D1C     		adds	r5, r1, #1
 1857 0054 1560     		str	r5, [r2]
 1858 0056 1B4D     		ldr	r5, .L192+16
 1859 0058 285C     		ldrb	r0, [r5, r0]	@ zero_extendqisi2
 1860 005a 1144     		add	r1, r1, r2
 1861 005c 0872     		strb	r0, [r1, #8]
 723:Src/uart.c    **** 								{
 1862              		.loc 1 723 0
 1863 005e 1268     		ldr	r2, [r2]
 1864 0060 7F2A     		cmp	r2, #127
 1865 0062 EEDD     		ble	.L180
 725:Src/uart.c    **** 								}
 1866              		.loc 1 725 0
 1867 0064 164A     		ldr	r2, .L192+12
 1868 0066 0021     		movs	r1, #0
 1869 0068 1160     		str	r1, [r2]
 1870 006a EAE7     		b	.L180
 1871              	.LVL157:
 1872              	.L190:
 728:Src/uart.c    **** 						p_last_pointer = 0;
 1873              		.loc 1 728 0
 1874 006c 3E46     		mov	r6, r7
 1875              	.LVL158:
 729:Src/uart.c    **** 				}
 1876              		.loc 1 729 0
 1877 006e 0020     		movs	r0, #0
 1878              	.LVL159:
 1879 0070 E0E7     		b	.L178
 1880              	.LVL160:
 1881              	.L183:
 1882              		.loc 1 733 0 discriminator 2
 1883 0072 0133     		adds	r3, r3, #1
 1884              	.LVL161:
 1885 0074 1BB2     		sxth	r3, r3
 1886              	.LVL162:
 734:Src/uart.c    **** 				{
 735:Src/uart.c    **** 						uart_recv_buf.buf[uart_recv_buf.len++] = g_UART_RxBuf[p_last_pointer++];
 1887              		.loc 1 735 0 discriminator 2
 1888 0076 2046     		mov	r0, r4
 1889              	.LVL163:
 1890              	.L182:
 733:Src/uart.c    **** 				{
 1891              		.loc 1 733 0 discriminator 1
 1892 0078 B342     		cmp	r3, r6
 1893 007a 0FDA     		bge	.L191
 1894              		.loc 1 735 0
 1895 007c 441C     		adds	r4, r0, #1
 1896              	.LVL164:
 1897 007e 104A     		ldr	r2, .L192+12
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 52


 1898 0080 1168     		ldr	r1, [r2]
 1899 0082 4D1C     		adds	r5, r1, #1
 1900 0084 1560     		str	r5, [r2]
 1901 0086 0F4D     		ldr	r5, .L192+16
 1902 0088 285C     		ldrb	r0, [r5, r0]	@ zero_extendqisi2
 1903 008a 1144     		add	r1, r1, r2
 1904 008c 0872     		strb	r0, [r1, #8]
 736:Src/uart.c    **** 						if(uart_recv_buf.len>RX_BUF_SIZE)
 1905              		.loc 1 736 0
 1906 008e 1268     		ldr	r2, [r2]
 1907 0090 802A     		cmp	r2, #128
 1908 0092 EEDD     		ble	.L183
 737:Src/uart.c    **** 						{
 738:Src/uart.c    **** 								uart_recv_buf.len = 0;
 1909              		.loc 1 738 0
 1910 0094 0A4A     		ldr	r2, .L192+12
 1911 0096 0021     		movs	r1, #0
 1912 0098 1160     		str	r1, [r2]
 1913 009a EAE7     		b	.L183
 1914              	.LVL165:
 1915              	.L191:
 739:Src/uart.c    **** 						}
 740:Src/uart.c    **** 				}
 741:Src/uart.c    **** 				uart_recv_buf.last_dma_pointer = rx_len;
 1916              		.loc 1 741 0
 1917 009c 084B     		ldr	r3, .L192+12
 1918              	.LVL166:
 1919 009e 5F60     		str	r7, [r3, #4]
 1920              	.LVL167:
 1921              	.L177:
 742:Src/uart.c    **** 			}
 743:Src/uart.c    **** 
 744:Src/uart.c    **** 			
 745:Src/uart.c    **** 			#if 0
 746:Src/uart.c    **** //			while(g_RxBufptr != DAMCnt)
 747:Src/uart.c    **** //			{
 748:Src/uart.c    **** //				ret = UART_ParseData(g_UART_RxBuf[g_RxBufptr]);
 749:Src/uart.c    **** //				if(ret == 0)
 750:Src/uart.c    **** //				{
 751:Src/uart.c    **** //					g_RxBufptr = DAMCnt;
 752:Src/uart.c    **** //					break;
 753:Src/uart.c    **** //				}
 754:Src/uart.c    **** //				g_UART_Rx_Modbus[g_index_Modbus] = g_UART_RxBuf[g_RxBufptr];
 755:Src/uart.c    **** //				g_index_Modbus++;
 756:Src/uart.c    **** //				if(g_index_Modbus >= RX_BUF_SIZE)
 757:Src/uart.c    **** //				{
 758:Src/uart.c    **** //					g_index_Modbus = 0;
 759:Src/uart.c    **** //				}
 760:Src/uart.c    **** //				cnt_temp++;
 761:Src/uart.c    **** //				g_RxBufptr++;
 762:Src/uart.c    **** //				if( g_RxBufptr == RX_BUF_SIZE )
 763:Src/uart.c    **** //				{
 764:Src/uart.c    **** //					g_RxBufptr = 0;
 765:Src/uart.c    **** //				}
 766:Src/uart.c    **** //			}
 767:Src/uart.c    **** 			
 768:Src/uart.c    **** 			#endif
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 53


 769:Src/uart.c    **** 			g_bUARTPushingFrames = 0;
 1922              		.loc 1 769 0
 1923 00a0 064B     		ldr	r3, .L192+8
 1924 00a2 0022     		movs	r2, #0
 1925 00a4 1A70     		strb	r2, [r3]
 770:Src/uart.c    **** //					USART_ClearFlag(USART2,USART_FLAG_IDLE);
 771:Src/uart.c    **** //					DMA_Cmd(DMA1_Channel7, DISABLE);
 772:Src/uart.c    **** //					DMA1_Channel7->CPAR = (uint32_t)(&(USART2->TDR));				
 773:Src/uart.c    **** //					DMA1_Channel7->CNDTR = g_index_Modbus;
 774:Src/uart.c    **** //					DMA1_Channel7->CMAR = (uint32_t)&(g_UART_Rx_Modbus);
 775:Src/uart.c    **** //					DMA_Cmd(DMA1_Channel7, ENABLE); 
 776:Src/uart.c    **** 
 777:Src/uart.c    **** #if 0
 778:Src/uart.c    **** //			if(g_index_Modbus >= 8)
 779:Src/uart.c    **** //			{
 780:Src/uart.c    **** //										//Ñ°ï¿½ï¿½Ö¡Í· ID ï¿½Í¹ï¿½ï¿½Üºï¿½
 781:Src/uart.c    **** //										for(i=g_index_Modbus-8;i>0;i--)
 782:Src/uart.c    **** //										{
 783:Src/uart.c    **** //												if(	(g_UART_Rx_Modbus[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿
 784:Src/uart.c    **** //														&&(g_UART_Rx_Modbus[i+1] == 0x03||g_UART_Rx_Modbus[i+1] == 0x06||g_UART_Rx_Modbus[i
 785:Src/uart.c    **** //													)
 786:Src/uart.c    **** //												{
 787:Src/uart.c    **** //													break;
 788:Src/uart.c    **** //												}											
 789:Src/uart.c    **** //										}
 790:Src/uart.c    **** ////										if(i>g_index_Modbus-3)
 791:Src/uart.c    **** ////										{
 792:Src/uart.c    **** ////											g_index_Modbus = 0;
 793:Src/uart.c    **** ////											return;
 794:Src/uart.c    **** ////										}
 795:Src/uart.c    **** //											CRC_Tmp =  ModBusCRC16(&g_UART_Rx_Modbus[i], g_index_Modbus-2-i); 
 796:Src/uart.c    **** //											CRC_RX = ((width_t)g_UART_Rx_Modbus[g_index_Modbus-1]<<8) + g_UART_Rx_Modbus[g_index_M
 797:Src/uart.c    **** //											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 798:Src/uart.c    **** //											{			
 799:Src/uart.c    **** //														if(g_UART_Rx_Modbus[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿
 800:Src/uart.c    **** //														{														
 801:Src/uart.c    **** //																Rx_Pro_Modbus(&g_UART_Rx_Modbus[i],g_index_Modbus-i);
 802:Src/uart.c    **** //														}
 803:Src/uart.c    **** //														g_index_Modbus = 0;
 804:Src/uart.c    **** //											}
 805:Src/uart.c    **** //		}
 806:Src/uart.c    **** 
 807:Src/uart.c    **** 	#endif
 808:Src/uart.c    **** 	}
 809:Src/uart.c    **** 	//Modbus Ð­ï¿½é´¦ï¿½ï¿½	
 810:Src/uart.c    ****   DAMCnt = RX_BUF_SIZE - (DMA1_Channel1->CNDTR);
 1926              		.loc 1 810 0
 1927 00a6 034B     		ldr	r3, .L192
 1928 00a8 5B68     		ldr	r3, [r3, #4]
 811:Src/uart.c    **** 	
 812:Src/uart.c    **** 	
 813:Src/uart.c    **** 
 814:Src/uart.c    **** 
 815:Src/uart.c    **** }
 1929              		.loc 1 815 0
 1930 00aa F0BC     		pop	{r4, r5, r6, r7}
 1931              	.LCFI13:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 54


 1932              		.cfi_restore 7
 1933              		.cfi_restore 6
 1934              		.cfi_restore 5
 1935              		.cfi_restore 4
 1936              		.cfi_def_cfa_offset 0
 1937              	.LVL168:
 1938 00ac 7047     		bx	lr
 1939              	.LVL169:
 1940              	.L186:
 810:Src/uart.c    **** 	
 1941              		.loc 1 810 0
 1942 00ae 014B     		ldr	r3, .L192
 1943 00b0 5B68     		ldr	r3, [r3, #4]
 1944 00b2 7047     		bx	lr
 1945              	.L193:
 1946              		.align	2
 1947              	.L192:
 1948 00b4 08000240 		.word	1073872904
 1949 00b8 00000000 		.word	huart1
 1950 00bc 00000000 		.word	.LANCHOR0
 1951 00c0 00000000 		.word	.LANCHOR13
 1952 00c4 00000000 		.word	g_UART_RxBuf
 1953              		.cfi_endproc
 1954              	.LFE342:
 1956              		.section	.text.Rx_Send_Modbus,"ax",%progbits
 1957              		.align	1
 1958              		.global	Rx_Send_Modbus
 1959              		.syntax unified
 1960              		.thumb
 1961              		.thumb_func
 1962              		.fpu fpv4-sp-d16
 1964              	Rx_Send_Modbus:
 1965              	.LFB345:
 816:Src/uart.c    **** 
 817:Src/uart.c    **** void UART_CheckReceive_1(void)
 818:Src/uart.c    **** {
 819:Src/uart.c    **** 	int i = 0;
 820:Src/uart.c    **** 	int len = 0;
 821:Src/uart.c    **** 	unsigned char psum = 0;
 822:Src/uart.c    **** 	int ret = 0;
 823:Src/uart.c    **** 	width_t CRC_RX,CRC_Tmp;
 824:Src/uart.c    **** 	
 825:Src/uart.c    **** 	if( uart_recv_buf.len < 4 )
 826:Src/uart.c    **** 	{
 827:Src/uart.c    **** 		uart_recv_buf.len = 0;
 828:Src/uart.c    **** 	}
 829:Src/uart.c    **** 	
 830:Src/uart.c    **** 	
 831:Src/uart.c    **** 	if(uart_recv_buf.len)
 832:Src/uart.c    **** 	{
 833:Src/uart.c    **** 		len = uart_recv_buf.len;
 834:Src/uart.c    **** 		
 835:Src/uart.c    **** //		for(i = 0; i < len; i++)  
 836:Src/uart.c    **** //		{
 837:Src/uart.c    **** ////				g_UART_RXlen = uart_recv_buf.buf[2];
 838:Src/uart.c    **** ////				UART_ParseFrame(&uart_recv_buf.buf[2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 839:Src/uart.c    **** ////				g_index_Modbus = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 55


 840:Src/uart.c    **** ////				uart_recv_buf.len =0;
 841:Src/uart.c    **** //				
 842:Src/uart.c    **** //				ret = UART_ParseData(uart_recv_buf.buf[i]);
 843:Src/uart.c    **** //				if(ret == 0)
 844:Src/uart.c    **** //				{
 845:Src/uart.c    **** //					uart_recv_buf.len = 0;
 846:Src/uart.c    **** //					break;
 847:Src/uart.c    **** //				}
 848:Src/uart.c    **** //			}
 849:Src/uart.c    **** //			
 850:Src/uart.c    **** //			if(uart_recv_buf.buf[i] ==0x55 && uart_recv_buf.buf[i+1] ==0xaa  )
 851:Src/uart.c    **** //			{
 852:Src/uart.c    **** //				plen = uart_recv_buf.buf[i+2];
 853:Src/uart.c    **** //				csum =0;
 854:Src/uart.c    **** //				
 855:Src/uart.c    **** //				for(j=0;j<plen+2;j++)
 856:Src/uart.c    **** //				{
 857:Src/uart.c    **** //					csum += uart_recv_buf.buf[i+2+j];
 858:Src/uart.c    **** //				}
 859:Src/uart.c    **** //				
 860:Src/uart.c    **** //				if(csum == uart_recv_buf.buf[i+plen+4])   //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½Í¬
 861:Src/uart.c    **** //				{
 862:Src/uart.c    **** //					g_UART_RXlen = uart_recv_buf.buf[i+2];
 863:Src/uart.c    **** //					UART_ParseFrame(&uart_recv_buf.buf[i+2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 864:Src/uart.c    **** //					g_index_Modbus = 0;
 865:Src/uart.c    **** //					uart_recv_buf.len = 0;
 866:Src/uart.c    **** //					break;
 867:Src/uart.c    **** //				}
 868:Src/uart.c    **** //			}
 869:Src/uart.c    **** //			
 870:Src/uart.c    **** //			if( g_RxBufptr == RX_BUF_SIZE )
 871:Src/uart.c    **** //			{
 872:Src/uart.c    **** //				g_RxBufptr = 0;
 873:Src/uart.c    **** //			}
 874:Src/uart.c    **** //		}
 875:Src/uart.c    **** 
 876:Src/uart.c    **** 
 877:Src/uart.c    **** 		for(i = 0; i < len; i++)  
 878:Src/uart.c    **** 		{
 879:Src/uart.c    **** 			if(uart_recv_buf.buf[i] ==0x55 && uart_recv_buf.buf[i+1] ==0xaa  )
 880:Src/uart.c    **** 			{
 881:Src/uart.c    **** 				if( (i+2) > ( len-1) )
 882:Src/uart.c    **** 				{
 883:Src/uart.c    **** 					break;
 884:Src/uart.c    **** 				}
 885:Src/uart.c    **** 				g_UART_RXlen = uart_recv_buf.buf[i+2];
 886:Src/uart.c    **** 				
 887:Src/uart.c    **** 				if( g_UART_RXlen > (len - i - 5))
 888:Src/uart.c    **** 				{
 889:Src/uart.c    **** 					break;
 890:Src/uart.c    **** 				}
 891:Src/uart.c    **** 				
 892:Src/uart.c    **** 				psum = uart_recv_buf.buf[i+g_UART_RXlen+4];
 893:Src/uart.c    **** 				if( psum == uart_sum(&uart_recv_buf.buf[i+2],g_UART_RXlen+2) )
 894:Src/uart.c    **** 				{
 895:Src/uart.c    **** 					UART_ParseFrame(&uart_recv_buf.buf[i+2]);  // ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½ï¿½
 896:Src/uart.c    **** 					g_index_Modbus = 0;
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 56


 897:Src/uart.c    **** 					uart_recv_buf.len = 0;
 898:Src/uart.c    **** 					break;
 899:Src/uart.c    **** 				}
 900:Src/uart.c    **** 				else
 901:Src/uart.c    **** 				{
 902:Src/uart.c    **** 				//	while(1);
 903:Src/uart.c    **** 				}
 904:Src/uart.c    **** 			}
 905:Src/uart.c    **** 		}
 906:Src/uart.c    **** 
 907:Src/uart.c    **** 		g_index_Modbus = len;
 908:Src/uart.c    **** 		if(g_index_Modbus >= 8)
 909:Src/uart.c    **** 		{
 910:Src/uart.c    **** 										//Ñ°ï¿½ï¿½Ö¡Í· ID ï¿½Í¹ï¿½ï¿½Üºï¿½
 911:Src/uart.c    **** 										for(i=g_index_Modbus-8;i>0;i--)
 912:Src/uart.c    **** 										{
 913:Src/uart.c    **** 												if(	(uart_recv_buf.buf[i] == g_CmdMap[CMD_ID]|| uart_recv_buf.buf[i] ==  0xff)  //ID ï¿
 914:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 915:Src/uart.c    **** 													)
 916:Src/uart.c    **** 												{
 917:Src/uart.c    **** 													break;
 918:Src/uart.c    **** 												}											
 919:Src/uart.c    **** 										}
 920:Src/uart.c    **** 										if(i>g_index_Modbus-3)
 921:Src/uart.c    **** 										{
 922:Src/uart.c    **** 											g_index_Modbus = 0;
 923:Src/uart.c    **** 											return;
 924:Src/uart.c    **** 										}
 925:Src/uart.c    **** 											CRC_Tmp =  ModBusCRC16(&uart_recv_buf.buf[i], g_index_Modbus-2-i); 
 926:Src/uart.c    **** 											CRC_RX = ((width_t)uart_recv_buf.buf[g_index_Modbus-1]<<8) + uart_recv_buf.buf[g_index_M
 927:Src/uart.c    **** 											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 928:Src/uart.c    **** 											{			
 929:Src/uart.c    **** 														if(uart_recv_buf.buf[i] == g_CmdMap[CMD_ID]|| g_UART_Rx_Modbus[i] ==  0xff)  //ID ï¿½
 930:Src/uart.c    **** 														{														
 931:Src/uart.c    **** 																Rx_Pro_Modbus(&uart_recv_buf.buf[i],g_index_Modbus-i);
 932:Src/uart.c    **** 														}
 933:Src/uart.c    **** 														g_index_Modbus = 0;
 934:Src/uart.c    **** 											}
 935:Src/uart.c    **** 		}
 936:Src/uart.c    **** 		uart_recv_buf.len =0;
 937:Src/uart.c    **** 	}
 938:Src/uart.c    **** }
 939:Src/uart.c    **** 	
 940:Src/uart.c    **** 
 941:Src/uart.c    **** void Rx_Pro_Modbus(u8* p_frame,u8 rx_cur_Num)
 942:Src/uart.c    **** {
 943:Src/uart.c    **** 	  int16_t add_reg =0, num_reg = 0,i = 0;
 944:Src/uart.c    **** 	  s32 result = 1;
 945:Src/uart.c    **** 		u16 pos = 0;
 946:Src/uart.c    **** 	  u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 947:Src/uart.c    **** //		static int last_cmd = 0;
 948:Src/uart.c    **** //		static int cur_cmd = 0;
 949:Src/uart.c    **** 		g_bUARTPushingFrames = 1;
 950:Src/uart.c    **** //		cur_cmd = p_frame[1];
 951:Src/uart.c    **** 		if(p_frame[1] == 0x03)//ï¿½ï¿½×´Ì¬
 952:Src/uart.c    **** 			 {
 953:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 57


 954:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 955:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 956:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 0x03;
 957:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 2*num_reg;//ï¿½Ö½Ú³ï¿½ï¿½ï¿½
 958:Src/uart.c    **** 				 for(i=0;i<num_reg;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿
 959:Src/uart.c    **** 				 {
 960:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] >>8;
 961:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] & 0x0ff;					 	 
 962:Src/uart.c    **** 				 }			 				 
 963:Src/uart.c    **** 			 }
 964:Src/uart.c    **** 		else if(p_frame[1] == 0x06)//Ð´ï¿½Ä´ï¿½ï¿½ï¿½
 965:Src/uart.c    **** 			 {
 966:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
 967:Src/uart.c    **** 				 num_reg = 1;
 968:Src/uart.c    **** 				 for(i=0;i<rx_cur_Num-2;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»
 969:Src/uart.c    **** 				 {
 970:Src/uart.c    **** 					g_UART_Tx_Modbus[pos++] = p_frame[i];			 
 971:Src/uart.c    **** 				 }
 972:Src/uart.c    **** 			 }
 973:Src/uart.c    **** 		else if(p_frame[1] == 0x10)//Ð´ï¿½ï¿½ï¿½ï¿½Ä´ï¿½ï¿½ï¿½
 974:Src/uart.c    **** 			 {
 975:Src/uart.c    **** 				 add_reg = ((int16_t)(p_frame[2]<<8) + p_frame[3]);
 976:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 977:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 978:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = 0x10;
 979:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = num_reg;
 980:Src/uart.c    **** 				 for(i=0;i<6;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿½Ç°ï¿½
 981:Src/uart.c    **** 				 {
 982:Src/uart.c    **** 					g_UART_Tx_Modbus[pos++] =    p_frame[i];					 
 983:Src/uart.c    **** 				 }				 
 984:Src/uart.c    **** 			}
 985:Src/uart.c    **** 		else
 986:Src/uart.c    **** 		{
 987:Src/uart.c    **** 			g_bUARTPushingFrames = 0;
 988:Src/uart.c    **** 			return;
 989:Src/uart.c    **** 		}
 990:Src/uart.c    **** 	if(p_frame[1] == 0x06 || p_frame[1] == 0x10)
 991:Src/uart.c    **** 	{		
 992:Src/uart.c    **** 			{
 993:Src/uart.c    **** 				if(add_reg>=USERCMDMAP_LEN)
 994:Src/uart.c    **** 				{
 995:Src/uart.c    **** 					pbWRBuf = &g_CmdMap_bWR[0][0];
 996:Src/uart.c    **** 					if((u16)g_CmdMap[CMD_ACCESS_CODE] != (u16)0x1234)
 997:Src/uart.c    **** 					{
 998:Src/uart.c    **** 						result = 0;
 999:Src/uart.c    **** 					}
1000:Src/uart.c    **** 					else				
1001:Src/uart.c    **** 					{
1002:Src/uart.c    **** 						for(i=0; i<num_reg; i++)
1003:Src/uart.c    **** 						{
1004:Src/uart.c    **** 						if (*(pbWRBuf+add_reg-USERCMDMAP_LEN+i) != WRFLG_RW)
1005:Src/uart.c    **** 						result = 0;			
1006:Src/uart.c    **** 						}
1007:Src/uart.c    **** 					}
1008:Src/uart.c    **** 				}
1009:Src/uart.c    **** 				else
1010:Src/uart.c    **** 				{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 58


1011:Src/uart.c    **** 					pbWRBuf = &g_CmdMap_User_bWR[0][0];
1012:Src/uart.c    **** 					for(i=0; i<num_reg; i++)
1013:Src/uart.c    **** 					{
1014:Src/uart.c    **** 						if (*(pbWRBuf+add_reg+i) != WRFLG_RW)
1015:Src/uart.c    **** 						result = 0;
1016:Src/uart.c    **** 					}
1017:Src/uart.c    **** 				}
1018:Src/uart.c    **** 				if(result)
1019:Src/uart.c    **** 				{	
1020:Src/uart.c    **** 					if(p_frame[1] == 0x06)
1021:Src/uart.c    **** 					{
1022:Src/uart.c    **** 						g_CmdMap[add_reg] = (p_frame[4]<<8) + p_frame[5];
1023:Src/uart.c    **** 					}
1024:Src/uart.c    **** 					if(p_frame[1] == 0x10)
1025:Src/uart.c    **** 					{
1026:Src/uart.c    **** 						for(i=0;i<num_reg;i++)  //(g_UART_RXlen-2-1)
1027:Src/uart.c    **** 						{
1028:Src/uart.c    **** 							g_CmdMap[add_reg+i] = (p_frame[7+2*i]<<8) + p_frame[8+2*i];
1029:Src/uart.c    **** 						}
1030:Src/uart.c    **** 					}
1031:Src/uart.c    **** 				}
1032:Src/uart.c    **** 				if(add_reg >= POS_LINEARITY_ADC(0) && add_reg <= POS_LINEARITY_ADC(NUM_LINEARITY_SEG))	
1033:Src/uart.c    **** 				{
1034:Src/uart.c    **** 					pos_linearity_ini();
1035:Src/uart.c    **** 				}				
1036:Src/uart.c    **** 				if(add_reg <= CMD_POS_SET_PU && (add_reg+num_reg) >= CMD_POS_SET_PU 
1037:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
1038:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
1039:Src/uart.c    **** 				{
1040:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1041:Src/uart.c    **** 						recPosCmd();
1042:Src/uart.c    **** 				}
1043:Src/uart.c    **** 				if(add_reg <= CMD_FORCE_SET_PU && (add_reg+num_reg)>= CMD_FORCE_SET_PU && g_CmdMap[CMD_USEER_MO
1044:Src/uart.c    **** 				{
1045:Src/uart.c    **** 						g_CmdMap[TAG_MOTOR_ENABLE] = 1;
1046:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
1047:Src/uart.c    **** 				}
1048:Src/uart.c    **** 				
1049:Src/uart.c    **** 								//Î»ï¿½ï¿½+ï¿½ï¿½Ä£Ê½ï¿½ï¿½ Í¬Ê±ï¿½Þ¸ï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù¶È¡ï¿½Î»ï¿½Ã¼Ä´ï¿½ï¿½ï¿½ï¿½ï
1050:Src/uart.c    **** 				if(add_reg <= CMD_FORCE_SET_PU && (add_reg+num_reg) >= CMD_POS_SET_PU && (g_CmdMap[CMD_USEER_MO
1051:Src/uart.c    **** 				{
1052:Src/uart.c    **** 						if(g_CmdMap[CMD_FORCE_DIR] == 0)
1053:Src/uart.c    **** 						{
1054:Src/uart.c    **** 							force_set = g_CmdMap[CMD_FORCE_SET_PU];
1055:Src/uart.c    **** 							force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
1056:Src/uart.c    **** 						}
1057:Src/uart.c    **** 						else
1058:Src/uart.c    **** 						{
1059:Src/uart.c    **** 							force_set = -1*g_CmdMap[CMD_FORCE_SET_PU];
1060:Src/uart.c    **** 							force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
1061:Src/uart.c    **** 						}
1062:Src/uart.c    **** 
1063:Src/uart.c    **** 						if(force_set>0) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1064:Src/uart.c    **** 						{
1065:Src/uart.c    **** 							if(force_set>force_act) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î»
1066:Src/uart.c    **** 							{
1067:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 59


1068:Src/uart.c    **** 								{
1069:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1070:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1071:Src/uart.c    **** 									recPosCmd();
1072:Src/uart.c    **** 								}
1073:Src/uart.c    **** 								else
1074:Src/uart.c    **** 								{
1075:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½
1076:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
1077:Src/uart.c    **** 								}
1078:Src/uart.c    **** 							}
1079:Src/uart.c    **** 							else 
1080:Src/uart.c    **** 							{
1081:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] >g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï
1082:Src/uart.c    **** 								{
1083:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1084:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1085:Src/uart.c    **** 									recPosCmd();
1086:Src/uart.c    **** 								}
1087:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
1088:Src/uart.c    **** 								{
1089:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
1090:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
1091:Src/uart.c    **** 								}				
1092:Src/uart.c    **** 							}
1093:Src/uart.c    **** 						}
1094:Src/uart.c    **** 						else if(force_set<0)  //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1095:Src/uart.c    **** 						{													
1096:Src/uart.c    **** 							if(force_set<force_act) //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»
1097:Src/uart.c    **** 							{
1098:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿
1099:Src/uart.c    **** 								{
1100:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Pro
1101:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1102:Src/uart.c    **** 									recPosCmd();
1103:Src/uart.c    **** 								}
1104:Src/uart.c    **** 								else
1105:Src/uart.c    **** 								{
1106:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 2; //ï¿½ï¿½Î´ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1107:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
1108:Src/uart.c    **** 								}
1109:Src/uart.c    **** 							}
1110:Src/uart.c    **** 							else 
1111:Src/uart.c    **** 							{
1112:Src/uart.c    **** 								if(g_CmdMap[CMD_POS_SET_PU] <g_CmdMap[CMD_POS_ACT_PU]) //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½ï¿½Ò²Ã»
1113:Src/uart.c    **** 								{
1114:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 1; 
1115:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
1116:Src/uart.c    **** 									recPosCmd();
1117:Src/uart.c    **** 								}
1118:Src/uart.c    **** 								else    //ï¿½ï¿½ï¿½ï¿½Î» ï¿½ï¿½ Î»ï¿½Ãµï¿½Î»  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ú½×¶ï¿½
1119:Src/uart.c    **** 								{
1120:Src/uart.c    **** 									status_Mode_POSITION_FORCE = 3; 
1121:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
1122:Src/uart.c    **** 								}				
1123:Src/uart.c    **** 							}							
1124:Src/uart.c    **** 						}
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 60


1125:Src/uart.c    **** 						else
1126:Src/uart.c    **** 						{
1127:Src/uart.c    **** 							status_Mode_POSITION_FORCE = 3; //Î»ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½Âµï¿½×´Ì¬ï¿½ï¿½ 0 Idle 1 Profi
1128:Src/uart.c    **** 						}				
1129:Src/uart.c    **** 				}		
1130:Src/uart.c    **** 				
1131:Src/uart.c    **** 				
1132:Src/uart.c    **** 				
1133:Src/uart.c    **** 				
1134:Src/uart.c    **** 				
1135:Src/uart.c    **** 				if(add_reg == SYS_SET_POS_ACT_PU)     
1136:Src/uart.c    **** 				{
1137:Src/uart.c    **** 						//ï¿½ï¿½ï¿½Ãµï¿½Ç°Î»ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â¼ï¿½ï¿½ã¹«Ê½
1138:Src/uart.c    **** 					if(g_CmdMap[SYS_MU_COMM_TO_PC] == 1)     //MU Ð¾Æ¬ï¿½ê¶¨Ä£Ê½
1139:Src/uart.c    **** 					{
1140:Src/uart.c    **** 						//	flag_first_exe = 0;
1141:Src/uart.c    **** 							rod_pos_Muti_Encoder = g_CmdMap[SYS_SET_POS_ACT_PU]*(*g_pPos_ref_base_um)*(int64_t)g_CmdMap[
1142:Src/uart.c    **** 					}
1143:Src/uart.c    **** 					else
1144:Src/uart.c    **** 						*g_pMU_value_offset = MU_Value;
1145:Src/uart.c    **** 						range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_of
1146:Src/uart.c    **** 				}
1147:Src/uart.c    **** 				if(add_reg == MOT_EANGLE_OFFSET)	
1148:Src/uart.c    **** 				{
1149:Src/uart.c    **** 						g_Encode_offset = (int)g_CmdMap[MOT_EANGLE_OFFSET];
1150:Src/uart.c    **** 						g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
1151:Src/uart.c    **** 				}		
1152:Src/uart.c    **** 			}		
1153:Src/uart.c    **** 	}
1154:Src/uart.c    **** 	ModBusCRC16Send(g_UART_Tx_Modbus, pos);//buf
1155:Src/uart.c    **** 	pos = pos + 2;
1156:Src/uart.c    **** 	g_UART_Tx_Modbus_len = pos;
1157:Src/uart.c    **** 	flag_rev_modbus = 1;
1158:Src/uart.c    **** 
1159:Src/uart.c    **** }
1160:Src/uart.c    **** void Rx_Send_Modbus(void)
1161:Src/uart.c    **** {
 1966              		.loc 1 1161 0
 1967              		.cfi_startproc
 1968              		@ args = 0, pretend = 0, frame = 0
 1969              		@ frame_needed = 0, uses_anonymous_args = 0
 1970              		@ link register save eliminated.
1162:Src/uart.c    **** 	if(flag_rev_modbus == 1)
 1971              		.loc 1 1162 0
 1972 0000 164B     		ldr	r3, .L199
 1973 0002 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1974 0004 DBB2     		uxtb	r3, r3
 1975 0006 012B     		cmp	r3, #1
 1976 0008 22D0     		beq	.L198
 1977              	.L195:
1163:Src/uart.c    **** 	{
1164:Src/uart.c    **** 		modbus_rly_delay_ms++;	
1165:Src/uart.c    **** 	}	
1166:Src/uart.c    **** 	if(modbus_rly_delay_ms >= 1)
 1978              		.loc 1 1166 0
 1979 000a 154B     		ldr	r3, .L199+4
 1980 000c 1B88     		ldrh	r3, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 61


 1981 000e 1BB2     		sxth	r3, r3
 1982 0010 002B     		cmp	r3, #0
 1983 0012 1CDD     		ble	.L194
1167:Src/uart.c    **** 	{
1168:Src/uart.c    **** 		modbus_rly_delay_ms = 0;
 1984              		.loc 1 1168 0
 1985 0014 0023     		movs	r3, #0
 1986 0016 124A     		ldr	r2, .L199+4
 1987 0018 1380     		strh	r3, [r2]	@ movhi
1169:Src/uart.c    **** 		flag_rev_modbus = 0;
 1988              		.loc 1 1169 0
 1989 001a 104A     		ldr	r2, .L199
 1990 001c 1370     		strb	r3, [r2]
1170:Src/uart.c    **** 		if(g_fast_debug == 0)
 1991              		.loc 1 1170 0
 1992 001e 114B     		ldr	r3, .L199+8
 1993 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1994 0022 8BB9     		cbnz	r3, .L197
1171:Src/uart.c    **** 		{
1172:Src/uart.c    **** 			__HAL_DMA_DISABLE(&hdma_usart1_tx);
 1995              		.loc 1 1172 0
 1996 0024 104A     		ldr	r2, .L199+12
 1997 0026 1168     		ldr	r1, [r2]
 1998 0028 0B68     		ldr	r3, [r1]
 1999 002a 23F00103 		bic	r3, r3, #1
 2000 002e 0B60     		str	r3, [r1]
1173:Src/uart.c    **** 			hdma_usart1_tx.Instance->CPAR = (uint32_t)(&(USART1->TDR));				
 2001              		.loc 1 1173 0
 2002 0030 1368     		ldr	r3, [r2]
 2003 0032 0E4A     		ldr	r2, .L199+16
 2004 0034 9A60     		str	r2, [r3, #8]
1174:Src/uart.c    **** 			hdma_usart1_tx.Instance->CNDTR = g_UART_Tx_Modbus_len;//g_Frames[g_Frames_Tail].len;
 2005              		.loc 1 1174 0
 2006 0036 0E4A     		ldr	r2, .L199+20
 2007 0038 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2008 003a 5A60     		str	r2, [r3, #4]
1175:Src/uart.c    **** 			hdma_usart1_tx.Instance->CMAR = (uint32_t)&g_UART_Tx_Modbus[0];//(uint32_t)&(g_Frames[g_Frames_T
 2009              		.loc 1 1175 0
 2010 003c 0D4A     		ldr	r2, .L199+24
 2011 003e DA60     		str	r2, [r3, #12]
1176:Src/uart.c    **** 			__HAL_DMA_ENABLE(&hdma_usart1_tx);
 2012              		.loc 1 1176 0
 2013 0040 1A68     		ldr	r2, [r3]
 2014 0042 42F00102 		orr	r2, r2, #1
 2015 0046 1A60     		str	r2, [r3]
 2016              	.L197:
1177:Src/uart.c    **** 		}		
1178:Src/uart.c    **** 		g_bUARTPushingFrames = 0;
 2017              		.loc 1 1178 0
 2018 0048 0B4B     		ldr	r3, .L199+28
 2019 004a 0022     		movs	r2, #0
 2020 004c 1A70     		strb	r2, [r3]
 2021              	.L194:
1179:Src/uart.c    **** 	}
1180:Src/uart.c    **** }
 2022              		.loc 1 1180 0
 2023 004e 7047     		bx	lr
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 62


 2024              	.L198:
1164:Src/uart.c    **** 	}	
 2025              		.loc 1 1164 0
 2026 0050 034A     		ldr	r2, .L199+4
 2027 0052 1388     		ldrh	r3, [r2]
 2028 0054 0133     		adds	r3, r3, #1
 2029 0056 1BB2     		sxth	r3, r3
 2030 0058 1380     		strh	r3, [r2]	@ movhi
 2031 005a D6E7     		b	.L195
 2032              	.L200:
 2033              		.align	2
 2034              	.L199:
 2035 005c 00000000 		.word	flag_rev_modbus
 2036 0060 00000000 		.word	modbus_rly_delay_ms
 2037 0064 00000000 		.word	.LANCHOR1
 2038 0068 00000000 		.word	hdma_usart1_tx
 2039 006c 28380140 		.word	1073821736
 2040 0070 00000000 		.word	.LANCHOR14
 2041 0074 00000000 		.word	.LANCHOR15
 2042 0078 00000000 		.word	.LANCHOR0
 2043              		.cfi_endproc
 2044              	.LFE345:
 2046              		.section	.text.ModBusCRC16,"ax",%progbits
 2047              		.align	1
 2048              		.global	ModBusCRC16
 2049              		.syntax unified
 2050              		.thumb
 2051              		.thumb_func
 2052              		.fpu fpv4-sp-d16
 2054              	ModBusCRC16:
 2055              	.LFB346:
1181:Src/uart.c    **** unsigned int ModBusCRC16(unsigned char *  cmd, unsigned int len)
1182:Src/uart.c    **** {
 2056              		.loc 1 1182 0
 2057              		.cfi_startproc
 2058              		@ args = 0, pretend = 0, frame = 0
 2059              		@ frame_needed = 0, uses_anonymous_args = 0
 2060              		@ link register save eliminated.
 2061              	.LVL170:
 2062 0000 30B4     		push	{r4, r5}
 2063              	.LCFI14:
 2064              		.cfi_def_cfa_offset 8
 2065              		.cfi_offset 4, -8
 2066              		.cfi_offset 5, -4
 2067              	.LVL171:
1183:Src/uart.c    ****     unsigned int i, j, tmp, CRC16;//out;
1184:Src/uart.c    ****     CRC16 = 0xFFFF;             //CRC??????
 2068              		.loc 1 1184 0
 2069 0002 4FF6FF73 		movw	r3, #65535
1185:Src/uart.c    ****     for (i = 0; i < len; i++)
 2070              		.loc 1 1185 0
 2071 0006 0025     		movs	r5, #0
 2072 0008 0DE0     		b	.L202
 2073              	.LVL172:
 2074              	.L204:
1186:Src/uart.c    ****     {
1187:Src/uart.c    ****         CRC16 ^= cmd[i];
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 63


1188:Src/uart.c    ****         for (j = 0; j < 8; j++)
 2075              		.loc 1 1188 0 discriminator 2
 2076 000a 0132     		adds	r2, r2, #1
 2077              	.LVL173:
 2078              	.L203:
 2079              		.loc 1 1188 0 is_stmt 0 discriminator 1
 2080 000c 072A     		cmp	r2, #7
 2081 000e 09D8     		bhi	.L208
1189:Src/uart.c    ****         {
1190:Src/uart.c    ****             tmp = (unsigned int)(CRC16 & 0x0001);
 2082              		.loc 1 1190 0 is_stmt 1
 2083 0010 03F00104 		and	r4, r3, #1
 2084              	.LVL174:
1191:Src/uart.c    ****             CRC16 >>= 1;
 2085              		.loc 1 1191 0
 2086 0014 5B08     		lsrs	r3, r3, #1
 2087              	.LVL175:
1192:Src/uart.c    ****             if (tmp == 1)
 2088              		.loc 1 1192 0
 2089 0016 002C     		cmp	r4, #0
 2090 0018 F7D0     		beq	.L204
1193:Src/uart.c    ****             {
1194:Src/uart.c    ****                 CRC16 ^= 0xA001;    //?????
 2091              		.loc 1 1194 0
 2092 001a 83F42043 		eor	r3, r3, #40960
 2093              	.LVL176:
 2094 001e 83F00103 		eor	r3, r3, #1
 2095              	.LVL177:
 2096 0022 F2E7     		b	.L204
 2097              	.LVL178:
 2098              	.L208:
1185:Src/uart.c    ****     {
 2099              		.loc 1 1185 0 discriminator 2
 2100 0024 0135     		adds	r5, r5, #1
 2101              	.LVL179:
 2102              	.L202:
1185:Src/uart.c    ****     {
 2103              		.loc 1 1185 0 is_stmt 0 discriminator 1
 2104 0026 8D42     		cmp	r5, r1
 2105 0028 03D2     		bcs	.L209
1187:Src/uart.c    ****         for (j = 0; j < 8; j++)
 2106              		.loc 1 1187 0 is_stmt 1
 2107 002a 425D     		ldrb	r2, [r0, r5]	@ zero_extendqisi2
 2108 002c 5340     		eors	r3, r3, r2
 2109              	.LVL180:
1188:Src/uart.c    ****         {
 2110              		.loc 1 1188 0
 2111 002e 0022     		movs	r2, #0
 2112 0030 ECE7     		b	.L203
 2113              	.LVL181:
 2114              	.L209:
1195:Src/uart.c    ****             }
1196:Src/uart.c    ****         }
1197:Src/uart.c    ****     }
1198:Src/uart.c    **** 		return CRC16; 
1199:Src/uart.c    ****     //cmd[i++] = (byte) (CRC16 & 0x00FF);
1200:Src/uart.c    ****     //cmd[i++] = (byte) ((CRC16 & 0xFF00)>>8);
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 64


1201:Src/uart.c    **** }
 2115              		.loc 1 1201 0
 2116 0032 1846     		mov	r0, r3
 2117              	.LVL182:
 2118 0034 30BC     		pop	{r4, r5}
 2119              	.LCFI15:
 2120              		.cfi_restore 5
 2121              		.cfi_restore 4
 2122              		.cfi_def_cfa_offset 0
 2123              	.LVL183:
 2124 0036 7047     		bx	lr
 2125              		.cfi_endproc
 2126              	.LFE346:
 2128              		.section	.text.ModBusCRC16Send,"ax",%progbits
 2129              		.align	1
 2130              		.global	ModBusCRC16Send
 2131              		.syntax unified
 2132              		.thumb
 2133              		.thumb_func
 2134              		.fpu fpv4-sp-d16
 2136              	ModBusCRC16Send:
 2137              	.LFB347:
1202:Src/uart.c    **** //ModbusCRC Ð£ï¿½ï¿½
1203:Src/uart.c    **** void ModBusCRC16Send(unsigned char *  cmd, unsigned int len)
1204:Src/uart.c    **** {
 2138              		.loc 1 1204 0
 2139              		.cfi_startproc
 2140              		@ args = 0, pretend = 0, frame = 0
 2141              		@ frame_needed = 0, uses_anonymous_args = 0
 2142              		@ link register save eliminated.
 2143              	.LVL184:
 2144 0000 30B4     		push	{r4, r5}
 2145              	.LCFI16:
 2146              		.cfi_def_cfa_offset 8
 2147              		.cfi_offset 4, -8
 2148              		.cfi_offset 5, -4
 2149              	.LVL185:
1205:Src/uart.c    ****     unsigned int i, j, tmp, CRC16;//out;
1206:Src/uart.c    ****     CRC16 = 0xFFFF;             //CRC??????
 2150              		.loc 1 1206 0
 2151 0002 4FF6FF73 		movw	r3, #65535
1207:Src/uart.c    ****     for (i = 0; i < len; i++)
 2152              		.loc 1 1207 0
 2153 0006 0025     		movs	r5, #0
 2154 0008 0DE0     		b	.L211
 2155              	.LVL186:
 2156              	.L213:
1208:Src/uart.c    ****     {
1209:Src/uart.c    ****         CRC16 ^= cmd[i];
1210:Src/uart.c    ****         for (j = 0; j < 8; j++)
 2157              		.loc 1 1210 0 discriminator 2
 2158 000a 0132     		adds	r2, r2, #1
 2159              	.LVL187:
 2160              	.L212:
 2161              		.loc 1 1210 0 is_stmt 0 discriminator 1
 2162 000c 072A     		cmp	r2, #7
 2163 000e 09D8     		bhi	.L217
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 65


1211:Src/uart.c    ****         {
1212:Src/uart.c    ****             tmp = (unsigned int)(CRC16 & 0x0001);
 2164              		.loc 1 1212 0 is_stmt 1
 2165 0010 03F00104 		and	r4, r3, #1
 2166              	.LVL188:
1213:Src/uart.c    ****             CRC16 >>= 1;
 2167              		.loc 1 1213 0
 2168 0014 5B08     		lsrs	r3, r3, #1
 2169              	.LVL189:
1214:Src/uart.c    ****             if (tmp == 1)
 2170              		.loc 1 1214 0
 2171 0016 002C     		cmp	r4, #0
 2172 0018 F7D0     		beq	.L213
1215:Src/uart.c    ****             {
1216:Src/uart.c    ****                 CRC16 ^= 0xA001;    //?????
 2173              		.loc 1 1216 0
 2174 001a 83F42043 		eor	r3, r3, #40960
 2175              	.LVL190:
 2176 001e 83F00103 		eor	r3, r3, #1
 2177              	.LVL191:
 2178 0022 F2E7     		b	.L213
 2179              	.LVL192:
 2180              	.L217:
1207:Src/uart.c    ****     {
 2181              		.loc 1 1207 0 discriminator 2
 2182 0024 0135     		adds	r5, r5, #1
 2183              	.LVL193:
 2184              	.L211:
1207:Src/uart.c    ****     {
 2185              		.loc 1 1207 0 is_stmt 0 discriminator 1
 2186 0026 8D42     		cmp	r5, r1
 2187 0028 03D2     		bcs	.L218
1209:Src/uart.c    ****         for (j = 0; j < 8; j++)
 2188              		.loc 1 1209 0 is_stmt 1
 2189 002a 425D     		ldrb	r2, [r0, r5]	@ zero_extendqisi2
 2190 002c 5340     		eors	r3, r3, r2
 2191              	.LVL194:
1210:Src/uart.c    ****         {
 2192              		.loc 1 1210 0
 2193 002e 0022     		movs	r2, #0
 2194 0030 ECE7     		b	.L212
 2195              	.LVL195:
 2196              	.L218:
1217:Src/uart.c    ****             }
1218:Src/uart.c    ****         }
1219:Src/uart.c    ****     }
1220:Src/uart.c    ****     cmd[i++] =  (CRC16 & 0x00FF);
 2197              		.loc 1 1220 0
 2198 0032 6A1C     		adds	r2, r5, #1
 2199              	.LVL196:
 2200 0034 4355     		strb	r3, [r0, r5]
1221:Src/uart.c    ****     cmd[i++] =  ((CRC16 & 0xFF00)>>8);
 2201              		.loc 1 1221 0
 2202 0036 1B0A     		lsrs	r3, r3, #8
 2203              	.LVL197:
 2204 0038 8354     		strb	r3, [r0, r2]
1222:Src/uart.c    **** }
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 66


 2205              		.loc 1 1222 0
 2206 003a 30BC     		pop	{r4, r5}
 2207              	.LCFI17:
 2208              		.cfi_restore 5
 2209              		.cfi_restore 4
 2210              		.cfi_def_cfa_offset 0
 2211 003c 7047     		bx	lr
 2212              		.cfi_endproc
 2213              	.LFE347:
 2215              		.section	.text.Rx_Pro_Modbus,"ax",%progbits
 2216              		.align	1
 2217              		.global	Rx_Pro_Modbus
 2218              		.syntax unified
 2219              		.thumb
 2220              		.thumb_func
 2221              		.fpu fpv4-sp-d16
 2223              	Rx_Pro_Modbus:
 2224              	.LFB344:
 942:Src/uart.c    **** 	  int16_t add_reg =0, num_reg = 0,i = 0;
 2225              		.loc 1 942 0
 2226              		.cfi_startproc
 2227              		@ args = 0, pretend = 0, frame = 0
 2228              		@ frame_needed = 0, uses_anonymous_args = 0
 2229              	.LVL198:
 2230 0000 2DE9F048 		push	{r4, r5, r6, r7, fp, lr}
 2231              	.LCFI18:
 2232              		.cfi_def_cfa_offset 24
 2233              		.cfi_offset 4, -24
 2234              		.cfi_offset 5, -20
 2235              		.cfi_offset 6, -16
 2236              		.cfi_offset 7, -12
 2237              		.cfi_offset 11, -8
 2238              		.cfi_offset 14, -4
 2239              	.LVL199:
 949:Src/uart.c    **** //		cur_cmd = p_frame[1];
 2240              		.loc 1 949 0
 2241 0004 A94B     		ldr	r3, .L284
 2242 0006 0122     		movs	r2, #1
 2243 0008 1A70     		strb	r2, [r3]
 951:Src/uart.c    **** 			 {
 2244              		.loc 1 951 0
 2245 000a 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 2246 000c 032B     		cmp	r3, #3
 2247 000e 07D0     		beq	.L268
 964:Src/uart.c    **** 			 {
 2248              		.loc 1 964 0
 2249 0010 062B     		cmp	r3, #6
 2250 0012 40D0     		beq	.L269
 973:Src/uart.c    **** 			 {
 2251              		.loc 1 973 0
 2252 0014 102B     		cmp	r3, #16
 2253 0016 52D0     		beq	.L270
 987:Src/uart.c    **** 			return;
 2254              		.loc 1 987 0
 2255 0018 A44B     		ldr	r3, .L284
 2256 001a 0022     		movs	r2, #0
 2257 001c 1A70     		strb	r2, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 67


 988:Src/uart.c    **** 		}
 2258              		.loc 1 988 0
 2259 001e 38E0     		b	.L219
 2260              	.L268:
 953:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2261              		.loc 1 953 0
 2262 0020 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2263 0022 C578     		ldrb	r5, [r0, #3]	@ zero_extendqisi2
 2264 0024 05EB0325 		add	r5, r5, r3, lsl #8
 2265 0028 2DB2     		sxth	r5, r5
 2266              	.LVL200:
 954:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];//(uint8_t)*p_ID;
 2267              		.loc 1 954 0
 2268 002a 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 2269 002c 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 2270 002e 03EB0223 		add	r3, r3, r2, lsl #8
 2271 0032 9BB2     		uxth	r3, r3
 2272 0034 1EB2     		sxth	r6, r3
 2273              	.LVL201:
 955:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 0x03;
 2274              		.loc 1 955 0
 2275 0036 9E4A     		ldr	r2, .L284+4
 2276 0038 9189     		ldrh	r1, [r2, #12]
 2277              	.LVL202:
 2278 003a 9E4A     		ldr	r2, .L284+8
 2279 003c 1170     		strb	r1, [r2]
 2280              	.LVL203:
 956:Src/uart.c    **** 				 g_UART_Tx_Modbus[pos++] = 2*num_reg;//ï¿½Ö½Ú³ï¿½ï¿½ï¿½
 2281              		.loc 1 956 0
 2282 003e 0324     		movs	r4, #3
 2283 0040 5470     		strb	r4, [r2, #1]
 2284              	.LVL204:
 957:Src/uart.c    **** 				 for(i=0;i<num_reg;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»ï¿½ï¿
 2285              		.loc 1 957 0
 2286 0042 5B00     		lsls	r3, r3, #1
 2287 0044 9370     		strb	r3, [r2, #2]
 958:Src/uart.c    **** 				 {
 2288              		.loc 1 958 0
 2289 0046 0023     		movs	r3, #0
 2290 0048 12E0     		b	.L221
 2291              	.LVL205:
 2292              	.L222:
 960:Src/uart.c    **** 					 g_UART_Tx_Modbus[pos++] = g_CmdMap[add_reg+i] & 0x0ff;					 	 
 2293              		.loc 1 960 0 discriminator 3
 2294 004a 05EB030E 		add	lr, r5, r3
 2295 004e DFF860C2 		ldr	ip, .L284+4
 2296 0052 3CF81E10 		ldrh	r1, [ip, lr, lsl #1]
 2297 0056 621C     		adds	r2, r4, #1
 2298 0058 92B2     		uxth	r2, r2
 2299              	.LVL206:
 2300 005a 964F     		ldr	r7, .L284+8
 2301 005c 41F30721 		sbfx	r1, r1, #8, #8
 2302 0060 3955     		strb	r1, [r7, r4]
 961:Src/uart.c    **** 				 }			 				 
 2303              		.loc 1 961 0 discriminator 3
 2304 0062 3CF81E10 		ldrh	r1, [ip, lr, lsl #1]
 2305 0066 0234     		adds	r4, r4, #2
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 68


 2306 0068 A4B2     		uxth	r4, r4
 2307              	.LVL207:
 2308 006a B954     		strb	r1, [r7, r2]
 958:Src/uart.c    **** 				 {
 2309              		.loc 1 958 0 discriminator 3
 2310 006c 0133     		adds	r3, r3, #1
 2311              	.LVL208:
 2312 006e 1BB2     		sxth	r3, r3
 2313              	.LVL209:
 2314              	.L221:
 958:Src/uart.c    **** 				 {
 2315              		.loc 1 958 0 is_stmt 0 discriminator 1
 2316 0070 B342     		cmp	r3, r6
 2317 0072 EADB     		blt	.L222
 2318              	.LVL210:
 2319              	.L223:
 990:Src/uart.c    **** 	{		
 2320              		.loc 1 990 0 is_stmt 1
 2321 0074 4778     		ldrb	r7, [r0, #1]	@ zero_extendqisi2
 2322 0076 062F     		cmp	r7, #6
 2323 0078 38D0     		beq	.L231
 990:Src/uart.c    **** 	{		
 2324              		.loc 1 990 0 is_stmt 0 discriminator 1
 2325 007a 102F     		cmp	r7, #16
 2326 007c 36D0     		beq	.L231
 2327              	.LVL211:
 2328              	.L232:
1154:Src/uart.c    **** 	pos = pos + 2;
 2329              		.loc 1 1154 0 is_stmt 1
 2330 007e 2146     		mov	r1, r4
 2331 0080 8C48     		ldr	r0, .L284+8
 2332 0082 FFF7FEFF 		bl	ModBusCRC16Send
 2333              	.LVL212:
1155:Src/uart.c    **** 	g_UART_Tx_Modbus_len = pos;
 2334              		.loc 1 1155 0
 2335 0086 0234     		adds	r4, r4, #2
 2336              	.LVL213:
1156:Src/uart.c    **** 	flag_rev_modbus = 1;
 2337              		.loc 1 1156 0
 2338 0088 8B4B     		ldr	r3, .L284+12
 2339 008a 1C70     		strb	r4, [r3]
1157:Src/uart.c    **** 
 2340              		.loc 1 1157 0
 2341 008c 8B4B     		ldr	r3, .L284+16
 2342 008e 0122     		movs	r2, #1
 2343 0090 1A70     		strb	r2, [r3]
 2344              	.LVL214:
 2345              	.L219:
1159:Src/uart.c    **** void Rx_Send_Modbus(void)
 2346              		.loc 1 1159 0
 2347 0092 BDE8F088 		pop	{r4, r5, r6, r7, fp, pc}
 2348              	.LVL215:
 2349              	.L269:
 966:Src/uart.c    **** 				 num_reg = 1;
 2350              		.loc 1 966 0
 2351 0096 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2352 0098 C578     		ldrb	r5, [r0, #3]	@ zero_extendqisi2
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 69


 2353 009a 05EB0325 		add	r5, r5, r3, lsl #8
 2354 009e 2DB2     		sxth	r5, r5
 2355              	.LVL216:
 945:Src/uart.c    **** 	  u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 2356              		.loc 1 945 0
 2357 00a0 0024     		movs	r4, #0
 968:Src/uart.c    **** 				 {
 2358              		.loc 1 968 0
 2359 00a2 2346     		mov	r3, r4
 2360 00a4 06E0     		b	.L225
 2361              	.LVL217:
 2362              	.L226:
 970:Src/uart.c    **** 				 }
 2363              		.loc 1 970 0 discriminator 3
 2364 00a6 621C     		adds	r2, r4, #1
 2365              	.LVL218:
 2366 00a8 C75C     		ldrb	r7, [r0, r3]	@ zero_extendqisi2
 2367 00aa 824E     		ldr	r6, .L284+8
 2368 00ac 3755     		strb	r7, [r6, r4]
 968:Src/uart.c    **** 				 {
 2369              		.loc 1 968 0 discriminator 3
 2370 00ae 0133     		adds	r3, r3, #1
 2371              	.LVL219:
 2372 00b0 1BB2     		sxth	r3, r3
 2373              	.LVL220:
 970:Src/uart.c    **** 				 }
 2374              		.loc 1 970 0 discriminator 3
 2375 00b2 94B2     		uxth	r4, r2
 2376              	.LVL221:
 2377              	.L225:
 968:Src/uart.c    **** 				 {
 2378              		.loc 1 968 0 discriminator 1
 2379 00b4 8A1E     		subs	r2, r1, #2
 2380 00b6 9342     		cmp	r3, r2
 2381 00b8 F5DB     		blt	.L226
 967:Src/uart.c    **** 				 for(i=0;i<rx_cur_Num-2;i++)   //ï¿½ï¿½ 2byteÑ­ï¿½ï¿½ï¿½ï¿½×¢ï¿½ï¿½modbus ï¿½ï¿½ï¿½ï¿½ ï¿½ï¿½Î»
 2382              		.loc 1 967 0
 2383 00ba 0126     		movs	r6, #1
 2384 00bc DAE7     		b	.L223
 2385              	.LVL222:
 2386              	.L270:
 975:Src/uart.c    **** 				 num_reg = (int16_t)(p_frame[4]<<8) + p_frame[5];
 2387              		.loc 1 975 0
 2388 00be 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2389 00c0 C578     		ldrb	r5, [r0, #3]	@ zero_extendqisi2
 2390 00c2 05EB0325 		add	r5, r5, r3, lsl #8
 2391 00c6 2DB2     		sxth	r5, r5
 2392              	.LVL223:
 976:Src/uart.c    **** //				 g_UART_Tx_Modbus[pos++] = g_CmdMap[CMD_ID];    
 2393              		.loc 1 976 0
 2394 00c8 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 2395 00ca 4679     		ldrb	r6, [r0, #5]	@ zero_extendqisi2
 2396 00cc 06EB0326 		add	r6, r6, r3, lsl #8
 2397 00d0 36B2     		sxth	r6, r6
 2398              	.LVL224:
 945:Src/uart.c    **** 	  u8* pbWRBuf = &g_CmdMap_bWR[0][0];
 2399              		.loc 1 945 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 70


 2400 00d2 0024     		movs	r4, #0
 980:Src/uart.c    **** 				 {
 2401              		.loc 1 980 0
 2402 00d4 2346     		mov	r3, r4
 2403 00d6 06E0     		b	.L228
 2404              	.LVL225:
 2405              	.L229:
 982:Src/uart.c    **** 				 }				 
 2406              		.loc 1 982 0 discriminator 3
 2407 00d8 621C     		adds	r2, r4, #1
 2408              	.LVL226:
 2409 00da C75C     		ldrb	r7, [r0, r3]	@ zero_extendqisi2
 2410 00dc 7549     		ldr	r1, .L284+8
 2411 00de 0F55     		strb	r7, [r1, r4]
 980:Src/uart.c    **** 				 {
 2412              		.loc 1 980 0 discriminator 3
 2413 00e0 0133     		adds	r3, r3, #1
 2414              	.LVL227:
 2415 00e2 1BB2     		sxth	r3, r3
 2416              	.LVL228:
 982:Src/uart.c    **** 				 }				 
 2417              		.loc 1 982 0 discriminator 3
 2418 00e4 94B2     		uxth	r4, r2
 2419              	.LVL229:
 2420              	.L228:
 980:Src/uart.c    **** 				 {
 2421              		.loc 1 980 0 discriminator 1
 2422 00e6 052B     		cmp	r3, #5
 2423 00e8 F6DD     		ble	.L229
 2424 00ea C3E7     		b	.L223
 2425              	.L231:
 993:Src/uart.c    **** 				{
 2426              		.loc 1 993 0
 2427 00ec FF2D     		cmp	r5, #255
 2428 00ee 7CDD     		ble	.L263
 996:Src/uart.c    **** 					{
 2429              		.loc 1 996 0
 2430 00f0 6F4B     		ldr	r3, .L284+4
 2431              	.LVL230:
 2432 00f2 5B8B     		ldrh	r3, [r3, #26]
 2433 00f4 1BB2     		sxth	r3, r3
 2434 00f6 41F23422 		movw	r2, #4660
 2435 00fa 9342     		cmp	r3, r2
 2436 00fc 57D0     		beq	.L271
 2437              	.LVL231:
 2438              	.L234:
1032:Src/uart.c    **** 				{
 2439              		.loc 1 1032 0
 2440 00fe A5F5B873 		sub	r3, r5, #368
 2441 0102 9BB2     		uxth	r3, r3
 2442 0104 B3F5BE7F 		cmp	r3, #380
 2443 0108 40F29980 		bls	.L272
 2444              	.LVL232:
 2445              	.L244:
1036:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
 2446              		.loc 1 1036 0
 2447 010c 242D     		cmp	r5, #36
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 71


 2448 010e 19DC     		bgt	.L245
1036:Src/uart.c    **** 				&& (g_CmdMap[CMD_USEER_MODE] == CMD_USEER_MODE_2_SPEED ||g_CmdMap[CMD_USEER_MODE] == CMD_USEER_
 2449              		.loc 1 1036 0 is_stmt 0 discriminator 1
 2450 0110 AB19     		adds	r3, r5, r6
 2451 0112 232B     		cmp	r3, #35
 2452 0114 16DD     		ble	.L245
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2453              		.loc 1 1037 0 is_stmt 1
 2454 0116 664B     		ldr	r3, .L284+4
 2455 0118 B3F84030 		ldrh	r3, [r3, #64]
 2456 011c 1BB2     		sxth	r3, r3
 2457 011e 022B     		cmp	r3, #2
 2458 0120 0AD0     		beq	.L246
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2459              		.loc 1 1037 0 is_stmt 0 discriminator 1
 2460 0122 634B     		ldr	r3, .L284+4
 2461 0124 B3F84030 		ldrh	r3, [r3, #64]
 2462 0128 1BB2     		sxth	r3, r3
 2463 012a 2BB1     		cbz	r3, .L246
1037:Src/uart.c    **** 				)					//ï¿½ï¿½ï¿½ï¿½ï¿½âµ½ï¿½ï¿½ï¿½Íµï¿½Ä¿ï¿½ï¿½Î»ï¿½Ã£ï¿½ï¿½Ð¶ï¿½ï¿½Ç·ï¿½ï¿½Ë¶ï¿½
 2464              		.loc 1 1037 0 discriminator 2
 2465 012c 604B     		ldr	r3, .L284+4
 2466 012e B3F84030 		ldrh	r3, [r3, #64]
 2467 0132 1BB2     		sxth	r3, r3
 2468 0134 012B     		cmp	r3, #1
 2469 0136 05D1     		bne	.L245
 2470              	.L246:
1040:Src/uart.c    **** 						recPosCmd();
 2471              		.loc 1 1040 0 is_stmt 1
 2472 0138 5D4B     		ldr	r3, .L284+4
 2473 013a 0322     		movs	r2, #3
 2474 013c A3F80422 		strh	r2, [r3, #516]	@ movhi
1041:Src/uart.c    **** 				}
 2475              		.loc 1 1041 0
 2476 0140 FFF7FEFF 		bl	recPosCmd
 2477              	.LVL233:
 2478              	.L245:
1043:Src/uart.c    **** 				{
 2479              		.loc 1 1043 0
 2480 0144 222D     		cmp	r5, #34
 2481 0146 08DC     		bgt	.L247
1043:Src/uart.c    **** 				{
 2482              		.loc 1 1043 0 is_stmt 0 discriminator 1
 2483 0148 AB19     		adds	r3, r5, r6
 2484 014a 212B     		cmp	r3, #33
 2485 014c 05DD     		ble	.L247
1043:Src/uart.c    **** 				{
 2486              		.loc 1 1043 0 discriminator 2
 2487 014e 584B     		ldr	r3, .L284+4
 2488 0150 B3F84030 		ldrh	r3, [r3, #64]
 2489 0154 1BB2     		sxth	r3, r3
 2490 0156 042B     		cmp	r3, #4
 2491 0158 74D0     		beq	.L273
 2492              	.L247:
1050:Src/uart.c    **** 				{
 2493              		.loc 1 1050 0 is_stmt 1
 2494 015a 222D     		cmp	r5, #34
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 72


 2495 015c 08DC     		bgt	.L248
1050:Src/uart.c    **** 				{
 2496              		.loc 1 1050 0 is_stmt 0 discriminator 1
 2497 015e 2E44     		add	r6, r6, r5
 2498              	.LVL234:
 2499 0160 232E     		cmp	r6, #35
 2500 0162 05DD     		ble	.L248
1050:Src/uart.c    **** 				{
 2501              		.loc 1 1050 0 discriminator 2
 2502 0164 524B     		ldr	r3, .L284+4
 2503 0166 B3F84030 		ldrh	r3, [r3, #64]
 2504 016a 1BB2     		sxth	r3, r3
 2505 016c 052B     		cmp	r3, #5
 2506 016e 71D0     		beq	.L274
 2507              	.L248:
1135:Src/uart.c    **** 				{
 2508              		.loc 1 1135 0 is_stmt 1
 2509 0170 40F20713 		movw	r3, #263
 2510 0174 9D42     		cmp	r5, r3
 2511 0176 00F02E81 		beq	.L275
 2512              	.L259:
1147:Src/uart.c    **** 				{
 2513              		.loc 1 1147 0
 2514 017a B5F5937F 		cmp	r5, #294
 2515 017e 7FF47EAF 		bne	.L232
1149:Src/uart.c    **** 						g_Encode_offset_EN = (g_Encode_offset*EN_360/360);
 2516              		.loc 1 1149 0
 2517 0182 4B4B     		ldr	r3, .L284+4
 2518 0184 B3F84C32 		ldrh	r3, [r3, #588]
 2519 0188 1BB2     		sxth	r3, r3
 2520 018a 4D4A     		ldr	r2, .L284+20
 2521 018c 1360     		str	r3, [r2]
1150:Src/uart.c    **** 				}		
 2522              		.loc 1 1150 0
 2523 018e 1368     		ldr	r3, [r2]
 2524 0190 4C4A     		ldr	r2, .L284+24
 2525 0192 B2F90020 		ldrsh	r2, [r2]
 2526 0196 03FB02F3 		mul	r3, r3, r2
 2527 019a 4B4A     		ldr	r2, .L284+28
 2528 019c 82FB0312 		smull	r1, r2, r2, r3
 2529 01a0 1A44     		add	r2, r2, r3
 2530 01a2 DB17     		asrs	r3, r3, #31
 2531 01a4 C3EB2223 		rsb	r3, r3, r2, asr #8
 2532 01a8 484A     		ldr	r2, .L284+32
 2533 01aa 1360     		str	r3, [r2]
 2534 01ac 67E7     		b	.L232
 2535              	.LVL235:
 2536              	.L271:
 944:Src/uart.c    **** 		u16 pos = 0;
 2537              		.loc 1 944 0
 2538 01ae 4FF0010C 		mov	ip, #1
1002:Src/uart.c    **** 						{
 2539              		.loc 1 1002 0
 2540 01b2 0023     		movs	r3, #0
 2541 01b4 01E0     		b	.L235
 2542              	.LVL236:
 2543              	.L236:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 73


1002:Src/uart.c    **** 						{
 2544              		.loc 1 1002 0 is_stmt 0 discriminator 2
 2545 01b6 0133     		adds	r3, r3, #1
 2546              	.LVL237:
 2547 01b8 1BB2     		sxth	r3, r3
 2548              	.LVL238:
 2549              	.L235:
1002:Src/uart.c    **** 						{
 2550              		.loc 1 1002 0 discriminator 1
 2551 01ba 9E42     		cmp	r6, r3
 2552 01bc 19DD     		ble	.L238
1004:Src/uart.c    **** 						result = 0;			
 2553              		.loc 1 1004 0 is_stmt 1
 2554 01be EA18     		adds	r2, r5, r3
 2555 01c0 A2F58072 		sub	r2, r2, #256
 2556 01c4 4249     		ldr	r1, .L284+36
 2557 01c6 525C     		ldrb	r2, [r2, r1]	@ zero_extendqisi2
 2558 01c8 022A     		cmp	r2, #2
 2559 01ca F4D0     		beq	.L236
1005:Src/uart.c    **** 						}
 2560              		.loc 1 1005 0
 2561 01cc 4FF0000C 		mov	ip, #0
 2562              	.LVL239:
 2563 01d0 F1E7     		b	.L236
 2564              	.L239:
 2565              	.LVL240:
1012:Src/uart.c    **** 					{
 2566              		.loc 1 1012 0 discriminator 2
 2567 01d2 0133     		adds	r3, r3, #1
 2568              	.LVL241:
 2569 01d4 1BB2     		sxth	r3, r3
 2570              	.LVL242:
 2571              	.L233:
1012:Src/uart.c    **** 					{
 2572              		.loc 1 1012 0 is_stmt 0 discriminator 1
 2573 01d6 9E42     		cmp	r6, r3
 2574 01d8 0BDD     		ble	.L238
1014:Src/uart.c    **** 						result = 0;
 2575              		.loc 1 1014 0 is_stmt 1
 2576 01da EA18     		adds	r2, r5, r3
 2577 01dc 3D49     		ldr	r1, .L284+40
 2578 01de 525C     		ldrb	r2, [r2, r1]	@ zero_extendqisi2
 2579 01e0 022A     		cmp	r2, #2
 2580 01e2 F6D0     		beq	.L239
1015:Src/uart.c    **** 					}
 2581              		.loc 1 1015 0
 2582 01e4 4FF0000C 		mov	ip, #0
 2583              	.LVL243:
 2584 01e8 F3E7     		b	.L239
 2585              	.LVL244:
 2586              	.L263:
 944:Src/uart.c    **** 		u16 pos = 0;
 2587              		.loc 1 944 0
 2588 01ea 4FF0010C 		mov	ip, #1
1012:Src/uart.c    **** 					{
 2589              		.loc 1 1012 0
 2590 01ee 0023     		movs	r3, #0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 74


 2591              	.LVL245:
 2592 01f0 F1E7     		b	.L233
 2593              	.LVL246:
 2594              	.L238:
1018:Src/uart.c    **** 				{	
 2595              		.loc 1 1018 0
 2596 01f2 BCF1000F 		cmp	ip, #0
 2597 01f6 82D0     		beq	.L234
1020:Src/uart.c    **** 					{
 2598              		.loc 1 1020 0
 2599 01f8 062F     		cmp	r7, #6
 2600 01fa 05D0     		beq	.L276
 2601              	.LVL247:
 2602              	.L241:
1024:Src/uart.c    **** 					{
 2603              		.loc 1 1024 0
 2604 01fc 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 2605 01fe 102B     		cmp	r3, #16
 2606 0200 7FF47DAF 		bne	.L234
1026:Src/uart.c    **** 						{
 2607              		.loc 1 1026 0
 2608 0204 0023     		movs	r3, #0
 2609 0206 17E0     		b	.L242
 2610              	.LVL248:
 2611              	.L276:
1022:Src/uart.c    **** 					}
 2612              		.loc 1 1022 0
 2613 0208 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 2614 020a 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 2615              	.LVL249:
 2616 020c 03EB0223 		add	r3, r3, r2, lsl #8
 2617 0210 1BB2     		sxth	r3, r3
 2618 0212 274A     		ldr	r2, .L284+4
 2619 0214 22F81530 		strh	r3, [r2, r5, lsl #1]	@ movhi
 2620 0218 F0E7     		b	.L241
 2621              	.LVL250:
 2622              	.L243:
1028:Src/uart.c    **** 						}
 2623              		.loc 1 1028 0 discriminator 3
 2624 021a 5A00     		lsls	r2, r3, #1
 2625 021c 0732     		adds	r2, r2, #7
 2626 021e 815C     		ldrb	r1, [r0, r2]	@ zero_extendqisi2
 2627 0220 1A1D     		adds	r2, r3, #4
 2628 0222 10F81220 		ldrb	r2, [r0, r2, lsl #1]	@ zero_extendqisi2
 2629 0226 EF18     		adds	r7, r5, r3
 2630 0228 02EB0122 		add	r2, r2, r1, lsl #8
 2631 022c 12B2     		sxth	r2, r2
 2632 022e 2049     		ldr	r1, .L284+4
 2633 0230 21F81720 		strh	r2, [r1, r7, lsl #1]	@ movhi
1026:Src/uart.c    **** 						{
 2634              		.loc 1 1026 0 discriminator 3
 2635 0234 0133     		adds	r3, r3, #1
 2636              	.LVL251:
 2637 0236 1BB2     		sxth	r3, r3
 2638              	.LVL252:
 2639              	.L242:
1026:Src/uart.c    **** 						{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 75


 2640              		.loc 1 1026 0 is_stmt 0 discriminator 1
 2641 0238 9E42     		cmp	r6, r3
 2642 023a EEDC     		bgt	.L243
 2643 023c 5FE7     		b	.L234
 2644              	.LVL253:
 2645              	.L272:
1034:Src/uart.c    **** 				}				
 2646              		.loc 1 1034 0 is_stmt 1
 2647 023e FFF7FEFF 		bl	pos_linearity_ini
 2648              	.LVL254:
 2649 0242 63E7     		b	.L244
 2650              	.L273:
1045:Src/uart.c    **** 						g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;				
 2651              		.loc 1 1045 0
 2652 0244 1A4B     		ldr	r3, .L284+4
 2653 0246 0122     		movs	r2, #1
 2654 0248 A3F80222 		strh	r2, [r3, #514]	@ movhi
1046:Src/uart.c    **** 				}
 2655              		.loc 1 1046 0
 2656 024c 0422     		movs	r2, #4
 2657 024e A3F80422 		strh	r2, [r3, #516]	@ movhi
 2658 0252 82E7     		b	.L247
 2659              	.LVL255:
 2660              	.L274:
1052:Src/uart.c    **** 						{
 2661              		.loc 1 1052 0
 2662 0254 164B     		ldr	r3, .L284+4
 2663 0256 5B8D     		ldrh	r3, [r3, #42]
 2664 0258 1BB2     		sxth	r3, r3
 2665 025a 002B     		cmp	r3, #0
 2666 025c 42D1     		bne	.L249
1054:Src/uart.c    **** 							force_act = g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 2667              		.loc 1 1054 0
 2668 025e 144B     		ldr	r3, .L284+4
 2669 0260 B3F84410 		ldrh	r1, [r3, #68]
 2670 0264 1C4A     		ldr	r2, .L284+44
 2671 0266 1180     		strh	r1, [r2]	@ movhi
1055:Src/uart.c    **** 						}
 2672              		.loc 1 1055 0
 2673 0268 B3F85A20 		ldrh	r2, [r3, #90]
 2674 026c 1B4B     		ldr	r3, .L284+48
 2675 026e 1A80     		strh	r2, [r3]	@ movhi
 2676              	.L250:
1063:Src/uart.c    **** 						{
 2677              		.loc 1 1063 0
 2678 0270 194B     		ldr	r3, .L284+44
 2679 0272 1B88     		ldrh	r3, [r3]
 2680 0274 1BB2     		sxth	r3, r3
 2681 0276 002B     		cmp	r3, #0
 2682 0278 67DD     		ble	.L251
1065:Src/uart.c    **** 							{
 2683              		.loc 1 1065 0
 2684 027a 174B     		ldr	r3, .L284+44
 2685 027c 1A88     		ldrh	r2, [r3]
 2686 027e 12B2     		sxth	r2, r2
 2687 0280 164B     		ldr	r3, .L284+48
 2688 0282 1B88     		ldrh	r3, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 76


 2689 0284 1BB2     		sxth	r3, r3
 2690 0286 9A42     		cmp	r2, r3
 2691 0288 44DD     		ble	.L252
1067:Src/uart.c    **** 								{
 2692              		.loc 1 1067 0
 2693 028a 094B     		ldr	r3, .L284+4
 2694 028c B3F84820 		ldrh	r2, [r3, #72]
 2695 0290 12B2     		sxth	r2, r2
 2696 0292 B3F84C30 		ldrh	r3, [r3, #76]
 2697 0296 1BB2     		sxth	r3, r3
 2698 0298 9A42     		cmp	r2, r3
 2699 029a 31DC     		bgt	.L277
1075:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 2700              		.loc 1 1075 0
 2701 029c 0223     		movs	r3, #2
 2702 029e 104A     		ldr	r2, .L284+52
 2703 02a0 1370     		strb	r3, [r2]
1076:Src/uart.c    **** 								}
 2704              		.loc 1 1076 0
 2705 02a2 034A     		ldr	r2, .L284+4
 2706 02a4 A2F80432 		strh	r3, [r2, #516]	@ movhi
 2707 02a8 62E7     		b	.L248
 2708              	.L285:
 2709 02aa 00BF     		.align	2
 2710              	.L284:
 2711 02ac 00000000 		.word	.LANCHOR0
 2712 02b0 00000000 		.word	g_CmdMap
 2713 02b4 00000000 		.word	.LANCHOR15
 2714 02b8 00000000 		.word	.LANCHOR14
 2715 02bc 00000000 		.word	flag_rev_modbus
 2716 02c0 00000000 		.word	g_Encode_offset
 2717 02c4 00000000 		.word	EN_360
 2718 02c8 B7600BB6 		.word	-1240768329
 2719 02cc 00000000 		.word	g_Encode_offset_EN
 2720 02d0 00000000 		.word	g_CmdMap_bWR
 2721 02d4 00000000 		.word	g_CmdMap_User_bWR
 2722 02d8 00000000 		.word	force_set
 2723 02dc 00000000 		.word	force_act
 2724 02e0 00000000 		.word	status_Mode_POSITION_FORCE
 2725              	.L249:
1059:Src/uart.c    **** 							force_act = -1*g_CmdMap[CMD_FORCE_ACT_RAW_PU];
 2726              		.loc 1 1059 0
 2727 02e4 604A     		ldr	r2, .L286
 2728 02e6 B2F84430 		ldrh	r3, [r2, #68]
 2729 02ea 5B42     		negs	r3, r3
 2730 02ec 1BB2     		sxth	r3, r3
 2731 02ee 5F49     		ldr	r1, .L286+4
 2732 02f0 0B80     		strh	r3, [r1]	@ movhi
1060:Src/uart.c    **** 						}
 2733              		.loc 1 1060 0
 2734 02f2 B2F85A30 		ldrh	r3, [r2, #90]
 2735 02f6 5B42     		negs	r3, r3
 2736 02f8 1BB2     		sxth	r3, r3
 2737 02fa 5D4A     		ldr	r2, .L286+8
 2738 02fc 1380     		strh	r3, [r2]	@ movhi
 2739 02fe B7E7     		b	.L250
 2740              	.L277:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 77


1069:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2741              		.loc 1 1069 0
 2742 0300 5C4B     		ldr	r3, .L286+12
 2743 0302 0122     		movs	r2, #1
 2744 0304 1A70     		strb	r2, [r3]
1070:Src/uart.c    **** 									recPosCmd();
 2745              		.loc 1 1070 0
 2746 0306 584B     		ldr	r3, .L286
 2747 0308 0322     		movs	r2, #3
 2748 030a A3F80422 		strh	r2, [r3, #516]	@ movhi
1071:Src/uart.c    **** 								}
 2749              		.loc 1 1071 0
 2750 030e FFF7FEFF 		bl	recPosCmd
 2751              	.LVL256:
 2752 0312 2DE7     		b	.L248
 2753              	.L252:
1081:Src/uart.c    **** 								{
 2754              		.loc 1 1081 0
 2755 0314 544B     		ldr	r3, .L286
 2756 0316 B3F84820 		ldrh	r2, [r3, #72]
 2757 031a 12B2     		sxth	r2, r2
 2758 031c B3F84C30 		ldrh	r3, [r3, #76]
 2759 0320 1BB2     		sxth	r3, r3
 2760 0322 9A42     		cmp	r2, r3
 2761 0324 07DC     		bgt	.L278
1089:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 2762              		.loc 1 1089 0
 2763 0326 534B     		ldr	r3, .L286+12
 2764 0328 0322     		movs	r2, #3
 2765 032a 1A70     		strb	r2, [r3]
1090:Src/uart.c    **** 								}				
 2766              		.loc 1 1090 0
 2767 032c 4E4B     		ldr	r3, .L286
 2768 032e 0422     		movs	r2, #4
 2769 0330 A3F80422 		strh	r2, [r3, #516]	@ movhi
 2770 0334 1CE7     		b	.L248
 2771              	.L278:
1083:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2772              		.loc 1 1083 0
 2773 0336 4F4B     		ldr	r3, .L286+12
 2774 0338 0122     		movs	r2, #1
 2775 033a 1A70     		strb	r2, [r3]
1084:Src/uart.c    **** 									recPosCmd();
 2776              		.loc 1 1084 0
 2777 033c 4A4B     		ldr	r3, .L286
 2778 033e 0322     		movs	r2, #3
 2779 0340 A3F80422 		strh	r2, [r3, #516]	@ movhi
1085:Src/uart.c    **** 								}
 2780              		.loc 1 1085 0
 2781 0344 FFF7FEFF 		bl	recPosCmd
 2782              	.LVL257:
 2783 0348 12E7     		b	.L248
 2784              	.L251:
1094:Src/uart.c    **** 						{													
 2785              		.loc 1 1094 0
 2786 034a 484B     		ldr	r3, .L286+4
 2787 034c 1B88     		ldrh	r3, [r3]
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 78


 2788 034e 13F4004F 		tst	r3, #32768
 2789 0352 03D1     		bne	.L279
1127:Src/uart.c    **** 						}				
 2790              		.loc 1 1127 0
 2791 0354 474B     		ldr	r3, .L286+12
 2792 0356 0322     		movs	r2, #3
 2793 0358 1A70     		strb	r2, [r3]
 2794 035a 09E7     		b	.L248
 2795              	.L279:
1096:Src/uart.c    **** 							{
 2796              		.loc 1 1096 0
 2797 035c 434B     		ldr	r3, .L286+4
 2798 035e 1A88     		ldrh	r2, [r3]
 2799 0360 12B2     		sxth	r2, r2
 2800 0362 434B     		ldr	r3, .L286+8
 2801 0364 1B88     		ldrh	r3, [r3]
 2802 0366 1BB2     		sxth	r3, r3
 2803 0368 9A42     		cmp	r2, r3
 2804 036a 19DA     		bge	.L256
1098:Src/uart.c    **** 								{
 2805              		.loc 1 1098 0
 2806 036c 3E4B     		ldr	r3, .L286
 2807 036e B3F84820 		ldrh	r2, [r3, #72]
 2808 0372 12B2     		sxth	r2, r2
 2809 0374 B3F84C30 		ldrh	r3, [r3, #76]
 2810 0378 1BB2     		sxth	r3, r3
 2811 037a 9A42     		cmp	r2, r3
 2812 037c 06DB     		blt	.L280
1106:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_SPEED;	
 2813              		.loc 1 1106 0
 2814 037e 0223     		movs	r3, #2
 2815 0380 3C4A     		ldr	r2, .L286+12
 2816 0382 1370     		strb	r3, [r2]
1107:Src/uart.c    **** 								}
 2817              		.loc 1 1107 0
 2818 0384 384A     		ldr	r2, .L286
 2819 0386 A2F80432 		strh	r3, [r2, #516]	@ movhi
 2820 038a F1E6     		b	.L248
 2821              	.L280:
1100:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2822              		.loc 1 1100 0
 2823 038c 394B     		ldr	r3, .L286+12
 2824 038e 0122     		movs	r2, #1
 2825 0390 1A70     		strb	r2, [r3]
1101:Src/uart.c    **** 									recPosCmd();
 2826              		.loc 1 1101 0
 2827 0392 354B     		ldr	r3, .L286
 2828 0394 0322     		movs	r2, #3
 2829 0396 A3F80422 		strh	r2, [r3, #516]	@ movhi
1102:Src/uart.c    **** 								}
 2830              		.loc 1 1102 0
 2831 039a FFF7FEFF 		bl	recPosCmd
 2832              	.LVL258:
 2833 039e E7E6     		b	.L248
 2834              	.L256:
1112:Src/uart.c    **** 								{
 2835              		.loc 1 1112 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 79


 2836 03a0 314B     		ldr	r3, .L286
 2837 03a2 B3F84820 		ldrh	r2, [r3, #72]
 2838 03a6 12B2     		sxth	r2, r2
 2839 03a8 B3F84C30 		ldrh	r3, [r3, #76]
 2840 03ac 1BB2     		sxth	r3, r3
 2841 03ae 9A42     		cmp	r2, r3
 2842 03b0 07DB     		blt	.L281
1120:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_FORCE;
 2843              		.loc 1 1120 0
 2844 03b2 304B     		ldr	r3, .L286+12
 2845 03b4 0322     		movs	r2, #3
 2846 03b6 1A70     		strb	r2, [r3]
1121:Src/uart.c    **** 								}				
 2847              		.loc 1 1121 0
 2848 03b8 2B4B     		ldr	r3, .L286
 2849 03ba 0422     		movs	r2, #4
 2850 03bc A3F80422 		strh	r2, [r3, #516]	@ movhi
 2851 03c0 D6E6     		b	.L248
 2852              	.L281:
1114:Src/uart.c    **** 									g_CmdMap[TAG_WORK_MODE] = MODE_POSITION;
 2853              		.loc 1 1114 0
 2854 03c2 2C4B     		ldr	r3, .L286+12
 2855 03c4 0122     		movs	r2, #1
 2856 03c6 1A70     		strb	r2, [r3]
1115:Src/uart.c    **** 									recPosCmd();
 2857              		.loc 1 1115 0
 2858 03c8 274B     		ldr	r3, .L286
 2859 03ca 0322     		movs	r2, #3
 2860 03cc A3F80422 		strh	r2, [r3, #516]	@ movhi
1116:Src/uart.c    **** 								}
 2861              		.loc 1 1116 0
 2862 03d0 FFF7FEFF 		bl	recPosCmd
 2863              	.LVL259:
 2864 03d4 CCE6     		b	.L248
 2865              	.L275:
1138:Src/uart.c    **** 					{
 2866              		.loc 1 1138 0
 2867 03d6 244B     		ldr	r3, .L286
 2868 03d8 B3F81832 		ldrh	r3, [r3, #536]
 2869 03dc 1BB2     		sxth	r3, r3
 2870 03de 012B     		cmp	r3, #1
 2871 03e0 11D0     		beq	.L282
1144:Src/uart.c    **** 						range_icmu_vlaue_need_addMax = range_icmu_vlaue_at_stroke - (MAX_VALUE_ICMU - *g_pMU_value_of
 2872              		.loc 1 1144 0
 2873 03e2 254B     		ldr	r3, .L286+16
 2874 03e4 1B68     		ldr	r3, [r3]
 2875 03e6 254A     		ldr	r2, .L286+20
 2876 03e8 1268     		ldr	r2, [r2]
 2877 03ea 1A60     		str	r2, [r3]
 2878              	.L262:
1145:Src/uart.c    **** 				}
 2879              		.loc 1 1145 0
 2880 03ec 224B     		ldr	r3, .L286+16
 2881 03ee 1B68     		ldr	r3, [r3]
 2882 03f0 1B68     		ldr	r3, [r3]
 2883 03f2 C3F1FF13 		rsb	r3, r3, #16711935
 2884 03f6 03F57F43 		add	r3, r3, #65280
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 80


 2885 03fa 214A     		ldr	r2, .L286+24
 2886 03fc 1268     		ldr	r2, [r2]
 2887 03fe D31A     		subs	r3, r2, r3
 2888 0400 204A     		ldr	r2, .L286+28
 2889 0402 1360     		str	r3, [r2]
 2890 0404 B9E6     		b	.L259
 2891              	.L282:
1141:Src/uart.c    **** 					}
 2892              		.loc 1 1141 0
 2893 0406 1849     		ldr	r1, .L286
 2894 0408 B1F80E22 		ldrh	r2, [r1, #526]
 2895 040c 13B2     		sxth	r3, r2
 2896 040e 1E4A     		ldr	r2, .L286+32
 2897 0410 1268     		ldr	r2, [r2]
 2898 0412 1268     		ldr	r2, [r2]
 2899 0414 02FB03F2 		mul	r2, r2, r3
 2900 0418 D717     		asrs	r7, r2, #31
 2901 041a B1F85002 		ldrh	r0, [r1, #592]
 2902 041e 0FFA80FB 		sxth	fp, r0
 2903 0422 4FEAEB7C 		asr	ip, fp, #31
 2904 0426 02FB0CF1 		mul	r1, r2, ip
 2905 042a 0BFB0711 		mla	r1, fp, r7, r1
 2906 042e A2FB0B23 		umull	r2, r3, r2, fp
 2907 0432 0B44     		add	r3, r3, r1
 2908 0434 1646     		mov	r6, r2
 2909 0436 1F46     		mov	r7, r3
 2910 0438 002A     		cmp	r2, #0
 2911 043a 73F10001 		sbcs	r1, r3, #0
 2912 043e 0DDB     		blt	.L283
 2913              	.L261:
 2914 0440 300A     		lsrs	r0, r6, #8
 2915 0442 094B     		ldr	r3, .L286
 2916 0444 B3F84E22 		ldrh	r2, [r3, #590]
 2917 0448 12B2     		sxth	r2, r2
 2918 044a D317     		asrs	r3, r2, #31
 2919 044c 40EA0760 		orr	r0, r0, r7, lsl #24
 2920 0450 3912     		asrs	r1, r7, #8
 2921 0452 FFF7FEFF 		bl	__aeabi_ldivmod
 2922              	.LVL260:
 2923 0456 0D4B     		ldr	r3, .L286+36
 2924 0458 1860     		str	r0, [r3]
 2925 045a C7E7     		b	.L262
 2926              	.L283:
 2927 045c 12F1FF06 		adds	r6, r2, #255
 2928 0460 43F10007 		adc	r7, r3, #0
 2929 0464 ECE7     		b	.L261
 2930              	.L287:
 2931 0466 00BF     		.align	2
 2932              	.L286:
 2933 0468 00000000 		.word	g_CmdMap
 2934 046c 00000000 		.word	force_set
 2935 0470 00000000 		.word	force_act
 2936 0474 00000000 		.word	status_Mode_POSITION_FORCE
 2937 0478 00000000 		.word	g_pMU_value_offset
 2938 047c 00000000 		.word	MU_Value
 2939 0480 00000000 		.word	range_icmu_vlaue_at_stroke
 2940 0484 00000000 		.word	range_icmu_vlaue_need_addMax
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 81


 2941 0488 00000000 		.word	g_pPos_ref_base_um
 2942 048c 00000000 		.word	rod_pos_Muti_Encoder
 2943              		.cfi_endproc
 2944              	.LFE344:
 2946              		.section	.text.UART_CheckReceive_1,"ax",%progbits
 2947              		.align	1
 2948              		.global	UART_CheckReceive_1
 2949              		.syntax unified
 2950              		.thumb
 2951              		.thumb_func
 2952              		.fpu fpv4-sp-d16
 2954              	UART_CheckReceive_1:
 2955              	.LFB343:
 818:Src/uart.c    **** 	int i = 0;
 2956              		.loc 1 818 0
 2957              		.cfi_startproc
 2958              		@ args = 0, pretend = 0, frame = 0
 2959              		@ frame_needed = 0, uses_anonymous_args = 0
 2960              	.LVL261:
 825:Src/uart.c    **** 	{
 2961              		.loc 1 825 0
 2962 0000 4F4B     		ldr	r3, .L310
 2963 0002 1B68     		ldr	r3, [r3]
 2964 0004 032B     		cmp	r3, #3
 2965 0006 02DC     		bgt	.L289
 827:Src/uart.c    **** 	}
 2966              		.loc 1 827 0
 2967 0008 4D4B     		ldr	r3, .L310
 2968 000a 0022     		movs	r2, #0
 2969 000c 1A60     		str	r2, [r3]
 2970              	.L289:
 831:Src/uart.c    **** 	{
 2971              		.loc 1 831 0
 2972 000e 4C4B     		ldr	r3, .L310
 2973 0010 1B68     		ldr	r3, [r3]
 2974 0012 002B     		cmp	r3, #0
 2975 0014 00F09280 		beq	.L305
 818:Src/uart.c    **** 	int i = 0;
 2976              		.loc 1 818 0
 2977 0018 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2978              	.LCFI19:
 2979              		.cfi_def_cfa_offset 24
 2980              		.cfi_offset 4, -24
 2981              		.cfi_offset 5, -20
 2982              		.cfi_offset 6, -16
 2983              		.cfi_offset 7, -12
 2984              		.cfi_offset 8, -8
 2985              		.cfi_offset 14, -4
 833:Src/uart.c    **** 		
 2986              		.loc 1 833 0
 2987 001c 484B     		ldr	r3, .L310
 2988 001e 1D68     		ldr	r5, [r3]
 2989              	.LVL262:
 877:Src/uart.c    **** 		{
 2990              		.loc 1 877 0
 2991 0020 0024     		movs	r4, #0
 2992 0022 00E0     		b	.L291
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 82


 2993              	.LVL263:
 2994              	.L292:
 877:Src/uart.c    **** 		{
 2995              		.loc 1 877 0 is_stmt 0 discriminator 2
 2996 0024 0134     		adds	r4, r4, #1
 2997              	.LVL264:
 2998              	.L291:
 877:Src/uart.c    **** 		{
 2999              		.loc 1 877 0 discriminator 1
 3000 0026 AC42     		cmp	r4, r5
 3001 0028 30DA     		bge	.L293
 879:Src/uart.c    **** 			{
 3002              		.loc 1 879 0 is_stmt 1
 3003 002a 454B     		ldr	r3, .L310
 3004 002c 2344     		add	r3, r3, r4
 3005 002e 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 3006 0030 552B     		cmp	r3, #85
 3007 0032 F7D1     		bne	.L292
 879:Src/uart.c    **** 			{
 3008              		.loc 1 879 0 is_stmt 0 discriminator 1
 3009 0034 621C     		adds	r2, r4, #1
 3010 0036 424B     		ldr	r3, .L310
 3011 0038 1344     		add	r3, r3, r2
 3012 003a 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 3013 003c AA2B     		cmp	r3, #170
 3014 003e F1D1     		bne	.L292
 881:Src/uart.c    **** 				{
 3015              		.loc 1 881 0 is_stmt 1
 3016 0040 A21C     		adds	r2, r4, #2
 3017 0042 6B1E     		subs	r3, r5, #1
 3018 0044 9A42     		cmp	r2, r3
 3019 0046 21DC     		bgt	.L293
 885:Src/uart.c    **** 				
 3020              		.loc 1 885 0
 3021 0048 3D4B     		ldr	r3, .L310
 3022 004a 1344     		add	r3, r3, r2
 3023 004c 197A     		ldrb	r1, [r3, #8]	@ zero_extendqisi2
 3024 004e 3D4B     		ldr	r3, .L310+4
 3025 0050 1980     		strh	r1, [r3]	@ movhi
 887:Src/uart.c    **** 				{
 3026              		.loc 1 887 0
 3027 0052 1988     		ldrh	r1, [r3]
 3028 0054 89B2     		uxth	r1, r1
 3029 0056 2B1B     		subs	r3, r5, r4
 3030 0058 053B     		subs	r3, r3, #5
 3031 005a 9942     		cmp	r1, r3
 3032 005c 16DC     		bgt	.L293
 892:Src/uart.c    **** 				if( psum == uart_sum(&uart_recv_buf.buf[i+2],g_UART_RXlen+2) )
 3033              		.loc 1 892 0
 3034 005e 3949     		ldr	r1, .L310+4
 3035 0060 0B88     		ldrh	r3, [r1]
 3036 0062 2344     		add	r3, r3, r4
 3037 0064 0433     		adds	r3, r3, #4
 3038 0066 364E     		ldr	r6, .L310
 3039 0068 3344     		add	r3, r3, r6
 3040 006a 1F7A     		ldrb	r7, [r3, #8]	@ zero_extendqisi2
 3041              	.LVL265:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 83


 893:Src/uart.c    **** 				{
 3042              		.loc 1 893 0
 3043 006c 04F10A02 		add	r2, r4, #10
 3044 0070 1644     		add	r6, r6, r2
 3045 0072 0988     		ldrh	r1, [r1]
 3046 0074 0231     		adds	r1, r1, #2
 3047 0076 3046     		mov	r0, r6
 3048 0078 FFF7FEFF 		bl	uart_sum
 3049              	.LVL266:
 3050 007c B842     		cmp	r0, r7
 3051 007e D1D1     		bne	.L292
 895:Src/uart.c    **** 					g_index_Modbus = 0;
 3052              		.loc 1 895 0
 3053 0080 3046     		mov	r0, r6
 3054 0082 FFF7FEFF 		bl	UART_ParseFrame
 3055              	.LVL267:
 897:Src/uart.c    **** 					break;
 3056              		.loc 1 897 0
 3057 0086 2E4B     		ldr	r3, .L310
 3058 0088 0022     		movs	r2, #0
 3059 008a 1A60     		str	r2, [r3]
 3060              	.LVL268:
 3061              	.L293:
 907:Src/uart.c    **** 		if(g_index_Modbus >= 8)
 3062              		.loc 1 907 0
 3063 008c ADB2     		uxth	r5, r5
 3064              	.LVL269:
 3065 008e 2E4B     		ldr	r3, .L310+8
 3066 0090 1D80     		strh	r5, [r3]	@ movhi
 908:Src/uart.c    **** 		{
 3067              		.loc 1 908 0
 3068 0092 072D     		cmp	r5, #7
 3069 0094 33D9     		bls	.L295
 911:Src/uart.c    **** 										{
 3070              		.loc 1 911 0
 3071 0096 A5F10804 		sub	r4, r5, #8
 3072              	.LVL270:
 3073 009a 0AE0     		b	.L296
 3074              	.L297:
 914:Src/uart.c    **** 													)
 3075              		.loc 1 914 0
 3076 009c 621C     		adds	r2, r4, #1
 3077 009e 284B     		ldr	r3, .L310
 3078 00a0 1344     		add	r3, r3, r2
 3079 00a2 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 3080 00a4 032B     		cmp	r3, #3
 3081 00a6 11D0     		beq	.L299
 914:Src/uart.c    **** 													)
 3082              		.loc 1 914 0 is_stmt 0 discriminator 1
 3083 00a8 062B     		cmp	r3, #6
 3084 00aa 0FD0     		beq	.L299
 914:Src/uart.c    **** 													)
 3085              		.loc 1 914 0 discriminator 2
 3086 00ac 102B     		cmp	r3, #16
 3087 00ae 0DD0     		beq	.L299
 3088              	.L298:
 911:Src/uart.c    **** 										{
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 84


 3089              		.loc 1 911 0 is_stmt 1 discriminator 2
 3090 00b0 013C     		subs	r4, r4, #1
 3091              	.LVL271:
 3092              	.L296:
 911:Src/uart.c    **** 										{
 3093              		.loc 1 911 0 is_stmt 0 discriminator 1
 3094 00b2 002C     		cmp	r4, #0
 3095 00b4 0ADD     		ble	.L299
 913:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 3096              		.loc 1 913 0 is_stmt 1
 3097 00b6 224B     		ldr	r3, .L310
 3098 00b8 2344     		add	r3, r3, r4
 3099 00ba 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 3100 00bc 234B     		ldr	r3, .L310+12
 3101 00be 9B89     		ldrh	r3, [r3, #12]
 3102 00c0 1BB2     		sxth	r3, r3
 3103 00c2 9A42     		cmp	r2, r3
 3104 00c4 EAD0     		beq	.L297
 913:Src/uart.c    **** 														&&(uart_recv_buf.buf[i+1] == 0x03||uart_recv_buf.buf[i+1] == 0x06||uart_recv_buf.buf[
 3105              		.loc 1 913 0 is_stmt 0 discriminator 1
 3106 00c6 FF2A     		cmp	r2, #255
 3107 00c8 F2D1     		bne	.L298
 3108 00ca E7E7     		b	.L297
 3109              	.L299:
 920:Src/uart.c    **** 										{
 3110              		.loc 1 920 0 is_stmt 1
 3111 00cc EB1E     		subs	r3, r5, #3
 3112 00ce A342     		cmp	r3, r4
 3113 00d0 1ADB     		blt	.L308
 925:Src/uart.c    **** 											CRC_RX = ((width_t)uart_recv_buf.buf[g_index_Modbus-1]<<8) + uart_recv_buf.buf[g_index_M
 3114              		.loc 1 925 0
 3115 00d2 1B4E     		ldr	r6, .L310
 3116 00d4 04F10807 		add	r7, r4, #8
 3117 00d8 3744     		add	r7, r7, r6
 3118 00da A5F10208 		sub	r8, r5, #2
 3119 00de A8EB0401 		sub	r1, r8, r4
 3120 00e2 3846     		mov	r0, r7
 3121 00e4 FFF7FEFF 		bl	ModBusCRC16
 3122              	.LVL272:
 3123 00e8 80B2     		uxth	r0, r0
 3124              	.LVL273:
 926:Src/uart.c    **** 											if(CRC_Tmp == CRC_RX)  //ï¿½ï¿½ï¿½Ð£ï¿½ï¿½ï¿½ï¿½ï¿½Í¬
 3125              		.loc 1 926 0
 3126 00ea 6B1E     		subs	r3, r5, #1
 3127 00ec 3344     		add	r3, r3, r6
 3128 00ee 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 3129 00f0 4644     		add	r6, r6, r8
 3130 00f2 337A     		ldrb	r3, [r6, #8]	@ zero_extendqisi2
 3131 00f4 03EB0223 		add	r3, r3, r2, lsl #8
 3132 00f8 9BB2     		uxth	r3, r3
 3133              	.LVL274:
 927:Src/uart.c    **** 											{			
 3134              		.loc 1 927 0
 3135 00fa 9842     		cmp	r0, r3
 3136 00fc 08D0     		beq	.L309
 3137              	.LVL275:
 3138              	.L295:
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 85


 936:Src/uart.c    **** 	}
 3139              		.loc 1 936 0
 3140 00fe 104B     		ldr	r3, .L310
 3141 0100 0022     		movs	r2, #0
 3142 0102 1A60     		str	r2, [r3]
 3143              	.L288:
 938:Src/uart.c    **** 	
 3144              		.loc 1 938 0
 3145 0104 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3146              	.LVL276:
 3147              	.L308:
 922:Src/uart.c    **** 											return;
 3148              		.loc 1 922 0
 3149 0108 0F4B     		ldr	r3, .L310+8
 3150 010a 0022     		movs	r2, #0
 3151 010c 1A80     		strh	r2, [r3]	@ movhi
 923:Src/uart.c    **** 										}
 3152              		.loc 1 923 0
 3153 010e F9E7     		b	.L288
 3154              	.LVL277:
 3155              	.L309:
 929:Src/uart.c    **** 														{														
 3156              		.loc 1 929 0
 3157 0110 0B4B     		ldr	r3, .L310
 3158              	.LVL278:
 3159 0112 2344     		add	r3, r3, r4
 3160 0114 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 3161              	.LVL279:
 3162 0116 0D4B     		ldr	r3, .L310+12
 3163 0118 9B89     		ldrh	r3, [r3, #12]
 3164 011a 1BB2     		sxth	r3, r3
 3165 011c 9A42     		cmp	r2, r3
 3166 011e 07D0     		beq	.L302
 929:Src/uart.c    **** 														{														
 3167              		.loc 1 929 0 is_stmt 0 discriminator 1
 3168 0120 0B4B     		ldr	r3, .L310+16
 3169 0122 1B5D     		ldrb	r3, [r3, r4]	@ zero_extendqisi2
 3170 0124 FF2B     		cmp	r3, #255
 3171 0126 03D0     		beq	.L302
 3172              	.LVL280:
 3173              	.L303:
 933:Src/uart.c    **** 											}
 3174              		.loc 1 933 0 is_stmt 1
 3175 0128 074B     		ldr	r3, .L310+8
 3176 012a 0022     		movs	r2, #0
 3177 012c 1A80     		strh	r2, [r3]	@ movhi
 3178 012e E6E7     		b	.L295
 3179              	.LVL281:
 3180              	.L302:
 931:Src/uart.c    **** 														}
 3181              		.loc 1 931 0
 3182 0130 2D1B     		subs	r5, r5, r4
 3183              	.LVL282:
 3184 0132 E9B2     		uxtb	r1, r5
 3185 0134 3846     		mov	r0, r7
 3186              	.LVL283:
 3187 0136 FFF7FEFF 		bl	Rx_Pro_Modbus
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 86


 3188              	.LVL284:
 3189 013a F5E7     		b	.L303
 3190              	.LVL285:
 3191              	.L305:
 3192              	.LCFI20:
 3193              		.cfi_def_cfa_offset 0
 3194              		.cfi_restore 4
 3195              		.cfi_restore 5
 3196              		.cfi_restore 6
 3197              		.cfi_restore 7
 3198              		.cfi_restore 8
 3199              		.cfi_restore 14
 3200 013c 7047     		bx	lr
 3201              	.L311:
 3202 013e 00BF     		.align	2
 3203              	.L310:
 3204 0140 00000000 		.word	.LANCHOR13
 3205 0144 00000000 		.word	.LANCHOR4
 3206 0148 00000000 		.word	.LANCHOR12
 3207 014c 00000000 		.word	g_CmdMap
 3208 0150 00000000 		.word	.LANCHOR16
 3209              		.cfi_endproc
 3210              	.LFE343:
 3212              		.section	.text.ini_HighFreqData,"ax",%progbits
 3213              		.align	1
 3214              		.global	ini_HighFreqData
 3215              		.syntax unified
 3216              		.thumb
 3217              		.thumb_func
 3218              		.fpu fpv4-sp-d16
 3220              	ini_HighFreqData:
 3221              	.LFB348:
1223:Src/uart.c    **** /**
1224:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1225:Src/uart.c    ****   * @param  DataLen: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1226:Src/uart.c    ****   * @param  Cmd: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ 
1227:Src/uart.c    ****   * @param  Index: ï¿½Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ö·
1228:Src/uart.c    ****   * @param  pdata: Ö´ï¿½ï¿½ï¿½ï¿½ï¿½Ú¸ï¿½ï¿½ï¿½ 
1229:Src/uart.c    ****   * @retval None
1230:Src/uart.c    ****   */
1231:Src/uart.c    **** /**
1232:Src/uart.c    ****   *   
1233:Src/uart.c    **** 	* AA 55 length internal cmd cnt_L cnt_H set actL atcH * * * * sum 
1234:Src/uart.c    ****   */
1235:Src/uart.c    **** void ini_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr)
1236:Src/uart.c    **** {		
 3222              		.loc 1 1236 0
 3223              		.cfi_startproc
 3224              		@ args = 0, pretend = 0, frame = 0
 3225              		@ frame_needed = 0, uses_anonymous_args = 0
 3226              		@ link register save eliminated.
 3227              	.LVL286:
 3228 0000 30B4     		push	{r4, r5}
 3229              	.LCFI21:
 3230              		.cfi_def_cfa_offset 8
 3231              		.cfi_offset 4, -8
 3232              		.cfi_offset 5, -4
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 87


 3233              	.LVL287:
1237:Src/uart.c    **** 		u8 i = 0,j = 0;
1238:Src/uart.c    **** 		for(i = 0;i<LENGTH_HIGH_FREQ_FRAME-1;i++)
 3234              		.loc 1 1238 0
 3235 0002 0025     		movs	r5, #0
 3236 0004 0FE0     		b	.L313
 3237              	.LVL288:
 3238              	.L314:
1239:Src/uart.c    **** 		{
1240:Src/uart.c    **** 			for(j = 0;j<NUM_FRAME-1;j++)
1241:Src/uart.c    **** 			{
1242:Src/uart.c    **** 				ptr->frame[j][i] = 0;
 3239              		.loc 1 1242 0 discriminator 3
 3240 0006 5A00     		lsls	r2, r3, #1
 3241 0008 D418     		adds	r4, r2, r3
 3242 000a E100     		lsls	r1, r4, #3
 3243 000c 0144     		add	r1, r1, r0
 3244 000e 0024     		movs	r4, #0
 3245 0010 4C55     		strb	r4, [r1, r5]
1243:Src/uart.c    **** 				ptr->frame[j][i] = 0;
 3246              		.loc 1 1243 0 discriminator 3
 3247 0012 1A44     		add	r2, r2, r3
 3248 0014 D100     		lsls	r1, r2, #3
 3249 0016 0144     		add	r1, r1, r0
 3250 0018 4C55     		strb	r4, [r1, r5]
1240:Src/uart.c    **** 			{
 3251              		.loc 1 1240 0 discriminator 3
 3252 001a 0133     		adds	r3, r3, #1
 3253              	.LVL289:
 3254 001c DBB2     		uxtb	r3, r3
 3255              	.LVL290:
 3256              	.L315:
1240:Src/uart.c    **** 			{
 3257              		.loc 1 1240 0 is_stmt 0 discriminator 1
 3258 001e 082B     		cmp	r3, #8
 3259 0020 F1D9     		bls	.L314
1238:Src/uart.c    **** 		{
 3260              		.loc 1 1238 0 is_stmt 1 discriminator 2
 3261 0022 0135     		adds	r5, r5, #1
 3262              	.LVL291:
 3263 0024 EDB2     		uxtb	r5, r5
 3264              	.LVL292:
 3265              	.L313:
1238:Src/uart.c    **** 		{
 3266              		.loc 1 1238 0 is_stmt 0 discriminator 1
 3267 0026 162D     		cmp	r5, #22
 3268 0028 01D8     		bhi	.L318
1240:Src/uart.c    **** 			{
 3269              		.loc 1 1240 0 is_stmt 1
 3270 002a 0023     		movs	r3, #0
 3271 002c F7E7     		b	.L315
 3272              	.L318:
1244:Src/uart.c    **** 			}
1245:Src/uart.c    **** 		}
1246:Src/uart.c    **** 		ptr->check_sum = 0;
 3273              		.loc 1 1246 0
 3274 002e 0023     		movs	r3, #0
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 88


 3275 0030 A0F8FA30 		strh	r3, [r0, #250]	@ movhi
1247:Src/uart.c    **** 		ptr->ind_head_frame = 0;
 3276              		.loc 1 1247 0
 3277 0034 A0F8F230 		strh	r3, [r0, #242]	@ movhi
1248:Src/uart.c    **** 		ptr->ind_tail_frame = 0;
 3278              		.loc 1 1248 0
 3279 0038 A0F8F430 		strh	r3, [r0, #244]	@ movhi
1249:Src/uart.c    **** 		ptr->num_frame = 0;
 3280              		.loc 1 1249 0
 3281 003c A0F8F630 		strh	r3, [r0, #246]	@ movhi
1250:Src/uart.c    **** 		ptr->subindex_frame = 0;
 3282              		.loc 1 1250 0
 3283 0040 A0F8F830 		strh	r3, [r0, #248]	@ movhi
1251:Src/uart.c    **** 		ptr->count = 0;
 3284              		.loc 1 1251 0
 3285 0044 A0F8F030 		strh	r3, [r0, #240]	@ movhi
1252:Src/uart.c    **** 		ptr->internal_us = 40; //1000usï¿½ï¿½ï¿½ï¿½
 3286              		.loc 1 1252 0
 3287 0048 2823     		movs	r3, #40
 3288 004a A0F8FC30 		strh	r3, [r0, #252]	@ movhi
1253:Src/uart.c    **** }
 3289              		.loc 1 1253 0
 3290 004e 30BC     		pop	{r4, r5}
 3291              	.LCFI22:
 3292              		.cfi_restore 5
 3293              		.cfi_restore 4
 3294              		.cfi_def_cfa_offset 0
 3295              	.LVL293:
 3296 0050 7047     		bx	lr
 3297              		.cfi_endproc
 3298              	.LFE348:
 3300              		.section	.text.UART_PushFrame_HighFreqData,"ax",%progbits
 3301              		.align	1
 3302              		.global	UART_PushFrame_HighFreqData
 3303              		.syntax unified
 3304              		.thumb
 3305              		.thumb_func
 3306              		.fpu fpv4-sp-d16
 3308              	UART_PushFrame_HighFreqData:
 3309              	.LFB349:
1254:Src/uart.c    **** /**
1255:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1256:Src/uart.c    ****   * @param  ptr: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1257:Src/uart.c    ****   */
1258:Src/uart.c    **** void UART_PushFrame_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr,s16 set_data,s16 act_data)
1259:Src/uart.c    **** {
 3310              		.loc 1 1259 0
 3311              		.cfi_startproc
 3312              		@ args = 0, pretend = 0, frame = 0
 3313              		@ frame_needed = 0, uses_anonymous_args = 0
 3314              		@ link register save eliminated.
 3315              	.LVL294:
1260:Src/uart.c    **** #ifdef HIGHFRE_DEBUG
1261:Src/uart.c    **** 	u8 i = 0;
1262:Src/uart.c    **** 	static u16 delay_cnt = 0;
1263:Src/uart.c    **** 	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½Í¿ï¿½ï¿½Ð£ï¿½ï¿½Ò¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½Í·ï¿½ï¿½ï¿½
1264:Src/uart.c    **** 	if(ptr->num_frame == 0)
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 89


1265:Src/uart.c    **** 	{
1266:Src/uart.c    **** 		g_fast_debug = 0;
1267:Src/uart.c    **** 	}
1268:Src/uart.c    **** 	if(g_CmdMap[SYS_SELF_TUNING] == 0)
1269:Src/uart.c    **** 	{
1270:Src/uart.c    **** 		return;
1271:Src/uart.c    **** 	}
1272:Src/uart.c    **** 	if(ptr->num_frame>=NUM_FRAME-1)//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü¼ï¿½ï¿½
1273:Src/uart.c    **** 	{
1274:Src/uart.c    **** 		g_CmdMap[SYS_SELF_TUNING] = 0;
1275:Src/uart.c    **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 0;
1276:Src/uart.c    **** 		g_CmdMap[CMD_CUR_SET_PU] = 0;
1277:Src/uart.c    **** 		return;
1278:Src/uart.c    **** 	}
1279:Src/uart.c    **** 	if(ptr->ind_head_frame>=NUM_FRAME-1)
1280:Src/uart.c    **** 	{
1281:Src/uart.c    **** 		g_CmdMap[SYS_SELF_TUNING] = 0;
1282:Src/uart.c    **** 		g_CmdMap[TAG_MOTOR_ENABLE] = 0;
1283:Src/uart.c    **** 		g_CmdMap[CMD_CUR_SET_PU] = 0;
1284:Src/uart.c    **** 		return;
1285:Src/uart.c    **** 	}
1286:Src/uart.c    **** 	if(g_CmdMap[SYS_SELF_TUNING] != 0)
1287:Src/uart.c    **** 	{
1288:Src/uart.c    **** 		if(ptr->subindex_frame>=LENGTH_HIGH_FREQ_FRAME-2 || (ptr->num_frame == 0 && ptr->subindex_frame =
1289:Src/uart.c    **** 		{
1290:Src/uart.c    **** 			//ï¿½ï¿½ï¿½ÃºÃ·ï¿½ï¿½Íºï¿½ï¿½Þ¸Ä´ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½Ä¿ï¿½ï¿½ï¿½ï¿½ï¿½é£¬ï¿½ï¿½Ð´ï¿½ï¿½Ö¡Í·
1291:Src/uart.c    **** 			if(ptr->subindex_frame == 0 && ptr->ind_head_frame == 0)
1292:Src/uart.c    **** 			{
1293:Src/uart.c    **** 				
1294:Src/uart.c    **** 			}
1295:Src/uart.c    **** 			else
1296:Src/uart.c    **** 			{
1297:Src/uart.c    **** 				ptr->ind_head_frame++;
1298:Src/uart.c    **** 				ptr->num_frame++;
1299:Src/uart.c    **** 				if(ptr->ind_head_frame>=NUM_FRAME)
1300:Src/uart.c    **** 				{
1301:Src/uart.c    **** 					return;
1302:Src/uart.c    **** 					ptr->ind_head_frame = 0;
1303:Src/uart.c    **** 				}
1304:Src/uart.c    **** 			}
1305:Src/uart.c    **** 			ptr->subindex_frame = 0;
1306:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = 0xAA;				      
1307:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = 0x55;				    
1308:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = LENGTH_DATA+3;
1309:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = ptr->internal_us;//ID
1310:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = CMDTYPE_HIGH_F;
1311:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = ptr->count&0xff;
1312:Src/uart.c    **** 			ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (ptr->count>>8)&0xff;
1313:Src/uart.c    **** 		}
1314:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = set_data&0xFF;
1315:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (set_data>>8)&0xFF;
1316:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = act_data & 0xFF;
1317:Src/uart.c    **** 		ptr->frame[ptr->ind_head_frame][ptr->subindex_frame++] = (act_data>>8)&0xFF;
1318:Src/uart.c    **** 		ptr->count++;
1319:Src/uart.c    **** 	}
1320:Src/uart.c    **** #endif
1321:Src/uart.c    **** }
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 90


 3316              		.loc 1 1321 0
 3317 0000 7047     		bx	lr
 3318              		.cfi_endproc
 3319              	.LFE349:
 3321              		.section	.text.UART_SendFrame_HighFreqData,"ax",%progbits
 3322              		.align	1
 3323              		.global	UART_SendFrame_HighFreqData
 3324              		.syntax unified
 3325              		.thumb
 3326              		.thumb_func
 3327              		.fpu fpv4-sp-d16
 3329              	UART_SendFrame_HighFreqData:
 3330              	.LFB350:
1322:Src/uart.c    **** /**
1323:Src/uart.c    ****   * @brief  ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½æµ½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
1324:Src/uart.c    ****   * @param  ptr: ï¿½ï¿½ï¿½Ý¶Î³ï¿½ï¿½ï¿½
1325:Src/uart.c    ****   */
1326:Src/uart.c    **** void UART_SendFrame_HighFreqData(volatile struct HIGH_FREQ_FRAME *ptr)
1327:Src/uart.c    **** {
 3331              		.loc 1 1327 0
 3332              		.cfi_startproc
 3333              		@ args = 0, pretend = 0, frame = 0
 3334              		@ frame_needed = 0, uses_anonymous_args = 0
 3335              		@ link register save eliminated.
 3336              	.LVL295:
1328:Src/uart.c    **** #ifdef	HIGHFRE_DEBUG
1329:Src/uart.c    **** 	u8 i = 0;
1330:Src/uart.c    **** 	static u16 delay_cnt = 0;
1331:Src/uart.c    **** 	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ú·ï¿½ï¿½Í¿ï¿½ï¿½Ð£ï¿½ï¿½Ò¶ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö¡ï¿½ï¿½ï¿½Í·ï¿½ï¿½ï¿½
1332:Src/uart.c    **** 	if(ptr->num_frame == 0)
1333:Src/uart.c    **** 	{
1334:Src/uart.c    **** 		g_fast_debug = 0;
1335:Src/uart.c    **** 	}
1336:Src/uart.c    **** 	if(ptr->num_frame>0 && g_UARTisSending == 0)
1337:Src/uart.c    **** 	{
1338:Src/uart.c    **** 		g_fast_debug = 1;
1339:Src/uart.c    **** 		if(delay_cnt++>(25*4))
1340:Src/uart.c    **** 		{
1341:Src/uart.c    **** 			ptr->check_sum = 0;
1342:Src/uart.c    **** 			for(i = 2;i<LENGTH_HIGH_FREQ_FRAME-1;i++)
1343:Src/uart.c    **** 			{
1344:Src/uart.c    **** 				ptr->check_sum = ptr->check_sum+ptr->frame[ptr->ind_tail_frame][i];
1345:Src/uart.c    **** 			}
1346:Src/uart.c    **** 			ptr->frame[ptr->ind_tail_frame][LENGTH_HIGH_FREQ_FRAME-1] = ptr->check_sum;
1347:Src/uart.c    **** 
1348:Src/uart.c    **** 			DMA_Cmd(DMA1_Channel7, DISABLE);
1349:Src/uart.c    **** 			DMA1_Channel7->CPAR = (uint32_t)(&(USART2->TDR));				
1350:Src/uart.c    **** 			DMA1_Channel7->CNDTR = LENGTH_HIGH_FREQ_FRAME;
1351:Src/uart.c    **** 			DMA1_Channel7->CMAR = (uint32_t)&ptr->frame[ptr->ind_tail_frame][0];
1352:Src/uart.c    **** 			DMA_Cmd(DMA1_Channel7, ENABLE);
1353:Src/uart.c    **** 			g_UARTisSending = 1;
1354:Src/uart.c    **** 			ptr->ind_tail_frame++;
1355:Src/uart.c    **** 			ptr->num_frame--;
1356:Src/uart.c    **** 			if(ptr->num_frame == 0)
1357:Src/uart.c    **** 			{
1358:Src/uart.c    **** 				g_fast_debug = 0;
1359:Src/uart.c    **** 			}
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 91


1360:Src/uart.c    **** 			if(ptr->num_frame == 0)
1361:Src/uart.c    **** 			{
1362:Src/uart.c    **** 				ptr->check_sum = 0;
1363:Src/uart.c    **** 				ptr->ind_head_frame = 0;
1364:Src/uart.c    **** 				ptr->ind_tail_frame = 0;
1365:Src/uart.c    **** 				ptr->num_frame = 0;
1366:Src/uart.c    **** 				ptr->subindex_frame = 0;
1367:Src/uart.c    **** 				ptr->count = 0;
1368:Src/uart.c    **** 			}
1369:Src/uart.c    **** 			delay_cnt = 0;
1370:Src/uart.c    **** 		}
1371:Src/uart.c    **** 	}
1372:Src/uart.c    **** #endif
1373:Src/uart.c    **** }
 3337              		.loc 1 1373 0
 3338 0000 7047     		bx	lr
 3339              		.cfi_endproc
 3340              	.LFE350:
 3342              		.global	flag_is_writable
 3343              		.global	g_test_debug
 3344              		.comm	struct_hFrame,254,4
 3345              		.global	g_fast_debug
 3346              		.global	g_UARTisSending
 3347              		.global	g_UART_RXlen
 3348              		.global	g_RxBufptr
 3349              		.global	g_UART_Tx_Modbus_len
 3350              		.global	g_UART_Tx_Modbus
 3351              		.comm	g_UART_TxBuf,128,4
 3352              		.global	g_index_Modbus
 3353              		.global	g_UART_Rx_Modbus
 3354              		.comm	g_UART_RxBuf,128,4
 3355              		.global	g_bUARTPushingFrames
 3356              		.global	g_flag_monitor_from_host
 3357              		.global	uart1_dma_tx_arry
 3358              		.comm	uart1_dma_rx_arry,128,4
 3359              		.comm	hdma_usart1_tx,96,4
 3360              		.comm	hdma_usart1_rx,96,4
 3361              		.comm	huart1,148,4
 3362              		.section	.bss.csum.11937,"aw",%nobits
 3363              		.set	.LANCHOR11,. + 0
 3366              	csum.11937:
 3367 0000 00       		.space	1
 3368              		.section	.bss.flag_is_writable,"aw",%nobits
 3369              		.set	.LANCHOR5,. + 0
 3372              	flag_is_writable:
 3373 0000 00       		.space	1
 3374              		.section	.bss.g_RxBufptr,"aw",%nobits
 3375              		.align	2
 3378              	g_RxBufptr:
 3379 0000 00000000 		.space	4
 3380              		.section	.bss.g_UART_RXlen,"aw",%nobits
 3381              		.align	1
 3382              		.set	.LANCHOR4,. + 0
 3385              	g_UART_RXlen:
 3386 0000 0000     		.space	2
 3387              		.section	.bss.g_UART_Rx_Modbus,"aw",%nobits
 3388              		.align	2
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 92


 3389              		.set	.LANCHOR16,. + 0
 3392              	g_UART_Rx_Modbus:
 3393 0000 00000000 		.space	128
 3393      00000000 
 3393      00000000 
 3393      00000000 
 3393      00000000 
 3394              		.section	.bss.g_UART_Tx_Modbus,"aw",%nobits
 3395              		.align	2
 3396              		.set	.LANCHOR15,. + 0
 3399              	g_UART_Tx_Modbus:
 3400 0000 00000000 		.space	128
 3400      00000000 
 3400      00000000 
 3400      00000000 
 3400      00000000 
 3401              		.section	.bss.g_UART_Tx_Modbus_len,"aw",%nobits
 3402              		.set	.LANCHOR14,. + 0
 3405              	g_UART_Tx_Modbus_len:
 3406 0000 00       		.space	1
 3407              		.section	.bss.g_UARTisSending,"aw",%nobits
 3410              	g_UARTisSending:
 3411 0000 00       		.space	1
 3412              		.section	.bss.g_bUARTPushingFrames,"aw",%nobits
 3413              		.set	.LANCHOR0,. + 0
 3416              	g_bUARTPushingFrames:
 3417 0000 00       		.space	1
 3418              		.section	.bss.g_fast_debug,"aw",%nobits
 3419              		.set	.LANCHOR1,. + 0
 3422              	g_fast_debug:
 3423 0000 00       		.space	1
 3424              		.section	.bss.g_flag_monitor_from_host,"aw",%nobits
 3425              		.set	.LANCHOR3,. + 0
 3428              	g_flag_monitor_from_host:
 3429 0000 00       		.space	1
 3430              		.section	.bss.g_index_Modbus,"aw",%nobits
 3431              		.align	1
 3432              		.set	.LANCHOR12,. + 0
 3435              	g_index_Modbus:
 3436 0000 0000     		.space	2
 3437              		.section	.bss.g_test_debug,"aw",%nobits
 3438              		.align	1
 3441              	g_test_debug:
 3442 0000 0000     		.space	2
 3443              		.section	.bss.last_usr_mode,"aw",%nobits
 3444              		.align	2
 3445              		.set	.LANCHOR2,. + 0
 3448              	last_usr_mode:
 3449 0000 00000000 		.space	4
 3450              		.section	.bss.s_RXBuf.11932,"aw",%nobits
 3451              		.align	2
 3452              		.set	.LANCHOR8,. + 0
 3455              	s_RXBuf.11932:
 3456 0000 00000000 		.space	128
 3456      00000000 
 3456      00000000 
 3456      00000000 
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 93


 3456      00000000 
 3457              		.section	.bss.s_bBeginFrame.11934,"aw",%nobits
 3458              		.set	.LANCHOR6,. + 0
 3461              	s_bBeginFrame.11934:
 3462 0000 00       		.space	1
 3463              		.section	.bss.s_bFrameHead1.11933,"aw",%nobits
 3464              		.set	.LANCHOR10,. + 0
 3467              	s_bFrameHead1.11933:
 3468 0000 00       		.space	1
 3469              		.section	.bss.s_rxLen.11936,"aw",%nobits
 3470              		.set	.LANCHOR9,. + 0
 3473              	s_rxLen.11936:
 3474 0000 00       		.space	1
 3475              		.section	.bss.s_rxPos.11935,"aw",%nobits
 3476              		.set	.LANCHOR7,. + 0
 3479              	s_rxPos.11935:
 3480 0000 00       		.space	1
 3481              		.section	.bss.uart_recv_buf,"aw",%nobits
 3482              		.align	2
 3483              		.set	.LANCHOR13,. + 0
 3486              	uart_recv_buf:
 3487 0000 00000000 		.space	136
 3487      00000000 
 3487      00000000 
 3487      00000000 
 3487      00000000 
 3488              		.section	.data.uart1_dma_tx_arry,"aw",%progbits
 3489              		.align	2
 3492              	uart1_dma_tx_arry:
 3493 0000 55       		.byte	85
 3494 0001 AA       		.byte	-86
 3495 0002 11       		.byte	17
 3496 0003 22       		.byte	34
 3497 0004 33       		.byte	51
 3498 0005 44       		.byte	68
 3499 0006 55       		.byte	85
 3500 0007 00000000 		.space	121
 3500      00000000 
 3500      00000000 
 3500      00000000 
 3500      00000000 
 3501              		.text
 3502              	.Letext0:
 3503              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 3504              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 3505              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 3506              		.file 5 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/system_stm32g4xx.h"
 3507              		.file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 3508              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 3509              		.file 8 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 3510              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 3511              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 3512              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 3513              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_flash.h"
 3514              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 3515              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 3516              		.file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 94


 3517              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3518              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3519              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-ea
 3520              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3521              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 3522              		.file 21 "Inc/pwm.h"
 3523              		.file 22 "Inc/spi_MEncoder.h"
 3524              		.file 23 "Inc/adc.h"
 3525              		.file 24 "Inc/stm32_math_sin.h"
 3526              		.file 25 "Inc/pid.h"
 3527              		.file 26 "Inc/profile_joint.h"
 3528              		.file 27 "Inc/icmu.h"
 3529              		.file 28 "Inc/performance_test.h"
 3530              		.file 29 "Inc/global.h"
 3531              		.file 30 "Inc/uart.h"
 3532              		.file 31 "Inc/scope.h"
 3533              		.file 32 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart_ex.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 95


DEFINED SYMBOLS
                            *ABS*:00000000 uart.c
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:18     .text.CheckSum:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:24     .text.CheckSum:00000000 CheckSum
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:75     .text.uart_sum:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:81     .text.uart_sum:00000000 uart_sum
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:130    .text.self_putchar:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:137    .text.self_putchar:00000000 self_putchar
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:159    .text.self_putchar:00000010 $d
                            *COM*:00000094 huart1
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:164    .text.UART_PushFrame:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:171    .text.UART_PushFrame:00000000 UART_PushFrame
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:304    .text.UART_PushFrame:0000008c $d
                            *COM*:00000080 g_UART_TxBuf
                            *COM*:00000060 hdma_usart1_tx
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:315    .text.MX_USART1_UART_Init:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:322    .text.MX_USART1_UART_Init:00000000 MX_USART1_UART_Init
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:463    .text.MX_USART1_UART_Init:000000ac $d
                            *COM*:00000080 g_UART_RxBuf
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:472    .text.UART_PushFrame_Old:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:479    .text.UART_PushFrame_Old:00000000 UART_PushFrame_Old
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:595    .text.UART_PushFrame_Old:00000078 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:606    .text.int_last_usr_mode:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:613    .text.int_last_usr_mode:00000000 int_last_usr_mode
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:631    .text.int_last_usr_mode:00000010 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:638    .text.UART_ParseFrame:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:645    .text.UART_ParseFrame:00000000 UART_ParseFrame
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1123   .text.UART_ParseFrame:000002dc $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1135   .text.UART_ParseFrame:00000304 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1554   .text.UART_ParseFrame:000005c0 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1575   .text.UART_ParseData:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1582   .text.UART_ParseData:00000000 UART_ParseData
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1748   .text.UART_ParseData:000000c0 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1760   .text.UART_CheckReceive:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1767   .text.UART_CheckReceive:00000000 UART_CheckReceive
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1948   .text.UART_CheckReceive:000000b4 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1957   .text.Rx_Send_Modbus:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:1964   .text.Rx_Send_Modbus:00000000 Rx_Send_Modbus
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2035   .text.Rx_Send_Modbus:0000005c $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2047   .text.ModBusCRC16:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2054   .text.ModBusCRC16:00000000 ModBusCRC16
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2129   .text.ModBusCRC16Send:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2136   .text.ModBusCRC16Send:00000000 ModBusCRC16Send
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2216   .text.Rx_Pro_Modbus:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2223   .text.Rx_Pro_Modbus:00000000 Rx_Pro_Modbus
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2711   .text.Rx_Pro_Modbus:000002ac $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2727   .text.Rx_Pro_Modbus:000002e4 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2933   .text.Rx_Pro_Modbus:00000468 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2947   .text.UART_CheckReceive_1:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:2954   .text.UART_CheckReceive_1:00000000 UART_CheckReceive_1
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3204   .text.UART_CheckReceive_1:00000140 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3213   .text.ini_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3220   .text.ini_HighFreqData:00000000 ini_HighFreqData
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3301   .text.UART_PushFrame_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3308   .text.UART_PushFrame_HighFreqData:00000000 UART_PushFrame_HighFreqData
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3322   .text.UART_SendFrame_HighFreqData:00000000 $t
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3329   .text.UART_SendFrame_HighFreqData:00000000 UART_SendFrame_HighFreqData
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 96


C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3372   .bss.flag_is_writable:00000000 flag_is_writable
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3441   .bss.g_test_debug:00000000 g_test_debug
                            *COM*:000000fe struct_hFrame
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3422   .bss.g_fast_debug:00000000 g_fast_debug
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3410   .bss.g_UARTisSending:00000000 g_UARTisSending
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3385   .bss.g_UART_RXlen:00000000 g_UART_RXlen
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3378   .bss.g_RxBufptr:00000000 g_RxBufptr
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3405   .bss.g_UART_Tx_Modbus_len:00000000 g_UART_Tx_Modbus_len
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3399   .bss.g_UART_Tx_Modbus:00000000 g_UART_Tx_Modbus
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3435   .bss.g_index_Modbus:00000000 g_index_Modbus
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3392   .bss.g_UART_Rx_Modbus:00000000 g_UART_Rx_Modbus
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3416   .bss.g_bUARTPushingFrames:00000000 g_bUARTPushingFrames
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3428   .bss.g_flag_monitor_from_host:00000000 g_flag_monitor_from_host
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3492   .data.uart1_dma_tx_arry:00000000 uart1_dma_tx_arry
                            *COM*:00000080 uart1_dma_rx_arry
                            *COM*:00000060 hdma_usart1_rx
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3366   .bss.csum.11937:00000000 csum.11937
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3367   .bss.csum.11937:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3373   .bss.flag_is_writable:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3375   .bss.g_RxBufptr:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3381   .bss.g_UART_RXlen:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3388   .bss.g_UART_Rx_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3395   .bss.g_UART_Tx_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3406   .bss.g_UART_Tx_Modbus_len:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3411   .bss.g_UARTisSending:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3417   .bss.g_bUARTPushingFrames:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3423   .bss.g_fast_debug:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3429   .bss.g_flag_monitor_from_host:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3431   .bss.g_index_Modbus:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3438   .bss.g_test_debug:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3444   .bss.last_usr_mode:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3448   .bss.last_usr_mode:00000000 last_usr_mode
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3451   .bss.s_RXBuf.11932:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3455   .bss.s_RXBuf.11932:00000000 s_RXBuf.11932
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3461   .bss.s_bBeginFrame.11934:00000000 s_bBeginFrame.11934
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3462   .bss.s_bBeginFrame.11934:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3467   .bss.s_bFrameHead1.11933:00000000 s_bFrameHead1.11933
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3468   .bss.s_bFrameHead1.11933:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3473   .bss.s_rxLen.11936:00000000 s_rxLen.11936
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3474   .bss.s_rxLen.11936:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3479   .bss.s_rxPos.11935:00000000 s_rxPos.11935
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3480   .bss.s_rxPos.11935:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3482   .bss.uart_recv_buf:00000000 $d
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3486   .bss.uart_recv_buf:00000000 uart_recv_buf
C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s:3489   .data.uart1_dma_tx_arry:00000000 $d

UNDEFINED SYMBOLS
g_CmdMap
HAL_RS485Ex_Init
HAL_UARTEx_SetTxFifoThreshold
HAL_UARTEx_SetRxFifoThreshold
HAL_UARTEx_DisableFifoMode
HAL_UARTEx_ReceiveToIdle_DMA
Error_Handler
__aeabi_ldivmod
recPosCmd
Return_OldFrame_state
ARM GAS  C:\Users\82057\AppData\Local\Temp\cc9ISjMt.s 			page 97


Return_state_frame
pos_linearity_ini
g_CmdMap_bWR
g_CmdMap_User_bWR
force_set
force_act
status_Mode_POSITION_FORCE
setPara_waveSinGenrator
ScopeProDebug
ScopeProDebug_2
ReturnCLibADC_Frame
Return_OldFrame_data
g_pMU_value_offset
MU_Value
range_icmu_vlaue_at_stroke
range_icmu_vlaue_need_addMax
g_pPos_ref_base_um
rod_pos_Muti_Encoder
g_Encode_offset
EN_360
g_Encode_offset_EN
waveGen
flag_rev_modbus
modbus_rly_delay_ms
