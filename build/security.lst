ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"security.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.generate_errorCode,"ax",%progbits
  18              		.align	1
  19              		.global	generate_errorCode
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	generate_errorCode:
  26              	.LFB333:
  27              		.file 1 "Src/security.c"
   1:Src/security.c **** #include "security.h"
   2:Src/security.c **** #include "global.h"
   3:Src/security.c **** s32 g_CurrentOverPool = 0;
   4:Src/security.c **** s32 Over_Temp_Cun = 0;			    // ÔøΩÔøΩÔøΩ¬ºÔøΩÔøΩÔøΩÔøΩ ±ÔøΩÔøΩ ±ÔøΩÔøΩ
   5:Src/security.c **** s32 Low_Voltage_Cun = 0;		    // «∑—πÔøΩÔøΩÔøΩÔøΩÔøΩ ±ÔøΩÔøΩ ±ÔøΩÔøΩ
   6:Src/security.c **** s32 Over_Voltage_Cun = 0;		  // ÔøΩÔøΩ—πÔøΩÔøΩÔøΩÔøΩÔøΩ ±ÔøΩÔøΩ ±ÔøΩÔøΩ
   7:Src/security.c **** s16 Power_Avg_tab[8] = {0,0,0,0,0,0,0,0};
   8:Src/security.c **** s32 Power_Avg_cun = 0;
   9:Src/security.c **** 
  10:Src/security.c **** #define	SHORT_CUR_DEF	((int)(HW_MAX_CURRENT*1.414*1.5))
  11:Src/security.c **** 
  12:Src/security.c **** // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ¬∑ÔøΩÔøΩÔøΩ, 10KHzÔøΩÔøΩ ±ÔøΩÔøΩÔøΩÔøΩ
  13:Src/security.c **** uint16_t count_over_current = 0;
  14:Src/security.c **** uint16_t count_over_temperature = 0;
  15:Src/security.c **** uint16_t count_Id_error = 0;
  16:Src/security.c **** uint32_t power_on_time = 0;
  17:Src/security.c **** float Voltag_f_filter = 0.0f;
  18:Src/security.c **** float Voltag_f = 0.0f;
  19:Src/security.c **** 
  20:Src/security.c **** static int over_current_staff_event_cnt = 0;
  21:Src/security.c **** 
  22:Src/security.c **** void generate_errorCode(void)
  23:Src/security.c **** {
  28              		.loc 1 23 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 38B5     		push	{r3, r4, r5, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 16
  35              		.cfi_offset 3, -16
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 2


  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  24:Src/security.c **** 		static s32 s_count = 0;
  25:Src/security.c **** 	static s32 temperture_hystersis = 0;
  26:Src/security.c **** 	static s32  count_over_AlerrTemperature = 0;
  27:Src/security.c **** 	
  28:Src/security.c **** 	
  29:Src/security.c **** 	if(++s_count>250)
  39              		.loc 1 29 0
  40 0002 6C4D     		ldr	r5, .L38
  41 0004 6C4C     		ldr	r4, .L38+4
  42 0006 2B68     		ldr	r3, [r5]
  43 0008 0133     		adds	r3, r3, #1
  44 000a FA2B     		cmp	r3, #250
  45 000c 42DC     		bgt	.L2
  46 000e 2B60     		str	r3, [r5]
  47              	.L3:
  30:Src/security.c **** 	{
  31:Src/security.c **** 		s_count = 0;
  32:Src/security.c **** 		g_CmdMap[CMD_ERROR] &= (ERROR_MASK_STALL | ERROR_MASK_OVER_CURRENT);
  33:Src/security.c **** 		
  34:Src/security.c **** 		if( g_CmdMap[CMD_ERROR]  )
  35:Src/security.c **** 		{
  36:Src/security.c **** 			over_current_staff_event_cnt++;
  37:Src/security.c **** 			if( over_current_staff_event_cnt < 3 )
  38:Src/security.c **** 			{
  39:Src/security.c **** 				g_CmdMap[CMD_ERROR] = 0;
  40:Src/security.c **** 			}
  41:Src/security.c **** 			
  42:Src/security.c **** 			if( over_current_staff_event_cnt > 3)
  43:Src/security.c **** 			{
  44:Src/security.c **** 				over_current_staff_event_cnt = 3;
  45:Src/security.c **** 			}
  46:Src/security.c **** 		}
  47:Src/security.c **** 		else
  48:Src/security.c **** 		{
  49:Src/security.c **** 			
  50:Src/security.c **** 		}
  51:Src/security.c **** 		
  52:Src/security.c **** 		
  53:Src/security.c **** 	}
  54:Src/security.c **** 	if(power_on_time<50*5)
  48              		.loc 1 54 0
  49 0010 6A4A     		ldr	r2, .L38+8
  50 0012 1368     		ldr	r3, [r2]
  51 0014 F92B     		cmp	r3, #249
  55:Src/security.c **** 	{power_on_time++;}
  52              		.loc 1 55 0
  53 0016 9CBF     		itt	ls
  54 0018 0133     		addls	r3, r3, #1
  55 001a 1360     		strls	r3, [r2]
  56:Src/security.c **** 	
  57:Src/security.c **** 	icmu_eerpom_erro_detect();
  56              		.loc 1 57 0
  57 001c FFF7FEFF 		bl	icmu_eerpom_erro_detect
  58              	.LVL0:
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 3


  58:Src/security.c **** 	
  59:Src/security.c **** 	if(Flag_error_read_flash == 1)
  59              		.loc 1 59 0
  60 0020 674B     		ldr	r3, .L38+12
  60:Src/security.c **** 	{
  61:Src/security.c **** 		g_CmdMap[CMD_ERROR] |= ERROR_MASK_READ_FLASH;
  62:Src/security.c **** 	}
  63:Src/security.c **** //	if(GPIO_ReadInputDataBit(GPIOA,GPIO_Pin_11) == Bit_RESET)
  64:Src/security.c **** //	{
  65:Src/security.c **** //		g_CmdMap[CMD_ERROR] |= ERROR_MASK_PREDRIVE_FAULT;
  66:Src/security.c **** //	}
  67:Src/security.c **** 	if(Flag_error_current_clib == 1)
  68:Src/security.c **** 	{
  69:Src/security.c **** 		g_CmdMap[CMD_ERROR] |= ERROR_MASK_CURRENT_CLIB_FAULT;
  70:Src/security.c **** 	}
  71:Src/security.c **** 	//¬≤¬π¬≥√§¬¥√∫√Ç√´
  72:Src/security.c **** 	if(Flag_error_MU_SPI == 1)//√ê√Ö¬∫√Ö√å√∏¬±√§√í√¨¬≥¬£ ¬ª√≤√ï√ü SPI√É¬ª√ì√ê√ä√ï¬µ¬Ω√ê√Ö¬∫√Ö¬±¬®¬¥√ã¬
  73:Src/security.c **** 	{
  74:Src/security.c **** 		g_CmdMap[CMD_ERROR] |= ERROR_MASK_ENCODER_FAULT;
  75:Src/security.c **** 	}
  76:Src/security.c **** //	if(GPIO_ReadInputDataBit(GPIOA,GPIO_Pin_12) ==  SET)
  77:Src/security.c **** //	{	
  78:Src/security.c **** //		g_CmdMap[CMD_ERROR] |= ERROR_MASK_PREDRIVE_FAULT;
  79:Src/security.c **** //	}	
  80:Src/security.c **** //	if(Flag_error_MU_value_instable == 1)
  81:Src/security.c **** //	{
  82:Src/security.c **** //		g_CmdMap[CMD_ERROR] |= ERROR_MASK_MU_VALUE_INSTABLE;
  83:Src/security.c **** //	}
  84:Src/security.c **** //	if(Flag_error_torsion_dect == 1)
  85:Src/security.c **** //	{
  86:Src/security.c **** //		g_CmdMap[CMD_ERROR] |= ERROR_MASK_FORCE_SENSOR_FAULT;
  87:Src/security.c **** //	}
  88:Src/security.c **** //	Voltag_f = (float)((int32_t)(ADC3->JDR2)*36300/4096);
  89:Src/security.c **** //	Voltag_f_filter = 0.8f*Voltag_f_filter+0.2f*Voltag_f;	
  90:Src/security.c **** //	g_CmdMap[CMD_VOLTAGE] = (int16_t)Voltag_f_filter;//mV	
  91:Src/security.c **** //	if(power_on_time>(50*5-20))
  92:Src/security.c **** //	{
  93:Src/security.c **** //			if(g_CmdMap[CMD_VOLTAGE] > MAX_POWVOL)//¬π√Ω√ë¬π
  94:Src/security.c **** //	{
  95:Src/security.c **** //			g_CmdMap[CMD_ERROR] |= ERROR_MASK_OVER_VOLTAGE;
  96:Src/security.c **** //	} 	
  97:Src/security.c **** //		if(g_CmdMap[CMD_VOLTAGE] < MIN_POWVOL)//√á¬∑√ë¬π
  98:Src/security.c **** //		{
  99:Src/security.c **** //			g_CmdMap[CMD_ERROR] |= ERROR_MASK_UNDER_VOLTAGE;
 100:Src/security.c **** //		} 
 101:Src/security.c **** //	}
 102:Src/security.c **** 
 103:Src/security.c **** 
 104:Src/security.c **** 	if( g_CmdMap[CMD_RUN_LOW_TEMP] > g_CmdMap[CMD_OVER_TEMP_SET])
 105:Src/security.c **** 	{
 106:Src/security.c **** 		g_CmdMap[CMD_RUN_LOW_TEMP] = g_CmdMap[CMD_OVER_TEMP_SET];
 107:Src/security.c **** 	}
 108:Src/security.c **** 	
 109:Src/security.c **** 	if(g_CmdMap[CMD_TEMP] > ( g_CmdMap[CMD_OVER_TEMP_SET] + temperture_hystersis) )
  61              		.loc 1 109 0
  62 0022 6849     		ldr	r1, .L38+16
  59:Src/security.c **** 	{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 4


  63              		.loc 1 59 0
  64 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  65              		.loc 1 109 0
  66 0026 0868     		ldr	r0, [r1]
  59:Src/security.c **** 	{
  67              		.loc 1 59 0
  68 0028 012B     		cmp	r3, #1
  61:Src/security.c **** 	}
  69              		.loc 1 61 0
  70 002a 01BF     		itttt	eq
  71 002c B4F85430 		ldrheq	r3, [r4, #84]
  72 0030 1BB2     		sxtheq	r3, r3
  73 0032 43F01003 		orreq	r3, r3, #16
  74 0036 A4F85430 		strheq	r3, [r4, #84]	@ movhi
  67:Src/security.c **** 	{
  75              		.loc 1 67 0
  76 003a 634B     		ldr	r3, .L38+20
  77 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  78 003e 012B     		cmp	r3, #1
  69:Src/security.c **** 	}
  79              		.loc 1 69 0
  80 0040 01BF     		itttt	eq
  81 0042 B4F85430 		ldrheq	r3, [r4, #84]
  82 0046 1BB2     		sxtheq	r3, r3
  83 0048 43F08003 		orreq	r3, r3, #128
  84 004c A4F85430 		strheq	r3, [r4, #84]	@ movhi
  72:Src/security.c **** 	{
  85              		.loc 1 72 0
  86 0050 5E4B     		ldr	r3, .L38+24
  87 0052 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  88 0054 012B     		cmp	r3, #1
  74:Src/security.c **** 	}
  89              		.loc 1 74 0
  90 0056 01BF     		itttt	eq
  91 0058 B4F85430 		ldrheq	r3, [r4, #84]
  92 005c 1BB2     		sxtheq	r3, r3
  93 005e 43F04003 		orreq	r3, r3, #64
  94 0062 A4F85430 		strheq	r3, [r4, #84]	@ movhi
 104:Src/security.c **** 	{
  95              		.loc 1 104 0
  96 0066 E28B     		ldrh	r2, [r4, #30]
  97 0068 A38B     		ldrh	r3, [r4, #28]
  98 006a 12B2     		sxth	r2, r2
  99 006c 1BB2     		sxth	r3, r3
 100 006e 9A42     		cmp	r2, r3
 106:Src/security.c **** 	}
 101              		.loc 1 106 0
 102 0070 C4BF     		itt	gt
 103 0072 A38B     		ldrhgt	r3, [r4, #28]
 104 0074 E383     		strhgt	r3, [r4, #30]	@ movhi
 105              		.loc 1 109 0
 106 0076 B4F85620 		ldrh	r2, [r4, #86]
 107 007a A38B     		ldrh	r3, [r4, #28]
 108 007c 12B2     		sxth	r2, r2
 109 007e 00FA83F3 		sxtah	r3, r0, r3
 110 0082 9A42     		cmp	r2, r3
 111 0084 524B     		ldr	r3, .L38+28
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 5


 112 0086 3FDD     		ble	.L11
 110:Src/security.c **** 	{
 111:Src/security.c **** 		if(count_over_temperature<30)
 113              		.loc 1 111 0
 114 0088 1A88     		ldrh	r2, [r3]
 115 008a 1D2A     		cmp	r2, #29
 116 008c 1DD8     		bhi	.L12
 112:Src/security.c **** 		{
 113:Src/security.c **** 			count_over_temperature++;
 117              		.loc 1 113 0
 118 008e 0132     		adds	r2, r2, #1
 119              	.L35:
 114:Src/security.c **** 		}
 115:Src/security.c **** 		else
 116:Src/security.c **** 		{
 117:Src/security.c **** 			count_over_temperature = 31;
 118:Src/security.c **** 			temperture_hystersis = g_CmdMap[CMD_RUN_LOW_TEMP] - g_CmdMap[CMD_OVER_TEMP_SET];
 119:Src/security.c **** 
 120:Src/security.c **** 			g_CmdMap[CMD_ERROR] |= ERROR_MASK_OVER_TEMP;
 121:Src/security.c **** 			s_count = 0;
 122:Src/security.c **** 		}		
 123:Src/security.c **** 	}
 124:Src/security.c **** 	else
 125:Src/security.c **** 	{
 126:Src/security.c **** 		temperture_hystersis = 0;
 127:Src/security.c **** 		count_over_temperature = 0;
 120              		.loc 1 127 0
 121 0090 1A80     		strh	r2, [r3]	@ movhi
 122 0092 2BE0     		b	.L13
 123              	.L2:
  32:Src/security.c **** 		
 124              		.loc 1 32 0
 125 0094 B4F85430 		ldrh	r3, [r4, #84]
 126 0098 03F00503 		and	r3, r3, #5
 127 009c A4F85430 		strh	r3, [r4, #84]	@ movhi
  34:Src/security.c **** 		{
 128              		.loc 1 34 0
 129 00a0 B4F85430 		ldrh	r3, [r4, #84]
  31:Src/security.c **** 		g_CmdMap[CMD_ERROR] &= (ERROR_MASK_STALL | ERROR_MASK_OVER_CURRENT);
 130              		.loc 1 31 0
 131 00a4 0021     		movs	r1, #0
  34:Src/security.c **** 		{
 132              		.loc 1 34 0
 133 00a6 1BB2     		sxth	r3, r3
  31:Src/security.c **** 		g_CmdMap[CMD_ERROR] &= (ERROR_MASK_STALL | ERROR_MASK_OVER_CURRENT);
 134              		.loc 1 31 0
 135 00a8 2960     		str	r1, [r5]
  34:Src/security.c **** 		{
 136              		.loc 1 34 0
 137 00aa 002B     		cmp	r3, #0
 138 00ac B0D0     		beq	.L3
  36:Src/security.c **** 			if( over_current_staff_event_cnt < 3 )
 139              		.loc 1 36 0
 140 00ae 494A     		ldr	r2, .L38+32
 141 00b0 1368     		ldr	r3, [r2]
 142 00b2 0133     		adds	r3, r3, #1
  37:Src/security.c **** 			{
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 6


 143              		.loc 1 37 0
 144 00b4 022B     		cmp	r3, #2
  36:Src/security.c **** 			if( over_current_staff_event_cnt < 3 )
 145              		.loc 1 36 0
 146 00b6 1360     		str	r3, [r2]
  37:Src/security.c **** 			{
 147              		.loc 1 37 0
 148 00b8 02DC     		bgt	.L5
  39:Src/security.c **** 			}
 149              		.loc 1 39 0
 150 00ba A4F85410 		strh	r1, [r4, #84]	@ movhi
 151 00be A7E7     		b	.L3
 152              	.L5:
  42:Src/security.c **** 			{
 153              		.loc 1 42 0
 154 00c0 032B     		cmp	r3, #3
  44:Src/security.c **** 			}
 155              		.loc 1 44 0
 156 00c2 1CBF     		itt	ne
 157 00c4 0323     		movne	r3, #3
 158 00c6 1360     		strne	r3, [r2]
 159 00c8 A2E7     		b	.L3
 160              	.L12:
 117:Src/security.c **** 			temperture_hystersis = g_CmdMap[CMD_RUN_LOW_TEMP] - g_CmdMap[CMD_OVER_TEMP_SET];
 161              		.loc 1 117 0
 162 00ca 1F22     		movs	r2, #31
 163 00cc 1A80     		strh	r2, [r3]	@ movhi
 118:Src/security.c **** 
 164              		.loc 1 118 0
 165 00ce E38B     		ldrh	r3, [r4, #30]
 166 00d0 A28B     		ldrh	r2, [r4, #28]
 167 00d2 1BB2     		sxth	r3, r3
 168 00d4 12B2     		sxth	r2, r2
 169 00d6 9B1A     		subs	r3, r3, r2
 170 00d8 0B60     		str	r3, [r1]
 120:Src/security.c **** 			s_count = 0;
 171              		.loc 1 120 0
 172 00da B4F85430 		ldrh	r3, [r4, #84]
 173 00de 1BB2     		sxth	r3, r3
 174 00e0 43F00203 		orr	r3, r3, #2
 175 00e4 A4F85430 		strh	r3, [r4, #84]	@ movhi
 121:Src/security.c **** 		}		
 176              		.loc 1 121 0
 177 00e8 0023     		movs	r3, #0
 178 00ea 2B60     		str	r3, [r5]
 179              	.L13:
 128:Src/security.c **** 	}
 129:Src/security.c **** 
 130:Src/security.c **** 	if( g_CmdMap[CMD_TEMP] > g_CmdMap[CMD_RUN_LOW_TEMP] )
 180              		.loc 1 130 0
 181 00ec B4F85620 		ldrh	r2, [r4, #86]
 182 00f0 E38B     		ldrh	r3, [r4, #30]
 183 00f2 12B2     		sxth	r2, r2
 184 00f4 1BB2     		sxth	r3, r3
 185 00f6 9A42     		cmp	r2, r3
 186 00f8 374B     		ldr	r3, .L38+36
 187 00fa 31DD     		ble	.L14
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 7


 131:Src/security.c **** 	{
 132:Src/security.c **** 		if(count_over_AlerrTemperature<30)
 188              		.loc 1 132 0
 189 00fc 1A68     		ldr	r2, [r3]
 190 00fe 1D2A     		cmp	r2, #29
 191 0100 05DC     		bgt	.L15
 133:Src/security.c **** 		{
 134:Src/security.c **** 			count_over_AlerrTemperature++;
 192              		.loc 1 134 0
 193 0102 0132     		adds	r2, r2, #1
 194              	.L36:
 135:Src/security.c **** 		}
 136:Src/security.c **** 		else
 137:Src/security.c **** 		{
 138:Src/security.c **** 			count_over_AlerrTemperature = 31;
 139:Src/security.c **** 			g_CmdMap[CMD_ERROR] |= ERROR_MASK_HIGH_TEMPERATURE_ALERT; 
 140:Src/security.c **** 			s_count = 0;
 141:Src/security.c **** 		}	
 142:Src/security.c **** 	}
 143:Src/security.c **** 	else
 144:Src/security.c **** 	{
 145:Src/security.c **** 		count_over_AlerrTemperature = 0;
 195              		.loc 1 145 0
 196 0104 1A60     		str	r2, [r3]
 197 0106 0FE0     		b	.L16
 198              	.L11:
 126:Src/security.c **** 		count_over_temperature = 0;
 199              		.loc 1 126 0
 200 0108 0022     		movs	r2, #0
 201 010a 0A60     		str	r2, [r1]
 202 010c C0E7     		b	.L35
 203              	.L15:
 138:Src/security.c **** 			g_CmdMap[CMD_ERROR] |= ERROR_MASK_HIGH_TEMPERATURE_ALERT; 
 204              		.loc 1 138 0
 205 010e 1F22     		movs	r2, #31
 206 0110 1A60     		str	r2, [r3]
 139:Src/security.c **** 			s_count = 0;
 207              		.loc 1 139 0
 208 0112 B4F85430 		ldrh	r3, [r4, #84]
 209 0116 1BB2     		sxth	r3, r3
 210 0118 6FEA4343 		mvn	r3, r3, lsl #17
 211 011c 6FEA5343 		mvn	r3, r3, lsr #17
 212 0120 A4F85430 		strh	r3, [r4, #84]	@ movhi
 140:Src/security.c **** 		}	
 213              		.loc 1 140 0
 214 0124 0023     		movs	r3, #0
 215 0126 2B60     		str	r3, [r5]
 216              	.L16:
 146:Src/security.c **** 	}
 147:Src/security.c **** 	
 148:Src/security.c **** 	
 149:Src/security.c **** 	
 150:Src/security.c **** 	if(g_CmdMap[CMD_OVER_CURRENT_SET]>16384)
 217              		.loc 1 150 0
 218 0128 238C     		ldrh	r3, [r4, #32]
 219 012a 1BB2     		sxth	r3, r3
 220 012c B3F5804F 		cmp	r3, #16384
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 8


 151:Src/security.c **** 	{
 152:Src/security.c **** 		g_CmdMap[CMD_OVER_CURRENT_SET] = 16384;
 221              		.loc 1 152 0
 222 0130 C4BF     		itt	gt
 223 0132 4FF48043 		movgt	r3, #16384
 224 0136 2384     		strhgt	r3, [r4, #32]	@ movhi
 153:Src/security.c **** 	}
 154:Src/security.c **** 	
 155:Src/security.c **** 	if( ABS( (s16)g_CmdMap[CMD_CUR_ACT_PU]) > g_CmdMap[CMD_OVER_CURRENT_SET] )//¬π√Ω√Å√∑¬π√ä√ï√è
 225              		.loc 1 155 0
 226 0138 B4F84E30 		ldrh	r3, [r4, #78]
 227 013c 13F4004F 		tst	r3, #32768
 228 0140 B4F84E30 		ldrh	r3, [r4, #78]
 229 0144 228C     		ldrh	r2, [r4, #32]
 230 0146 1BB2     		sxth	r3, r3
 231 0148 18BF     		it	ne
 232 014a 5B42     		rsbne	r3, r3, #0
 233 014c 12B2     		sxth	r2, r2
 234 014e 9A42     		cmp	r2, r3
 235 0150 224B     		ldr	r3, .L38+40
 236 0152 2DDA     		bge	.L20
 156:Src/security.c **** 	{
 157:Src/security.c **** 		if(count_over_current<150)
 237              		.loc 1 157 0
 238 0154 1A88     		ldrh	r2, [r3]
 239 0156 952A     		cmp	r2, #149
 240 0158 04D8     		bhi	.L21
 158:Src/security.c **** 		{
 159:Src/security.c **** 			count_over_current++;		
 241              		.loc 1 159 0
 242 015a 0132     		adds	r2, r2, #1
 243              	.L37:
 160:Src/security.c **** 		}
 161:Src/security.c **** 		else
 162:Src/security.c **** 		{
 163:Src/security.c **** 			count_over_current = 151;
 164:Src/security.c **** 			s_count = 0;
 165:Src/security.c **** 			if( ABS(g_CmdMap[CMD_SPD_ACT_PU]) <  200 )
 166:Src/security.c **** 			{
 167:Src/security.c **** 				
 168:Src/security.c **** 				g_CmdMap[CMD_ERROR] |= ERROR_MASK_STALL;
 169:Src/security.c **** 			}
 170:Src/security.c **** 			g_CmdMap[CMD_ERROR] |= ERROR_MASK_OVER_CURRENT;
 171:Src/security.c **** 			
 172:Src/security.c **** 			
 173:Src/security.c **** 		}		
 174:Src/security.c **** 	}
 175:Src/security.c **** 	else
 176:Src/security.c **** 	{
 177:Src/security.c **** 		count_over_current = 0;
 244              		.loc 1 177 0
 245 015c 1A80     		strh	r2, [r3]	@ movhi
 178:Src/security.c **** 	}	
 179:Src/security.c **** 	
 180:Src/security.c **** 	
 181:Src/security.c **** 	
 182:Src/security.c **** }
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 9


 246              		.loc 1 182 0
 247 015e 21E0     		b	.L1
 248              	.L14:
 145:Src/security.c **** 	}
 249              		.loc 1 145 0
 250 0160 0022     		movs	r2, #0
 251 0162 CFE7     		b	.L36
 252              	.L21:
 163:Src/security.c **** 			s_count = 0;
 253              		.loc 1 163 0
 254 0164 9722     		movs	r2, #151
 255 0166 1A80     		strh	r2, [r3]	@ movhi
 164:Src/security.c **** 			if( ABS(g_CmdMap[CMD_SPD_ACT_PU]) <  200 )
 256              		.loc 1 164 0
 257 0168 0023     		movs	r3, #0
 258 016a 2B60     		str	r3, [r5]
 165:Src/security.c **** 			{
 259              		.loc 1 165 0
 260 016c B4F85030 		ldrh	r3, [r4, #80]
 261 0170 13F4004F 		tst	r3, #32768
 262 0174 B4F85030 		ldrh	r3, [r4, #80]
 263 0178 1BB2     		sxth	r3, r3
 264 017a 14D0     		beq	.L23
 165:Src/security.c **** 			{
 265              		.loc 1 165 0 is_stmt 0 discriminator 1
 266 017c 13F1C70F 		cmn	r3, #199
 267 0180 B4BF     		ite	lt
 268 0182 0023     		movlt	r3, #0
 269 0184 0123     		movge	r3, #1
 270              	.L24:
 165:Src/security.c **** 			{
 271              		.loc 1 165 0 discriminator 4
 272 0186 33B1     		cbz	r3, .L25
 168:Src/security.c **** 			}
 273              		.loc 1 168 0 is_stmt 1
 274 0188 B4F85430 		ldrh	r3, [r4, #84]
 275 018c 1BB2     		sxth	r3, r3
 276 018e 43F00103 		orr	r3, r3, #1
 277 0192 A4F85430 		strh	r3, [r4, #84]	@ movhi
 278              	.L25:
 170:Src/security.c **** 			
 279              		.loc 1 170 0
 280 0196 B4F85430 		ldrh	r3, [r4, #84]
 281 019a 1BB2     		sxth	r3, r3
 282 019c 43F00403 		orr	r3, r3, #4
 283 01a0 A4F85430 		strh	r3, [r4, #84]	@ movhi
 284              	.L1:
 285              		.loc 1 182 0
 286 01a4 38BD     		pop	{r3, r4, r5, pc}
 287              	.L23:
 165:Src/security.c **** 			{
 288              		.loc 1 165 0 discriminator 2
 289 01a6 C72B     		cmp	r3, #199
 290 01a8 CCBF     		ite	gt
 291 01aa 0023     		movgt	r3, #0
 292 01ac 0123     		movle	r3, #1
 293 01ae EAE7     		b	.L24
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 10


 294              	.L20:
 177:Src/security.c **** 	}	
 295              		.loc 1 177 0
 296 01b0 0022     		movs	r2, #0
 297 01b2 D3E7     		b	.L37
 298              	.L39:
 299              		.align	2
 300              	.L38:
 301 01b4 00000000 		.word	.LANCHOR0
 302 01b8 00000000 		.word	g_CmdMap
 303 01bc 00000000 		.word	.LANCHOR2
 304 01c0 00000000 		.word	Flag_error_read_flash
 305 01c4 00000000 		.word	.LANCHOR3
 306 01c8 00000000 		.word	Flag_error_current_clib
 307 01cc 00000000 		.word	Flag_error_MU_SPI
 308 01d0 00000000 		.word	.LANCHOR4
 309 01d4 00000000 		.word	.LANCHOR1
 310 01d8 00000000 		.word	.LANCHOR5
 311 01dc 00000000 		.word	.LANCHOR6
 312              		.cfi_endproc
 313              	.LFE333:
 315              		.section	.text.ClearError,"ax",%progbits
 316              		.align	1
 317              		.global	ClearError
 318              		.syntax unified
 319              		.thumb
 320              		.thumb_func
 321              		.fpu fpv4-sp-d16
 323              	ClearError:
 324              	.LFB334:
 183:Src/security.c **** // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
 184:Src/security.c **** void ClearError(void)
 185:Src/security.c **** {
 325              		.loc 1 185 0
 326              		.cfi_startproc
 327              		@ args = 0, pretend = 0, frame = 0
 328              		@ frame_needed = 0, uses_anonymous_args = 0
 329              		@ link register save eliminated.
 186:Src/security.c ****   g_CmdMap[CMD_ERROR] = 0;
 330              		.loc 1 186 0
 331 0000 034A     		ldr	r2, .L41
 332 0002 0023     		movs	r3, #0
 333 0004 A2F85430 		strh	r3, [r2, #84]	@ movhi
 187:Src/security.c **** 	over_current_staff_event_cnt = 0;
 334              		.loc 1 187 0
 335 0008 024A     		ldr	r2, .L41+4
 336 000a 1360     		str	r3, [r2]
 188:Src/security.c **** 	clear_eeprom_erro();
 337              		.loc 1 188 0
 338 000c FFF7FEBF 		b	clear_eeprom_erro
 339              	.LVL1:
 340              	.L42:
 341              		.align	2
 342              	.L41:
 343 0010 00000000 		.word	g_CmdMap
 344 0014 00000000 		.word	.LANCHOR1
 345              		.cfi_endproc
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 11


 346              	.LFE334:
 348              		.section	.text.UpdateErrorStateLED,"ax",%progbits
 349              		.align	1
 350              		.global	UpdateErrorStateLED
 351              		.syntax unified
 352              		.thumb
 353              		.thumb_func
 354              		.fpu fpv4-sp-d16
 356              	UpdateErrorStateLED:
 357              	.LFB335:
 189:Src/security.c **** }
 190:Src/security.c **** 
 191:Src/security.c **** 
 192:Src/security.c **** // ÔøΩÔøΩÔøΩÔøΩLEDÔøΩÔøΩÔøΩÔøΩ÷∏ æÔøΩÔøΩ◊¥Ã¨ÔøΩÔøΩ2KHz
 193:Src/security.c **** void UpdateErrorStateLED(void)
 194:Src/security.c **** {
 358              		.loc 1 194 0
 359              		.cfi_startproc
 360              		@ args = 0, pretend = 0, frame = 0
 361              		@ frame_needed = 0, uses_anonymous_args = 0
 362              	.LVL2:
 363 0000 30B5     		push	{r4, r5, lr}
 364              	.LCFI1:
 365              		.cfi_def_cfa_offset 12
 366              		.cfi_offset 4, -12
 367              		.cfi_offset 5, -8
 368              		.cfi_offset 14, -4
 195:Src/security.c ****   static s32 s_count = 0;
 196:Src/security.c ****   s32 i = 0;
 197:Src/security.c **** 
 198:Src/security.c ****   if (g_CmdMap[CMD_ERROR] == 0)  // ÔøΩﬁ¥ÔøΩÔøΩÔøΩÔøΩÀ≥ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
 369              		.loc 1 198 0
 370 0002 124C     		ldr	r4, .L51
 371 0004 1249     		ldr	r1, .L51+4
 372 0006 B4F85400 		ldrh	r0, [r4, #84]
 373 000a 0A68     		ldr	r2, [r1]
 374 000c 00B2     		sxth	r0, r0
 375 000e 18B9     		cbnz	r0, .L49
 199:Src/security.c ****   {
 200:Src/security.c ****     if (s_count)
 376              		.loc 1 200 0
 377 0010 0AB1     		cbz	r2, .L43
 378              	.LVL3:
 379              	.L45:
 201:Src/security.c ****     {
 202:Src/security.c ****       s_count = 0;
 380              		.loc 1 202 0
 381 0012 0023     		movs	r3, #0
 382 0014 0B60     		str	r3, [r1]
 383              	.L43:
 203:Src/security.c **** //      LEDRED_OFF;
 204:Src/security.c ****     }
 205:Src/security.c ****     return;
 206:Src/security.c ****   }
 207:Src/security.c ****   for (i=0; i<16; i++)  // ÔøΩ–¥ÔøΩÔøΩÛ£¨ºÔøΩÔøΩÔøΩ«µ⁄ºÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÛ£¨≤ÔøΩÔøΩÔøΩ÷µÔøΩÔøΩiÔøΩÔ
 208:Src/security.c ****   {
 209:Src/security.c ****     if (g_CmdMap[CMD_ERROR] & (0x0001<<i))
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 12


 210:Src/security.c ****       break;
 211:Src/security.c ****   }
 212:Src/security.c **** 
 213:Src/security.c ****   s_count++;
 214:Src/security.c ****   if (s_count >= (i+1)*1000)
 215:Src/security.c ****   {
 216:Src/security.c **** //    LEDRED_OFF;
 217:Src/security.c ****     if (s_count >= (i+3)*1000)
 218:Src/security.c ****       s_count = 0;
 219:Src/security.c ****   }
 220:Src/security.c ****   else if (s_count%500 == 0)
 221:Src/security.c ****   {
 222:Src/security.c **** //    if (s_count%1000 == 0)
 223:Src/security.c **** //     LEDRED_OFF;
 224:Src/security.c **** //    else
 225:Src/security.c **** //      LEDRED_ON;
 226:Src/security.c ****   }
 227:Src/security.c **** }
 384              		.loc 1 227 0
 385 0016 30BD     		pop	{r4, r5, pc}
 386              	.LVL4:
 387              	.L49:
 207:Src/security.c ****   {
 388              		.loc 1 207 0
 389 0018 0020     		movs	r0, #0
 390              	.LVL5:
 391              	.L44:
 209:Src/security.c ****       break;
 392              		.loc 1 209 0
 393 001a B4F85430 		ldrh	r3, [r4, #84]
 394 001e 1BB2     		sxth	r3, r3
 395 0020 0341     		asrs	r3, r3, r0
 396 0022 DB07     		lsls	r3, r3, #31
 397 0024 00F10105 		add	r5, r0, #1
 398 0028 02D4     		bmi	.L47
 399              	.LVL6:
 207:Src/security.c ****   {
 400              		.loc 1 207 0 discriminator 2
 401 002a 102D     		cmp	r5, #16
 402 002c 2846     		mov	r0, r5
 403 002e F4D1     		bne	.L44
 404              	.LVL7:
 405              	.L47:
 214:Src/security.c ****   {
 406              		.loc 1 214 0
 407 0030 4FF47A73 		mov	r3, #1000
 213:Src/security.c ****   if (s_count >= (i+1)*1000)
 408              		.loc 1 213 0
 409 0034 0132     		adds	r2, r2, #1
 214:Src/security.c ****   {
 410              		.loc 1 214 0
 411 0036 00FB0333 		mla	r3, r0, r3, r3
 412 003a 9A42     		cmp	r2, r3
 213:Src/security.c ****   if (s_count >= (i+1)*1000)
 413              		.loc 1 213 0
 414 003c 0A60     		str	r2, [r1]
 214:Src/security.c ****   {
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 13


 415              		.loc 1 214 0
 416 003e EADB     		blt	.L43
 217:Src/security.c ****       s_count = 0;
 417              		.loc 1 217 0
 418 0040 03F5FA63 		add	r3, r3, #2000
 419 0044 9A42     		cmp	r2, r3
 420 0046 E4DA     		bge	.L45
 421 0048 E5E7     		b	.L43
 422              	.L52:
 423 004a 00BF     		.align	2
 424              	.L51:
 425 004c 00000000 		.word	g_CmdMap
 426 0050 00000000 		.word	.LANCHOR7
 427              		.cfi_endproc
 428              	.LFE335:
 430              		.section	.text.Stroke_protection,"ax",%progbits
 431              		.align	1
 432              		.global	Stroke_protection
 433              		.syntax unified
 434              		.thumb
 435              		.thumb_func
 436              		.fpu fpv4-sp-d16
 438              	Stroke_protection:
 439              	.LFB336:
 228:Src/security.c **** 
 229:Src/security.c **** //ÔøΩ–≥Ã±ÔøΩÔøΩÔøΩ
 230:Src/security.c **** void Stroke_protection(void)
 231:Src/security.c **** {		
 440              		.loc 1 231 0
 441              		.cfi_startproc
 442              		@ args = 0, pretend = 0, frame = 0
 443              		@ frame_needed = 0, uses_anonymous_args = 0
 444              		@ link register save eliminated.
 232:Src/security.c **** 		if(g_CmdMap[TAG_WORK_MODE] == MODE_POSITION)
 445              		.loc 1 232 0
 446 0000 144B     		ldr	r3, .L58
 447 0002 B3F80422 		ldrh	r2, [r3, #516]
 448 0006 12B2     		sxth	r2, r2
 449 0008 032A     		cmp	r2, #3
 450 000a 22D1     		bne	.L53
 233:Src/security.c **** 		{			
 234:Src/security.c **** 			if(g_CmdMap[CMD_POS_ACT_PU]>(g_CmdMap[SYS_POS_UPPER_LIMIT_PU]+ 1638)&& g_CmdMap[CMD_SPDREG_REF_P
 451              		.loc 1 234 0
 452 000c B3F84C10 		ldrh	r1, [r3, #76]
 453 0010 B3F88C22 		ldrh	r2, [r3, #652]
 454 0014 12B2     		sxth	r2, r2
 455 0016 09B2     		sxth	r1, r1
 456 0018 02F26662 		addw	r2, r2, #1638
 457 001c 9142     		cmp	r1, r2
 458 001e 07DD     		ble	.L56
 459              		.loc 1 234 0 is_stmt 0 discriminator 1
 460 0020 B3F85C20 		ldrh	r2, [r3, #92]
 461 0024 12B2     		sxth	r2, r2
 462 0026 002A     		cmp	r2, #0
 235:Src/security.c **** 			{
 236:Src/security.c **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 0; //Debug
 463              		.loc 1 236 0 is_stmt 1 discriminator 1
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 14


 464 0028 C4BF     		itt	gt
 465 002a 0022     		movgt	r2, #0
 466 002c A3F80222 		strhgt	r2, [r3, #514]	@ movhi
 467              	.L56:
 237:Src/security.c **** 			}
 238:Src/security.c **** 			if(g_CmdMap[CMD_POS_ACT_PU]<(g_CmdMap[SYS_POS_LOWER_LIMIT_PU]-819)  && g_CmdMap[CMD_SPDREG_REF_P
 468              		.loc 1 238 0
 469 0030 B3F84C10 		ldrh	r1, [r3, #76]
 470 0034 B3F88E22 		ldrh	r2, [r3, #654]
 471 0038 12B2     		sxth	r2, r2
 472 003a 09B2     		sxth	r1, r1
 473 003c A2F23332 		subw	r2, r2, #819
 474 0040 9142     		cmp	r1, r2
 475 0042 06DA     		bge	.L53
 476              		.loc 1 238 0 is_stmt 0 discriminator 1
 477 0044 B3F85C20 		ldrh	r2, [r3, #92]
 478 0048 1204     		lsls	r2, r2, #16
 239:Src/security.c **** 			{
 240:Src/security.c **** 				g_CmdMap[TAG_MOTOR_ENABLE] = 0; //Debug
 479              		.loc 1 240 0 is_stmt 1 discriminator 1
 480 004a 44BF     		itt	mi
 481 004c 0022     		movmi	r2, #0
 482 004e A3F80222 		strhmi	r2, [r3, #514]	@ movhi
 483              	.L53:
 241:Src/security.c **** 			}
 242:Src/security.c **** 		}
 243:Src/security.c **** }
 484              		.loc 1 243 0
 485 0052 7047     		bx	lr
 486              	.L59:
 487              		.align	2
 488              	.L58:
 489 0054 00000000 		.word	g_CmdMap
 490              		.cfi_endproc
 491              	.LFE336:
 493              		.section	.text.motor_fault_check,"ax",%progbits
 494              		.align	1
 495              		.global	motor_fault_check
 496              		.syntax unified
 497              		.thumb
 498              		.thumb_func
 499              		.fpu fpv4-sp-d16
 501              	motor_fault_check:
 502              	.LFB337:
 244:Src/security.c **** 
 245:Src/security.c **** 
 246:Src/security.c **** 
 247:Src/security.c **** void motor_fault_check(void)
 248:Src/security.c **** {
 503              		.loc 1 248 0
 504              		.cfi_startproc
 505              		@ args = 0, pretend = 0, frame = 0
 506              		@ frame_needed = 0, uses_anonymous_args = 0
 507              		@ link register save eliminated.
 249:Src/security.c **** 	 static s32 s_count = 0;
 250:Src/security.c **** 	
 251:Src/security.c **** 	
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 15


 252:Src/security.c **** 	if(g_CmdMap[CMD_SPD_ACT_PU] <  200 &&  (g_Vq ) > 4095 )
 508              		.loc 1 252 0
 509 0000 134B     		ldr	r3, .L69
 510 0002 B3F85020 		ldrh	r2, [r3, #80]
 511 0006 12B2     		sxth	r2, r2
 512 0008 C72A     		cmp	r2, #199
 513 000a 1DDC     		bgt	.L60
 514              		.loc 1 252 0 is_stmt 0 discriminator 1
 515 000c 114A     		ldr	r2, .L69+4
 516 000e 1268     		ldr	r2, [r2]
 517 0010 B2F5805F 		cmp	r2, #4096
 518 0014 18DB     		blt	.L60
 253:Src/security.c **** 	{
 254:Src/security.c **** 		if( ABS(g_CmdMap[CMD_CUR_ACT_PU]) <  *g_pCur_ref_base_mA /10 )
 519              		.loc 1 254 0 is_stmt 1
 520 0016 B3F84E20 		ldrh	r2, [r3, #78]
 521 001a B3F84E30 		ldrh	r3, [r3, #78]
 522 001e 1204     		lsls	r2, r2, #16
 523 0020 0D4A     		ldr	r2, .L69+8
 524 0022 1BB2     		sxth	r3, r3
 525 0024 1268     		ldr	r2, [r2]
 526 0026 48BF     		it	mi
 527 0028 5B42     		rsbmi	r3, r3, #0
 528 002a 1268     		ldr	r2, [r2]
 529 002c 0A21     		movs	r1, #10
 530 002e 92FBF1F2 		sdiv	r2, r2, r1
 531 0032 9A42     		cmp	r2, r3
 532 0034 094B     		ldr	r3, .L69+12
 533 0036 08DD     		ble	.L66
 255:Src/security.c **** 		{
 256:Src/security.c **** 			s_count++;
 534              		.loc 1 256 0
 535 0038 1A68     		ldr	r2, [r3]
 536 003a 0132     		adds	r2, r2, #1
 257:Src/security.c **** 			if( s_count > 1000 )
 537              		.loc 1 257 0
 538 003c B2F57A7F 		cmp	r2, #1000
 258:Src/security.c **** 			{
 259:Src/security.c **** 				s_count = 1001;
 539              		.loc 1 259 0
 540 0040 C8BF     		it	gt
 541 0042 40F2E932 		movwgt	r2, #1001
 542              	.L68:
 260:Src/security.c **** 			//	g_CmdMap[CMD_ERROR] |= ERROR_MASK_MOTOR_ERROR;
 261:Src/security.c **** 			}
 262:Src/security.c **** 		}
 263:Src/security.c **** 		else
 264:Src/security.c **** 		{
 265:Src/security.c **** 			s_count = 0;
 543              		.loc 1 265 0
 544 0046 1A60     		str	r2, [r3]
 545              	.L60:
 266:Src/security.c **** 		}
 267:Src/security.c **** 	}
 268:Src/security.c **** }
 546              		.loc 1 268 0
 547 0048 7047     		bx	lr
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 16


 548              	.L66:
 265:Src/security.c **** 		}
 549              		.loc 1 265 0
 550 004a 0022     		movs	r2, #0
 551 004c FBE7     		b	.L68
 552              	.L70:
 553 004e 00BF     		.align	2
 554              	.L69:
 555 0050 00000000 		.word	g_CmdMap
 556 0054 00000000 		.word	g_Vq
 557 0058 00000000 		.word	g_pCur_ref_base_mA
 558 005c 00000000 		.word	.LANCHOR8
 559              		.cfi_endproc
 560              	.LFE337:
 562              		.section	.text.user_param_protected,"ax",%progbits
 563              		.align	1
 564              		.global	user_param_protected
 565              		.syntax unified
 566              		.thumb
 567              		.thumb_func
 568              		.fpu fpv4-sp-d16
 570              	user_param_protected:
 571              	.LFB338:
 269:Src/security.c **** 
 270:Src/security.c **** 
 271:Src/security.c **** 
 272:Src/security.c **** void user_param_protected(void)
 273:Src/security.c **** {
 572              		.loc 1 273 0
 573              		.cfi_startproc
 574              		@ args = 0, pretend = 0, frame = 0
 575              		@ frame_needed = 0, uses_anonymous_args = 0
 576              		@ link register save eliminated.
 274:Src/security.c **** 	
 275:Src/security.c **** 		if(g_CmdMap[CMD_CUR_LOWER_LIMIT_PU] > 0 )
 577              		.loc 1 275 0
 578 0000 0A4B     		ldr	r3, .L74
 579 0002 9A8C     		ldrh	r2, [r3, #36]
 580 0004 12B2     		sxth	r2, r2
 581 0006 002A     		cmp	r2, #0
 276:Src/security.c **** 	{
 277:Src/security.c **** 		g_CmdMap[CMD_CUR_LOWER_LIMIT_PU]  = 0 - g_CmdMap[CMD_CUR_LOWER_LIMIT_PU] ;
 582              		.loc 1 277 0
 583 0008 C1BF     		itttt	gt
 584 000a 9A8C     		ldrhgt	r2, [r3, #36]
 585 000c 5242     		rsbgt	r2, r2, #0
 586 000e 12B2     		sxthgt	r2, r2
 587 0010 9A84     		strhgt	r2, [r3, #36]	@ movhi
 278:Src/security.c **** 	}
 279:Src/security.c **** 	if(g_CmdMap[SYS_CUR_LOWER_LIMIT_PU] > 0 )
 588              		.loc 1 279 0
 589 0012 B3F88222 		ldrh	r2, [r3, #642]
 590 0016 12B2     		sxth	r2, r2
 591 0018 002A     		cmp	r2, #0
 280:Src/security.c **** 	{
 281:Src/security.c **** 		g_CmdMap[SYS_CUR_LOWER_LIMIT_PU]  = 0 - g_CmdMap[SYS_CUR_LOWER_LIMIT_PU];
 592              		.loc 1 281 0
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 17


 593 001a C1BF     		itttt	gt
 594 001c B3F88222 		ldrhgt	r2, [r3, #642]
 595 0020 5242     		rsbgt	r2, r2, #0
 596 0022 12B2     		sxthgt	r2, r2
 597 0024 A3F88222 		strhgt	r2, [r3, #642]	@ movhi
 282:Src/security.c **** 	}
 283:Src/security.c **** 	
 284:Src/security.c **** 
 285:Src/security.c **** }
 598              		.loc 1 285 0
 599 0028 7047     		bx	lr
 600              	.L75:
 601 002a 00BF     		.align	2
 602              	.L74:
 603 002c 00000000 		.word	g_CmdMap
 604              		.cfi_endproc
 605              	.LFE338:
 607              		.global	Voltag_f
 608              		.global	Voltag_f_filter
 609              		.global	power_on_time
 610              		.global	count_Id_error
 611              		.global	count_over_temperature
 612              		.global	count_over_current
 613              		.global	Power_Avg_cun
 614              		.global	Power_Avg_tab
 615              		.global	Over_Voltage_Cun
 616              		.global	Low_Voltage_Cun
 617              		.global	Over_Temp_Cun
 618              		.global	g_CurrentOverPool
 619              		.section	.bss.Low_Voltage_Cun,"aw",%nobits
 620              		.align	2
 623              	Low_Voltage_Cun:
 624 0000 00000000 		.space	4
 625              		.section	.bss.Over_Temp_Cun,"aw",%nobits
 626              		.align	2
 629              	Over_Temp_Cun:
 630 0000 00000000 		.space	4
 631              		.section	.bss.Over_Voltage_Cun,"aw",%nobits
 632              		.align	2
 635              	Over_Voltage_Cun:
 636 0000 00000000 		.space	4
 637              		.section	.bss.Power_Avg_cun,"aw",%nobits
 638              		.align	2
 641              	Power_Avg_cun:
 642 0000 00000000 		.space	4
 643              		.section	.bss.Power_Avg_tab,"aw",%nobits
 644              		.align	1
 647              	Power_Avg_tab:
 648 0000 00000000 		.space	16
 648      00000000 
 648      00000000 
 648      00000000 
 649              		.section	.bss.Voltag_f,"aw",%nobits
 650              		.align	2
 653              	Voltag_f:
 654 0000 00000000 		.space	4
 655              		.section	.bss.Voltag_f_filter,"aw",%nobits
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 18


 656              		.align	2
 659              	Voltag_f_filter:
 660 0000 00000000 		.space	4
 661              		.section	.bss.count_Id_error,"aw",%nobits
 662              		.align	1
 665              	count_Id_error:
 666 0000 0000     		.space	2
 667              		.section	.bss.count_over_AlerrTemperature.11850,"aw",%nobits
 668              		.align	2
 669              		.set	.LANCHOR5,. + 0
 672              	count_over_AlerrTemperature.11850:
 673 0000 00000000 		.space	4
 674              		.section	.bss.count_over_current,"aw",%nobits
 675              		.align	1
 676              		.set	.LANCHOR6,. + 0
 679              	count_over_current:
 680 0000 0000     		.space	2
 681              		.section	.bss.count_over_temperature,"aw",%nobits
 682              		.align	1
 683              		.set	.LANCHOR4,. + 0
 686              	count_over_temperature:
 687 0000 0000     		.space	2
 688              		.section	.bss.g_CurrentOverPool,"aw",%nobits
 689              		.align	2
 692              	g_CurrentOverPool:
 693 0000 00000000 		.space	4
 694              		.section	.bss.over_current_staff_event_cnt,"aw",%nobits
 695              		.align	2
 696              		.set	.LANCHOR1,. + 0
 699              	over_current_staff_event_cnt:
 700 0000 00000000 		.space	4
 701              		.section	.bss.power_on_time,"aw",%nobits
 702              		.align	2
 703              		.set	.LANCHOR2,. + 0
 706              	power_on_time:
 707 0000 00000000 		.space	4
 708              		.section	.bss.s_count.11848,"aw",%nobits
 709              		.align	2
 710              		.set	.LANCHOR0,. + 0
 713              	s_count.11848:
 714 0000 00000000 		.space	4
 715              		.section	.bss.s_count.11861,"aw",%nobits
 716              		.align	2
 717              		.set	.LANCHOR7,. + 0
 720              	s_count.11861:
 721 0000 00000000 		.space	4
 722              		.section	.bss.s_count.11872,"aw",%nobits
 723              		.align	2
 724              		.set	.LANCHOR8,. + 0
 727              	s_count.11872:
 728 0000 00000000 		.space	4
 729              		.section	.bss.temperture_hystersis.11849,"aw",%nobits
 730              		.align	2
 731              		.set	.LANCHOR3,. + 0
 734              	temperture_hystersis.11849:
 735 0000 00000000 		.space	4
 736              		.text
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 19


 737              	.Letext0:
 738              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 739              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 740              		.file 4 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 741              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 742              		.file 6 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/system_stm32g4xx.h"
 743              		.file 7 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 744              		.file 8 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g4xx.h"
 745              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 746              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 747              		.file 11 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_adc.h"
 748              		.file 12 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_flash.h"
 749              		.file 13 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 750              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 751              		.file 15 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
 752              		.file 16 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 753              		.file 17 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 754              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-ea
 755              		.file 19 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 756              		.file 20 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 757              		.file 21 "Inc/uart.h"
 758              		.file 22 "Inc/pwm.h"
 759              		.file 23 "Inc/spi_MEncoder.h"
 760              		.file 24 "Inc/adc.h"
 761              		.file 25 "Inc/stm32_math_sin.h"
 762              		.file 26 "Inc/pid.h"
 763              		.file 27 "Inc/profile_joint.h"
 764              		.file 28 "Inc/icmu.h"
 765              		.file 29 "Inc/performance_test.h"
 766              		.file 30 "Inc/global.h"
ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 20


DEFINED SYMBOLS
                            *ABS*:00000000 security.c
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:18     .text.generate_errorCode:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:25     .text.generate_errorCode:00000000 generate_errorCode
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:301    .text.generate_errorCode:000001b4 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:316    .text.ClearError:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:323    .text.ClearError:00000000 ClearError
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:343    .text.ClearError:00000010 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:349    .text.UpdateErrorStateLED:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:356    .text.UpdateErrorStateLED:00000000 UpdateErrorStateLED
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:425    .text.UpdateErrorStateLED:0000004c $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:431    .text.Stroke_protection:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:438    .text.Stroke_protection:00000000 Stroke_protection
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:489    .text.Stroke_protection:00000054 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:494    .text.motor_fault_check:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:501    .text.motor_fault_check:00000000 motor_fault_check
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:555    .text.motor_fault_check:00000050 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:563    .text.user_param_protected:00000000 $t
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:570    .text.user_param_protected:00000000 user_param_protected
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:603    .text.user_param_protected:0000002c $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:653    .bss.Voltag_f:00000000 Voltag_f
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:659    .bss.Voltag_f_filter:00000000 Voltag_f_filter
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:706    .bss.power_on_time:00000000 power_on_time
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:665    .bss.count_Id_error:00000000 count_Id_error
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:686    .bss.count_over_temperature:00000000 count_over_temperature
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:679    .bss.count_over_current:00000000 count_over_current
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:641    .bss.Power_Avg_cun:00000000 Power_Avg_cun
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:647    .bss.Power_Avg_tab:00000000 Power_Avg_tab
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:635    .bss.Over_Voltage_Cun:00000000 Over_Voltage_Cun
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:623    .bss.Low_Voltage_Cun:00000000 Low_Voltage_Cun
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:629    .bss.Over_Temp_Cun:00000000 Over_Temp_Cun
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:692    .bss.g_CurrentOverPool:00000000 g_CurrentOverPool
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:620    .bss.Low_Voltage_Cun:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:626    .bss.Over_Temp_Cun:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:632    .bss.Over_Voltage_Cun:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:638    .bss.Power_Avg_cun:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:644    .bss.Power_Avg_tab:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:650    .bss.Voltag_f:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:656    .bss.Voltag_f_filter:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:662    .bss.count_Id_error:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:668    .bss.count_over_AlerrTemperature.11850:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:672    .bss.count_over_AlerrTemperature.11850:00000000 count_over_AlerrTemperature.11850
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:675    .bss.count_over_current:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:682    .bss.count_over_temperature:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:689    .bss.g_CurrentOverPool:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:695    .bss.over_current_staff_event_cnt:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:699    .bss.over_current_staff_event_cnt:00000000 over_current_staff_event_cnt
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:702    .bss.power_on_time:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:709    .bss.s_count.11848:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:713    .bss.s_count.11848:00000000 s_count.11848
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:716    .bss.s_count.11861:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:720    .bss.s_count.11861:00000000 s_count.11861
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:723    .bss.s_count.11872:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:727    .bss.s_count.11872:00000000 s_count.11872
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:730    .bss.temperture_hystersis.11849:00000000 $d
C:\Users\82057\AppData\Local\Temp\ccREfZCc.s:734    .bss.temperture_hystersis.11849:00000000 temperture_hystersis.11849

ARM GAS  C:\Users\82057\AppData\Local\Temp\ccREfZCc.s 			page 21


UNDEFINED SYMBOLS
icmu_eerpom_erro_detect
g_CmdMap
Flag_error_read_flash
Flag_error_current_clib
Flag_error_MU_SPI
clear_eeprom_erro
g_Vq
g_pCur_ref_base_mA
